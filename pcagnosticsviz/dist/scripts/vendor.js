/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t,n){t=t||oe;var r,i=t.createElement("script");if(i.text=e,n)for(r in _e)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function r(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?de[he.call(e)]||"object":typeof e}function i(e){var t=!!e&&"length"in e&&e.length,n=r(e);return!ye(e)&&!be(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function a(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,n){return ye(t)?xe.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?xe.grep(e,function(e){return e===t!==n}):"string"!=typeof t?xe.grep(e,function(e){return fe.call(t,e)>-1!==n}):xe.filter(t,e,n)}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){var t={};return xe.each(e.match(Le)||[],function(e,n){t[n]=!0}),t}function u(e){return e}function c(e){throw e}function f(e,t,n,r){var i;try{e&&ye(i=e.promise)?i.call(e).done(t).fail(n):e&&ye(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function d(){oe.removeEventListener("DOMContentLoaded",d),e.removeEventListener("load",d),xe.ready()}function h(e,t){return t.toUpperCase()}function p(e){return e.replace(Fe,"ms-").replace(Ue,h)}function g(){this.expando=xe.expando+g.uid++}function m(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Be.test(e)?JSON.parse(e):e)}function v(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(qe,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n=m(n)}catch(i){}ze.set(e,t,n)}else n=void 0;return n}function y(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return xe.css(e,t,"")},l=s(),u=n&&n[3]||(xe.cssNumber[t]?"":"px"),c=(xe.cssNumber[t]||"px"!==u&&+l)&&Xe.exec(xe.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;o--;)xe.style(e,t,c+u),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),c/=a;c=2*c,xe.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}function b(e){var t,n=e.ownerDocument,r=e.nodeName,i=Ke[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=xe.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),Ke[r]=i,i)}function _(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)r=e[a],r.style&&(n=r.style.display,t?("none"===n&&(i[a]=He.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&Ge(r)&&(i[a]=b(r))):"none"!==n&&(i[a]="none",He.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}function E(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&a(e,t)?xe.merge([e],n):n}function x(e,t){for(var n=0,r=e.length;n<r;n++)He.set(e[n],"globalEval",!t||He.get(t[n],"globalEval"))}function S(e,t,n,i,a){for(var o,s,l,u,c,f,d=t.createDocumentFragment(),h=[],p=0,g=e.length;p<g;p++)if(o=e[p],o||0===o)if("object"===r(o))xe.merge(h,o.nodeType?[o]:o);else if(tt.test(o)){for(s=s||d.appendChild(t.createElement("div")),l=(Qe.exec(o)||["",""])[1].toLowerCase(),u=et[l]||et._default,s.innerHTML=u[1]+xe.htmlPrefilter(o)+u[2],f=u[0];f--;)s=s.lastChild;xe.merge(h,s.childNodes),s=d.firstChild,s.textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",p=0;o=h[p++];)if(i&&xe.inArray(o,i)>-1)a&&a.push(o);else if(c=xe.contains(o.ownerDocument,o),s=E(d.appendChild(o),"script"),c&&x(s),n)for(f=0;o=s[f++];)Je.test(o.type||"")&&n.push(o);return d}function T(){return!0}function w(){return!1}function A(){try{return oe.activeElement}catch(e){}}function C(e,t,n,r,i,a){var o,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)C(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=w;else if(!i)return e;return 1===a&&(o=i,i=function(e){return xe().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=xe.guid++)),e.each(function(){xe.event.add(this,t,i,r,n)})}function k(e,t){return a(e,"table")&&a(11!==t.nodeType?t:t.firstChild,"tr")?xe(e).children("tbody")[0]||e:e}function O(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function I(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function M(e,t){var n,r,i,a,o,s,l,u;if(1===t.nodeType){if(He.hasData(e)&&(a=He.access(e),o=He.set(t,a),u=a.events)){delete o.handle,o.events={};for(i in u)for(n=0,r=u[i].length;n<r;n++)xe.event.add(t,i,u[i][n])}ze.hasData(e)&&(s=ze.access(e),l=xe.extend({},s),ze.set(t,l))}}function N(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ze.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function D(e,t,r,i){t=ue.apply([],t);var a,o,s,l,u,c,f=0,d=e.length,h=d-1,p=t[0],g=ye(p);if(g||d>1&&"string"==typeof p&&!ve.checkClone&&lt.test(p))return e.each(function(n){var a=e.eq(n);g&&(t[0]=p.call(this,n,a.html())),D(a,t,r,i)});if(d&&(a=S(t,e[0].ownerDocument,!1,e,i),o=a.firstChild,1===a.childNodes.length&&(a=o),o||i)){for(s=xe.map(E(a,"script"),O),l=s.length;f<d;f++)u=a,f!==h&&(u=xe.clone(u,!0,!0),l&&xe.merge(s,E(u,"script"))),r.call(e[f],u,f);if(l)for(c=s[s.length-1].ownerDocument,xe.map(s,I),f=0;f<l;f++)u=s[f],Je.test(u.type||"")&&!He.access(u,"globalEval")&&xe.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?xe._evalUrl&&xe._evalUrl(u.src):n(u.textContent.replace(ut,""),c,u))}return e}function L(e,t,n){for(var r,i=t?xe.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||xe.cleanData(E(r)),r.parentNode&&(n&&xe.contains(r.ownerDocument,r)&&x(E(r,"script")),r.parentNode.removeChild(r));return e}function $(e,t,n){var r,i,a,o,s=e.style;return n=n||ft(e),n&&(o=n.getPropertyValue(t)||n[t],""!==o||xe.contains(e.ownerDocument,e)||(o=xe.style(e,t)),!ve.pixelBoxStyles()&&ct.test(o)&&dt.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function R(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e){if(e in yt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=vt.length;n--;)if(e=vt[n]+t,e in yt)return e}function F(e){var t=xe.cssProps[e];return t||(t=xe.cssProps[e]=P(e)||e),t}function U(e,t,n){var r=Xe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function j(e,t,n,r,i,a){var o="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=xe.css(e,n+We[o],!0,i)),r?("content"===n&&(l-=xe.css(e,"padding"+We[o],!0,i)),"margin"!==n&&(l-=xe.css(e,"border"+We[o]+"Width",!0,i))):(l+=xe.css(e,"padding"+We[o],!0,i),"padding"!==n?l+=xe.css(e,"border"+We[o]+"Width",!0,i):s+=xe.css(e,"border"+We[o]+"Width",!0,i));return!r&&a>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))),l}function H(e,t,n){var r=ft(e),i=$(e,t,r),a="border-box"===xe.css(e,"boxSizing",!1,r),o=a;if(ct.test(i)){if(!n)return i;i="auto"}return o=o&&(ve.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===xe.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),i=parseFloat(i)||0,i+j(e,t,n||(a?"border":"content"),o,r,i)+"px"}function z(e,t,n,r,i){return new z.prototype.init(e,t,n,r,i)}function B(){_t&&(oe.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(B):e.setTimeout(B,xe.fx.interval),xe.fx.tick())}function q(){return e.setTimeout(function(){bt=void 0}),bt=Date.now()}function Y(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=We[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function X(e,t,n){for(var r,i=(V.tweeners[t]||[]).concat(V.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function W(e,t,n){var r,i,a,o,s,l,u,c,f="width"in t||"height"in t,d=this,h={},p=e.style,g=e.nodeType&&Ge(e),m=He.get(e,"fxshow");n.queue||(o=xe._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,xe.queue(e,"fx").length||o.empty.fire()})}));for(r in t)if(i=t[r],Et.test(i)){if(delete t[r],a=a||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}h[r]=m&&m[r]||xe.style(e,r)}if(l=!xe.isEmptyObject(t),l||!xe.isEmptyObject(h)){f&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=m&&m.display,null==u&&(u=He.get(e,"display")),c=xe.css(e,"display"),"none"===c&&(u?c=u:(_([e],!0),u=e.style.display||u,c=xe.css(e,"display"),_([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===xe.css(e,"float")&&(l||(d.done(function(){p.display=u}),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1;for(r in h)l||(m?"hidden"in m&&(g=m.hidden):m=He.access(e,"fxshow",{display:u}),a&&(m.hidden=!g),g&&_([e],!0),d.done(function(){g||_([e]),He.remove(e,"fxshow");for(r in h)xe.style(e,r,h[r])})),l=X(g?m[r]:0,r,d),r in m||(m[r]=l.start,g&&(l.end=l.start,l.start=0))}}function G(e,t){var n,r,i,a,o;for(n in e)if(r=p(n),i=t[r],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),o=xe.cssHooks[r],o&&"expand"in o){a=o.expand(a),delete e[r];for(n in a)n in e||(e[n]=a[n],t[n]=i)}else t[r]=i}function V(e,t,n){var r,i,a=0,o=V.prefilters.length,s=xe.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=bt||q(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,a=1-r,o=0,l=u.tweens.length;o<l;o++)u.tweens[o].run(a);return s.notifyWith(e,[u,a,n]),a<1&&l?n:(l||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:xe.extend({},t),opts:xe.extend(!0,{specialEasing:{},easing:xe.easing._default},n),originalProperties:t,originalOptions:n,startTime:bt||q(),duration:n.duration,tweens:[],createTween:function(t,n){var r=xe.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(G(c,u.opts.specialEasing);a<o;a++)if(r=V.prefilters[a].call(u,e,c,u.opts))return ye(r.stop)&&(xe._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return xe.map(c,X,u),ye(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),xe.fx.timer(xe.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}function K(e){var t=e.match(Le)||[];return t.join(" ")}function Z(e){return e.getAttribute&&e.getAttribute("class")||""}function Q(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Le)||[]:[]}function J(e,t,n,i){var a;if(Array.isArray(t))xe.each(t,function(t,r){n||Dt.test(e)?i(e,r):J(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==r(t))i(e,t);else for(a in t)J(e+"["+a+"]",t[a],n,i)}function ee(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(Le)||[];if(ye(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function te(e,t,n,r){function i(s){var l;return a[s]=!0,xe.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||o||a[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var a={},o=e===Yt;return i(t.dataTypes[0])||!a["*"]&&i("*")}function ne(e,t){var n,r,i=xe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&xe.extend(!0,e,r),e}function re(e,t,n){for(var r,i,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)a=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}function ie(e,t,n,r){var i,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(o=u[l+" "+a]||u["* "+a],!o)for(i in u)if(s=i.split(" "),s[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){o===!0?o=u[i]:u[i]!==!0&&(a=s[0],c.unshift(s[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(f){return{state:"parsererror",error:o?f:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}var ae=[],oe=e.document,se=Object.getPrototypeOf,le=ae.slice,ue=ae.concat,ce=ae.push,fe=ae.indexOf,de={},he=de.toString,pe=de.hasOwnProperty,ge=pe.toString,me=ge.call(Object),ve={},ye=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},be=function(e){return null!=e&&e===e.window},_e={type:!0,src:!0,noModule:!0},Ee="3.3.1",xe=function(e,t){return new xe.fn.init(e,t)},Se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;xe.fn=xe.prototype={jquery:Ee,constructor:xe,length:0,toArray:function(){return le.call(this)},get:function(e){return null==e?le.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=xe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return xe.each(this,e)},map:function(e){return this.pushStack(xe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(le.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ce,sort:ae.sort,splice:ae.splice},xe.extend=xe.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||ye(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],r=e[t],o!==r&&(u&&r&&(xe.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,a=n&&Array.isArray(n)?n:[]):a=n&&xe.isPlainObject(n)?n:{},o[t]=xe.extend(u,a,r)):void 0!==r&&(o[t]=r));return o},xe.extend({expando:"jQuery"+(Ee+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==he.call(e))&&(!(t=se(e))||(n=pe.call(t,"constructor")&&t.constructor,"function"==typeof n&&ge.call(n)===me))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){n(e)},each:function(e,t){var n,r=0;if(i(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(Se,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?xe.merge(n,"string"==typeof e?[e]:e):ce.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:fe.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],a=0,o=e.length,s=!n;a<o;a++)r=!t(e[a],a),r!==s&&i.push(e[a]);return i},map:function(e,t,n){var r,a,o=0,s=[];if(i(e))for(r=e.length;o<r;o++)a=t(e[o],o,n),null!=a&&s.push(a);else for(o in e)a=t(e[o],o,n),null!=a&&s.push(a);return ue.apply([],s)},guid:1,support:ve}),"function"==typeof Symbol&&(xe.fn[Symbol.iterator]=ae[Symbol.iterator]),xe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){de["[object "+t+"]"]=t.toLowerCase()});var Te=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){function t(e,t,n,r){var i,a,o,s,l,u,c,d=t&&t.ownerDocument,p=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return n;if(!r&&((t?t.ownerDocument||t:H)!==D&&N(t),t=t||D,$)){if(11!==p&&(l=ve.exec(e)))if(i=l[1]){if(9===p){if(!(o=t.getElementById(i)))return n;if(o.id===i)return n.push(o),n}else if(d&&(o=d.getElementById(i))&&U(t,o)&&o.id===i)return n.push(o),n}else{if(l[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(i)),n}if(x.qsa&&!X[e+" "]&&(!R||!R.test(e))){if(1!==p)d=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(Ee,xe):t.setAttribute("id",s=j),u=A(e),a=u.length;a--;)u[a]="#"+s+" "+h(u[a]);c=u.join(","),d=ye.test(e)&&f(t.parentNode)||t}if(c)try{return Q.apply(n,d.querySelectorAll(c)),n}catch(g){}finally{s===j&&t.removeAttribute("id")}}}return k(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[j]=!0,e}function i(e){var t=D.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),r=n.length;r--;)S.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Te(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}function f(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,s=B++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,l){var u,c,f,d=[z,s];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(f=t[j]||(t[j]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[a])&&u[0]===z&&u[1]===s)return d[2]=u[2];if(c[a]=d,d[2]=e(t,n,l))return!0}return!1}}function g(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,a=n.length;i<a;i++)t(e,n[i],r);return r}function v(e,t,n,r,i){for(var a,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),u&&t.push(s)));return o}function y(e,t,n,i,a,o){return i&&!i[j]&&(i=y(i)),a&&!a[j]&&(a=y(a,o)),r(function(r,o,s,l){var u,c,f,d=[],h=[],p=o.length,g=r||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?g:v(g,d,e,s,l),b=n?a||(r?e:p||i)?[]:o:y;if(n&&n(y,b,s,l),i)for(u=v(b,h),i(u,[],s,l),c=u.length;c--;)(f=u[c])&&(b[h[c]]=!(y[h[c]]=f));if(r){if(a||e){if(a){for(u=[],c=b.length;c--;)(f=b[c])&&u.push(y[c]=f);a(null,b=[],u,l)}for(c=b.length;c--;)(f=b[c])&&(u=a?ee(r,f):d[c])>-1&&(r[u]=!(o[u]=f))}}else b=v(b===o?b.splice(p,b.length):b),a?a(null,o,b,l):Q.apply(o,b)})}function b(e){for(var t,n,r,i=e.length,a=S.relative[e[0].type],o=a||S.relative[" "],s=a?1:0,l=p(function(e){return e===t},o,!0),u=p(function(e){return ee(t,e)>-1},o,!0),c=[function(e,n,r){var i=!a&&(r||n!==O)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,i}];s<i;s++)if(n=S.relative[e[s].type])c=[p(g(c),n)];else{if(n=S.filter[e[s].type].apply(null,e[s].matches),n[j]){for(r=++s;r<i&&!S.relative[e[r].type];r++);return y(s>1&&g(c),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<r&&b(e.slice(s,r)),r<i&&b(e=e.slice(r)),r<i&&h(e))}c.push(n)}return g(c)}function _(e,n){var i=n.length>0,a=e.length>0,o=function(r,o,s,l,u){var c,f,d,h=0,p="0",g=r&&[],m=[],y=O,b=r||a&&S.find.TAG("*",u),_=z+=null==y?1:Math.random()||.1,E=b.length;for(u&&(O=o===D||o||u);p!==E&&null!=(c=b[p]);p++){if(a&&c){for(f=0,o||c.ownerDocument===D||(N(c),s=!$);d=e[f++];)if(d(c,o||D,s)){l.push(c);break}u&&(z=_)}i&&((c=!d&&c)&&h--,r&&g.push(c))}if(h+=p,i&&p!==h){for(f=0;d=n[f++];)d(g,m,o,s);if(r){if(h>0)for(;p--;)g[p]||m[p]||(m[p]=K.call(l));m=v(m)}Q.apply(l,m),u&&!r&&m.length>0&&h+n.length>1&&t.uniqueSort(l)}return u&&(z=_,O=y),g};return i?r(o):o}var E,x,S,T,w,A,C,k,O,I,M,N,D,L,$,R,P,F,U,j="sizzle"+1*new Date,H=e.document,z=0,B=0,q=n(),Y=n(),X=n(),W=function(e,t){return e===t&&(M=!0),0},G={}.hasOwnProperty,V=[],K=V.pop,Z=V.push,Q=V.push,J=V.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ae),de=new RegExp("^"+re+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ee=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Se=function(){N()},Te=p(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(V=J.call(H.childNodes),H.childNodes),V[H.childNodes.length].nodeType}catch(we){Q={apply:V.length?function(e,t){Z.apply(e,J.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}x=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},N=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:H;return r!==D&&9===r.nodeType&&r.documentElement?(D=r,L=D.documentElement,$=!w(D),H!==D&&(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),x.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=i(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=me.test(D.getElementsByClassName),x.getById=i(function(e){return L.appendChild(e).id=j,!D.getElementsByName||!D.getElementsByName(j).length}),x.getById?(S.filter.ID=function(e){var t=e.replace(be,_e);return function(e){return e.getAttribute("id")===t}},S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&$){var n=t.getElementById(e);return n?[n]:[]}}):(S.filter.ID=function(e){var t=e.replace(be,_e);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&$){var n,r,i,a=t.getElementById(e);if(a){if(n=a.getAttributeNode("id"),n&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if(n=a.getAttributeNode("id"),n&&n.value===e)return[a]}return[]}}),S.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},S.find.CLASS=x.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&$)return t.getElementsByClassName(e)},P=[],R=[],(x.qsa=me.test(D.querySelectorAll))&&(i(function(e){L.appendChild(e).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+j+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+j+"+*").length||R.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&R.push(":enabled",":disabled"),L.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(x.matchesSelector=me.test(F=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&i(function(e){x.disconnectedMatch=F.call(e,"*"),F.call(e,"[s!='']:x"),P.push("!=",ae)}),R=R.length&&new RegExp(R.join("|")),P=P.length&&new RegExp(P.join("|")),t=me.test(L.compareDocumentPosition),U=t||me.test(L.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return M=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===D||e.ownerDocument===H&&U(H,e)?-1:t===D||t.ownerDocument===H&&U(H,t)?1:I?ee(I,e)-ee(I,t):0:4&n?-1:1)}:function(e,t){if(e===t)return M=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!i||!a)return e===D?-1:t===D?1:i?-1:a?1:I?ee(I,e)-ee(I,t):0;if(i===a)return o(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?o(s[r],l[r]):s[r]===H?-1:l[r]===H?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&N(e),n=n.replace(ce,"='$1']"),x.matchesSelector&&$&&!X[n+" "]&&(!P||!P.test(n))&&(!R||!R.test(n)))try{var r=F.call(e,n);if(r||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&N(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&N(e);var n=S.attrHandle[t.toLowerCase()],r=n&&G.call(S.attrHandle,t.toLowerCase())?n(e,t,!$):void 0;return void 0!==r?r:x.attributes||!$?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(Ee,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(M=!x.detectDuplicates,I=!x.sortStable&&e.slice(0),e.sort(W),M){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return I=null,e},T=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=T(t);return n},S=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(be,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=A(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var a=t.attr(i,e);return null==a?"!="===n:!n||(a+="","="===n?a===r:"!="===n?a!==r:"^="===n?r&&0===a.indexOf(r):"*="===n?r&&a.indexOf(r)>-1:"$="===n?r&&a.slice(-r.length)===r:"~="===n?(" "+a.replace(oe," ")+" ").indexOf(r)>-1:"|="===n&&(a===r||a.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,d,h,p,g=a!==o?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(m){if(a){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&y){for(d=m,f=d[j]||(d[j]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),u=c[e]||[],h=u[0]===z&&u[1],b=h&&u[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(b=h=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[z,h,b];break}}else if(y&&(d=t,f=d[j]||(d[j]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),u=c[e]||[],h=u[0]===z&&u[1],b=h),b===!1)for(;(d=++h&&d&&d[g]||(b=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(f=d[j]||(d[j]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),c[e]=[z,b]),d!==t)););return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var i,a=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[j]?a(n):a.length>1?(i=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=a(e,n),o=i.length;o--;)r=ee(e,i[o]),e[r]=!(t[r]=i[o])}):function(e){return a(e,0,i)}):a}},pseudos:{not:r(function(e){var t=[],n=[],i=C(e.replace(se,"$1"));return i[j]?r(function(e,t,n,r){for(var a,o=i(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(be,_e),function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,_e).toLowerCase(),function(t){var n;do if(n=$?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[E]=s(E);for(E in{submit:!0,reset:!0})S.pseudos[E]=l(E);return d.prototype=S.filters=S.pseudos,S.setFilters=new d,A=t.tokenize=function(e,n){var r,i,a,o,s,l,u,c=Y[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=S.preFilter;s;){r&&!(i=le.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(a=[])),r=!1,(i=ue.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(se," ")}),s=s.slice(r.length));for(o in S.filter)!(i=he[o].exec(s))||u[o]&&!(i=u[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):Y(e,l).slice(0)},C=t.compile=function(e,t){var n,r=[],i=[],a=X[e+" "];if(!a){for(t||(t=A(e)),n=t.length;n--;)a=b(t[n]),a[j]?r.push(a):i.push(a);a=X(e,_(i,r)),a.selector=e}return a},k=t.select=function(e,t,n,r){var i,a,o,s,l,u="function"==typeof e&&e,c=!r&&A(e=u.selector||e);if(n=n||[],1===c.length){if(a=c[0]=c[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&9===t.nodeType&&$&&S.relative[a[1].type]){if(t=(S.find.ID(o.matches[0].replace(be,_e),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(i=he.needsContext.test(e)?0:a.length;i--&&(o=a[i],!S.relative[s=o.type]);)if((l=S.find[s])&&(r=l(o.matches[0].replace(be,_e),ye.test(a[0].type)&&f(t.parentNode)||t))){if(a.splice(i,1),e=r.length&&h(a),!e)return Q.apply(n,r),n;break}}return(u||C(e,c))(r,t,!$,n,!t||ye.test(e)&&f(t.parentNode)||t),n},x.sortStable=j.split("").sort(W).join("")===j,x.detectDuplicates=!!M,N(),x.sortDetached=i(function(e){return 1&e.compareDocumentPosition(D.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||a(te,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);xe.find=Te,xe.expr=Te.selectors,xe.expr[":"]=xe.expr.pseudos,xe.uniqueSort=xe.unique=Te.uniqueSort,xe.text=Te.getText,xe.isXMLDoc=Te.isXML,xe.contains=Te.contains,xe.escapeSelector=Te.escape;var we=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&xe(e).is(n))break;r.push(e)}return r},Ae=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ce=xe.expr.match.needsContext,ke=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;xe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?xe.find.matchesSelector(r,e)?[r]:[]:xe.find.matches(e,xe.grep(t,function(e){return 1===e.nodeType}))},xe.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(xe(e).filter(function(){for(t=0;t<r;t++)if(xe.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)xe.find(e,i[t],n);return r>1?xe.uniqueSort(n):n},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&Ce.test(e)?xe(e):e||[],!1).length}});var Oe,Ie=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Me=xe.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||Oe,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Ie.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof xe?t[0]:t,xe.merge(this,xe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:oe,!0)),ke.test(r[1])&&xe.isPlainObject(t))for(r in t)ye(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=oe.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ye(e)?void 0!==n.ready?n.ready(e):e(xe):xe.makeArray(e,this)};Me.prototype=xe.fn,Oe=xe(oe);var Ne=/^(?:parents|prev(?:Until|All))/,De={children:!0,contents:!0,next:!0,prev:!0};xe.fn.extend({has:function(e){var t=xe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(xe.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!=typeof e&&xe(e);if(!Ce.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&xe.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?xe.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?fe.call(xe(e),this[0]):fe.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(xe.uniqueSort(xe.merge(this.get(),xe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),xe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return we(e,"parentNode")},parentsUntil:function(e,t,n){return we(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return we(e,"nextSibling")},prevAll:function(e){return we(e,"previousSibling")},nextUntil:function(e,t,n){return we(e,"nextSibling",n)},prevUntil:function(e,t,n){return we(e,"previousSibling",n)},siblings:function(e){return Ae((e.parentNode||{}).firstChild,e)},children:function(e){return Ae(e.firstChild)},contents:function(e){return a(e,"iframe")?e.contentDocument:(a(e,"template")&&(e=e.content||e),xe.merge([],e.childNodes))}},function(e,t){xe.fn[e]=function(n,r){var i=xe.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=xe.filter(r,i)),this.length>1&&(De[e]||xe.uniqueSort(i),Ne.test(e)&&i.reverse()),this.pushStack(i)}});var Le=/[^\x20\t\r\n\f]+/g;xe.Callbacks=function(e){e="string"==typeof e?l(e):xe.extend({},e);var t,n,i,a,o=[],s=[],u=-1,c=function(){for(a=a||e.once,i=t=!0;s.length;u=-1)for(n=s.shift();++u<o.length;)o[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=o.length,n=!1);e.memory||(n=!1),t=!1,a&&(o=n?[]:"")},f={add:function(){return o&&(n&&!t&&(u=o.length-1,s.push(n)),function i(t){xe.each(t,function(t,n){ye(n)?e.unique&&f.has(n)||o.push(n):n&&n.length&&"string"!==r(n)&&i(n)})}(arguments),n&&!t&&c()),this},remove:function(){return xe.each(arguments,function(e,t){for(var n;(n=xe.inArray(t,o,n))>-1;)o.splice(n,1),n<=u&&u--}),this},has:function(e){return e?xe.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return a=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return a=s=[],n||t||(o=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},xe.extend({Deferred:function(t){var n=[["notify","progress",xe.Callbacks("memory"),xe.Callbacks("memory"),2],["resolve","done",xe.Callbacks("once memory"),xe.Callbacks("once memory"),0,"resolved"],["reject","fail",xe.Callbacks("once memory"),xe.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return xe.Deferred(function(t){xe.each(n,function(n,r){var i=ye(e[r[4]])&&e[r[4]];a[r[1]](function(){var e=i&&i.apply(this,arguments);e&&ye(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){function a(t,n,r,i){return function(){var s=this,l=arguments,f=function(){var e,f;if(!(t<o)){if(e=r.apply(s,l),e===n.promise())throw new TypeError("Thenable self-resolution");f=e&&("object"==typeof e||"function"==typeof e)&&e.then,ye(f)?i?f.call(e,a(o,n,u,i),a(o,n,c,i)):(o++,f.call(e,a(o,n,u,i),a(o,n,c,i),a(o,n,u,n.notifyWith))):(r!==u&&(s=void 0,l=[e]),(i||n.resolveWith)(s,l))}},d=i?f:function(){try{f()}catch(e){xe.Deferred.exceptionHook&&xe.Deferred.exceptionHook(e,d.stackTrace),t+1>=o&&(r!==c&&(s=void 0,l=[e]),n.rejectWith(s,l))}};t?d():(xe.Deferred.getStackHook&&(d.stackTrace=xe.Deferred.getStackHook()),e.setTimeout(d))}}var o=0;return xe.Deferred(function(e){n[0][3].add(a(0,e,ye(i)?i:u,e.notifyWith)),n[1][3].add(a(0,e,ye(t)?t:u)),n[2][3].add(a(0,e,ye(r)?r:c))}).promise()},promise:function(e){return null!=e?xe.extend(e,i):i}},a={};return xe.each(n,function(e,t){var o=t[2],s=t[5];i[t[1]]=o.add,s&&o.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=o.fireWith}),i.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),i=le.call(arguments),a=xe.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?le.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(f(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||ye(i[n]&&i[n].then)))return a.then();for(;n--;)f(i[n],o(n),a.reject);return a.promise()}});var $e=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;xe.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&$e.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},xe.readyException=function(t){e.setTimeout(function(){throw t})};var Re=xe.Deferred();xe.fn.ready=function(e){return Re.then(e)["catch"](function(e){xe.readyException(e)}),this},xe.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--xe.readyWait:xe.isReady)||(xe.isReady=!0,e!==!0&&--xe.readyWait>0||Re.resolveWith(oe,[xe]))}}),xe.ready.then=Re.then,"complete"===oe.readyState||"loading"!==oe.readyState&&!oe.documentElement.doScroll?e.setTimeout(xe.ready):(oe.addEventListener("DOMContentLoaded",d),e.addEventListener("load",d));var Pe=function(e,t,n,i,a,o,s){var l=0,u=e.length,c=null==n;if("object"===r(n)){a=!0;for(l in n)Pe(e,t,l,n[l],!0,o,s)}else if(void 0!==i&&(a=!0,ye(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(xe(e),n)})),t))for(;l<u;l++)t(e[l],n,s?i:i.call(e[l],l,t(e[l],n)));return a?e:c?t.call(e):u?t(e[0],n):o},Fe=/^-ms-/,Ue=/-([a-z])/g,je=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};g.uid=1,g.prototype={cache:function(e){var t=e[this.expando];return t||(t={},je(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[p(t)]=n;else for(r in t)i[p(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][p(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(p):(t=p(t),t=t in r?[t]:t.match(Le)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||xe.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!xe.isEmptyObject(t)}};var He=new g,ze=new g,Be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qe=/[A-Z]/g;xe.extend({hasData:function(e){return ze.hasData(e)||He.hasData(e)},data:function(e,t,n){return ze.access(e,t,n)},removeData:function(e,t){ze.remove(e,t)},_data:function(e,t,n){return He.access(e,t,n)},_removeData:function(e,t){He.remove(e,t)}}),xe.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=ze.get(a),1===a.nodeType&&!He.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=p(r.slice(5)),v(a,r,i[r])));He.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ze.set(this,e)}):Pe(this,function(t){var n;if(a&&void 0===t){if(n=ze.get(a,e),void 0!==n)return n;if(n=v(a,e),void 0!==n)return n}else this.each(function(){ze.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ze.remove(this,e)})}}),xe.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=He.get(e,t),n&&(!r||Array.isArray(n)?r=He.access(e,t,xe.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=xe.queue(e,t),r=n.length,i=n.shift(),a=xe._queueHooks(e,t),o=function(){xe.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,o,a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return He.get(e,n)||He.access(e,n,{empty:xe.Callbacks("once memory").add(function(){He.remove(e,[t+"queue",n])})})}}),xe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?xe.queue(this[0],e):void 0===t?this:this.each(function(){var n=xe.queue(this,e,t);xe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&xe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){xe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=xe.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=He.get(a[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ye=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Xe=new RegExp("^(?:([+-])=|)("+Ye+")([a-z%]*)$","i"),We=["Top","Right","Bottom","Left"],Ge=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&xe.contains(e.ownerDocument,e)&&"none"===xe.css(e,"display")},Ve=function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];i=n.apply(e,r||[]);for(a in t)e.style[a]=o[a];return i},Ke={};xe.fn.extend({show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ge(this)?xe(this).show():xe(this).hide()})}});var Ze=/^(?:checkbox|radio)$/i,Qe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Je=/^$|^module$|\/(?:java|ecma)script/i,et={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};et.optgroup=et.option,et.tbody=et.tfoot=et.colgroup=et.caption=et.thead,et.th=et.td;var tt=/<|&#?\w+;/;!function(){var e=oe.createDocumentFragment(),t=e.appendChild(oe.createElement("div")),n=oe.createElement("input");
n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ve.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ve.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var nt=oe.documentElement,rt=/^key/,it=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,at=/^([^.]*)(?:\.(.+)|)/;xe.event={global:{},add:function(e,t,n,r,i){var a,o,s,l,u,c,f,d,h,p,g,m=He.get(e);if(m)for(n.handler&&(a=n,n=a.handler,i=a.selector),i&&xe.find.matchesSelector(nt,i),n.guid||(n.guid=xe.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return"undefined"!=typeof xe&&xe.event.triggered!==t.type?xe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Le)||[""],u=t.length;u--;)s=at.exec(t[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h&&(f=xe.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=xe.event.special[h]||{},c=xe.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&xe.expr.match.needsContext.test(i),namespace:p.join(".")},a),(d=l[h])||(d=l[h]=[],d.delegateCount=0,f.setup&&f.setup.call(e,r,p,o)!==!1||e.addEventListener&&e.addEventListener(h,o)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),xe.event.global[h]=!0)},remove:function(e,t,n,r,i){var a,o,s,l,u,c,f,d,h,p,g,m=He.hasData(e)&&He.get(e);if(m&&(l=m.events)){for(t=(t||"").match(Le)||[""],u=t.length;u--;)if(s=at.exec(t[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(f=xe.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,d=l[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=d.length;a--;)c=d[a],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));o&&!d.length&&(f.teardown&&f.teardown.call(e,p,m.handle)!==!1||xe.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)xe.event.remove(e,h+t[u],n,r,!0);xe.isEmptyObject(l)&&He.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,s=xe.event.fix(e),l=new Array(arguments.length),u=(He.get(this,"events")||{})[s.type]||[],c=xe.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,s)!==!1){for(o=xe.event.handlers.call(this,s,u),t=0;(i=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,r=((xe.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,l),void 0!==r&&(s.result=r)===!1&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,a,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||u.disabled!==!0)){for(a=[],o={},n=0;n<l;n++)r=t[n],i=r.selector+" ",void 0===o[i]&&(o[i]=r.needsContext?xe(i,this).index(u)>-1:xe.find(i,this,null,[u]).length),o[i]&&a.push(r);a.length&&s.push({elem:u,handlers:a})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(xe.Event.prototype,e,{enumerable:!0,configurable:!0,get:ye(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[xe.expando]?e:new xe.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==A()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===A()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&a(this,"input"))return this.click(),!1},_default:function(e){return a(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},xe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},xe.Event=function(e,t){return this instanceof xe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?T:w,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&xe.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),void(this[xe.expando]=!0)):new xe.Event(e,t)},xe.Event.prototype={constructor:xe.Event,isDefaultPrevented:w,isPropagationStopped:w,isImmediatePropagationStopped:w,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=T,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=T,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=T,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},xe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&rt.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&it.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},xe.event.addProp),xe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){xe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;return i&&(i===r||xe.contains(r,i))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),xe.fn.extend({on:function(e,t,n,r){return C(this,e,t,n,r)},one:function(e,t,n,r){return C(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,xe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=w),this.each(function(){xe.event.remove(this,e,n,t)})}});var ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,st=/<script|<style|<link/i,lt=/checked\s*(?:[^=]|=\s*.checked.)/i,ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;xe.extend({htmlPrefilter:function(e){return e.replace(ot,"<$1></$2>")},clone:function(e,t,n){var r,i,a,o,s=e.cloneNode(!0),l=xe.contains(e.ownerDocument,e);if(!(ve.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||xe.isXMLDoc(e)))for(o=E(s),a=E(e),r=0,i=a.length;r<i;r++)N(a[r],o[r]);if(t)if(n)for(a=a||E(e),o=o||E(s),r=0,i=a.length;r<i;r++)M(a[r],o[r]);else M(e,s);return o=E(s,"script"),o.length>0&&x(o,!l&&E(e,"script")),s},cleanData:function(e){for(var t,n,r,i=xe.event.special,a=0;void 0!==(n=e[a]);a++)if(je(n)){if(t=n[He.expando]){if(t.events)for(r in t.events)i[r]?xe.event.remove(n,r):xe.removeEvent(n,r,t.handle);n[He.expando]=void 0}n[ze.expando]&&(n[ze.expando]=void 0)}}}),xe.fn.extend({detach:function(e){return L(this,e,!0)},remove:function(e){return L(this,e)},text:function(e){return Pe(this,function(e){return void 0===e?xe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return D(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.appendChild(e)}})},prepend:function(){return D(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(xe.cleanData(E(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return xe.clone(this,e,t)})},html:function(e){return Pe(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!st.test(e)&&!et[(Qe.exec(e)||["",""])[1].toLowerCase()]){e=xe.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(xe.cleanData(E(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return D(this,arguments,function(t){var n=this.parentNode;xe.inArray(this,e)<0&&(xe.cleanData(E(this)),n&&n.replaceChild(t,this))},e)}}),xe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){xe.fn[e]=function(e){for(var n,r=[],i=xe(e),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),xe(i[o])[t](n),ce.apply(r,n.get());return this.pushStack(r)}});var ct=new RegExp("^("+Ye+")(?!px)[a-z%]+$","i"),ft=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},dt=new RegExp(We.join("|"),"i");!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(l).appendChild(u);var t=e.getComputedStyle(u);r="1%"!==t.top,s=12===n(t.marginLeft),u.style.right="60%",o=36===n(t.right),i=36===n(t.width),u.style.position="absolute",a=36===u.offsetWidth||"absolute",nt.removeChild(l),u=null}}function n(e){return Math.round(parseFloat(e))}var r,i,a,o,s,l=oe.createElement("div"),u=oe.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",ve.clearCloneStyle="content-box"===u.style.backgroundClip,xe.extend(ve,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),s},scrollboxSize:function(){return t(),a}}))}();var ht=/^(none|table(?!-c[ea]).+)/,pt=/^--/,gt={position:"absolute",visibility:"hidden",display:"block"},mt={letterSpacing:"0",fontWeight:"400"},vt=["Webkit","Moz","ms"],yt=oe.createElement("div").style;xe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=$(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=p(t),l=pt.test(t),u=e.style;return l||(t=F(s)),o=xe.cssHooks[t]||xe.cssHooks[s],void 0===n?o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:u[t]:(a=typeof n,"string"===a&&(i=Xe.exec(n))&&i[1]&&(n=y(e,t,i),a="number"),null!=n&&n===n&&("number"===a&&(n+=i&&i[3]||(xe.cssNumber[s]?"":"px")),ve.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n)),void 0)}},css:function(e,t,n,r){var i,a,o,s=p(t),l=pt.test(t);return l||(t=F(s)),o=xe.cssHooks[t]||xe.cssHooks[s],o&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=$(e,t,r)),"normal"===i&&t in mt&&(i=mt[t]),""===n||n?(a=parseFloat(i),n===!0||isFinite(a)?a||0:i):i}}),xe.each(["height","width"],function(e,t){xe.cssHooks[t]={get:function(e,n,r){if(n)return!ht.test(xe.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?H(e,t,r):Ve(e,gt,function(){return H(e,t,r)})},set:function(e,n,r){var i,a=ft(e),o="border-box"===xe.css(e,"boxSizing",!1,a),s=r&&j(e,t,r,o,a);return o&&ve.scrollboxSize()===a.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-j(e,t,"border",!1,a)-.5)),s&&(i=Xe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=xe.css(e,t)),U(e,n,s)}}}),xe.cssHooks.marginLeft=R(ve.reliableMarginLeft,function(e,t){if(t)return(parseFloat($(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),xe.each({margin:"",padding:"",border:"Width"},function(e,t){xe.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+We[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(xe.cssHooks[e+t].set=U)}),xe.fn.extend({css:function(e,t){return Pe(this,function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=ft(e),i=t.length;o<i;o++)a[t[o]]=xe.css(e,t[o],!1,r);return a}return void 0!==n?xe.style(e,t,n):xe.css(e,t)},e,t,arguments.length>1)}}),xe.Tween=z,z.prototype={constructor:z,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||xe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(xe.cssNumber[n]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,n=z.propHooks[this.prop];return this.options.duration?this.pos=t=xe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=xe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){xe.fx.step[e.prop]?xe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[xe.cssProps[e.prop]]&&!xe.cssHooks[e.prop]?e.elem[e.prop]=e.now:xe.style(e.elem,e.prop,e.now+e.unit)}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},xe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},xe.fx=z.prototype.init,xe.fx.step={};var bt,_t,Et=/^(?:toggle|show|hide)$/,xt=/queueHooks$/;xe.Animation=xe.extend(V,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return y(n.elem,e,Xe.exec(t),n),n}]},tweener:function(e,t){ye(e)?(t=e,e=["*"]):e=e.match(Le);for(var n,r=0,i=e.length;r<i;r++)n=e[r],V.tweeners[n]=V.tweeners[n]||[],V.tweeners[n].unshift(t)},prefilters:[W],prefilter:function(e,t){t?V.prefilters.unshift(e):V.prefilters.push(e)}}),xe.speed=function(e,t,n){var r=e&&"object"==typeof e?xe.extend({},e):{complete:n||!n&&t||ye(e)&&e,duration:e,easing:n&&t||t&&!ye(t)&&t};return xe.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in xe.fx.speeds?r.duration=xe.fx.speeds[r.duration]:r.duration=xe.fx.speeds._default),null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){ye(r.old)&&r.old.call(this),r.queue&&xe.dequeue(this,r.queue)},r},xe.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ge).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=xe.isEmptyObject(e),a=xe.speed(t,n,r),o=function(){var t=V(this,xe.extend({},e),a);(i||He.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=xe.timers,o=He.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&xt.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||xe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=He.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=xe.timers,o=r?r.length:0;for(n.finish=!0,xe.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),xe.each(["toggle","show","hide"],function(e,t){var n=xe.fn[t];xe.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Y(t,!0),e,r,i)}}),xe.each({slideDown:Y("show"),slideUp:Y("hide"),slideToggle:Y("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){xe.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),xe.timers=[],xe.fx.tick=function(){var e,t=0,n=xe.timers;for(bt=Date.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||xe.fx.stop(),bt=void 0},xe.fx.timer=function(e){xe.timers.push(e),xe.fx.start()},xe.fx.interval=13,xe.fx.start=function(){_t||(_t=!0,B())},xe.fx.stop=function(){_t=null},xe.fx.speeds={slow:600,fast:200,_default:400},xe.fn.delay=function(t,n){return t=xe.fx?xe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=oe.createElement("input"),t=oe.createElement("select"),n=t.appendChild(oe.createElement("option"));e.type="checkbox",ve.checkOn=""!==e.value,ve.optSelected=n.selected,e=oe.createElement("input"),e.value="t",e.type="radio",ve.radioValue="t"===e.value}();var St,Tt=xe.expr.attrHandle;xe.fn.extend({attr:function(e,t){return Pe(this,xe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){xe.removeAttr(this,e)})}}),xe.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof e.getAttribute?xe.prop(e,t,n):(1===a&&xe.isXMLDoc(e)||(i=xe.attrHooks[t.toLowerCase()]||(xe.expr.match.bool.test(t)?St:void 0)),void 0!==n?null===n?void xe.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=xe.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!ve.radioValue&&"radio"===t&&a(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Le);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),St={set:function(e,t,n){return t===!1?xe.removeAttr(e,n):e.setAttribute(n,n),n}},xe.each(xe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Tt[t]||xe.find.attr;Tt[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=Tt[o],Tt[o]=i,i=null!=n(e,t,r)?o:null,Tt[o]=a),i}});var wt=/^(?:input|select|textarea|button)$/i,At=/^(?:a|area)$/i;xe.fn.extend({prop:function(e,t){return Pe(this,xe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[xe.propFix[e]||e]})}}),xe.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&xe.isXMLDoc(e)||(t=xe.propFix[t]||t,i=xe.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=xe.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ve.optSelected||(xe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),xe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){xe.propFix[this.toLowerCase()]=this}),xe.fn.extend({addClass:function(e){var t,n,r,i,a,o,s,l=0;if(ye(e))return this.each(function(t){xe(this).addClass(e.call(this,t,Z(this)))});if(t=Q(e),t.length)for(;n=this[l++];)if(i=Z(n),r=1===n.nodeType&&" "+K(i)+" "){for(o=0;a=t[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");s=K(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,a,o,s,l=0;if(ye(e))return this.each(function(t){xe(this).removeClass(e.call(this,t,Z(this)))});if(!arguments.length)return this.attr("class","");if(t=Q(e),t.length)for(;n=this[l++];)if(i=Z(n),r=1===n.nodeType&&" "+K(i)+" "){for(o=0;a=t[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");s=K(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):ye(e)?this.each(function(n){xe(this).toggleClass(e.call(this,n,Z(this),t),t)}):this.each(function(){var t,i,a,o;if(r)for(i=0,a=xe(this),o=Q(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||(t=Z(this),t&&He.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":He.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+K(Z(n))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;xe.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ye(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,xe(this).val()):e,null==i?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=xe.map(i,function(e){return null==e?"":e+""})),t=xe.valHooks[this.type]||xe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=xe.valHooks[i.type]||xe.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Ct,""):null==n?"":n)}}}),xe.extend({valHooks:{option:{get:function(e){var t=xe.find.attr(e,"value");return null!=t?t:K(xe.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,s="select-one"===e.type,l=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(n=i[r],(n.selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!a(n.parentNode,"optgroup"))){if(t=xe(n).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var n,r,i=e.options,a=xe.makeArray(t),o=i.length;o--;)r=i[o],(r.selected=xe.inArray(xe.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),xe.each(["radio","checkbox"],function(){xe.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=xe.inArray(xe(e).val(),t)>-1}},ve.checkOn||(xe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),ve.focusin="onfocusin"in e;var kt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};xe.extend(xe.event,{trigger:function(t,n,r,i){var a,o,s,l,u,c,f,d,h=[r||oe],p=pe.call(t,"type")?t.type:t,g=pe.call(t,"namespace")?t.namespace.split("."):[];if(o=d=s=r=r||oe,3!==r.nodeType&&8!==r.nodeType&&!kt.test(p+xe.event.triggered)&&(p.indexOf(".")>-1&&(g=p.split("."),p=g.shift(),g.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[xe.expando]?t:new xe.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:xe.makeArray(n,[t]),f=xe.event.special[p]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!be(r)){for(l=f.delegateType||p,kt.test(l+p)||(o=o.parentNode);o;o=o.parentNode)h.push(o),s=o;s===(r.ownerDocument||oe)&&h.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=h[a++])&&!t.isPropagationStopped();)d=o,t.type=a>1?l:f.bindType||p,c=(He.get(o,"events")||{})[t.type]&&He.get(o,"handle"),c&&c.apply(o,n),c=u&&o[u],c&&c.apply&&je(o)&&(t.result=c.apply(o,n),t.result===!1&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),n)!==!1||!je(r)||u&&ye(r[p])&&!be(r)&&(s=r[u],s&&(r[u]=null),xe.event.triggered=p,t.isPropagationStopped()&&d.addEventListener(p,Ot),r[p](),t.isPropagationStopped()&&d.removeEventListener(p,Ot),xe.event.triggered=void 0,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=xe.extend(new xe.Event,n,{type:e,isSimulated:!0});xe.event.trigger(r,null,t)}}),xe.fn.extend({trigger:function(e,t){return this.each(function(){xe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return xe.event.trigger(e,t,n,!0)}}),ve.focusin||xe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){xe.event.simulate(t,e.target,xe.event.fix(e))};xe.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=He.access(r,t);i||r.addEventListener(e,n,!0),He.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=He.access(r,t)-1;i?He.access(r,t,i):(r.removeEventListener(e,n,!0),He.remove(r,t))}}});var It=e.location,Mt=Date.now(),Nt=/\?/;xe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||xe.error("Invalid XML: "+t),n};var Dt=/\[\]$/,Lt=/\r?\n/g,$t=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;xe.param=function(e,t){var n,r=[],i=function(e,t){var n=ye(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!xe.isPlainObject(e))xe.each(e,function(){i(this.name,this.value)});else for(n in e)J(n,e[n],t,i);return r.join("&")},xe.fn.extend({serialize:function(){return xe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=xe.prop(this,"elements");return e?xe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!xe(this).is(":disabled")&&Rt.test(this.nodeName)&&!$t.test(e)&&(this.checked||!Ze.test(e))}).map(function(e,t){var n=xe(this).val();return null==n?null:Array.isArray(n)?xe.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Pt=/%20/g,Ft=/#.*$/,Ut=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zt=/^(?:GET|HEAD)$/,Bt=/^\/\//,qt={},Yt={},Xt="*/".concat("*"),Wt=oe.createElement("a");Wt.href=It.href,xe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:It.href,type:"GET",isLocal:Ht.test(It.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":xe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ne(ne(e,xe.ajaxSettings),t):ne(xe.ajaxSettings,e)},ajaxPrefilter:ee(qt),ajaxTransport:ee(Yt),ajax:function(t,n){function r(t,n,r,s){var u,d,h,_,E,x=n;c||(c=!0,l&&e.clearTimeout(l),i=void 0,o=s||"",S.readyState=t>0?4:0,u=t>=200&&t<300||304===t,r&&(_=re(p,S,r)),_=ie(p,_,S,u),u?(p.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(xe.lastModified[a]=E),E=S.getResponseHeader("etag"),E&&(xe.etag[a]=E)),204===t||"HEAD"===p.type?x="nocontent":304===t?x="notmodified":(x=_.state,d=_.data,h=_.error,u=!h)):(h=x,!t&&x||(x="error",t<0&&(t=0))),S.status=t,S.statusText=(n||x)+"",u?v.resolveWith(g,[d,x,S]):v.rejectWith(g,[S,x,h]),S.statusCode(b),b=void 0,f&&m.trigger(u?"ajaxSuccess":"ajaxError",[S,p,u?d:h]),y.fireWith(g,[S,x]),f&&(m.trigger("ajaxComplete",[S,p]),--xe.active||xe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,a,o,s,l,u,c,f,d,h,p=xe.ajaxSetup({},n),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?xe(g):xe.event,v=xe.Deferred(),y=xe.Callbacks("once memory"),b=p.statusCode||{},_={},E={},x="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=jt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return i&&i.abort(t),r(0,t),this}};if(v.promise(S),p.url=((t||p.url||It.href)+"").replace(Bt,It.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Le)||[""],null==p.crossDomain){u=oe.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Wt.protocol+"//"+Wt.host!=u.protocol+"//"+u.host}catch(T){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=xe.param(p.data,p.traditional)),te(qt,p,n,S),c)return S;f=xe.event&&p.global,f&&0===xe.active++&&xe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!zt.test(p.type),a=p.url.replace(Ft,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Pt,"+")):(h=p.url.slice(a.length),p.data&&(p.processData||"string"==typeof p.data)&&(a+=(Nt.test(a)?"&":"?")+p.data,delete p.data),p.cache===!1&&(a=a.replace(Ut,"$1"),h=(Nt.test(a)?"&":"?")+"_="+Mt++ +h),p.url=a+h),p.ifModified&&(xe.lastModified[a]&&S.setRequestHeader("If-Modified-Since",xe.lastModified[a]),xe.etag[a]&&S.setRequestHeader("If-None-Match",xe.etag[a])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Xt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(g,S,p)===!1||c))return S.abort();if(x="abort",y.add(p.complete),S.done(p.success),S.fail(p.error),i=te(Yt,p,n,S)){if(S.readyState=1,f&&m.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(l=e.setTimeout(function(){S.abort("timeout")},p.timeout));try{c=!1,i.send(_,r)}catch(T){if(c)throw T;r(-1,T)}}else r(-1,"No Transport");return S},getJSON:function(e,t,n){return xe.get(e,t,n,"json")},getScript:function(e,t){return xe.get(e,void 0,t,"script")}}),xe.each(["get","post"],function(e,t){xe[t]=function(e,n,r,i){return ye(n)&&(i=i||r,r=n,n=void 0),xe.ajax(xe.extend({url:e,type:t,dataType:i,data:n,success:r},xe.isPlainObject(e)&&e))}}),xe._evalUrl=function(e){return xe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},xe.fn.extend({wrapAll:function(e){var t;return this[0]&&(ye(e)&&(e=e.call(this[0])),t=xe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ye(e)?this.each(function(t){xe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=xe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ye(e);return this.each(function(n){xe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){xe(this).replaceWith(this.childNodes)}),this}}),xe.expr.pseudos.hidden=function(e){return!xe.expr.pseudos.visible(e)},xe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},xe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Gt={0:200,1223:204},Vt=xe.ajaxSettings.xhr();ve.cors=!!Vt&&"withCredentials"in Vt,ve.ajax=Vt=!!Vt,xe.ajaxTransport(function(t){var n,r;if(ve.cors||Vt&&!t.crossDomain)return{send:function(i,a){
var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)s.setRequestHeader(o,i[o]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Gt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}}),xe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),xe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return xe.globalEval(e),e}}}),xe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),xe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=xe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),oe.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;xe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||xe.expando+"_"+Mt++;return this[e]=!0,e}}),xe.ajaxPrefilter("json jsonp",function(t,n,r){var i,a,o,s=t.jsonp!==!1&&(Zt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=ye(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Zt,"$1"+i):t.jsonp!==!1&&(t.url+=(Nt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||xe.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=e[i],e[i]=function(){o=arguments},r.always(function(){void 0===a?xe(e).removeProp(i):e[i]=a,t[i]&&(t.jsonpCallback=n.jsonpCallback,Kt.push(i)),o&&ye(a)&&a(o[0]),o=a=void 0}),"script"}),ve.createHTMLDocument=function(){var e=oe.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),xe.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,a;return t||(ve.createHTMLDocument?(t=oe.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=oe.location.href,t.head.appendChild(r)):t=oe),i=ke.exec(e),a=!n&&[],i?[t.createElement(i[1])]:(i=S([e],t,a),a&&a.length&&xe(a).remove(),xe.merge([],i.childNodes))},xe.fn.load=function(e,t,n){var r,i,a,o=this,s=e.indexOf(" ");return s>-1&&(r=K(e.slice(s)),e=e.slice(0,s)),ye(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&xe.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){a=arguments,o.html(r?xe("<div>").append(xe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},xe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){xe.fn[t]=function(e){return this.on(t,e)}}),xe.expr.pseudos.animated=function(e){return xe.grep(xe.timers,function(t){return e===t.elem}).length},xe.offset={setOffset:function(e,t,n){var r,i,a,o,s,l,u,c=xe.css(e,"position"),f=xe(e),d={};"static"===c&&(e.style.position="relative"),s=f.offset(),a=xe.css(e,"top"),l=xe.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1,u?(r=f.position(),o=r.top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(l)||0),ye(t)&&(t=t.call(e,n,xe.extend({},s))),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):f.css(d)}},xe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){xe.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===xe.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===xe.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&(i=xe(e).offset(),i.top+=xe.css(e,"borderTopWidth",!0),i.left+=xe.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-xe.css(r,"marginTop",!0),left:t.left-i.left-xe.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===xe.css(e,"position");)e=e.offsetParent;return e||nt})}}),xe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;xe.fn[e]=function(r){return Pe(this,function(e,r,i){var a;return be(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i?a?a[t]:e[r]:void(a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i)},e,r,arguments.length)}}),xe.each(["top","left"],function(e,t){xe.cssHooks[t]=R(ve.pixelPosition,function(e,n){if(n)return n=$(e,t),ct.test(n)?xe(e).position()[t]+"px":n})}),xe.each({Height:"height",Width:"width"},function(e,t){xe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){xe.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||a===!0?"margin":"border");return Pe(this,function(t,n,i){var a;return be(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?xe.css(t,n,s):xe.style(t,n,i,s)},t,o?i:void 0,o)}})}),xe.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){xe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),xe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),xe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),xe.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),ye(e))return r=le.call(arguments,2),i=function(){return e.apply(t||this,r.concat(le.call(arguments)))},i.guid=e.guid=e.guid||xe.guid++,i},xe.holdReady=function(e){e?xe.readyWait++:xe.ready(!0)},xe.isArray=Array.isArray,xe.parseJSON=JSON.parse,xe.nodeName=a,xe.isFunction=ye,xe.isWindow=be,xe.camelCase=p,xe.type=r,xe.now=Date.now,xe.isNumeric=function(e){var t=xe.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return xe});var Qt=e.jQuery,Jt=e.$;return xe.noConflict=function(t){return e.$===xe&&(e.$=Jt),t&&e.jQuery===xe&&(e.jQuery=Qt),xe},t||(e.jQuery=e.$=xe),xe}),/*! jQuery UI - v1.12.1 - 2016-09-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}function n(e){for(var t,n;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}function r(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",n,function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",n,a)}function a(){e.datepicker._isDisabledDatepicker(m.inline?m.dpDiv.parent()[0]:m.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))}function o(t,n){e.extend(t,n);for(var r in n)null==n[r]&&(t[r]=n[r]);return t}/*!
 * jQuery UI Spinner 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
function s(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{};var l=(e.ui.version="1.12.1",0),u=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,a;for(a=0;null!=(i=n[a]);a++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,a,o,s={},l=t.split(".")[0];t=t.split(".")[1];var u=l+"-"+t;return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][u.toLowerCase()]=function(t){return!!e.data(t,u)},e[l]=e[l]||{},i=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),o=new n,o.options=e.widget.extend({},o.options),e.each(r,function(t,r){return e.isFunction(r)?void(s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,a=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=a,t}}()):void(s[t]=r)}),a.prototype=e.widget.extend(o,{widgetEventPrefix:i?o.widgetEventPrefix||t:t},s,{constructor:a,namespace:l,widgetName:t,widgetFullName:u}),i?(e.each(i._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,a,n._proto)}),delete i._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var n,r,i=u.call(arguments,1),a=0,o=i.length;a<o;a++)for(n in i[a])r=i[a][n],i[a].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(i){var a="string"==typeof i,o=u.call(arguments,1),s=this;return a?this.length||"instance"!==i?this.each(function(){var n,a=e.data(this,r);return"instance"===i?(s=a,!1):a?e.isFunction(a[i])&&"_"!==i.charAt(0)?(n=a[i].apply(a,o),n!==a&&void 0!==n?(s=n&&n.jquery?s.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+i+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+i+"'")}):s=void 0:(o.length&&(i=e.widget.extend.apply(null,[i].concat(o))),this.each(function(){var t=e.data(this,r);t?(t.option(i||{}),t._init&&t._init()):e.data(this,r,new n(i,this))})),s}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},r=t.split("."),t=r.shift(),r.length){for(i=o[t]=e.widget.extend({},this.options[t]),a=0;a<r.length-1;a++)i[r[a]]=i[r[a]]||{},i=i[r[a]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t)i=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&i&&i.length&&(r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,a){var o,s;for(s=0;s<n.length;s++)o=i.classesElementLookup[n[s]]||e(),o=e(t.add?e.unique(o.get().concat(t.element.get())):o.not(t.element).get()),i.classesElementLookup[n[s]]=o,r.push(n[s]),a&&t.classes[n[s]]&&r.push(t.classes[n[s]])}var r=[],i=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(r,i){e.inArray(t.target,i)!==-1&&(n.classesElementLookup[r]=e(i.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r="boolean"==typeof r?r:n;var i="string"==typeof e||null===e,a={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return a.element.toggleClass(this._classes(a),r),this},_on:function(t,n,r){var i,a=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function s(){if(t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=r.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?i.on(u,c,s):n.on(u,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,a,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(i in a)i in n||(n[i]=a[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,a){"string"==typeof i&&(i={effect:i});var o,s=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=a,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[s]?r[t](i):s!==t&&r[s]?r[s](i.duration,i.easing,a):r.queue(function(n){e(this)[t](),a&&a.call(r[0]),n()})}});e.widget;/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
!function(){function t(e,t,n){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function r(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var i,a=Math.max,o=Math.abs,s=/left|center|right/,l=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,f=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==i)return i;var t,n,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=r.children()[0];return e("body").append(r),t=a.offsetWidth,r.css("overflow","scroll"),n=a.offsetWidth,t===n&&(n=r[0].clientWidth),r.remove(),i=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,a="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&9===n[0].nodeType,a=!r&&!i;return{element:n,isWindow:r,isDocument:i,offset:a?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(i){if(!i||!i.of)return d.apply(this,arguments);i=e.extend({},i);var f,h,p,g,m,v,y=e(i.of),b=e.position.getWithinInfo(i.within),_=e.position.getScrollInfo(b),E=(i.collision||"flip").split(" "),x={};return v=r(y),y[0].preventDefault&&(i.at="left top"),h=v.width,p=v.height,g=v.offset,m=e.extend({},g),e.each(["my","at"],function(){var e,t,n=(i[this]||"").split(" ");1===n.length&&(n=s.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=s.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",e=u.exec(n[0]),t=u.exec(n[1]),x[this]=[e?e[0]:0,t?t[0]:0],i[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),1===E.length&&(E[1]=E[0]),"right"===i.at[0]?m.left+=h:"center"===i.at[0]&&(m.left+=h/2),"bottom"===i.at[1]?m.top+=p:"center"===i.at[1]&&(m.top+=p/2),f=t(x.at,h,p),m.left+=f[0],m.top+=f[1],this.each(function(){var r,s,l=e(this),u=l.outerWidth(),c=l.outerHeight(),d=n(this,"marginLeft"),v=n(this,"marginTop"),S=u+d+n(this,"marginRight")+_.width,T=c+v+n(this,"marginBottom")+_.height,w=e.extend({},m),A=t(x.my,l.outerWidth(),l.outerHeight());"right"===i.my[0]?w.left-=u:"center"===i.my[0]&&(w.left-=u/2),"bottom"===i.my[1]?w.top-=c:"center"===i.my[1]&&(w.top-=c/2),w.left+=A[0],w.top+=A[1],r={marginLeft:d,marginTop:v},e.each(["left","top"],function(t,n){e.ui.position[E[t]]&&e.ui.position[E[t]][n](w,{targetWidth:h,targetHeight:p,elemWidth:u,elemHeight:c,collisionPosition:r,collisionWidth:S,collisionHeight:T,offset:[f[0]+A[0],f[1]+A[1]],my:i.my,at:i.at,within:b,elem:l})}),i.using&&(s=function(e){var t=g.left-w.left,n=t+h-u,r=g.top-w.top,s=r+p-c,f={target:{element:y,left:g.left,top:g.top,width:h,height:p},element:{element:l,left:w.left,top:w.top,width:u,height:c},horizontal:n<0?"left":t>0?"right":"center",vertical:s<0?"top":r>0?"bottom":"middle"};h<u&&o(t+n)<h&&(f.horizontal="center"),p<c&&o(r+s)<p&&(f.vertical="middle"),a(o(t),o(n))>a(o(r),o(s))?f.important="horizontal":f.important="vertical",i.using.call(this,e,f)}),l.offset(e.extend(w,{using:s}))})},e.ui.position={fit:{left:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,s=e.left-t.collisionPosition.marginLeft,l=i-s,u=s+t.collisionWidth-o-i;t.collisionWidth>o?l>0&&u<=0?(n=e.left+l+t.collisionWidth-o-i,e.left+=l-n):u>0&&l<=0?e.left=i:l>u?e.left=i+o-t.collisionWidth:e.left=i:l>0?e.left+=l:u>0?e.left-=u:e.left=a(e.left-s,e.left)},top:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,l=i-s,u=s+t.collisionHeight-o-i;t.collisionHeight>o?l>0&&u<=0?(n=e.top+l+t.collisionHeight-o-i,e.top+=l-n):u>0&&l<=0?e.top=i:l>u?e.top=i+o-t.collisionHeight:e.top=i:l>0?e.top+=l:u>0?e.top-=u:e.top=a(e.top-s,e.top)}},flip:{left:function(e,t){var n,r,i=t.within,a=i.offset.left+i.scrollLeft,s=i.width,l=i.isWindow?i.scrollLeft:i.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,f=u+t.collisionWidth-s-l,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];c<0?(n=e.left+d+h+p+t.collisionWidth-s-a,(n<0||n<o(c))&&(e.left+=d+h+p)):f>0&&(r=e.left-t.collisionPosition.marginLeft+d+h+p-l,(r>0||o(r)<f)&&(e.left+=d+h+p))},top:function(e,t){var n,r,i=t.within,a=i.offset.top+i.scrollTop,s=i.height,l=i.isWindow?i.scrollTop:i.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,f=u+t.collisionHeight-s-l,d="top"===t.my[1],h=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];c<0?(r=e.top+h+p+g+t.collisionHeight-s-a,(r<0||r<o(c))&&(e.top+=h+p+g)):f>0&&(n=e.top-t.collisionPosition.marginTop+h+p+g-l,(n>0||o(n)<f)&&(e.top+=h+p+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();var c=(e.ui.position,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])}}),e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),"ui-effects-"),f="ui-effects-style",d="ui-effects-animated",h=e;e.effects={effect:{}},/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(e,t){function n(e,t,n){var r=f[t.type]||{};return null==e?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function r(t){var n=u(),r=n._rgba=[];return t=t.toLowerCase(),p(l,function(e,i){var a,o=i.re.exec(t),s=o&&i.parse(o),l=i.space||"rgba";if(s)return a=n[l](s),n[c[l].cache]=a[c[l].cache],r=n._rgba=a._rgba,!1}),r.length?("0,0,0,0"===r.join()&&e.extend(r,a.transparent),n):a[t]}function i(e,t,n){return n=(n+1)%1,6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",s=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},f={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=u.support={},h=e("<p>")[0],p=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=h.style.backgroundColor.indexOf("rgba")>-1,p(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=e.extend(u.prototype,{parse:function(i,o,s,l){if(i===t)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=e(i).css(o),o=t);var f=this,d=e.type(i),h=this._rgba=[];return o!==t&&(i=[i,o,s,l],d="array"),"string"===d?this.parse(r(i)||a._default):"array"===d?(p(c.rgba.props,function(e,t){h[t.idx]=n(i[t.idx],t)}),this):"object"===d?(i instanceof u?p(c,function(e,t){i[t.cache]&&(f[t.cache]=i[t.cache].slice())}):p(c,function(t,r){var a=r.cache;p(r.props,function(e,t){if(!f[a]&&r.to){if("alpha"===e||null==i[e])return;f[a]=r.to(f._rgba)}f[a][t.idx]=n(i[e],t,!0)}),f[a]&&e.inArray(null,f[a].slice(0,3))<0&&(f[a][3]=1,r.from&&(f._rgba=r.from(f[a])))}),this):void 0},is:function(e){var t=u(e),n=!0,r=this;return p(c,function(e,i){var a,o=t[i.cache];return o&&(a=r[i.cache]||i.to&&i.to(r._rgba)||[],p(i.props,function(e,t){if(null!=o[t.idx])return n=o[t.idx]===a[t.idx]})),n}),n},_space:function(){var e=[],t=this;return p(c,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=u(e),i=r._space(),a=c[i],o=0===this.alpha()?u("transparent"):this,s=o[a.cache]||a.to(o._rgba),l=s.slice();return r=r[a.cache],p(a.props,function(e,i){var a=i.idx,o=s[a],u=r[a],c=f[i.type]||{};null!==u&&(null===o?l[a]=u:(c.mod&&(u-o>c.mod/2?o+=c.mod:o-u>c.mod/2&&(o-=c.mod)),l[a]=n((u-o)*t+o,i)))}),this[i](l)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=u(t)._rgba;return u(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(255*r)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,r=e[0]/255,i=e[1]/255,a=e[2]/255,o=e[3],s=Math.max(r,i,a),l=Math.min(r,i,a),u=s-l,c=s+l,f=.5*c;return t=l===s?0:r===s?60*(i-a)/u+360:i===s?60*(a-r)/u+120:60*(r-i)/u+240,n=0===u?0:f<=.5?u/c:u/(2-c),[Math.round(t)%360,n,f,null==o?1:o]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],a=e[3],o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;return[Math.round(255*i(s,o,t+1/3)),Math.round(255*i(s,o,t)),Math.round(255*i(s,o,t-1/3)),a]},p(c,function(r,i){var a=i.props,o=i.cache,l=i.to,c=i.from;u.fn[r]=function(r){if(l&&!this[o]&&(this[o]=l(this._rgba)),r===t)return this[o].slice();var i,s=e.type(r),f="array"===s||"object"===s?r:arguments,d=this[o].slice();return p(a,function(e,t){var r=f["object"===s?e:t.idx];null==r&&(r=d[t.idx]),d[t.idx]=n(r,t)}),c?(i=u(c(d)),i[o]=d,i):u(d)},p(a,function(t,n){u.fn[t]||(u.fn[t]=function(i){var a,o=e.type(i),l="alpha"===t?this._hsla?"hsla":"rgba":r,u=this[l](),c=u[n.idx];return"undefined"===o?c:("function"===o&&(i=i.call(this,c),o=e.type(i)),null==i&&n.empty?this:("string"===o&&(a=s.exec(i),a&&(i=c+parseFloat(a[2])*("+"===a[1]?1:-1))),u[n.idx]=i,this[l](u)))})})}),u.hook=function(t){var n=t.split(" ");p(n,function(t,n){e.cssHooks[n]={set:function(t,i){var a,o,s="";if("transparent"!==i&&("string"!==e.type(i)||(a=r(i)))){if(i=u(a||i),!d.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===s||"transparent"===s)&&o&&o.style;)try{s=e.css(o,"backgroundColor"),o=o.parentNode}catch(l){}i=i.blend(s&&"transparent"!==s?s:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(l){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=u(t.elem,n),t.end=u(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},u.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(h),function(){function t(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)n=i[r],"string"==typeof i[n]&&(a[e.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(a[n]=i[n]);return a}function n(t,n){var r,a,o={};for(r in n)a=n[r],t[r]!==a&&(i[r]||!e.fx.step[r]&&isNaN(parseFloat(a))||(o[r]=a));return o}var r=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(h.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(i,a,o,s){var l=e.speed(a,o,s);return this.queue(function(){var a,o=e(this),s=o.attr("class")||"",u=l.children?o.find("*").addBack():o;u=u.map(function(){var n=e(this);return{el:n,start:t(this)}}),a=function(){e.each(r,function(e,t){i[t]&&o[t+"Class"](i[t])})},a(),u=u.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",s),u=u.map(function(){var t=this,n=e.Deferred(),r=e.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,u.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,a){return r?e.effects.animateClass.call(this,{add:n},r,i,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,r,i,a,o){return"boolean"==typeof r||void 0===r?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},r,i,a)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,a){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,a)}})}(),function(){function t(t,n,r,i){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(i=r,r=n,n={}),e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function n(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}function r(e,t){var n=t.outerWidth(),r=t.outerHeight(),i=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,a=i.exec(e)||["",0,n,r,0];return{top:parseFloat(a[1])||0,right:"auto"===a[2]?n:parseFloat(a[2]),bottom:"auto"===a[3]?r:parseFloat(a[3]),left:parseFloat(a[4])||0}}e.expr&&e.expr.filters&&e.expr.filters.animated&&(e.expr.filters.animated=function(t){return function(n){return!!e(n).data(d)||t(n)}}(e.expr.filters.animated)),e.uiBackCompat!==!1&&e.extend(e.effects,{save:function(e,t){for(var n=0,r=t.length;n<r;n++)null!==t[n]&&e.data(c+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n,r=0,i=t.length;r<i;r++)null!==t[r]&&(n=e.data(c+t[r]),e.css(t[r],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(r),(t[0]===a||e.contains(t[0],a))&&e(a).trigger("focus"),r=t.parent(),"static"===t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).trigger("focus")),t}}),e.extend(e.effects,{version:"1.12.1",define:function(t,n,r){return r||(r=n,n="effect"),e.effects.effect[t]=r,e.effects.effect[t].mode=n,r},scaledDimensions:function(e,t,n){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var r="horizontal"!==n?(t||100)/100:1,i="vertical"!==n?(t||100)/100:1;return{height:e.height()*i,width:e.width()*r,outerHeight:e.outerHeight()*i,outerWidth:e.outerWidth()*r}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,n){var r=e.queue();t>1&&r.splice.apply(r,[1,0].concat(r.splice(t,n))),e.dequeue()},saveStyle:function(e){e.data(f,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(f)||"",e.removeData(f)},mode:function(e,t){var n=e.is(":hidden");return"toggle"===t&&(t=n?"show":"hide"),(n?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createPlaceholder:function(t){var n,r=t.css("position"),i=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(r)&&(r="absolute",n=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),"float":t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(c+"placeholder",n)),t.css({position:r,left:i.left,top:i.top}),n},removePlaceholder:function(e){var t=c+"placeholder",n=e.data(t);n&&(n.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var a=t.cssUnit(n);a[0]>0&&(i[n]=a[0]*r+a[1])}),i}}),e.fn.extend({effect:function(){function n(t){function n(){s.removeData(d),e.effects.cleanUp(s),"hide"===r.mode&&s.hide(),o()}function o(){e.isFunction(l)&&l.call(s[0]),e.isFunction(t)&&t()}var s=e(this);r.mode=c.shift(),e.uiBackCompat===!1||a?"none"===r.mode?(s[u](),o()):i.call(s[0],r,n):(s.is(":hidden")?"hide"===u:"show"===u)?(s[u](),o()):i.call(s[0],r,o)}var r=t.apply(this,arguments),i=e.effects.effect[r.effect],a=i.mode,o=r.queue,s=o||"fx",l=r.complete,u=r.mode,c=[],f=function(t){var n=e(this),r=e.effects.mode(n,u)||a;n.data(d,!0),c.push(r),a&&("show"===r||r===a&&"hide"===r)&&n.show(),a&&"none"===r||e.effects.saveStyle(n),e.isFunction(t)&&t()};return e.fx.off||!i?u?this[u](r.duration,l):this.each(function(){l&&l.call(this)}):o===!1?this.each(f).each(n):this.queue(s,f).queue(s,n)},show:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(r){if(n(r)||"boolean"==typeof r)return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):r(this.css("clip"),this)},transfer:function(t,n){var r=e(this),i=e(t.to),a="fixed"===i.css("position"),o=e("body"),s=a?o.scrollTop():0,l=a?o.scrollLeft():0,u=i.offset(),c={top:u.top-s,left:u.left-l,height:i.innerHeight(),width:i.innerWidth()},f=r.offset(),d=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:f.top-s,left:f.left-l,height:r.innerHeight(),width:r.innerWidth(),position:a?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){d.remove(),e.isFunction(n)&&n()})}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=r(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(2*e)/2:1-n(e*-2+2)/2}})}();var p,p=e.effects;e.effects.define("blind","hide",function(t,n){var r={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},i=e(this),a=t.direction||"up",o=i.cssClip(),s={clip:e.extend({},o)},l=e.effects.createPlaceholder(i);s.clip[r[a][0]]=s.clip[r[a][1]],"show"===t.mode&&(i.cssClip(s.clip),l&&l.css(e.effects.clipToBox(s)),s.clip=o),l&&l.animate(e.effects.clipToBox(s),t.duration,t.easing),i.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("bounce",function(t,n){var r,i,a,o=e(this),s=t.mode,l="hide"===s,u="show"===s,c=t.direction||"up",f=t.distance,d=t.times||5,h=2*d+(u||l?1:0),p=t.duration/h,g=t.easing,m="up"===c||"down"===c?"top":"left",v="up"===c||"left"===c,y=0,b=o.queue().length;for(e.effects.createPlaceholder(o),a=o.css(m),f||(f=o["top"===m?"outerHeight":"outerWidth"]()/3),u&&(i={opacity:1},i[m]=a,o.css("opacity",0).css(m,v?2*-f:2*f).animate(i,p,g)),l&&(f/=Math.pow(2,d-1)),i={},i[m]=a;y<d;y++)r={},r[m]=(v?"-=":"+=")+f,o.animate(r,p,g).animate(i,p,g),f=l?2*f:f/2;l&&(r={opacity:0},r[m]=(v?"-=":"+=")+f,o.animate(r,p,g)),o.queue(n),e.effects.unshift(o,b,h+1)}),e.effects.define("clip","hide",function(t,n){var r,i={},a=e(this),o=t.direction||"vertical",s="both"===o,l=s||"horizontal"===o,u=s||"vertical"===o;r=a.cssClip(),i.clip={top:u?(r.bottom-r.top)/2:r.top,right:l?(r.right-r.left)/2:r.right,bottom:u?(r.bottom-r.top)/2:r.bottom,left:l?(r.right-r.left)/2:r.left},e.effects.createPlaceholder(a),"show"===t.mode&&(a.cssClip(i.clip),i.clip=r),a.animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("drop","hide",function(t,n){var r,i=e(this),a=t.mode,o="show"===a,s=t.direction||"left",l="up"===s||"down"===s?"top":"left",u="up"===s||"left"===s?"-=":"+=",c="+="===u?"-=":"+=",f={opacity:0};e.effects.createPlaceholder(i),r=t.distance||i["top"===l?"outerHeight":"outerWidth"](!0)/2,f[l]=u+r,o&&(i.css(f),f[l]=c+r,f.opacity=1),i.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("explode","hide",function(t,n){function r(){b.push(this),b.length===f*d&&i()}function i(){h.css({visibility:"visible"}),e(b).remove(),n()}var a,o,s,l,u,c,f=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=f,h=e(this),p=t.mode,g="show"===p,m=h.show().css("visibility","hidden").offset(),v=Math.ceil(h.outerWidth()/d),y=Math.ceil(h.outerHeight()/f),b=[];for(a=0;a<f;a++)for(l=m.top+a*y,c=a-(f-1)/2,o=0;o<d;o++)s=m.left+o*v,u=o-(d-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:s+(g?u*v:0),top:l+(g?c*y:0),opacity:g?0:1}).animate({left:s+(g?0:u*v),top:l+(g?0:c*y),opacity:g?1:0},t.duration||500,t.easing,r)}),e.effects.define("fade","toggle",function(t,n){var r="show"===t.mode;e(this).css("opacity",r?0:1).animate({opacity:r?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("fold","hide",function(t,n){var r=e(this),i=t.mode,a="show"===i,o="hide"===i,s=t.size||15,l=/([0-9]+)%/.exec(s),u=!!t.horizFirst,c=u?["right","bottom"]:["bottom","right"],f=t.duration/2,d=e.effects.createPlaceholder(r),h=r.cssClip(),p={clip:e.extend({},h)},g={clip:e.extend({},h)},m=[h[c[0]],h[c[1]]],v=r.queue().length;l&&(s=parseInt(l[1],10)/100*m[o?0:1]),p.clip[c[0]]=s,g.clip[c[0]]=s,g.clip[c[1]]=0,a&&(r.cssClip(g.clip),d&&d.css(e.effects.clipToBox(g)),g.clip=h),r.queue(function(n){d&&d.animate(e.effects.clipToBox(p),f,t.easing).animate(e.effects.clipToBox(g),f,t.easing),n()}).animate(p,f,t.easing).animate(g,f,t.easing).queue(n),e.effects.unshift(r,v,4)}),e.effects.define("highlight","show",function(t,n){var r=e(this),i={backgroundColor:r.css("backgroundColor")};"hide"===t.mode&&(i.opacity=0),e.effects.saveStyle(r),r.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),e.effects.define("size",function(t,n){var r,i,a,o=e(this),s=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=t.mode,f="effect"!==c,d=t.scale||"both",h=t.origin||["middle","center"],p=o.css("position"),g=o.position(),m=e.effects.scaledDimensions(o),v=t.from||m,y=t.to||e.effects.scaledDimensions(o,0);e.effects.createPlaceholder(o),"show"===c&&(a=v,v=y,y=a),i={from:{y:v.height/m.height,x:v.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}},"box"!==d&&"both"!==d||(i.from.y!==i.to.y&&(v=e.effects.setTransition(o,l,i.from.y,v),y=e.effects.setTransition(o,l,i.to.y,y)),i.from.x!==i.to.x&&(v=e.effects.setTransition(o,u,i.from.x,v),y=e.effects.setTransition(o,u,i.to.x,y))),"content"!==d&&"both"!==d||i.from.y!==i.to.y&&(v=e.effects.setTransition(o,s,i.from.y,v),y=e.effects.setTransition(o,s,i.to.y,y)),h&&(r=e.effects.getBaseline(h,m),v.top=(m.outerHeight-v.outerHeight)*r.y+g.top,v.left=(m.outerWidth-v.outerWidth)*r.x+g.left,y.top=(m.outerHeight-y.outerHeight)*r.y+g.top,y.left=(m.outerWidth-y.outerWidth)*r.x+g.left),o.css(v),"content"!==d&&"both"!==d||(l=l.concat(["marginTop","marginBottom"]).concat(s),u=u.concat(["marginLeft","marginRight"]),o.find("*[width]").each(function(){var n=e(this),r=e.effects.scaledDimensions(n),a={height:r.height*i.from.y,width:r.width*i.from.x,outerHeight:r.outerHeight*i.from.y,outerWidth:r.outerWidth*i.from.x},o={height:r.height*i.to.y,width:r.width*i.to.x,outerHeight:r.height*i.to.y,outerWidth:r.width*i.to.x};i.from.y!==i.to.y&&(a=e.effects.setTransition(n,l,i.from.y,a),o=e.effects.setTransition(n,l,i.to.y,o)),i.from.x!==i.to.x&&(a=e.effects.setTransition(n,u,i.from.x,a),o=e.effects.setTransition(n,u,i.to.x,o)),f&&e.effects.saveStyle(n),n.css(a),n.animate(o,t.duration,t.easing,function(){f&&e.effects.restoreStyle(n)})})),o.animate(y,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=o.offset();0===y.opacity&&o.css("opacity",v.opacity),f||(o.css("position","static"===p?"relative":p).offset(t),e.effects.saveStyle(o)),n()}})}),e.effects.define("scale",function(t,n){var r=e(this),i=t.mode,a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==i?0:100),o=e.extend(!0,{from:e.effects.scaledDimensions(r),to:e.effects.scaledDimensions(r,a,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(o.from.opacity=1,o.to.opacity=0),e.effects.effect.size.call(this,o,n)}),e.effects.define("puff","hide",function(t,n){var r=e.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,r,n)}),e.effects.define("pulsate","show",function(t,n){var r=e(this),i=t.mode,a="show"===i,o="hide"===i,s=a||o,l=2*(t.times||5)+(s?1:0),u=t.duration/l,c=0,f=1,d=r.queue().length;for(!a&&r.is(":visible")||(r.css("opacity",0).show(),c=1);f<l;f++)r.animate({opacity:c},u,t.easing),c=1-c;r.animate({opacity:c},u,t.easing),r.queue(n),e.effects.unshift(r,d,l+1)}),e.effects.define("shake",function(t,n){var r=1,i=e(this),a=t.direction||"left",o=t.distance||20,s=t.times||3,l=2*s+1,u=Math.round(t.duration/l),c="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,d={},h={},p={},g=i.queue().length;for(e.effects.createPlaceholder(i),d[c]=(f?"-=":"+=")+o,h[c]=(f?"+=":"-=")+2*o,p[c]=(f?"-=":"+=")+2*o,i.animate(d,u,t.easing);r<s;r++)i.animate(h,u,t.easing).animate(p,u,t.easing);i.animate(h,u,t.easing).animate(d,u/2,t.easing).queue(n),e.effects.unshift(i,g,l+1)}),e.effects.define("slide","show",function(t,n){var r,i,a=e(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=t.mode,l=t.direction||"left",u="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,f=t.distance||a["top"===u?"outerHeight":"outerWidth"](!0),d={};e.effects.createPlaceholder(a),r=a.cssClip(),i=a.position()[u],d[u]=(c?-1:1)*f+i,d.clip=a.cssClip(),d.clip[o[l][1]]=d.clip[o[l][0]],"show"===s&&(a.cssClip(d.clip),a.css(u,d[u]),d.clip=r,d[u]=i),a.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:n})});e.uiBackCompat!==!1&&(p=e.effects.define("transfer",function(t,n){e(this).transfer(t,n)}));/*!
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.ui.focusable=function(n,r){var i,a,o,s,l,u=n.nodeName.toLowerCase();return"area"===u?(i=n.parentNode,a=i.name,!(!n.href||!a||"map"!==i.nodeName.toLowerCase())&&(o=e("img[usemap='#"+a+"']"),o.length>0&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(u)?(s=!n.disabled,s&&(l=e(n).closest("fieldset")[0],l&&(s=!l.disabled))):s="a"===u?n.href||r:r,s&&e(n).is(":visible")&&t(e(n)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}});e.ui.focusable,e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)},e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var n=t.data("ui-form-reset-instances");e.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};/*!
 * jQuery UI Support for jQuery core 1.7.x 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */
"1.7"===e.fn.jquery.substring(0,3)&&(e.each(["Width","Height"],function(t,n){function r(t,n,r,a){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){e(this).css(a,r(this,t)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(a,r(this,t,!0,i)+"px")})}}),e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))});/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}(),e.fn.labels=function(){var t,n,r,i,a;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),r=this.attr("id"),r&&(t=this.eq(0).parents().last(),a=t.add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(r)+"']",i=i.add(a.find(n).addBack(n))),this.pushStack(i))},e.fn.scrollParent=function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return(!r||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&a.length?a:e(this[0].ownerDocument||document)},e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),r=null!=n;return(!r||n>=0)&&e.ui.focusable(t,r)}}),e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t,n,r=this.options.icons;r&&(t=e("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+r.header),t.prependTo(this.headers),n=this.active.children(".ui-accordion-header-icon"),this._removeClass(n,r.header)._addClass(n,null,r.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),void("icons"===e&&(this._destroyIcons(),t&&this._createIcons())))},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),a=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:a=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:a=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:a=this.headers[0];break;case n.END:a=this.headers[r-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),e(a).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,n=this.options,r=n.heightStyle,i=this.element.parent();this.active=this._findActive(n.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=e(this),n=t.uniqueId().attr("id"),r=t.next(),i=r.uniqueId().attr("id");t.attr("aria-controls",i),r.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===r?(t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");"absolute"!==r&&"fixed"!==r&&(t-=n.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(t=0,this.headers.next().each(function(){var n=e(this).is(":visible");n||e(this).show(),t=Math.max(t,e(this).css("height","").height()),n||e(this).hide()}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n,r,i=this.options,a=this.active,o=e(t.currentTarget),s=o[0]===a[0],l=s&&i.collapsible,u=l?e():o.next(),c=a.next(),f={oldHeader:a,oldPanel:c,newHeader:l?e():o,newPanel:u};t.preventDefault(),s&&!i.collapsible||this._trigger("beforeActivate",t,f)===!1||(i.active=!l&&this.headers.index(o),this.active=s?e():o,this._toggle(f),this._removeClass(a,"ui-accordion-header-active","ui-state-active"),i.icons&&(n=a.children(".ui-accordion-header-icon"),this._removeClass(n,null,i.icons.activeHeader)._addClass(n,null,i.icons.header)),s||(this._removeClass(o,"ui-accordion-header-collapsed")._addClass(o,"ui-accordion-header-active","ui-state-active"),i.icons&&(r=o.children(".ui-accordion-header-icon"),this._removeClass(r,null,i.icons.header)._addClass(r,null,i.icons.activeHeader)),this._addClass(o.next(),"ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-hidden":"true"}),r.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&r.length?r.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,n){var r,i,a,o=this,s=0,l=e.css("box-sizing"),u=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},f=u&&c.down||c,d=function(){o._toggleComplete(n)};return"number"==typeof f&&(a=f),"string"==typeof f&&(i=f),i=i||f.easing||c.easing,a=a||f.duration||c.duration,t.length?e.length?(r=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:i,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(this.showProps,{duration:a,easing:i,complete:d,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?"content-box"===l&&(s+=n.now):"content"!==o.options.heightStyle&&(n.now=Math.round(r-t.outerHeight()-s),s=0)}})):t.animate(this.hideProps,a,i,d):e.animate(this.showProps,a,i,d)},_toggleComplete:function(e){var t=e.oldPanel,n=t.prev();this._removeClass(t,"ui-accordion-content-active"),this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),r=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&r.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),r=e(t.currentTarget);n[0]===r[0]&&(this._removeClass(r.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,r))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){var n=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));n&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),n=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),n.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var n,r,i,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,r=this.previousFilter||"",a=!1,i=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===r?a=!0:i=r+i,n=this._filterMenuItems(i),n=a&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),n=this._filterMenuItems(i)),n.length?(this.focus(t,n),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,r,i,a,o=this,s=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),r=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev(),r=e("<span>").data("ui-menu-submenu-caret",!0);o._addClass(r,"ui-menu-icon","ui-icon "+s),n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),this._addClass(r,"ui-menu","ui-widget ui-widget-content ui-front"),t=l.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")}),i=n.not(".ui-menu-item, .ui-menu-divider"),a=i.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(a,"ui-menu-item-wrapper"),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,r,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,a,o,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.outerHeight(),i<0?this.activeMenu.scrollTop(a+i):i+s>o&&this.activeMenu.scrollTop(a+i-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this._removeClass(r.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[t]()),this.focus(n,r)},nextPage:function(t){var n,r,i;return this.active?void(this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,r,i;return this.active?void(this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}});/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),a="textarea"===i,o="input"===i;this.isMultiLine=a||!o&&this._isContentEditable(this.element),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return t=!0,r=!0,void(n=!0);t=!1,r=!1,n=!1;var a=e.ui.keyCode;switch(i.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",i);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case a.UP:t=!0,this._keyEvent("previous",i);break;case a.DOWN:t=!0,this._keyEvent("next",i);break;case a.ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case a.TAB:this.menu.active&&this.menu.select(i);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||r.preventDefault());if(!n){var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}}},input:function(e){return r?(r=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,n){var r,i;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(i=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),r=n.item.attr("aria-label")||i.value,void(r&&e.trim(r).length&&(this.liveRegion.children().hide(),e("<div>").text(r).appendTo(this.liveRegion))))},menuselect:function(t,n){var r=n.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=r})),!1!==this._trigger("select",t,{item:r})&&this._value(r.value),this.term=this._value(),this.close(t),this.selectedItem=r}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),r=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||r)||(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}});var g=(e.ui.autocomplete,/ui-corner-([a-z]){2,6}/g);e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,function(r,i){var a,o={};if(i)return"controlgroupLabel"===r?(a=t.element.find(i),a.each(function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),t._addClass(a,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(a.get()))):void(e.fn[r]&&(o=t["_"+r+"Options"]?t["_"+r+"Options"]("middle"):{classes:{}},t.element.find(i).each(function(){var i=e(this),a=i[r]("instance"),s=e.widget.extend({},o);if("button"!==r||!i.parent(".ui-spinner").length){a||(a=i[r]()[r]("instance")),a&&(s.classes=t._resolveClassesValues(s.classes,a)),i[r](s);var l=i[r]("widget");e.data(l[0],"ui-controlgroup-data",a?a:i[r]("instance")),n.push(l[0])}})))}),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var n=e(this),r=n.data("ui-controlgroup-data");r&&r[t]&&r[t]()})},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",r=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n),this._addClass(e,null,r)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,r={classes:{}};return r.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],r},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,n){var r={};return e.each(t,function(i){var a=n.options.classes[i]||"";a=e.trim(a.replace(g,"")),r[i]=(a+" "+t[i]).replace(/\s+/g," ")}),r},_setOption:function(e,t){return"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"===e?void this._callChildMethod(t?"disable":"enable"):void this.refresh()},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],function(e,r){var i=t[r]().data("ui-controlgroup-data");if(i&&n["_"+i.widgetName+"Options"]){var a=n["_"+i.widgetName+"Options"](1===t.length?"only":r);a.classes=n._resolveClassesValues(a.classes,i),i.element[i.widgetName](a)}else n._updateCornerClass(t[r](),r)}),this._callChildMethod("refresh"))}});/*!
 * jQuery UI Checkboxradio 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n,r=this,i=this._super()||{};return this._readType(),n=this.element.labels(),this.label=e(n[n.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){r.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),t=this.element[0].disabled,null!=t&&(i.disabled=t),i},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t,n=this.element[0].name,r="input[name='"+e.ui.escapeSelector(n)+"']";return n?(t=this.form.length?e(this.form[0].elements).filter(r):e(r).filter(function(){return 0===e(this).form().length}),t.not(this.element)):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t)return this._super(e,t),"disabled"===e?(this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t)):void this.refresh()},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]);e.ui.checkboxradio;/*!
 * jQuery UI Button 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),e=this.element[0].disabled,null!=e&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var r="iconPosition"!==t,i=r?this.options.iconPosition:n,a="top"===i||"bottom"===i;this.icon?r&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),r&&this._addClass(this.icon,null,n),this._attachIcon(i),a?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),e.uiBackCompat!==!1&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){return"text"===e?void this._super("showLabel",t):("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),e.fn.button=function(t){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});e.ui.button;/*!
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.extend(e.ui,{datepicker:{version:"1.12.1"}});var m;e.extend(r.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,a;r=t.nodeName.toLowerCase(),i="div"===r||"span"===r,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),i),a.settings=e.extend({},n||{}),"input"===r?this._connectDatepicker(t,a):i&&this._inlineDatepicker(t,a)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]),r.hasClass(this.markerClassName)||(this._attachments(r,n),r.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var r,i,a,o=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[s?"before":"after"](n.append)),t.off("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),"focus"!==r&&"both"!==r||t.on("focus",this._showDatepicker),"button"!==r&&"both"!==r||(i=this._get(n,"buttonText"),a=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:i,title:i}):i)),t[s?"before":"after"](n.trigger),n.trigger.on("click",function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=0,r=0,i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,n){var r=e(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,r,i,a){var s,l,u,c,f,d=this._dialogInst;return d||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},e.data(this._dialogInput[0],"datepicker",d)),o(d.settings,i||{}),n=n&&n.constructor===Date?this._formatDate(d,n):n,this._dialogInput.val(n),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,f=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,u/2-150+f]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(t){var n,r=e(t),i=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===n?(i.append.remove(),i.trigger.remove(),r.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==n&&"span"!==n||r.removeClass(this.markerClassName).empty(),m===i&&(m=null))},_enableDatepicker:function(t){var n,r,i=e(t),a=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||(r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,r,i=e(t),a=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||(r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,r){var i,a,s,l,u=this._getInst(t);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):u?"all"===n?e.extend({},u.settings):this._get(u,n):null:(i=n||{},"string"==typeof n&&(i={},i[n]=r),void(u&&(this._curInst===u&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),s=this._getMinMaxDate(u,"min"),l=this._getMinMaxDate(u,"max"),o(u.settings,i),null!==s&&void 0!==i.dateFormat&&void 0===i.minDate&&(u.settings.minDate=this._formatDate(u,s)),null!==l&&void 0!==i.dateFormat&&void 0===i.maxDate&&(u.settings.maxDate=this._formatDate(u,l)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),u),this._autoSize(u),this._setDate(u,a),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,a=e.datepicker._getInst(t.target),o=!0,s=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),i[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,i[0]),n=e.datepicker._get(a,"onSelect"),n?(r=e.datepicker._formatDate(a),n.apply(a.input?a.input[0]:null,[r,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var r,i,a,s,l,u,c;r=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==r&&(e.datepicker._curInst.dpDiv.stop(!0,!0),r&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(r,"beforeShow"),a=i?i.apply(t,[t,r]):{},a!==!1&&(o(r.settings,a),r.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(r),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|="fixed"===e(this).css("position"),!s}),l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,r.dpDiv.empty(),r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(r),l=e.datepicker._checkOffset(r,l,s),r.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),r.inline||(u=e.datepicker._get(r,"showAnim"),c=e.datepicker._get(r,"duration"),r.dpDiv.css("z-index",n(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[u]?r.dpDiv.show(u,e.datepicker._get(r,"showOptions"),c):r.dpDiv[u||"show"](u?c:null),e.datepicker._shouldFocusInput(r)&&r.input.trigger("focus"),e.datepicker._curInst=r))}},_updateDatepicker:function(t){this.maxRows=4,m=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,r=this._getNumberOfMonths(t),i=r[1],o=17,s=t.dpDiv.find("."+this._dayOverClass+" a");s.length>0&&a.apply(s.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",o*i+"em"),t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+s?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>l&&l>i?Math.abs(n.left+i-l):0),n.top-=Math.min(n.top,n.top+a>u&&u>a?Math.abs(a+s):0),n},_findPos:function(t){for(var n,r=this._getInst(t),i=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(o,"showAnim"),r=this._get(o,"duration"),i=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),r,i):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id===e.datepicker._mainDivId||0!==n.parents("#"+e.datepicker._mainDivId).length||n.hasClass(e.datepicker.markerClassName)||n.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!n.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===r)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,r){var i=e(t),a=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(a,n+("M"===r?this._get(a,"showCurrentAtPos"):0),r),this._updateDatepicker(a))},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),a=this._getInst(i[0]);a["selected"+("M"===r?"Month":"Year")]=a["draw"+("M"===r?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(i)},_selectDay:function(t,n,r,i){var a,o=e(t);e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",i).html(),a.selectedMonth=a.currentMonth=n,a.selectedYear=a.currentYear=r,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),a=this._getInst(i[0]);n=null!=n?n:this._formatDate(a),a.input&&a.input.val(n),this._updateAlternate(a),r=this._get(a,"onSelect"),r?r.apply(a.input?a.input[0]:null,[n,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,a=this._get(t,"altField");a&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(a).val(i))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(null==t||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var i,a,o,s,l=0,u=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),f=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,d=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,_=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=_(e),r="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i="y"===e?r:1,a=new RegExp("^\\d{"+i+","+r+"}"),o=n.substring(l).match(a);if(!o)throw"Missing number at position "+l;return l+=o[0].length,parseInt(o[0],10)},x=function(t,r,i){var a=-1,o=e.map(_(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var r=t[1];if(n.substr(l,r.length).toLowerCase()===r.toLowerCase())return a=t[0],l+=r.length,!1}),a!==-1)return a+1;throw"Unknown name at position "+l},S=function(){if(n.charAt(l)!==t.charAt(i))throw"Unexpected literal at position "+l;l++};for(i=0;i<t.length;i++)if(b)"'"!==t.charAt(i)||_("'")?S():b=!1;else switch(t.charAt(i)){case"d":v=E("d");break;case"D":x("D",f,d);break;case"o":y=E("o");break;case"m":m=E("m");break;case"M":m=x("M",h,p);break;case"y":g=E("y");break;case"@":s=new Date(E("@")),g=s.getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"!":s=new Date((E("!")-this._ticksTo1970)/1e4),g=s.getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"'":_("'")?S():b=!0;break;default:S()}if(l<n.length&&(o=n.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(g===-1?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=c?0:-100)),y>-1)for(m=1,v=y;;){if(a=this._getDaysInMonth(g,m-1),v<=a)break;m++,v-=a}if(s=this._daylightSavingAdjust(new Date(g,m-1,v)),s.getFullYear()!==g||s.getMonth()+1!==m||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,a=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},u=function(e,t,n){var r=""+t;if(l(e))for(;r.length<n;)r="0"+r;return r},c=function(e,t,n,r){return l(e)?r[t]:n[t]},f="",d=!1;if(t)for(r=0;r<e.length;r++)if(d)"'"!==e.charAt(r)||l("'")?f+=e.charAt(r):d=!1;else switch(e.charAt(r)){case"d":f+=u("d",t.getDate(),2);break;case"D":f+=c("D",t.getDay(),i,a);break;case"o":f+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":f+=u("m",t.getMonth()+1,2);break;case"M":f+=c("M",t.getMonth(),o,s);break;case"y":f+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":f+=t.getTime();break;case"!":f+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?f+="'":d=!0;break;default:f+=e.charAt(r)}return f},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)"'"!==e.charAt(t)||i("'")?n+=e.charAt(t):r=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),a=i,o=this._getFormatConfig(e);try{a=this.parseDate(n,r,o)||i}catch(s){r=t?"":r}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=r?a.getDate():0,e.currentMonth=r?a.getMonth():0,e.currentYear=r?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=i.getFullYear(),o=i.getMonth(),s=i.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(n);u;){switch(u[2]||"d"){case"d":case"D":s+=parseInt(u[1],10);break;case"w":case"W":s+=7*parseInt(u[1],10);break;case"m":case"M":o+=parseInt(u[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(u[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(a,o))}u=l.exec(n)}return new Date(a,o,s)},o=null==n||""===n?r:"string"==typeof n?a(n):"number"==typeof n?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&"Invalid Date"===o.toString()?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),i===e.selectedMonth&&a===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,a,o,s,l,u,c,f,d,h,p,g,m,v,y,b,_,E,x,S,T,w,A,C,k,O,I,M,N,D,L,$,R,P,F,U,j=new Date,H=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),z=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),q=this._get(e,"hideIfNoPrevNext"),Y=this._get(e,"navigationAsDateFormat"),X=this._getNumberOfMonths(e),W=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),V=1!==X[0]||1!==X[1],K=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),J=e.drawMonth-W,ee=e.drawYear;if(J<0&&(J+=12,ee--),Q)for(t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-X[0]*X[1]+1,Q.getDate())),t=Z&&t<Z?Z:t;this._daylightSavingAdjust(new Date(ee,J,1))>t;)J--,J<0&&(J=11,ee--);for(e.drawMonth=J,e.drawYear=ee,n=this._get(e,"prevText"),n=Y?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,J-G,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,ee,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=Y?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,J+G,1)),this._getFormatConfig(e)):i,a=this._canAdjustMonth(e,1,ee,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?K:H,o=Y?this.formatDate(o,s,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(z?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(z?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,f=this._get(e,"showWeek"),d=this._get(e,"dayNames"),h=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",x=0;x<X[0];x++){for(S="",this.maxRows=4,T=0;T<X[1];T++){if(w=this._daylightSavingAdjust(new Date(ee,J,e.selectedDay)),A=" ui-corner-all",C="",V){if(C+="<div class='ui-datepicker-group",X[1]>1)switch(T){case 0:C+=" ui-datepicker-group-first",A=" ui-corner-"+(z?"right":"left");break;case X[1]-1:C+=" ui-datepicker-group-last",A=" ui-corner-"+(z?"left":"right");break;default:C+=" ui-datepicker-group-middle",A=""}C+="'>"}for(C+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===x?z?a:r:"")+(/all|right/.test(A)&&0===x?z?r:a:"")+this._generateMonthYearHeader(e,J,ee,Z,Q,x>0||T>0,p,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",k=f?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",E=0;E<7;E++)O=(E+c)%7,k+="<th scope='col'"+((E+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[O]+"'>"+h[O]+"</span></th>";for(C+=k+"</tr></thead><tbody>",I=this._getDaysInMonth(ee,J),ee===e.selectedYear&&J===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,I)),M=(this._getFirstDayOfMonth(ee,J)-c+7)%7,N=Math.ceil((M+I)/7),D=V&&this.maxRows>N?this.maxRows:N,this.maxRows=D,L=this._daylightSavingAdjust(new Date(ee,J,1-M)),$=0;$<D;$++){for(C+="<tr>",R=f?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(L)+"</td>":"",E=0;E<7;E++)P=m?m.apply(e.input?e.input[0]:null,[L]):[!0,""],F=L.getMonth()!==J,U=F&&!y||!P[0]||Z&&L<Z||Q&&L>Q,R+="<td class='"+((E+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(L.getTime()===w.getTime()&&J===e.selectedMonth&&e._keyEvent||b.getTime()===L.getTime()&&b.getTime()===w.getTime()?" "+this._dayOverClass:"")+(U?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+P[1]+(L.getTime()===K.getTime()?" "+this._currentClass:"")+(L.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!P[2]?"":" title='"+P[2].replace(/'/g,"&#39;")+"'")+(U?"":" data-handler='selectDay' data-event='click' data-month='"+L.getMonth()+"' data-year='"+L.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":U?"<span class='ui-state-default'>"+L.getDate()+"</span>":"<a class='ui-state-default"+(L.getTime()===H.getTime()?" ui-state-highlight":"")+(L.getTime()===K.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+L.getDate()+"</a>")+"</td>",L.setDate(L.getDate()+1),L=this._daylightSavingAdjust(L);C+=R+"</tr>"}J++,J>11&&(J=0,ee++),C+="</tbody></table>"+(V?"</div>"+(X[0]>0&&T===X[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),S+=C}_+=S}return _+=u,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,n,r,i,a,o,s){var l,u,c,f,d,h,p,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!m)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=r&&r.getFullYear()===n,u=i&&i.getFullYear()===n,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=r.getMonth())&&(!u||c<=i.getMonth())&&(_+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(f=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),h=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);return isNaN(t)?d:t},p=h(f[0]),g=Math.max(p,h(f[1]||"")),p=r?Math.max(p,r.getFullYear()):p,g=i?Math.min(g,i.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=g;p++)e.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&m&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,n){var r=e.selectedYear+("Y"===n?t:0),i=e.selectedMonth+("M"===n?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"===n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,s=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(s+=r)),(!i||t.getTime()>=i.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));
return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new r,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1";var v=(e.datepicker,e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),!1);e(document).on("mouseup",function(){v=!1});e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!v){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(r&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),v=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,v=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,n,r){var i,a=e.ui[t].prototype;for(i in r)a.plugins[i]=a.plugins[i]||[],a.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,a=e.plugins[t];if(a&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<a.length;i++)e.options[a[i][0]]&&a[i][1].apply(e.element,n)}},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")};/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),r=e(t.target);r.closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,a=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0],void(r&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,a,o=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,u=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,u=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?a-this.offset.click.left>=n[0]||a-this.offset.click.left>n[2]?a:a-this.offset.click.left>=n[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,a=this;a.positionAbs=r.positionAbs,a.helperProportions=r.helperProportions,a.offset.click=r.offset.click,a._intersectsWith(a.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(i=!1),i})),i?(a.isOver||(a.isOver=1,r._parent=n.helper.parent(),a.currentItem=n.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return n.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=r.offset.click.top,a.offset.click.left=r.offset.click.left,a.offset.parent.left-=r.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=r.offset.parent.top-a.offset.parent.top,r._trigger("toSortable",t),r.dropped=a.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,a.fromOutside=r),a.currentItem&&(a._mouseDrag(t),n.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),a=r.options;i.css("cursor")&&(a._cursor=i.css("cursor")),i.css("cursor",a.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),a=r.options;i.css("opacity")&&(a._opacity=i.css("opacity")),i.css("opacity",a.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,a=!1,o=r.scrollParentNotHidden[0],s=r.document[0];o!==s&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=a=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(s).scrollTop()<i.scrollSensitivity?a=e(s).scrollTop(e(s).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<i.scrollSensitivity&&(a=e(s).scrollTop(e(s).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(s).scrollLeft()<i.scrollSensitivity?a=e(s).scrollLeft(e(s).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<i.scrollSensitivity&&(a=e(s).scrollLeft(e(s).scrollLeft()+i.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,a,o,s,l,u,c,f,d,h,p=r.options,g=p.snapTolerance,m=n.offset.left,v=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(d=r.snapElements.length-1;d>=0;d--)l=r.snapElements[d].left-r.margins.left,u=l+r.snapElements[d].width,c=r.snapElements[d].top-r.margins.top,f=c+r.snapElements[d].height,v<l-g||m>u+g||b<c-g||y>f+g||!e.contains(r.snapElements[d].item.ownerDocument,r.snapElements[d].item)?(r.snapElements[d].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[d].item})),r.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(i=Math.abs(c-b)<=g,a=Math.abs(f-y)<=g,o=Math.abs(l-v)<=g,s=Math.abs(u-m)<=g,i&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),a&&(n.position.top=r._convertPositionTo("relative",{top:f,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:l-r.helperProportions.width}).left),s&&(n.position.left=r._convertPositionTo("relative",{top:0,left:u}).left)),h=i||a||o||s,"outer"!==p.snapMode&&(i=Math.abs(c-y)<=g,a=Math.abs(f-b)<=g,o=Math.abs(l-m)<=g,s=Math.abs(u-v)<=g,i&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),a&&(n.position.top=r._convertPositionTo("relative",{top:f-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:l}).left),s&&(n.position.left=r._convertPositionTo("relative",{top:0,left:u-r.helperProportions.width}).left)),!r.snapElements[d].snapping&&(i||a||o||s||h)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[d].item})),r.snapElements[d].snapping=i||a||o||s||h)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,a=r.options,o=e.makeArray(e(a.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});o.length&&(i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),a=r.options;i.css("zIndex")&&(a._zIndex=i.css("zIndex")),i.css("zIndex",a.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}});e.ui.draggable;/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0||(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n=this.options,r=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(r._removeClass("ui-resizable-autohide"),r._handles.show())}).on("mouseleave",function(){n.disabled||r.resizing||(r._addClass("ui-resizable-autohide"),r._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,r,i,a,o=this.options,s=this;if(this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),r=this.handles.split(","),this.handles={},n=0;n<r.length;n++)t=e.trim(r[n]),i="ui-resizable-"+t,a=e("<div>"),this._addClass(a,"ui-resizable-handle "+i),a.css({zIndex:o.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(a);this._renderAxis=function(t){var n,r,i,a;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),a=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=a&&a[1]?a[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)r=e(this.handles[n])[0],(r===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),a.containment&&(n+=e(a.containment).scrollLeft()||0,r+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,a=this.axis,o=t.pageX-i.left||0,s=t.pageY-i.top||0,l=this._change[a];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[t,o,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,r,i,a,o,s,l,u=this.options,c=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:c.sizeDiff.height,a=r?0:c.sizeDiff.width,o={width:c.helper.width()-a,height:c.helper.height()-i},s=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(e.extend(o,{top:l,left:s})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,r=a.minWidth/this.aspectRatio,n=a.maxHeight*this.aspectRatio,i=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),r>a.minHeight&&(a.minHeight=r),n<a.maxWidth&&(a.maxWidth=n),i<a.maxHeight&&(a.maxHeight=i)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),a&&u&&(e.left=s-t.minWidth),r&&u&&(e.left=s-t.maxWidth),o&&c&&(e.top=l-t.minHeight),i&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(r[t])||0,n[t]+=parseFloat(i[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,a=i.length&&/textarea/i.test(i[0].nodeName),o=a&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=a?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-o},u=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,c=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,c&&u?{top:c,left:u}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,a,o,s,l=e(this).resizable("instance"),u=l.options,c=l.element,f=u.containment,d=f instanceof e?f.get(0):/parent/.test(f)?c.parent().get(0):f;d&&(l.containerElement=e(d),/document/.test(f)||f===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(d),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=l._num(t.css("padding"+r))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=l.containerOffset,i=l.containerSize.height,a=l.containerSize.width,o=l._hasScroll(d,"left")?d.scrollWidth:a,s=l._hasScroll(d)?d.scrollHeight:i,l.parentData={element:d,left:r.left,top:r.top,width:o,height:s}))},resize:function(t){var n,r,i,a,o=e(this).resizable("instance"),s=o.options,l=o.containerOffset,u=o.position,c=o._aspectRatio||t.shiftKey,f={top:0,left:0},d=o.containerElement,h=!0;d[0]!==document&&/static/.test(d.css("position"))&&(f=l),u.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-f.left),c&&(o.size.height=o.size.width/o.aspectRatio,h=!1),o.position.left=s.helper?l.left:0),u.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio,h=!1),o.position.top=o._helper?l.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),i&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-f.left:o.offset.left-l.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-f.top:o.offset.top-l.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,c&&(o.size.height=o.size.width/o.aspectRatio,h=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,c&&(o.size.width=o.size.height*o.aspectRatio,h=!1)),h||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,a=t.containerElement,o=e(t.helper),s=o.offset(),l=o.outerWidth()-t.sizeDiff.width,u=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(a.css("position"))&&e(this).css({left:s.left-i.left-r.left,width:l,height:u}),t._helper&&!n.animate&&/static/.test(a.css("position"))&&e(this).css({left:s.left-i.left-r.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,a=r.originalSize,o=r.originalPosition,s={height:r.size.height-a.height||0,width:r.size.width-a.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},a=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var n=(r[t]||0)+(s[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),e.uiBackCompat!==!1&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,a=n.originalSize,o=n.originalPosition,s=n.axis,l="number"==typeof r.grid?[r.grid,r.grid]:r.grid,u=l[0]||1,c=l[1]||1,f=Math.round((i.width-a.width)/u)*u,d=Math.round((i.height-a.height)/c)*c,h=a.width+f,p=a.height+d,g=r.maxWidth&&r.maxWidth<h,m=r.maxHeight&&r.maxHeight<p,v=r.minWidth&&r.minWidth>h,y=r.minHeight&&r.minHeight>p;r.grid=l,v&&(h+=u),y&&(p+=c),g&&(h-=u),m&&(p-=c),/^(se|s|e)$/.test(s)?(n.size.width=h,n.size.height=p):/^(ne)$/.test(s)?(n.size.width=h,n.size.height=p,n.position.top=o.top-d):/^(sw)$/.test(s)?(n.size.width=h,n.size.height=p,n.position.left=o.left-f):((p-c<=0||h-u<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),p-c>0?(n.size.height=p,n.position.top=o.top-d):(p=c-t.height,n.size.height=p,n.position.top=o.top+a.height-p),h-u>0?(n.size.width=h,n.position.left=o.left-f):(h=u-t.width,n.size.width=h,n.position.left=o.left+a.width-h))}});e.ui.resizable;/*!
 * jQuery UI Dialog 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var r=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,i);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),r=!0),r&&!n&&this._trigger("focus",t),r},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]),n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==r[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){i.trigger("focus")}),t.preventDefault()):(this._delay(function(){r.trigger("focus")}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(n,function(n,r){var i,a;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,a={icon:r.icon,iconPosition:r.iconPosition,showLabel:r.showLabel,icons:r.icons,text:r.text},delete r.click,delete r.icon,delete r.iconPosition,delete r.showLabel,delete r.icons,"boolean"==typeof r.text&&delete r.text,e("<button></button>",r).button(a).appendTo(t.uiButtonSet).on("click",function(){i.apply(t.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,i){n._addClass(e(this),"ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",r,t(i))},drag:function(e,r){n._trigger("drag",e,t(r))},stop:function(i,a){var o=a.offset.left-n.document.scrollLeft(),s=a.offset.top-n.document.scrollTop();r.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(s>=0?"+":"")+s,of:n.window},n._removeClass(e(this),"ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",i,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,r=this.options,i=r.resizable,a=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(r,i){n._addClass(e(this),"ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",r,t(i))},resize:function(e,r){n._trigger("resize",e,t(r))},stop:function(i,a){var o=n.uiDialog.offset(),s=o.left-n.document.scrollLeft(),l=o.top-n.document.scrollTop();r.height=n.uiDialog.height(),r.width=n.uiDialog.width(),r.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(l>=0?"+":"")+l,of:n.window},n._removeClass(e(this),"ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",i,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);n!==-1&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,r=!1,i={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(r=!0),e in n.resizableRelatedOptions&&(i[e]=t)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(t,n){var r,i,a=this.uiDialog;"disabled"!==t&&(this._super(t,n),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&(r=a.is(":data(ui-draggable)"),r&&!n&&a.draggable("destroy"),!r&&n&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(i=a.is(":data(ui-resizable)"),i&&!n&&a.resizable("destroy"),i&&"string"==typeof n&&a.resizable("option","handles",n),i||n===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-e):"none","auto"===r.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}});e.ui.dialog;/*!
 * jQuery UI Droppable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var r=e.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!(!r||(r.currentItem||r.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===r.options.scope&&n.accept.call(n.element[0],r.currentItem||r.element)&&y(r,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t))return i=!0,!1}),!i&&(!!this.accept.call(this.element[0],r.currentItem||r.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(r)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var y=e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,r,i){if(!n.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,s=a+t.helperProportions.width,l=o+t.helperProportions.height,u=n.offset.left,c=n.offset.top,f=u+n.proportions().width,d=c+n.proportions().height;switch(r){case"fit":return u<=a&&s<=f&&c<=o&&l<=d;case"intersect":return u<a+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&c<o+t.helperProportions.height/2&&l-t.helperProportions.height/2<d;case"pointer":return e(i.pageY,c,n.proportions().height)&&e(i.pageX,u,n.proportions().width);case"touch":return(o>=c&&o<=d||l>=c&&l<=d||o<c&&l>d)&&(a>=u&&a<=f||s>=u&&s<=f||a<u&&s>f);default:return!1}}}();e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<a.length;r++)if(!(a[r].options.disabled||t&&!a[r].accept.call(a[r].element[0],t.currentItem||t.element))){for(i=0;i<s.length;i++)if(s[i]===a[r].element[0]){a[r].proportions().height=0;continue e}a[r].visible="none"!==a[r].element.css("display"),a[r].visible&&("mousedown"===o&&a[r]._activate.call(a[r],n),a[r].offset=a[r].element.offset(),a[r].proportions({width:a[r].element[0].offsetWidth,height:a[r].element[0].offsetHeight}))}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&y(t,this,this.options.tolerance,n)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,i,a,o=y(t,this,this.options.tolerance,n),s=!o&&this.isover?"isout":o&&!this.isover?"isover":null;s&&(this.options.greedy&&(i=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===i}),a.length&&(r=e(a[0]).droppable("instance"),r.greedyChild="isover"===s)),r&&"isover"===s&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),r&&"isout"===s&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.uiBackCompat!==!1&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});e.ui.droppable,e.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(n.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each(function(){var n=e(this),r=n.offset(),i={left:r.left-t.elementPos.left,top:r.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:n,left:i.left,top:i.top,right:i.left+n.outerWidth(),bottom:i.top+n.outerHeight(),startselected:!1,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||t.ctrlKey||(n._removeClass(r.$element,"ui-selected"),r.selected=!1,n._addClass(r.$element,"ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),n._removeClass(i.$element,r?"ui-unselecting":"ui-selected")._addClass(i.$element,r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,r=this,i=this.options,a=this.opos[0],o=this.opos[1],s=t.pageX,l=t.pageY;return a>s&&(n=s,s=a,a=n),o>l&&(n=l,l=o,o=n),this.helper.css({left:a,top:o,width:s-a,height:l-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),u=!1,c={};n&&n.element!==r.element[0]&&(c.left=n.left+r.elementPos.left,c.right=n.right+r.elementPos.left,c.top=n.top+r.elementPos.top,c.bottom=n.bottom+r.elementPos.top,"touch"===i.tolerance?u=!(c.left>s||c.right<a||c.top>l||c.bottom<o):"fit"===i.tolerance&&(u=c.left>a&&c.right<s&&c.top>o&&c.bottom<l),u?(n.selected&&(r._removeClass(n.$element,"ui-selected"),n.selected=!1),n.unselecting&&(r._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1),n.selecting||(r._addClass(n.$element,"ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(r._removeClass(n.$element,"ui-selecting"),n.selecting=!1,r._addClass(n.$element,"ui-selected"),n.selected=!0):(r._removeClass(n.$element,"ui-selecting"),n.selecting=!1,n.startselected&&(r._addClass(n.$element,"ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(r._removeClass(n.$element,"ui-selected"),n.selected=!1,r._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");n._removeClass(r.$element,"ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");n._removeClass(r.$element,"ui-selecting")._addClass(r.$element,"ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,n=this,r=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(r).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){n._rendered||n._refreshMenu()})},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,n){e.preventDefault(),t._setSelection(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var r=n.item.data("ui-selectmenu-item");null!=t.focusIndex&&r.index!==t.focusIndex&&(t._trigger("focus",e,{item:r}),t.isOpen||t._select(r,e)),t.focusIndex=r.index,t.button.attr("aria-activedescendant",t.menuItems.eq(r.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var n=e("<span>");return this._setText(n,t.label),this._addClass(n,"ui-selectmenu-text"),n},_renderMenu:function(t,n){var r=this,i="";e.each(n,function(n,a){var o;a.optgroup!==i&&(o=e("<li>",{text:a.optgroup}),r._addClass(o,"ui-selectmenu-optgroup","ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),o.appendTo(t),i=a.optgroup),r._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var r=e("<li>"),i=e("<div>",{title:n.element.attr("title")});return n.disabled&&this._addClass(r,null,"ui-state-disabled"),this._setText(i,n.label),r.append(i).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,r,i=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),i+=":not(.ui-state-disabled)"),r="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](i).eq(-1):n[e+"All"](i).eq(0),r.length&&this.menuInstance.focus(t,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;return e===!1?void this.button.css("width",""):(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(e))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var n=this,r=[];t.each(function(t,i){r.push(n._parseOption(e(i),t))}),this.items=r},_parseOption:function(e,t){var n=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle"),a="<span tabindex='0'></span>",o=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),t=i.length;t<n;t++)o.push(a);this.handles=i.add(e(o.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,a,o,s,l,u,c=this,f=this.options;return!f.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-c.values(t));(i>n||i===n&&(t===c._lastChangedValue||c.values(t)===f.min))&&(i=n,a=e(this),o=t)}),s=this._start(t,o),s!==!1&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(a,null,"ui-state-active"),a.trigger("focus"),l=a.offset(),u=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-l.left-a.width()/2,top:t.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,a;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),a=this._valueMin()+r*i,this._trimAlignValue(a)},_uiHash:function(e,t,n){var r={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(r.value=void 0!==t?t:this.values(e),r.values=n||this.values()),r},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,n){var r,i,a=this.value(),o=this.values();this._hasMultipleValues()&&(i=this.values(t?0:1),a=this.values(t),2===this.options.values.length&&this.options.range===!0&&(n=0===t?Math.min(i,n):Math.max(i,n)),o[t]=n),n!==a&&(r=this._trigger("slide",e,this._uiHash(t,n,o)),r!==!1&&(this._hasMultipleValues()?this.values(t,n):this.value(n)))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var r,i,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(r=this.options.values,i=arguments[0],a=0;a<r.length;a+=1)r[a]=this._trimAlignValue(i[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,n){var r,i=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),this._super(t,n),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=i-1;r>=0;r--)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(n=this.options.values.slice(),r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return 2*Math.abs(n)>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,r=Math.round((e-t)/n)*n;e=r+t,e>this.options.max&&(e-=n),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,n,r,i,a,o=this.options.range,s=this.options,l=this,u=!this._animateOff&&s.animate,c={};this._hasMultipleValues()?this.handles.each(function(r){n=(l.values(r)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[u?"animate":"css"](c,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===r&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},s.animate),1===r&&l.range[u?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===r&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},s.animate),1===r&&l.range[u?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n}):(r=this.value(),i=this._valueMin(),a=this._valueMax(),n=a!==i?(r-i)/(a-i)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:100-n+"%"},s.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(t){var n,r,i,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),n=this._start(t,o),n===!1))return}switch(a=this.options.step,r=i=this._hasMultipleValues()?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-a)}this._slide(t,o,i)},keyup:function(t){
var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),this._removeClass(e(t.target),null,"ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return r=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(r=e(t.target)),!!r&&(!(this.options.handle&&!n&&(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=r,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,r){var i,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,a,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),s!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],a=this._intersectsWithPointer(r),a&&r.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===i||e.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],i))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,c=this.offset.click.left,f="x"===this.options.axis||r+u>s&&r+u<l,d="y"===this.options.axis||t+c>a&&t+c<o,h=f&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:a<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&s<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,n,r="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),a=r&&i;return!!a&&(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){s.push(this)}var r,i,a,o,s=[],l=[],u=this._connectWith();if(u&&t)for(r=u.length-1;r>=0;r--)for(a=e(u[r],this.document[0]),i=a.length-1;i>=0;i--)o=e.data(a[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&l.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=l.length-1;r>=0;r--)l[r][0].each(n);return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,a,o,s,l,u,c=this.items,f=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(i=e(d[n],this.document[0]),r=i.length-1;r>=0;r--)a=e.data(i[r],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(f.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(n=f.length-1;n>=0;n--)for(o=f[n][1],s=f[n][0],r=0,u=s.length;r<u;r++)l=e(s[r]),l.data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,a;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),a=i.offset(),r.left=a.left,r.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)a=this.containers[n].element.offset(),this.containers[n].containerCache.left=a.left,this.containers[n].containerCache.top=a.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]);return t._addClass(i,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(i,"ui-sortable-helper"),"tbody"===r?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===r?t._createTrPlaceholder(t.currentItem,i):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){n&&!r.forcePlaceholderSize||(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,a,o,s,l,u,c,f,d=null,h=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&e.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(i=1e4,a=null,c=d.floating||this._isFloating(this.currentItem),o=c?"left":"top",s=c?"width":"height",f=c?"pageX":"pageY",r=this.items.length-1;r>=0;r--)e.contains(this.containers[h].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(l=this.items[r].item.offset()[o],u=!1,t[f]-l>this.items[r][s]/2&&(u=!0),Math.abs(t[f]-l)<i&&(i=Math.abs(t[f]-l),a=this.items[r],this.direction=u?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),r[0].style.width&&!n.forceHelperSize||r.width(this.currentItem.width()),r[0].style.height&&!n.forceHelperSize||r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,a=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0],a=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function n(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var r,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)"auto"!==this._storedCSS[r]&&"static"!==this._storedCSS[r]||(this._storedCSS[r]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)t||i.push(n("deactivate",this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(n("out",this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(r=0;r<i.length;r++)i[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}});e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);null!=i&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var t=this.element[0]===e.ui.safeActiveElement(this.document[0]);t||(this.element.trigger("focus"),this.previous=r,this._delay(function(){this.previous=r}))}var r;r=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return this._start(t)!==!1&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&this._trigger("start",e)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=null!==r.min?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==r.max&&e>r.max?r.max:null!==r.min&&e<r.min?r.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var n,r,i;return"culture"===e||"numberFormat"===e?(n=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(n))):("max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(r=this.buttons.first().find(".ui-icon"),this._removeClass(r,null,this.options.icons.up),this._addClass(r,null,t.up),i=this.buttons.last().find(".ui-icon"),this._removeClass(i,null,this.options.icons.down),this._addClass(i,null,t.down)),void this._super(e,t))},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:s(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:s(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:s(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:s(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:s(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void s(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.uiBackCompat!==!1&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});e.ui.spinner;/*!
 * jQuery UI Tabs 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,r;n=t.href.replace(e,""),r=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(i){}try{r=decodeURIComponent(r)}catch(i){}return t.hash.length>1&&n===r}}(),_create:function(){var t=this,n=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);return null===t&&(r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&t!==-1||(t=!!this.tabs.length&&0)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=!n&&0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(e.ui.safeActiveElement(this.document[0])).closest("li"),r=this.tabs.index(n),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(r);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(r!==this.options.active&&r);default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){function r(){return t>i&&(t=0),t<0&&(t=i),t}for(var i=this.tabs.length-1;e.inArray(r(),this.options.disabled)!==-1;)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){return"active"===e?void this._activate(t):(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,r=this.anchors,i=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each(function(n,r){var i,a,o,s=e(r).uniqueId().attr("id"),l=e(r).closest("li"),u=l.attr("aria-controls");t._isLocal(r)?(i=r.hash,o=i.substring(1),a=t.element.find(t._sanitizeSelector(i))):(o=l.attr("aria-controls")||e({}).uniqueId()[0].id,i="#"+o,a=t.element.find(i),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[n-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":o,"aria-labelledby":s}),a.attr("aria-labelledby",s)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),n&&(this._off(n.not(this.tabs)),this._off(r.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var n,r,i;for(e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),i=0;r=this.tabs[i];i++)n=e(r),t===!0||e.inArray(i,t)!==-1?(n.attr("aria-disabled","true"),this._addClass(n,null,"ui-state-disabled")):(n.removeAttr("aria-disabled"),this._removeClass(n,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,t===!0)},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();"fill"===t?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),a=i.closest("li"),o=a[0]===r[0],s=o&&n.collapsible,l=s?e():this._getPanelForTab(a),u=r.length?this._getPanelForTab(r):e(),c={oldTab:r,oldPanel:u,newTab:s?e():a,newPanel:l};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,c)===!1||(n.active=!s&&this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),u.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(a),t),this._toggle(t,c))},_toggle:function(t,n){function r(){a.running=!1,a._trigger("activate",t,n)}function i(){a._addClass(n.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,r):(o.show(),r())}var a=this,o=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){a._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),i()}):(this._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s.hide(),i()),s.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&s.length?n.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);r[0]!==this.active[0]&&(r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;n!==!1&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setOptionDisabled(n))},disable:function(t){var n=this.options.disabled;if(n!==!0){if(void 0===t)n=!0;else{if(t=this._getIndex(t),e.inArray(t,n)!==-1)return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setOptionDisabled(n)}},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),a=i.find(".ui-tabs-anchor"),o=this._getPanelForTab(i),s={tab:i,panel:o},l=function(e,t){"abort"===t&&r.panels.stop(!1,!0),r._removeClass(i,"ui-tabs-loading"),o.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(i,"ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,i){setTimeout(function(){o.html(e),r._trigger("load",n,s),l(i,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,a){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:a},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}});e.ui.tabs;/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,n){var r=this;this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){r._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r.element[0],t.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);r.length&&!r.data("ui-tooltip-id")&&(r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&r.parents().each(function(){var t,r=e(this);r.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),r.attr("title")&&(r.uniqueId(),n.parents[this.id]={element:this,title:r.attr("title")},r.attr("title",""))}),this._registerCloseHandlers(t,r),this._updateContent(r,t))},_updateContent:function(e,t){var n,r=this.options.content,i=this,a=t?t.type:null;return"string"==typeof r||r.nodeType||r.jquery?this._open(t,e,r):(n=r.call(e[0],function(n){i._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=a),this._open(t,e,n))})}),void(n&&this._open(t,e,n)))},_open:function(t,n,r){function i(e){u.of=e,o.is(":hidden")||o.position(u)}var a,o,s,l,u=e.extend({},this.options.position);if(r){if(a=this._find(n))return void a.tooltip.find(".ui-tooltip-content").html(r);n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),a=this._tooltip(n),o=a.tooltip,this._addDescribedBy(n,o.attr("id")),o.find(".ui-tooltip-content").html(r),this.liveRegion.children().hide(),l=e("<div>").html(o.find(".ui-tooltip-content").html()),l.removeAttr("name").find("[name]").removeAttr("name"),l.removeAttr("id").find("[id]").removeAttr("id"),l.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:i}),i(t)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){o.is(":visible")&&(i(u.of),clearInterval(s))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,n){var r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var r=e.Event(t);r.currentTarget=n[0],this.close(r,!0)}}};n[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(r.mouseleave="close"),t&&"focusin"!==t.type||(r.focusout="close"),this._on(!0,n,r)},close:function(t){var n,r=this,i=e(t?t.currentTarget:this.element),a=this._find(i);return a?(n=a.tooltip,void(a.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),a.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){r._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete r.parents[t]}),a.closing=!0,this._trigger("close",t,{tooltip:n}),a.hiding||(a.closing=!1)))):void i.removeData("ui-tooltip-open")},_tooltip:function(t){var n=e("<div>").attr("role","tooltip"),r=e("<div>").appendTo(n),i=n.uniqueId().attr("id");return this._addClass(r,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(t)),this.tooltips[i]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur"),a=r.element;i.target=i.currentTarget=a[0],t.close(i,!0),e("#"+n).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),e.uiBackCompat!==!1&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}});e.ui.tooltip}),/**
 * @license AngularJS v1.5.11
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e){"use strict";function t(e,t){return t=t||Error,function(){var n,r,i=2,a=arguments,o=a[0],s="["+(e?e+":":"")+o+"] ",l=a[1];for(s+=l.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+i;return n<a.length?be(a[n]):e}),s+="\nhttp://errors.angularjs.org/1.5.11/"+(e?e+"/":"")+o,r=i,n="?";r<a.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent(be(a[r]));return new t(s)}}function n(e){if(null==e||A(e))return!1;if(ri(e)||E(e)||Yr&&e instanceof Yr)return!0;var t="length"in Object(e)&&e.length;return x(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function r(e,t,i){var a,o;if(e)if(T(e))for(a in e)"prototype"===a||"length"===a||"name"===a||e.hasOwnProperty&&!e.hasOwnProperty(a)||t.call(i,e[a],a,e);else if(ri(e)||n(e)){var s="object"!=typeof e;for(a=0,o=e.length;a<o;a++)(s||a in e)&&t.call(i,e[a],a,e)}else if(e.forEach&&e.forEach!==r)e.forEach(t,i,e);else if(_(e))for(a in e)t.call(i,e[a],a,e);else if("function"==typeof e.hasOwnProperty)for(a in e)e.hasOwnProperty(a)&&t.call(i,e[a],a,e);else for(a in e)Ur.call(e,a)&&t.call(i,e[a],a,e);return e}function i(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function a(e){return function(t,n){e(n,t)}}function o(){return++ti}function s(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function l(e,t,n){for(var r=e.$$hashKey,i=0,a=t.length;i<a;++i){var o=t[i];if(b(o)||T(o))for(var u=Object.keys(o),c=0,f=u.length;c<f;c++){var d=u[c],h=o[d];n&&b(h)?S(h)?e[d]=new Date(h.valueOf()):w(h)?e[d]=new RegExp(h):h.nodeName?e[d]=h.cloneNode(!0):$(h)?e[d]=h.clone():(b(e[d])||(e[d]=ri(h)?[]:{}),l(e[d],[h],!0)):e[d]=h}}return s(e,r),e}function u(e){return l(e,Gr.call(arguments,1),!1)}function c(e){return l(e,Gr.call(arguments,1),!0)}function f(e){return parseInt(e,10)}function d(e,t){return u(Object.create(e),t)}function h(){}function p(e){return e}function g(e){return function(){return e}}function m(e){return T(e.toString)&&e.toString!==Zr}function v(e){return"undefined"==typeof e}function y(e){return"undefined"!=typeof e}function b(e){return null!==e&&"object"==typeof e}function _(e){return null!==e&&"object"==typeof e&&!Qr(e)}function E(e){return"string"==typeof e}function x(e){return"number"==typeof e}function S(e){return"[object Date]"===Zr.call(e)}function T(e){return"function"==typeof e}function w(e){return"[object RegExp]"===Zr.call(e)}function A(e){return e&&e.window===e}function C(e){return e&&e.$evalAsync&&e.$watch}function k(e){return"[object File]"===Zr.call(e)}function O(e){return"[object FormData]"===Zr.call(e)}function I(e){return"[object Blob]"===Zr.call(e)}function M(e){return"boolean"==typeof e}function N(e){return e&&T(e.then)}function D(e){return e&&x(e.length)&&ii.test(Zr.call(e))}function L(e){return"[object ArrayBuffer]"===Zr.call(e)}function $(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function R(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function P(e){return jr(e.nodeName||e[0]&&e[0].nodeName)}function F(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function U(e,t){function n(e,t){var n,r=t.$$hashKey;if(ri(e))for(var a=0,o=e.length;a<o;a++)t.push(i(e[a]));else if(_(e))for(n in e)t[n]=i(e[n]);else if(e&&"function"==typeof e.hasOwnProperty)for(n in e)e.hasOwnProperty(n)&&(t[n]=i(e[n]));else for(n in e)Ur.call(e,n)&&(t[n]=i(e[n]));return s(t,r),t}function i(e){if(!b(e))return e;var t=o.indexOf(e);if(t!==-1)return l[t];if(A(e)||C(e))throw Jr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=a(e);return void 0===i&&(i=ri(e)?[]:Object.create(Qr(e)),r=!0),o.push(e),l.push(i),r?n(e,i):i}function a(e){switch(Zr.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(i(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(T(e.cloneNode))return e.cloneNode(!0)}var o=[],l=[];if(t){if(D(t)||L(t))throw Jr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw Jr("cpi","Can't copy! Source and destination are identical.");return ri(t)?t.length=0:r(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),o.push(e),l.push(t),n(e,t)}return i(e)}function j(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,a=typeof e,o=typeof t;if(a===o&&"object"===a){if(!ri(e)){if(S(e))return!!S(t)&&j(e.getTime(),t.getTime());if(w(e))return!!w(t)&&e.toString()===t.toString();if(C(e)||C(t)||A(e)||A(t)||ri(t)||S(t)||w(t))return!1;i=ge();for(r in e)if("$"!==r.charAt(0)&&!T(e[r])){if(!j(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&y(t[r])&&!T(t[r]))return!1;return!0}if(!ri(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!j(e[r],t[r]))return!1;return!0}}return!1}function H(e,t,n){return e.concat(Gr.call(t,n))}function z(e,t){return Gr.call(e,t||0)}function B(e,t){var n=arguments.length>2?z(arguments,2):[];return!T(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,H(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function q(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:A(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":C(n)&&(r="$SCOPE"),r}function Y(e,t){if(!v(e))return x(t)||(t=t?2:null),JSON.stringify(e,q,t)}function X(e){return E(e)?JSON.parse(e):e}function W(e,t){e=e.replace(ui,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return ni(n)?t:n}function G(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function V(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset(),i=W(t,r);return G(e,n*(i-r))}function K(e){e=Yr(e).clone();try{e.empty()}catch(t){}var n=Yr("<div>").append(e).html();try{return e[0].nodeType===mi?jr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+jr(t)})}catch(t){return jr(n)}}function Z(e){try{return decodeURIComponent(e)}catch(t){}}function Q(e){var t={};return r((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),n!==-1&&(r=e.substring(0,n),i=e.substring(n+1)),r=Z(r),y(r)&&(i=!y(i)||Z(i),Ur.call(t,r)?ri(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function J(e){var t=[];return r(e,function(e,n){ri(e)?r(e,function(e){t.push(te(n,!0)+(e===!0?"":"="+te(e,!0)))}):t.push(te(n,!0)+(e===!0?"":"="+te(e,!0)))}),t.length?t.join("&"):""}function ee(e){return te(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function te(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ne(e,t){var n,r,i=ci.length;for(r=0;r<i;++r)if(n=ci[r]+t,E(n=e.getAttribute(n)))return n;return null}function re(e){var t=e.currentScript,n=t&&t.getAttribute("src");if(!n)return!0;var r=e.createElement("a");if(r.href=n,e.location.origin===r.origin)return!0;switch(r.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}function ie(t,n){var i,a,o={};if(r(ci,function(e){var n=e+"app";!i&&t.hasAttribute&&t.hasAttribute(n)&&(i=t,a=t.getAttribute(n))}),r(ci,function(e){var n,r=e+"app";!i&&(n=t.querySelector("["+r.replace(":","\\:")+"]"))&&(i=n,a=n.getAttribute(r))}),i){if(!fi)return void e.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==ne(i,"strict-di"),n(i,a?[a]:[],o)}}function ae(t,n,i){b(i)||(i={});var a={strictDi:!1};i=u(a,i);var o=function(){if(t=Yr(t),t.injector()){var r=t[0]===e.document?"document":K(t);throw Jr("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var a=it(n,i.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),a},s=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&s.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(s,"")),e&&!l.test(e.name)?o():(e.name=e.name.replace(l,""),ei.resumeBootstrap=function(e){return r(e,function(e){n.push(e)}),o()},void(T(ei.resumeDeferredBootstrap)&&ei.resumeDeferredBootstrap()))}function oe(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function se(e){var t=ei.element(e).injector();if(!t)throw Jr("test","no injector found for element argument to getTestability");return t.get("$$testability")}function le(e,t){return t=t||"_",e.replace(di,function(e,n){return(n?t:"")+e.toLowerCase()})}function ue(){var t;if(!hi){var n=li();Xr=v(n)?e.jQuery:n?e[n]:void 0,Xr&&Xr.fn.on?(Yr=Xr,u(Xr.fn,{scope:$i.scope,isolateScope:$i.isolateScope,controller:$i.controller,injector:$i.injector,inheritedData:$i.inheritedData}),t=Xr.cleanData,Xr.cleanData=function(e){for(var n,r,i=0;null!=(r=e[i]);i++)n=Xr._data(r,"events"),n&&n.$destroy&&Xr(r).triggerHandler("$destroy");t(e)}):Yr=Ie,ei.element=Yr,hi=!0}}function ce(e,t,n){if(!e)throw Jr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function fe(e,t,n){return n&&ri(e)&&(e=e[e.length-1]),ce(T(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function de(e,t){if("hasOwnProperty"===e)throw Jr("badname","hasOwnProperty is not a valid {0} name",t)}function he(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;s<o;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&T(e)?B(a,e):e}function pe(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=Yr(Gr.call(e,0,i))),t.push(n));return t||e}function ge(){return Object.create(null)}function me(e){function n(e,t,n){return e[t]||(e[t]=n())}var r=t("$injector"),i=t("ng"),a=n(e,"angular",Object);return a.$$minErr=a.$$minErr||t,n(a,"module",function(){var e={};return function(t,a,o){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(t,"module"),a&&e.hasOwnProperty(t)&&(e[t]=null),n(e,t,function(){function e(e,t,n,r){return r||(r=i),function(){return r[n||"push"]([e,t,arguments]),c}}function n(e,n){return function(r,a){return a&&T(a)&&(a.$$moduleName=t),i.push([e,n,arguments]),c}}if(!a)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",t);var i=[],s=[],l=[],u=e("$injector","invoke","push",s),c={_invokeQueue:i,_configBlocks:s,_runBlocks:l,requires:a,name:t,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:u,run:function(e){return l.push(e),this}};return o&&u(o),c})}})}function ve(e,t){if(ri(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(b(e)){t=t||{};for(var i in e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i])}return t||e}function ye(e){var t=[];return JSON.stringify(e,function(e,n){if(n=q(e,n),b(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function be(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):v(e)?"undefined":"string"!=typeof e?ye(e):e}function _e(n){u(n,{bootstrap:ae,copy:U,extend:u,merge:c,equals:j,element:Yr,forEach:r,injector:it,noop:h,bind:B,toJson:Y,fromJson:X,identity:p,isUndefined:v,isDefined:y,isString:E,isFunction:T,isObject:b,isNumber:x,isElement:$,isArray:ri,version:_i,isDate:S,lowercase:jr,uppercase:Hr,callbacks:{$$counter:0},getTestability:se,$$minErr:t,$$csp:si,reloadWithDebugInfo:oe}),(Wr=me(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:An}),e.provider("$compile",gt).directive({a:no,input:xo,textarea:xo,form:so,script:vs,select:_s,option:Es,ngBind:wo,ngBindHtml:Co,ngBindTemplate:Ao,ngClass:Oo,ngClassEven:Mo,ngClassOdd:Io,ngCloak:No,ngController:Do,ngForm:lo,ngHide:cs,ngIf:Ro,ngInclude:Po,ngInit:Uo,ngNonBindable:ts,ngPluralize:as,ngRepeat:os,ngShow:us,ngStyle:fs,ngSwitch:ds,ngSwitchWhen:hs,ngSwitchDefault:ps,ngOptions:is,ngTransclude:ms,ngModel:Qo,ngList:jo,ngChange:ko,pattern:Ss,ngPattern:Ss,required:xs,ngRequired:xs,minlength:ws,ngMinlength:ws,maxlength:Ts,ngMaxlength:Ts,ngValue:To,ngModelOptions:es}).directive({ngInclude:Fo}).directive(ro).directive(Lo),e.provider({$anchorScroll:at,$animate:Zi,$animateCss:ea,$$animateJs:Vi,$$animateQueue:Ki,$$AnimateRunner:Ji,$$animateAsyncRun:Qi,$browser:ft,$cacheFactory:dt,$controller:Et,$document:xt,$exceptionHandler:St,$filter:jn,$$forceReflow:oa,$interpolate:Pt,$interval:Ft,$http:Dt,$httpParamSerializer:wt,$httpParamSerializerJQLike:At,$httpBackend:$t,$xhrFactory:Lt,$jsonpCallbacks:ga,$location:Jt,$log:en,$parse:_n,$rootScope:wn,$q:En,$$q:xn,$sce:In,$sceDelegate:On,$sniffer:Mn,$templateCache:ht,$templateRequest:Nn,$$testability:Dn,$timeout:Ln,$window:Pn,$$rAF:Tn,$$jqLite:Ze,$$HashMap:Ui,$$cookieReader:Un})}])}function Ee(){return++xi}function xe(e){return e.replace(wi,function(e,t,n,r){return r?n.toUpperCase():n}).replace(Ai,"Moz$1")}function Se(e){return!Ii.test(e)}function Te(e){var t=e.nodeType;return t===pi||!t||t===yi}function we(e){for(var t in Ei[e.ng339])return!0;return!1}function Ae(e){for(var t=0,n=e.length;t<n;t++)Le(e[t])}function Ce(e,t){var n,i,a,o,s=t.createDocumentFragment(),l=[];if(Se(e))l.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),i=(Mi.exec(e)||["",""])[1].toLowerCase(),a=Di[i]||Di._default,n.innerHTML=a[1]+e.replace(Ni,"<$1></$2>")+a[2],o=a[0];o--;)n=n.lastChild;l=H(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",r(l,function(e){s.appendChild(e)}),s}function ke(t,n){n=n||e.document;var r;return(r=Oi.exec(t))?[n.createElement(r[1])]:(r=Ce(t,n))?r.childNodes:[]}function Oe(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Ie(e){if(e instanceof Ie)return e;var t;if(E(e)&&(e=ai(e),t=!0),!(this instanceof Ie)){if(t&&"<"!==e.charAt(0))throw ki("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ie(e)}t?je(this,ke(e)):je(this,e)}function Me(e){return e.cloneNode(!0)}function Ne(e,t){if(t||Le(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;r<i;r++)Le(n[r])}function De(e,t,n,i){if(y(i))throw ki("offargs","jqLite#off() does not support the `selector` argument");var a=$e(e),o=a&&a.events,s=a&&a.handle;if(s)if(t){var l=function(t){var r=o[t];y(n)&&F(r||[],n),y(n)&&r&&r.length>0||(Ti(e,t,s),delete o[t])};r(t.split(" "),function(e){l(e),Ci[e]&&l(Ci[e])})}else for(t in o)"$destroy"!==t&&Ti(e,t,s),delete o[t]}function Le(e,t){var n=e.ng339,r=n&&Ei[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),De(e)),delete Ei[n],e.ng339=void 0}}function $e(e,t){var n=e.ng339,r=n&&Ei[n];return t&&!r&&(e.ng339=n=Ee(),r=Ei[n]={events:{},data:{},handle:void 0}),r}function Re(e,t,n){if(Te(e)){var r=y(n),i=!r&&t&&!b(t),a=!t,o=$e(e,!i),s=o&&o.data;if(r)s[t]=n;else{if(a)return s;if(i)return s&&s[t];u(s,t)}}}function Pe(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function Fe(e,t){t&&e.setAttribute&&r(t.split(" "),function(t){e.setAttribute("class",ai((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ai(t)+" "," ")))})}function Ue(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(t.split(" "),function(e){e=ai(e),n.indexOf(" "+e+" ")===-1&&(n+=e+" ")}),e.setAttribute("class",ai(n))}}function je(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function He(e,t){return ze(e,"$"+(t||"ngController")+"Controller")}function ze(e,t,n){e.nodeType===yi&&(e=e.documentElement);for(var r=ri(t)?t:[t];e;){for(var i=0,a=r.length;i<a;i++)if(y(n=Yr.data(e,r[i])))return n;e=e.parentNode||e.nodeType===bi&&e.host}}function Be(e){for(Ne(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function qe(e,t){t||Ne(e);var n=e.parentNode;n&&n.removeChild(e)}function Ye(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Yr(n).on("load",t)}function Xe(e,t){var n=Ri[t.toLowerCase()];return n&&Pi[P(e)]&&n}function We(e){return Fi[e]}function Ge(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],a=i?i.length:0;if(a){if(v(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var s=i.specialHandlerWrapper||Ve;a>1&&(i=ve(i));for(var l=0;l<a;l++)n.isImmediatePropagationStopped()||s(e,n,i[l])}};return n.elem=e,n}function Ve(e,t,n){n.call(e,t)}function Ke(e,t,n){var r=t.relatedTarget;r&&(r===e||Li.call(e,r))||n.call(e,t)}function Ze(){this.$get=function(){return u(Ie,{hasClass:function(e,t){return e.attr&&(e=e[0]),Pe(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Ue(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Fe(e,t)}})}}function Qe(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||o)():r+":"+e}function Je(e,t){if(t){var n=0;this.nextUid=function(){return++n}}r(e,this.put,this)}function et(e){return Function.prototype.toString.call(e)+" "}function tt(e){var t=et(e).replace(qi,""),n=t.match(ji)||t.match(Hi);return n}function nt(e){var t=tt(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function rt(e,t,n){var i,a,o;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw E(n)&&n||(n=e.name||nt(e)),Yi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);a=tt(e),r(a[1].split(zi),function(e){e.replace(Bi,function(e,t,n){i.push(n)})})}e.$inject=i}}else ri(e)?(o=e.length-1,fe(e[o],"fn"),i=e.slice(0,o)):fe(e,"fn",!0);return i}function it(e,t){function n(e){return function(t,n){return b(t)?void r(t,a(e)):e(t,n)}}function i(e,t){if(de(e,"service"),(T(t)||ri(t))&&(t=S.instantiate(t)),!t.$get)throw Yi("pget","Provider '{0}' must define $get factory method.",e);return x[e+m]=t}function o(e,t){return function(){var n=C.invoke(t,this);if(v(n))throw Yi("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return i(e,{$get:n!==!1?o(e,t):t})}function l(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return s(e,g(t),!1)}function c(e,t){de(e,"constant"),x[e]=t,w[e]=t}function f(e,t){var n=S.get(e+m),r=n.$get;n.$get=function(){var e=C.invoke(r,n);return C.invoke(t,null,{$delegate:e})}}function d(e){ce(v(e)||ri(e),"modulesToLoad","not an array");var t,n=[];return r(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=S.get(r[0]);i[r[1]].apply(i,r[2])}}if(!_.get(e)){_.put(e,!0);try{E(e)?(t=Wr(e),n=n.concat(d(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):T(e)?n.push(S.invoke(e)):ri(e)?n.push(S.invoke(e)):fe(e,"module")}catch(i){throw ri(e)&&(e=e[e.length-1]),i.message&&i.stack&&i.stack.indexOf(i.message)===-1&&(i=i.message+"\n"+i.stack),Yi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function h(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===p)throw Yi("cdep","Circular dependency found: {0}",t+" <- "+y.join(" <- "));return e[t]}try{return y.unshift(t),e[t]=p,e[t]=n(t,r),e[t]}catch(i){throw e[t]===p&&delete e[t],i}finally{y.shift()}}function i(e,n,i){for(var a=[],o=it.$$annotate(e,t,i),s=0,l=o.length;s<l;s++){var u=o[s];if("string"!=typeof u)throw Yi("itkn","Incorrect injection token! Expected service name as string, got {0}",u);a.push(n&&n.hasOwnProperty(u)?n[u]:r(u,i))}return a}function a(e){return!(qr<=11)&&("function"==typeof e&&/^(?:class\b|constructor\()/.test(et(e)))}function o(e,t,n,r){"string"==typeof n&&(r=n,n=null);var o=i(e,n,r);return ri(e)&&(e=e[e.length-1]),a(e)?(o.unshift(null),new(Function.prototype.bind.apply(e,o))):e.apply(t,o)}function s(e,t,n){var r=ri(e)?e[e.length-1]:e,a=i(e,t,n);return a.unshift(null),new(Function.prototype.bind.apply(r,a))}return{invoke:o,instantiate:s,get:r,annotate:it.$$annotate,has:function(t){return x.hasOwnProperty(t+m)||e.hasOwnProperty(t)}}}t=t===!0;var p={},m="Provider",y=[],_=new Je([],(!0)),x={$provide:{provider:n(i),factory:n(s),service:n(l),value:n(u),constant:n(c),decorator:f}},S=x.$injector=h(x,function(e,t){throw ei.isString(t)&&y.push(t),Yi("unpr","Unknown provider: {0}",y.join(" <- "))}),w={},A=h(w,function(e,t){var n=S.get(e+m,t);return C.invoke(n.$get,n,void 0,e)}),C=A;x["$injector"+m]={$get:g(A)};var k=d(e);return C=A.get("$injector"),C.strictDi=t,r(k,function(e){e&&C.invoke(e)}),C}function at(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===P(e))return t=e,!0}),t}function a(){var e=s.yOffset;if(T(e))e=e();else if($(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else x(e)||(e=0);return e}function o(e){if(e){e.scrollIntoView();var n=a();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=E(e)?e:x(e)?e.toString():n.hash();var t;e?(t=l.getElementById(e))?o(t):(t=i(l.getElementsByName(e)))?o(t):"top"===e&&o(null):o(null)}var l=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){e===t&&""===e||Ye(function(){r.$evalAsync(s)})}),s}]}function ot(e,t){return e||t?e?t?(ri(e)&&(e=e.join(" ")),ri(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function st(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Wi)return n}}function lt(e){E(e)&&(e=e.split(" "));var t=ge();return r(e,function(e){e.length&&(t[e]=!0)}),t}function ut(e){return b(e)?e:{}}function ct(e,t,n,i){function a(e){try{e.apply(null,z(arguments,1))}finally{if(y--,0===y)for(;b.length;)try{b.pop()()}catch(t){n.error(t)}}}function o(e){var t=e.indexOf("#");return t===-1?"":e.substr(t)}function s(){T=null,l(),u()}function l(){_=w(),_=v(_)?null:_,j(_,k)&&(_=k),k=_}function u(){x===c.url()&&E===_||(x=c.url(),E=_,r(A,function(e){e(c.url(),_)}))}var c=this,f=e.location,d=e.history,p=e.setTimeout,g=e.clearTimeout,m={};c.isMock=!1;var y=0,b=[];c.$$completeOutstandingRequest=a,c.$$incOutstandingRequestCount=function(){y++},c.notifyWhenNoOutstandingRequests=function(e){0===y?e():b.push(e)};var _,E,x=f.href,S=t.find("base"),T=null,w=i.history?function(){try{return d.state}catch(e){}}:h;l(),E=_,c.url=function(t,n,r){if(v(r)&&(r=null),f!==e.location&&(f=e.location),d!==e.history&&(d=e.history),t){var a=E===r;if(x===t&&(!i.history||a))return c;var s=x&&qt(x)===qt(t);return x=t,E=r,!i.history||s&&a?(s||(T=t),n?f.replace(t):s?f.hash=o(t):f.href=t,f.href!==t&&(T=t)):(d[n?"replaceState":"pushState"](r,"",t),l(),E=_),T&&(T=t),c}return T||f.href.replace(/%27/g,"'")},c.state=function(){return _};var A=[],C=!1,k=null;c.onUrlChange=function(t){return C||(i.history&&Yr(e).on("popstate",s),Yr(e).on("hashchange",s),C=!0),A.push(t),t},c.$$applicationDestroyed=function(){Yr(e).off("hashchange popstate",s)},c.$$checkUrlChange=u,c.baseHref=function(){var e=S.attr("href");return e?e.replace(/^(https?:)?\/\/[^\/]*/,""):""},c.defer=function(e,t){var n;return y++,n=p(function(){delete m[n],a(e)},t||0),m[n]=!0,n},c.defer.cancel=function(e){return!!m[e]&&(delete m[e],g(e),a(h),!0)}}function ft(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new ct(e,r,t,n)}]}function dt(){this.$get=function(){function e(e,r){function i(e){e!==d&&(h?h===e&&(h=e.n):h=e,a(e.n,e.p),a(e,d),d=e,d.n=null)}function a(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in n)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var o=0,s=u({},r,{id:e}),l=ge(),c=r&&r.capacity||Number.MAX_VALUE,f=ge(),d=null,h=null;return n[e]={put:function(e,t){if(!v(t)){if(c<Number.MAX_VALUE){var n=f[e]||(f[e]={key:e});i(n)}return e in l||o++,l[e]=t,o>c&&this.remove(h.key),t}},get:function(e){if(c<Number.MAX_VALUE){var t=f[e];if(!t)return;i(t)}return l[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=f[e];if(!t)return;t===d&&(d=t.p),t===h&&(h=t.n),a(t.n,t.p),delete f[e]}e in l&&(delete l[e],o--)},removeAll:function(){l=ge(),o=0,f=ge(),d=h=null},destroy:function(){l=null,s=null,f=null,delete n[e]},info:function(){return u({},s,{size:o})}}}var n={};return e.info=function(){var e={};return r(n,function(t,n){e[n]=t.info()}),e},e.get=function(e){return n[e]},e}}function ht(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function pt(){}function gt(t,n){function i(e,t,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,a=ge();return r(e,function(e,r){if(e in k)return void(a[r]=k[e]);var o=e.match(i);if(!o)throw ta("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e,n?"controller bindings definition":"isolate scope definition");a[r]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||r},o[4]&&(k[e]=a[r])}),a}function o(e,t){var n={isolateScope:null,bindToController:null};if(b(e.scope)&&(e.bindToController===!0?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),b(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw ta("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}function s(e){var t=e.charAt(0);if(!t||t!==jr(t))throw ta("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw ta("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function l(e){var t=e.require||e.controller&&e.name;return!ri(t)&&b(t)&&r(t,function(e,n){var r=e.match(w),i=e.substring(r[0].length);i||(t[n]=r[0]+n)}),t}function c(e,t){if(e&&(!E(e)||!/[EACM]/.test(e)))throw ta("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var f={},m="Directive",_=/^\s*directive:\s*([\w-]+)\s+(.*)$/,x=/(([\w-]+)(?::([^;]+))?;?)/,S=R("ngSrc,ngSrcset,src,srcset"),w=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,A=/^(on[a-z]+|formaction)$/,k=ge();this.directive=function $(e,n){return ce(e,"name"),de(e,"directive"),E(e)?(s(e),ce(n,"directiveFactory"),f.hasOwnProperty(e)||(f[e]=[],t.factory(e+m,["$injector","$exceptionHandler",function(t,n){var i=[];return r(f[e],function(r,a){try{var o=t.invoke(r);T(o)?o={compile:g(o)}:!o.compile&&o.link&&(o.compile=g(o.link)),o.priority=o.priority||0,o.index=a,o.name=o.name||e,o.require=l(o),o.restrict=c(o.restrict,e),o.$$moduleName=r.$$moduleName,i.push(o)}catch(s){n(s)}}),i}])),f[e].push(n)):r(e,a($)),this},this.component=function(e,t){function n(e){function n(t){return T(t)||ri(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var a=t.template||t.templateUrl?t.template:"",o={controller:i,controllerAs:_t(t.controller)||t.controllerAs||"$ctrl",template:n(a),templateUrl:n(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return r(t,function(e,t){"$"===t.charAt(0)&&(o[t]=e)}),o}var i=t.controller||function(){};return r(t,function(e,t){"$"===t.charAt(0)&&(n[t]=e,T(i)&&(i[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return y(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var O=!0;this.debugInfoEnabled=function(e){return y(e)?(O=e,this):O};var I=!0;this.preAssignBindingsEnabled=function(e){return y(e)?(I=e,this):I};var N=10;this.onChangesTtl=function(e){return arguments.length?(N=e,this):N};var D=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(D=e,this):D};var L=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(L=e,this):L},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,i,a,s,l,c,g,k,$){function R(){try{if(!--ke)throw xe=void 0,ta("infchng","{0} $onChanges() iterations reached. Aborting!\n",N);c.$apply(function(){for(var e=[],t=0,n=xe.length;t<n;++t)try{xe[t]()}catch(r){e.push(r)}if(xe=void 0,e.length)throw e})}finally{ke++}}function U(e,t){if(t){var n,r,i,a=Object.keys(t);for(n=0,r=a.length;n<r;n++)i=a[n],this[i]=t[i]}else this.$attr={};this.$$element=e}function H(e,t,n){we.innerHTML="<span "+t+">";var r=we.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function q(e,t){try{e.addClass(t)}catch(n){}}function Y(t,n,r,i,a){t instanceof Yr||(t=Yr(t));for(var o=/\S+/,s=0,l=t.length;s<l;s++){var u=t[s];u.nodeType===mi&&u.nodeValue.match(o)&&Oe(u,t[s]=e.document.createElement("span"))}var c=W(t,n,t,r,i,a);Y.$$addScopeClass(t);var f=null;return function(e,n,r){ce(e,"scope"),a&&a.needsNewScope&&(e=e.$parent.$new()),r=r||{};var i=r.parentBoundTranscludeFn,o=r.transcludeControllers,s=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),f||(f=X(s));var l;if(l="html"!==f?Yr(pe(f,Yr("<div>").append(t).html())):n?$i.clone.call(t):t,o)for(var u in o)l.data("$"+u+"Controller",o[u].instance);return Y.$$addScopeInfo(l,e),n&&n(l,e),c&&c(e,l,l,i),l}}function X(e){var t=e&&e[0];return t&&"foreignobject"!==P(t)&&Zr.call(t).match(/SVG/)?"svg":"html"}function W(e,t,n,r,i,a){function o(e,n,r,i){var a,o,s,l,u,c,f,d,g;if(h){var m=n.length;for(g=new Array(m),u=0;u<p.length;u+=3)f=p[u],g[f]=n[f]}else g=n;for(u=0,c=p.length;u<c;)s=g[p[u++]],a=p[u++],o=p[u++],a?(a.scope?(l=e.$new(),Y.$$addScopeInfo(Yr(s),l)):l=e,d=a.transcludeOnThisElement?G(e,a.transclude,i):!a.templateOnThisElement&&i?i:!i&&t?G(e,t):null,a(o,l,s,r,d)):o&&o(e,s.childNodes,void 0,i)}for(var s,l,u,c,f,d,h,p=[],g=0;g<e.length;g++)s=new U,l=V(e[g],[],s,0===g?r:void 0,i),u=l.length?te(l,e[g],s,t,n,null,[],[],a):null,u&&u.scope&&Y.$$addScopeClass(s.$$element),f=u&&u.terminal||!(c=e[g].childNodes)||!c.length?null:W(c,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||f)&&(p.push(g,u,f),d=!0,h=h||u),a=null;return d?o:null}function G(e,t,n){function r(r,i,a,o,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})}var i=r.$$slots=ge();for(var a in t.$$slots)t.$$slots[a]?i[a]=G(e,t.$$slots[a],n):i[a]=null;return r}function V(e,t,n,r,i){var a,o,s,l=e.nodeType,u=n.$attr;switch(l){case pi:o=P(e),ae(t,vt(o),"E",r,i);for(var c,f,d,h,p,g,m=e.attributes,v=0,y=m&&m.length;v<y;v++){var _=!1,S=!1;c=m[v],f=c.name,p=ai(c.value),h=vt(f),g=Le.test(h),
g&&(f=f.replace(ra,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var T=h.match($e);T&&oe(T[1])&&(_=f,S=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),d=vt(f.toLowerCase()),u[d]=f,!g&&n.hasOwnProperty(d)||(n[d]=p,Xe(e,d)&&(n[d]=!0)),ve(e,t,p,d,g),ae(t,d,"A",r,i,_,S)}if("input"===o&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!Ce)break;if(s=e.className,b(s)&&(s=s.animVal),E(s)&&""!==s)for(;a=x.exec(s);)d=vt(a[2]),ae(t,d,"C",r,i)&&(n[d]=ai(a[3])),s=s.substr(a.index+a[0].length);break;case mi:if(11===qr)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===mi;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);he(t,e.nodeValue);break;case vi:if(!Ae)break;Z(e,t,n,r,i)}return t.sort(fe),t}function Z(e,t,n,r,i){try{var a=_.exec(e.nodeValue);if(a){var o=vt(a[1]);ae(t,o,"M",r,i)&&(n[o]=ai(a[2]))}}catch(s){}}function Q(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw ta("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===pi&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return Yr(r)}function J(e,t,n){return function(r,i,a,o,s){return i=Q(i[0],t,n),e(r,i,a,o,s)}}function ee(e,t,n,r,i,a){var o;return e?Y(t,n,r,i,a):function(){return o||(o=Y(t,n,r,i,a),t=n=a=null),o.apply(this,arguments)}}function te(e,t,n,a,o,s,l,c,f){function d(e,t,n,r){e&&(n&&(e=J(e,n,r)),e.require=p.require,e.directiveName=g,(w===p||p.$$isolateScope)&&(e=be(e,{isolateScope:!0})),l.push(e)),t&&(n&&(t=J(t,n,r)),t.require=p.require,t.directiveName=g,(w===p||p.$$isolateScope)&&(t=be(t,{isolateScope:!0})),c.push(t))}function h(e,a,o,s,f){function d(e,t,n,r){var i;if(C(e)||(r=n,n=t,t=e,e=void 0),N&&(i=_),n||(n=N?k.parent():k),!r)return f(e,t,i,n,F);var a=f.$$slots[r];if(a)return a(e,t,i,n,F);if(v(a))throw ta("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,K(k))}var h,p,g,m,y,_,E,k,O,M;t===o?(O=n,k=n.$$element):(k=Yr(o),O=new U(k,n)),y=a,w?m=a.$new(!0):x&&(y=a.$parent),f&&(E=d,E.$$boundTransclude=f,E.isSlotFilled=function(e){return!!f.$$slots[e]}),S&&(_=re(k,O,E,S,m,a,w)),w&&(Y.$$addScopeInfo(k,m,!0,!(A&&(A===w||A===w.$$originalDirective))),Y.$$addScopeClass(k,!0),m.$$isolateBindings=w.$$isolateBindings,M=Ee(a,O,m,m.$$isolateBindings,w),M.removeWatches&&m.$on("$destroy",M.removeWatches));for(var D in _){var L=S[D],$=_[D],R=L.$$bindings.bindToController;if(I){R?$.bindingInfo=Ee(y,O,$.instance,R,L):$.bindingInfo={};var P=$();P!==$.instance&&($.instance=P,k.data("$"+L.name+"Controller",P),$.bindingInfo.removeWatches&&$.bindingInfo.removeWatches(),$.bindingInfo=Ee(y,O,$.instance,R,L))}else $.instance=$(),k.data("$"+L.name+"Controller",$.instance),$.bindingInfo=Ee(y,O,$.instance,R,L)}for(r(S,function(e,t){var n=e.require;e.bindToController&&!ri(n)&&b(n)&&u(_[t].instance,ne(t,n,k,_))}),r(_,function(e){var t=e.instance;if(T(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(n){i(n)}if(T(t.$onInit))try{t.$onInit()}catch(n){i(n)}T(t.$doCheck)&&(y.$watch(function(){t.$doCheck()}),t.$doCheck()),T(t.$onDestroy)&&y.$on("$destroy",function(){t.$onDestroy()})}),h=0,p=l.length;h<p;h++)g=l[h],_e(g,g.isolateScope?m:a,k,O,g.require&&ne(g.directiveName,g.require,k,_),E);var F=a;for(w&&(w.template||null===w.templateUrl)&&(F=m),e&&e(F,o.childNodes,void 0,f),h=c.length-1;h>=0;h--)g=c[h],_e(g,g.isolateScope?m:a,k,O,g.require&&ne(g.directiveName,g.require,k,_),E);r(_,function(e){var t=e.instance;T(t.$postLink)&&t.$postLink()})}f=f||{};for(var p,g,m,y,_,E=-Number.MAX_VALUE,x=f.newScopeDirective,S=f.controllerDirectives,w=f.newIsolateScopeDirective,A=f.templateDirective,k=f.nonTlbTranscludeDirective,O=!1,M=!1,N=f.hasElementTranscludeDirective,D=n.$$element=Yr(t),L=s,$=a,R=!1,F=!1,j=0,H=e.length;j<H;j++){p=e[j];var q=p.$$start,X=p.$$end;if(q&&(D=Q(t,q,X)),m=void 0,E>p.priority)break;if(_=p.scope,_&&(p.templateUrl||(b(_)?(de("new/isolated scope",w||x,p,D),w=p):de("new/isolated scope",w,p,D)),x=x||p),g=p.name,!R&&(p.replace&&(p.templateUrl||p.template)||p.transclude&&!p.$$tlb)){for(var W,G=j+1;W=e[G++];)if(W.transclude&&!W.$$tlb||W.replace&&(W.templateUrl||W.template)){F=!0;break}R=!0}if(!p.templateUrl&&p.controller&&(S=S||ge(),de("'"+g+"' controller",S[g],p,D),S[g]=p),_=p.transclude)if(O=!0,p.$$tlb||(de("transclusion",k,p,D),k=p),"element"===_)N=!0,E=p.priority,m=D,D=n.$$element=Yr(Y.$$createComment(g,n[g])),t=D[0],ye(o,z(m),t),m[0].$$parentNode=m[0].parentNode,$=ee(F,m,a,E,L&&L.name,{nonTlbTranscludeDirective:k});else{var Z=ge();if(m=Yr(Me(t)).contents(),b(_)){m=[];var te=ge(),ae=ge();r(_,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,te[e]=t,Z[t]=null,ae[t]=n}),r(D.contents(),function(e){var t=te[vt(P(e))];t?(ae[t]=!0,Z[t]=Z[t]||[],Z[t].push(e)):m.push(e)}),r(ae,function(e,t){if(!e)throw ta("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var oe in Z)Z[oe]&&(Z[oe]=ee(F,Z[oe],a))}D.empty(),$=ee(F,m,a,void 0,void 0,{needsNewScope:p.$$isolateScope||p.$$newScope}),$.$$slots=Z}if(p.template)if(M=!0,de("template",A,p,D),A=p,_=T(p.template)?p.template(D,n):p.template,_=De(_),p.replace){if(L=p,m=Se(_)?[]:bt(pe(p.templateNamespace,ai(_))),t=m[0],1!==m.length||t.nodeType!==pi)throw ta("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g,"");ye(o,D,t);var le={$attr:{}},ce=V(t,[],le),fe=e.splice(j+1,e.length-(j+1));(w||x)&&ie(ce,w,x),e=e.concat(ce).concat(fe),se(n,le),H=e.length}else D.html(_);if(p.templateUrl)M=!0,de("template",A,p,D),A=p,p.replace&&(L=p),h=ue(e.splice(j,e.length-j),D,n,o,O&&$,l,c,{controllerDirectives:S,newScopeDirective:x!==p&&x,newIsolateScopeDirective:w,templateDirective:A,nonTlbTranscludeDirective:k}),H=e.length;else if(p.compile)try{y=p.compile(D,n,$);var he=p.$$originalDirective||p;T(y)?d(null,B(he,y),q,X):y&&d(B(he,y.pre),B(he,y.post),q,X)}catch(me){i(me,K(D))}p.terminal&&(h.terminal=!0,E=Math.max(E,p.priority))}return h.scope=x&&x.scope===!0,h.transcludeOnThisElement=O,h.templateOnThisElement=M,h.transclude=$,f.hasElementTranscludeDirective=N,h}function ne(e,t,n,i){var a;if(E(t)){var o=t.match(w),s=t.substring(o[0].length),l=o[1]||o[3],u="?"===o[2];if("^^"===l?n=n.parent():(a=i&&i[s],a=a&&a.instance),!a){var c="$"+s+"Controller";a=l?n.inheritedData(c):n.data(c)}if(!a&&!u)throw ta("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(ri(t)){a=[];for(var f=0,d=t.length;f<d;f++)a[f]=ne(e,t[f],n,i)}else b(t)&&(a={},r(t,function(t,r){a[r]=ne(e,t,n,i)}));return a||null}function re(e,t,n,r,i,a,o){var s=ge();for(var u in r){var c=r[u],f={$scope:c===o||c.$$isolateScope?i:a,$element:e,$attrs:t,$transclude:n},d=c.controller;"@"===d&&(d=t[c.name]);var h=l(d,f,!0,c.controllerAs);s[c.name]=h,e.data("$"+c.name+"Controller",h.instance)}return s}function ie(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=d(e[r],{$$isolateScope:t,$$newScope:n})}function ae(e,n,r,i,a,s,l){if(n===a)return null;var u=null;if(f.hasOwnProperty(n))for(var c,h=t.get(n+m),p=0,g=h.length;p<g;p++)if(c=h[p],(v(i)||i>c.priority)&&c.restrict.indexOf(r)!==-1){if(s&&(c=d(c,{$$start:s,$$end:l})),!c.$$bindings){var y=c.$$bindings=o(c,c.name);b(y.isolateScope)&&(c.$$isolateBindings=y.isolateScope)}e.push(c),u=c}return u}function oe(e){if(f.hasOwnProperty(e))for(var n,r=t.get(e+m),i=0,a=r.length;i<a;i++)if(n=r[i],n.multiElement)return!0;return!1}function se(e,t){var n=t.$attr,i=e.$attr;r(e,function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),r(t,function(t,r){e.hasOwnProperty(r)||"$"===r.charAt(0)||(e[r]=t,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function ue(e,t,n,i,o,s,l,u){var c,f,h=[],p=t[0],g=e.shift(),m=d(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),v=T(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,y=g.templateNamespace;return t.empty(),a(v).then(function(a){var d,_,E,x;if(a=De(a),g.replace){if(E=Se(a)?[]:bt(pe(y,ai(a))),d=E[0],1!==E.length||d.nodeType!==pi)throw ta("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,v);_={$attr:{}},ye(i,t,d);var S=V(d,[],_);b(g.scope)&&ie(S,!0),e=S.concat(e),se(n,_)}else d=p,t.html(a);for(e.unshift(m),c=te(e,d,n,o,t,g,s,l,u),r(i,function(e,n){e===d&&(i[n]=t[0])}),f=W(t[0].childNodes,o);h.length;){var T=h.shift(),w=h.shift(),A=h.shift(),C=h.shift(),k=t[0];if(!T.$$destroyed){if(w!==p){var O=w.className;u.hasElementTranscludeDirective&&g.replace||(k=Me(d)),ye(A,Yr(w),k),q(Yr(k),O)}x=c.transcludeOnThisElement?G(T,c.transclude,C):C,c(f,T,k,i,x)}}h=null}),function(e,t,n,r,i){var a=i;t.$$destroyed||(h?h.push(t,n,r,a):(c.transcludeOnThisElement&&(a=G(t,c.transclude,i)),c(f,t,n,r,a)))}}function fe(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function de(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw ta("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,K(r))}function he(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&Y.$$addBindingClass(t),function(e,t){var i=t.parent();n||Y.$$addBindingClass(i),Y.$$addBindingInfo(i,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function pe(t,n){switch(t=jr(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function me(e,t){if("srcdoc"===t)return g.HTML;var n=P(e);if("src"===t||"ngSrc"===t){if(["img","video","audio","source","track"].indexOf(n)===-1)return g.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t)return g.RESOURCE_URL}function ve(e,t,r,i,a){var o=me(e,i),s=!a,l=S[i]||a,u=n(r,s,o,l);if(u){if("multiple"===i&&"select"===P(e))throw ta("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",K(e));t.push({priority:100,compile:function(){return{pre:function(e,t,a){var s=a.$$observers||(a.$$observers=ge());if(A.test(i))throw ta("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=a[i];c!==r&&(u=c&&n(c,!0,o,l),r=c),u&&(a[i]=u(e),(s[i]||(s[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||e).$watch(u,function(e,t){"class"===i&&e!==t?a.$updateClass(e,t):a.$set(i,e)}))}}}})}}function ye(t,n,r){var i,a,o=n[0],s=n.length,l=o.parentNode;if(t)for(i=0,a=t.length;i<a;i++)if(t[i]===o){t[i++]=r;for(var u=i,c=u+s-1,f=t.length;u<f;u++,c++)c<f?t[u]=t[c]:delete t[u];t.length-=s-1,t.context===o&&(t.context=r);break}l&&l.replaceChild(r,o);var d=e.document.createDocumentFragment();for(i=0;i<s;i++)d.appendChild(n[i]);for(Yr.hasData(o)&&(Yr.data(r,Yr.data(o)),Yr(o).off("$destroy")),Yr.cleanData(d.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function be(e,t){return u(function(){return e.apply(null,arguments)},e,t)}function _e(e,t,n,r,a,o){try{e(t,n,r,a,o)}catch(s){i(s,K(n))}}function Ee(e,t,i,a,o){function l(t,n,r){!T(i.$onChanges)||n===r||n!==n&&r!==r||(xe||(e.$$postDigest(R),xe=[]),c||(c={},xe.push(u)),c[t]&&(r=c[t].previousValue),c[t]=new mt(r,n))}function u(){i.$onChanges(c),c=void 0}var c,f=[],d={};return r(a,function(r,a){var u,c,p,g,m,v=r.attrName,y=r.optional,b=r.mode;switch(b){case"@":y||Ur.call(t,v)||(i[a]=t[v]=void 0),m=t.$observe(v,function(e){if(E(e)||M(e)){var t=i[a];l(a,e,t),i[a]=e}}),t.$$observers[v].$$scope=e,u=t[v],E(u)?i[a]=n(u)(e):M(u)&&(i[a]=u),d[a]=new mt(na,i[a]),f.push(m);break;case"=":if(!Ur.call(t,v)){if(y)break;t[v]=void 0}if(y&&!t[v])break;c=s(t[v]),g=c.literal?j:function(e,t){return e===t||e!==e&&t!==t},p=c.assign||function(){throw u=i[a]=c(e),ta("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[v],v,o.name)},u=i[a]=c(e);var _=function(t){return g(t,i[a])||(g(t,u)?p(e,t=i[a]):i[a]=t),u=t};_.$stateful=!0,m=r.collection?e.$watchCollection(t[v],_):e.$watch(s(t[v],_),null,c.literal),f.push(m);break;case"<":if(!Ur.call(t,v)){if(y)break;t[v]=void 0}if(y&&!t[v])break;c=s(t[v]);var x=c.literal,S=i[a]=c(e);d[a]=new mt(na,i[a]),m=e.$watch(c,function(e,t){if(t===e){if(t===S||x&&j(t,S))return;t=S}l(a,e,t),i[a]=e},x),f.push(m);break;case"&":if(c=t.hasOwnProperty(v)?s(t[v]):h,c===h&&y)break;i[a]=function(t){return c(e,t)}}}),{initialChanges:d,removeWatches:f.length&&function(){for(var e=0,t=f.length;e<t;++e)f[e]()}}}var xe,Te=/^\w/,we=e.document.createElement("div"),Ae=D,Ce=L,ke=N;U.prototype={$normalize:vt,$addClass:function(e){e&&e.length>0&&k.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&k.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=yt(e,t);n&&n.length&&k.addClass(this.$$element,n);var r=yt(t,e);r&&r.length&&k.removeClass(this.$$element,r)},$set:function(e,t,n,a){var o,s=this.$$element[0],l=Xe(s,e),u=We(e),c=e;if(l?(this.$$element.prop(e,t),a=l):u&&(this[u]=t,c=u),this[e]=t,a?this.$attr[e]=a:(a=this.$attr[e],a||(this.$attr[e]=a=le(e,"-"))),o=P(this.$$element),"a"===o&&("href"===e||"xlinkHref"===e)||"img"===o&&"src"===e)this[e]=t=$(t,"src"===e);else if("img"===o&&"srcset"===e&&y(t)){for(var f="",d=ai(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(d)?h:/(,)/,g=d.split(p),m=Math.floor(g.length/2),b=0;b<m;b++){var _=2*b;f+=$(ai(g[_]),!0),f+=" "+ai(g[_+1])}var E=ai(g[2*b]).split(/\s/);f+=$(ai(E[0]),!0),2===E.length&&(f+=" "+ai(E[1])),this[e]=t=f}n!==!1&&(null===t||v(t)?this.$$element.removeAttr(a):Te.test(a)?this.$$element.attr(a,t):H(this.$$element[0],a,t));var x=this.$$observers;x&&r(x[c],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=ge()),i=r[e]||(r[e]=[]);return i.push(t),c.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||v(n[e])||t(n[e])}),function(){F(i,t)}}};var Ie=n.startSymbol(),Ne=n.endSymbol(),De="{{"===Ie&&"}}"===Ne?p:function(e){return e.replace(/\{\{/g,Ie).replace(/}}/g,Ne)},Le=/^ngAttr[A-Z]/,$e=/^(.+)Start$/;return Y.$$addBindingInfo=O?function(e,t){var n=e.data("$binding")||[];ri(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:h,Y.$$addBindingClass=O?function(e){q(e,"ng-binding")}:h,Y.$$addScopeInfo=O?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:h,Y.$$addScopeClass=O?function(e,t){q(e,t?"ng-isolate-scope":"ng-scope")}:h,Y.$$createComment=function(t,n){var r="";return O&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},Y}]}function mt(e,t){this.previousValue=e,this.currentValue=t}function vt(e){return xe(e.replace(ra,""))}function yt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o===i[s])continue e;n+=(n.length>0?" ":"")+o}return n}function bt(e){e=Yr(e);var t=e.length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===vi||n.nodeType===mi&&""===n.nodeValue.trim())&&Vr.call(e,t,1)}return e}function _t(e,t){if(t&&E(t))return t;if(E(e)){var n=aa.exec(e);if(n)return n[3]}}function Et(){var e={},n=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){de(t,"controller"),b(t)?u(e,t):e[t]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,i){function a(e,n,r,i){if(!e||!b(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,n);e.$scope[n]=r}return function(t,o,s,l){var c,f,d,h;if(s=s===!0,l&&E(l)&&(h=l),E(t)){if(f=t.match(aa),!f)throw ia("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);if(d=f[1],h=h||f[3],t=e.hasOwnProperty(d)?e[d]:he(o.$scope,d,!0)||(n?he(i,d,!0):void 0),!t)throw ia("ctrlreg","The controller with the name '{0}' is not registered.",d);fe(t,d,!0)}if(s){var p=(ri(t)?t[t.length-1]:t).prototype;return c=Object.create(p||null),h&&a(o,h,c,d||t.name),u(function(){var e=r.invoke(t,c,o,d);return e!==c&&(b(e)||T(e))&&(c=e,h&&a(o,h,c,d||t.name)),c},{instance:c,identifier:h})}return c=r.instantiate(t,o,d),h&&a(o,h,c,d||t.name),c}}]}function xt(){this.$get=["$window",function(e){return Yr(e.document)}]}function St(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function Tt(e){return b(e)?S(e)?e.toISOString():Y(e):e}function wt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return i(e,function(e,n){null===e||v(e)||(ri(e)?r(e,function(e){t.push(te(n)+"="+te(Tt(e)))}):t.push(te(n)+"="+te(Tt(e))))}),t.join("&")}}}function At(){this.$get=function(){return function(e){function t(e,a,o){null===e||v(e)||(ri(e)?r(e,function(e,n){t(e,a+"["+(b(e)?n:"")+"]")}):b(e)&&!S(e)?i(e,function(e,n){t(e,a+(o?"":"[")+n+(o?"":"]"))}):n.push(te(a)+"="+te(Tt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function Ct(e,t){if(E(e)){var n=e.replace(fa,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(sa)||kt(n))&&(e=X(n))}}return e}function kt(e){var t=e.match(ua);return t&&ca[t[0]].test(e)}function Ot(e){function t(e,t){e&&(i[e]=i[e]?i[e]+", "+t:t)}var n,i=ge();return E(e)?r(e.split("\n"),function(e){n=e.indexOf(":"),t(jr(ai(e.substr(0,n))),ai(e.substr(n+1)))}):b(e)&&r(e,function(e,n){t(jr(n),ai(e))}),i}function It(e){var t;return function(n){if(t||(t=Ot(e)),n){var r=t[jr(n)];return void 0===r&&(r=null),r}return t}}function Mt(e,t,n,i){return T(i)?i(e,t,n):(r(i,function(r){e=r(e,t,n)}),e)}function Nt(e){return 200<=e&&e<300}function Dt(){var e=this.defaults={transformResponse:[Ct],transformRequest:[function(e){return!b(e)||k(e)||I(e)||O(e)?e:Y(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ve(la),put:ve(la),patch:ve(la)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(e){return y(e)?(n=!!e,this):n};var i=!0;this.useLegacyPromiseExtensions=function(e){return y(e)?(i=!!e,this):i};var a=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(o,s,l,c,f,d){function h(n){function a(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],a=t[n++];e=e.then(i,a)}return t.length=0,e}function o(e,t){var n,i={};return r(e,function(e,r){T(e)?(n=e(t),null!=n&&(i[r]=n)):i[r]=e}),i}function s(t){var n,r,i,a=e.headers,s=u({},t.headers);a=u({},a.common,a[jr(t.method)]);e:for(n in a){r=jr(n);for(i in s)if(jr(i)===r)continue e;s[n]=a[n]}return o(s,ve(t))}function l(t){var n=t.headers,i=Mt(t.data,It(n),void 0,t.transformRequest);return v(i)&&r(n,function(e,t){"content-type"===jr(t)&&delete n[t]}),v(t.withCredentials)&&!v(e.withCredentials)&&(t.withCredentials=e.withCredentials),m(t,i).then(c,c)}function c(e){var t=u({},e);return t.data=Mt(e.data,e.headers,e.status,h.transformResponse),Nt(e.status)?t:f.reject(t)}if(!b(n))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!E(n.url))throw t("$http")("badreq","Http request configuration url must be a string.  Received: {0}",n.url);var h=u({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},n);h.headers=s(n),h.method=Hr(h.method),h.paramSerializer=E(h.paramSerializer)?d.get(h.paramSerializer):h.paramSerializer;var p=[],g=[],y=f.when(h);return r(S,function(e){(e.request||e.requestError)&&p.unshift(e.request,e.requestError),(e.response||e.responseError)&&g.push(e.response,e.responseError)}),y=a(y,p),y=y.then(l),y=a(y,g),i?(y.success=function(e){return fe(e,"fn"),y.then(function(t){e(t.data,t.status,t.headers,h)}),y},y.error=function(e){return fe(e,"fn"),y.then(null,function(t){e(t.data,t.status,t.headers,h)}),y}):(y.success=ha("success"),y.error=ha("error")),y}function p(e){r(arguments,function(e){h[e]=function(t,n){return h(u({},n||{},{method:e,url:t}))}})}function g(e){r(arguments,function(e){h[e]=function(t,n,r){return h(u({},r||{},{method:e,url:t,data:n}))}})}function m(t,i){function a(e){if(e){var t={};return r(e,function(e,r){t[r]=function(t){function r(){e(t)}n?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),t}}function l(e,t,r,i){function a(){u(t,e,r,i)}g&&(Nt(e)?g.put(w,[e,t,Ot(r),i]):g.remove(w)),n?c.$applyAsync(a):(a(),c.$$phase||c.$apply())}function u(e,n,r,i){n=n>=-1?n:0,(Nt(n)?E.resolve:E.reject)({data:e,status:n,headers:It(r),config:t,statusText:i})}function d(e){u(e.data,e.status,ve(e.headers()),e.statusText)}function p(){var e=h.pendingRequests.indexOf(t);e!==-1&&h.pendingRequests.splice(e,1)}var g,m,E=f.defer(),S=E.promise,T=t.headers,w=_(t.url,t.paramSerializer(t.params));if(h.pendingRequests.push(t),S.then(p,p),!t.cache&&!e.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(g=b(t.cache)?t.cache:b(e.cache)?e.cache:x),g&&(m=g.get(w),y(m)?N(m)?m.then(d,d):ri(m)?u(m[1],m[0],ve(m[2]),m[3]):u(m,200,{},"OK"):g.put(w,S)),v(m)){var A=Rn(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;A&&(T[t.xsrfHeaderName||e.xsrfHeaderName]=A),o(t.method,w,i,l,T,t.timeout,t.withCredentials,t.responseType,a(t.eventHandlers),a(t.uploadEventHandlers))}return S}function _(e,t){return t.length>0&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}var x=l("$http");e.paramSerializer=E(e.paramSerializer)?d.get(e.paramSerializer):e.paramSerializer;var S=[];return r(a,function(e){S.unshift(E(e)?d.get(e):d.invoke(e))}),h.pendingRequests=[],p("get","delete","head","jsonp"),g("post","put","patch"),h.defaults=e,h}]}function Lt(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function $t(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return Rt(e,r,e.defer,t,n[0])}]}function Rt(e,t,n,i,a){function o(e,t,n){e=e.replace("JSON_CALLBACK",t);var r=a.createElement("script"),o=null;return r.type="text/javascript",r.src=e,r.async=!0,o=function(e){Ti(r,"load",o),Ti(r,"error",o),a.body.removeChild(r),r=null;var s=-1,l="unknown";e&&("load"!==e.type||i.wasCalled(t)||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},Si(r,"load",o),Si(r,"error",o),a.body.appendChild(r),o}return function(a,s,l,u,c,f,d,p,g,m){function b(){x&&x(),S&&S.abort()}function _(t,r,i,a,o){y(A)&&n.cancel(A),x=S=null,t(r,i,a,o),e.$$completeOutstandingRequest(h)}if(e.$$incOutstandingRequestCount(),s=s||e.url(),"jsonp"===jr(a))var E=i.createCallback(s),x=o(s,E,function(e,t){var n=200===e&&i.getResponse(E);_(u,e,n,"",t),i.removeCallback(E)});else{var S=t(a,s);S.open(a,s,!0),r(c,function(e,t){y(e)&&S.setRequestHeader(t,e)}),S.onload=function(){var e=S.statusText||"",t="response"in S?S.response:S.responseText,n=1223===S.status?204:S.status;0===n&&(n=t?200:"file"===$n(s).protocol?404:0),_(u,n,t,S.getAllResponseHeaders(),e)};var T=function(){_(u,-1,null,null,"")};if(S.onerror=T,S.onabort=T,S.ontimeout=T,r(g,function(e,t){S.addEventListener(t,e)}),r(m,function(e,t){S.upload.addEventListener(t,e)}),d&&(S.withCredentials=!0),p)try{S.responseType=p}catch(w){if("json"!==p)throw w}S.send(v(l)?null:l)}if(f>0)var A=n(b,f);else N(f)&&f.then(b)}}function Pt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function a(e){return"\\\\\\"+e}function o(n){return n.replace(h,e).replace(p,t)}function s(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=Y(e)}return e}function l(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function c(a,c,h,p){function m(e){try{return e=N(e),p&&!y(e)?e:s(e)}catch(t){r(pa.interr(a,t))}}if(!a.length||a.indexOf(e)===-1){var b;if(!c){var _=o(a);b=g(_),b.exp=a,b.expressions=[],b.$$watchDelegate=l}return b}p=!!p;for(var E,x,S,w=0,A=[],C=[],k=a.length,O=[],I=[];w<k;){if((E=a.indexOf(e,w))===-1||(x=a.indexOf(t,E+f))===-1){w!==k&&O.push(o(a.substring(w)));break}w!==E&&O.push(o(a.substring(w,E))),S=a.substring(E+f,x),A.push(S),C.push(n(S,m)),w=x+d,I.push(O.length),O.push("")}if(h&&O.length>1&&pa.throwNoconcat(a),!c||A.length){var M=function(e){for(var t=0,n=A.length;t<n;t++){if(p&&v(e[t]))return;O[I[t]]=e[t]}return O.join("")},N=function(e){return h?i.getTrusted(h,e):i.valueOf(e)};return u(function(e){var t=0,n=A.length,i=new Array(n);try{for(;t<n;t++)i[t]=C[t](e);return M(i)}catch(o){r(pa.interr(a,o))}},{exp:a,expressions:A,$$watchDelegate:function(e,t){var n;return e.$watchGroup(C,function(r,i){var a=M(r);T(t)&&t.call(this,a,r!==i?n:a,e),n=a})}})}}var f=e.length,d=t.length,h=new RegExp(e.replace(/./g,a),"g"),p=new RegExp(t.replace(/./g,a),"g");return c.startSymbol=function(){return e},c.endSymbol=function(){return t},c}]}function Ft(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function a(a,s,l,u){function c(){f?a.apply(null,d):a(g)}var f=arguments.length>4,d=f?z(arguments,4):[],h=t.setInterval,p=t.clearInterval,g=0,m=y(u)&&!u,v=(m?r:n).defer(),b=v.promise;return l=y(l)?l:0,b.$$intervalId=h(function(){m?i.defer(c):e.$evalAsync(c),v.notify(g++),l>0&&g>=l&&(v.resolve(g),p(b.$$intervalId),delete o[b.$$intervalId]),m||e.$apply()},s),o[b.$$intervalId]=v,b}var o={};return a.cancel=function(e){return!!(e&&e.$$intervalId in o)&&(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0)},a}]}function Ut(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ee(t[n]);return t.join("/")}function jt(e,t){var n=$n(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||va[n.protocol]||null}function Ht(e,t){if(ba.test(e))throw ya("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var r=$n(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=Q(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function zt(e,t){return e.slice(0,t.length)===t}function Bt(e,t){if(zt(t,e))return t.substr(e.length)}function qt(e){var t=e.indexOf("#");return t===-1?e:e.substr(0,t)}function Yt(e){return e.replace(/(#.+)|#$/,"$1")}function Xt(e){return e.substr(0,qt(e).lastIndexOf("/")+1)}function Wt(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Gt(e,t,n){this.$$html5=!0,n=n||"",jt(e,this),this.$$parse=function(e){var n=Bt(t,e);if(!E(n))throw ya("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Ht(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=J(this.$$search),n=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Ut(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,o,s;return y(a=Bt(e,r))?(o=a,s=n&&y(a=Bt(n,a))?t+(Bt("/",a)||a):e+o):y(a=Bt(t,r))?s=t+a:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function Vt(e,t,n){jt(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return zt(t,n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var a,o=Bt(e,r)||Bt(t,r);v(o)||"#"!==o.charAt(0)?this.$$html5?a=o:(a="",v(o)&&(e=r,this.replace())):(a=Bt(n,o),v(a)&&(a=o)),Ht(a,this),this.$$path=i(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var t=J(this.$$search),r=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Ut(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return qt(e)===qt(t)&&(this.$$parse(t),!0)}}function Kt(e,t,n){this.$$html5=!0,Vt.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,o;return e===qt(r)?a=r:(o=Bt(t,r))?a=e+n+o:t===r+"/"&&(a=t),a&&this.$$parse(a),!!a},this.$$compose=function(){var t=J(this.$$search),r=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Ut(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function Zt(e){return function(){return this[e]}}function Qt(e,t){return function(n){return v(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Jt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return y(t)?(e=t,this):e},this.html5Mode=function(e){return M(e)?(t.enabled=e,this):b(e)?(M(e.enabled)&&(t.enabled=e.enabled),M(e.requireBase)&&(t.requireBase=e.requireBase),(M(e.rewriteLinks)||E(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,o){function s(e,t,n){var i=u.url(),a=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(o){throw u.url(i),u.$$state=a,o}}function l(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,c,f,d=r.baseHref(),h=r.url();if(t.enabled){if(!d&&t.requireBase)throw ya("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=Wt(h)+(d||"/"),c=i.history?Gt:Kt}else f=qt(h),c=Vt;var p=Xt(f);u=new c(f,p,"#"+e),u.$$parseLinkUrl(h,h),u.$$state=r.state();var g=/^\s*(javascript|mailto):/i;a.on("click",function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=Yr(e.target);"a"!==P(s[0]);)if(s[0]===a[0]||!(s=s.parent())[0])return;if(!E(i)||!v(s.attr(i))){var l=s.prop("href"),c=s.attr("href")||s.attr("xlink:href");b(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=$n(l.animVal).href),g.test(l)||!l||s.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(l,c)&&(e.preventDefault(),u.absUrl()!==r.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}}}),Yt(u.absUrl())!==Yt(h)&&r.url(u.absUrl(),!0);var m=!0;return r.onUrlChange(function(e,t){return v(Bt(p,e))?void(o.location.href=e):(n.$evalAsync(function(){var r,i=u.absUrl(),a=u.$$state;e=Yt(e),u.$$parse(e),u.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,a).defaultPrevented,u.absUrl()===e&&(r?(u.$$parse(i),u.$$state=a,s(i,!1,a)):(m=!1,l(i,a)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=Yt(r.url()),t=Yt(u.absUrl()),a=r.state(),o=u.$$replace,c=e!==t||u.$$html5&&i.history&&a!==u.$$state;(m||c)&&(m=!1,n.$evalAsync(function(){var t=u.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,u.$$state,a).defaultPrevented;u.absUrl()===t&&(r?(u.$$parse(e),u.$$state=a):(c&&s(t,o,a===u.$$state?null:u.$$state),l(e,a)))})),u.$$replace=!1}),u}]}function en(){var e=!0,t=this;this.debugEnabled=function(t){return y(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function a(e){var t=n.console||{},a=t[e]||t.log||h,o=!1;try{o=!!a.apply}catch(s){}return o?function(){var e=[];return r(arguments,function(t){e.push(i(t))}),a.apply(t,e)}:function(e,t){a(e,null==t?"":t)}}return{log:a("log"),info:a("info"),warn:a("warn"),error:a("error"),debug:function(){var n=a("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function tn(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Ea("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function nn(e){return e+""}function rn(e,t){if(e){if(e.constructor===e)throw Ea("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Ea("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Ea("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Ea("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function an(e,t){if(e){if(e.constructor===e)throw Ea("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===La||e===$a||e===Ra)throw Ea("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function on(e,t){if(e&&(e===xa||e===Sa||e===Ta||e===wa||e===Aa||e===Ca||e===ka||e===Oa||e===Ia||e===Ma||e===Na||e===Da))throw Ea("isecaf","Assigning to a constructor or its prototype is disallowed! Expression: {0}",t);
}function sn(e,t){return"undefined"!=typeof e?e:t}function ln(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function un(e,t){var n=e(t);return!n.$stateful}function cn(e,t){var n,i,a;switch(e.type){case Ha.Program:n=!0,r(e.body,function(e){cn(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case Ha.Literal:e.constant=!0,e.toWatch=[];break;case Ha.UnaryExpression:cn(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ha.BinaryExpression:cn(e.left,t),cn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ha.LogicalExpression:cn(e.left,t),cn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ha.ConditionalExpression:cn(e.test,t),cn(e.alternate,t),cn(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ha.Identifier:e.constant=!1,e.toWatch=[e];break;case Ha.MemberExpression:cn(e.object,t),e.computed&&cn(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Ha.CallExpression:a=!!e.filter&&un(t,e.callee.name),n=a,i=[],r(e.arguments,function(e){cn(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=a?i:[e];break;case Ha.AssignmentExpression:cn(e.left,t),cn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ha.ArrayExpression:n=!0,i=[],r(e.elements,function(e){cn(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=i;break;case Ha.ObjectExpression:n=!0,i=[],r(e.properties,function(e){cn(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||i.push.apply(i,e.value.toWatch)}),e.constant=n,e.toWatch=i;break;case Ha.ThisExpression:e.constant=!1,e.toWatch=[];break;case Ha.LocalsExpression:e.constant=!1,e.toWatch=[]}}function fn(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function dn(e){return e.type===Ha.Identifier||e.type===Ha.MemberExpression}function hn(e){if(1===e.body.length&&dn(e.body[0].expression))return{type:Ha.AssignmentExpression,left:e.body[0].expression,right:{type:Ha.NGValueParameter},operator:"="}}function pn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===Ha.Literal||e.body[0].expression.type===Ha.ArrayExpression||e.body[0].expression.type===Ha.ObjectExpression)}function gn(e){return e.constant}function mn(e,t){this.astBuilder=e,this.$filter=t}function vn(e,t){this.astBuilder=e,this.$filter=t}function yn(e){return"constructor"===e}function bn(e){return T(e.valueOf)?e.valueOf():Pa.call(e)}function _n(){var e,t,n=ge(),i=ge(),a={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(e,t){a[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(o){function s(e,t,r){var a,s,u;switch(r=r||_,typeof e){case"string":e=e.trim(),u=e;var m=r?i:n;if(a=m[u],!a){":"===e.charAt(0)&&":"===e.charAt(1)&&(s=!0,e=e.substring(2));var y=r?b:v,E=new ja(y),x=new za(E,o,y);a=x.parse(e),a.constant?a.$$watchDelegate=p:s?a.$$watchDelegate=a.literal?d:f:a.inputs&&(a.$$watchDelegate=c),r&&(a=l(a)),m[u]=a}return g(a,t);case"function":return g(e,t);default:return g(h,t)}}function l(e){function t(t,n,r,i){var a=_;_=!0;try{return e(t,n,r,i)}finally{_=a}}if(!e)return e;t.$$watchDelegate=e.$$watchDelegate,t.assign=l(e.assign),t.constant=e.constant,t.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=l(e.inputs[n]);return t.inputs=e.inputs,t}function u(e,t){return null==e||null==t?e===t:("object"!=typeof e||(e=bn(e),"object"!=typeof e))&&(e===t||e!==e&&t!==t)}function c(e,t,n,r,i){var a,o=r.inputs;if(1===o.length){var s=u;return o=o[0],e.$watch(function(e){var t=o(e);return u(t,s)||(a=r(e,void 0,void 0,[t]),s=t&&bn(t)),a},t,n,i)}for(var l=[],c=[],f=0,d=o.length;f<d;f++)l[f]=u,c[f]=null;return e.$watch(function(e){for(var t=!1,n=0,i=o.length;n<i;n++){var s=o[n](e);(t||(t=!u(s,l[n])))&&(c[n]=s,l[n]=s&&bn(s))}return t&&(a=r(e,void 0,void 0,c)),a},t,n,i)}function f(e,t,n,r){var i,a;return i=e.$watch(function(e){return r(e)},function(e,n,r){a=e,T(t)&&t.apply(this,arguments),y(e)&&r.$$postDigest(function(){y(a)&&i()})},n)}function d(e,t,n,i){function a(e){var t=!0;return r(e,function(e){y(e)||(t=!1)}),t}var o,s;return o=e.$watch(function(e){return i(e)},function(e,n,r){s=e,T(t)&&t.call(this,e,n,r),a(e)&&r.$$postDigest(function(){a(s)&&o()})},n)}function p(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function g(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==d&&n!==f,a=i?function(n,i,a,o){var s=r&&o?o[0]:e(n,i,a,o);return t(s,n,i)}:function(n,r,i,a){var o=e(n,r,i,a),s=t(o,n,r);return y(o)?s:o};return e.$$watchDelegate&&e.$$watchDelegate!==c?a.$$watchDelegate=e.$$watchDelegate:t.$stateful||(a.$$watchDelegate=c,r=!e.inputs,a.inputs=e.inputs?e.inputs:[e]),a}var m=si().noUnsafeEval,v={csp:m,expensiveChecks:!1,literals:U(a),isIdentifierStart:T(e)&&e,isIdentifierContinue:T(t)&&t},b={csp:m,expensiveChecks:!0,literals:U(a),isIdentifierStart:T(e)&&e,isIdentifierContinue:T(t)&&t},_=!1;return s.$$runningExpensiveChecks=function(){return _},s}]}function En(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Sn(function(t){e.$evalAsync(t)},t)}]}function xn(){this.$get=["$browser","$exceptionHandler",function(e,t){return Sn(function(t){e.defer(t)},t)}]}function Sn(e,n){function i(){var e=new c;return e.resolve=o(e,e.resolve),e.reject=o(e,e.reject),e.notify=o(e,e.notify),e}function a(){this.$$state={status:0}}function o(e,t){return function(n){t.call(e,n)}}function s(e){var t,r,i;i=e.pending,e.processScheduled=!1,e.pending=void 0;for(var a=0,o=i.length;a<o;++a){r=i[a][0],t=i[a][e.status];try{T(t)?r.resolve(t(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(s){r.reject(s),n(s)}}}function l(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){s(t)}))}function c(){this.promise=new a}function f(e){var t=new c;return t.reject(e),t.promise}function d(e,t,n){var r=null;try{T(n)&&(r=n())}catch(i){return f(i)}return N(r)?r.then(function(){return t(e)},f):t(e)}function h(e,t,n,r){var i=new c;return i.resolve(e),i.promise.then(t,n,r)}function p(e){var t=new c,n=0,i=ri(e)?[]:{};return r(e,function(e,r){n++,h(e).then(function(e){i[r]=e,--n||t.resolve(i)},function(e){t.reject(e)})}),0===n&&t.resolve(i),t.promise}function g(e){var t=i();return r(e,function(e){h(e).then(t.resolve,t.reject)}),t.promise}function m(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!T(e))throw y("norslvr","Expected resolverFn, got '{0}'",e);var r=new c;return e(t,n),r.promise}var y=t("$q",TypeError);u(a.prototype,{then:function(e,t,n){if(v(e)&&v(t)&&v(n))return this;var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return d(t,_,e)},function(t){return d(t,f,e)},t)}}),u(c.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(y("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){function t(e){s||(s=!0,a.$$resolve(e))}function r(e){s||(s=!0,a.$$reject(e))}var i,a=this,s=!1;try{(b(e)||T(e))&&(i=e&&e.then),T(i)?(this.promise.$$state.status=-1,i.call(e,t,r,o(this,this.notify))):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(u){r(u),n(u)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(t){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,a=0,o=r.length;a<o;a++){i=r[a][0],e=r[a][3];try{i.notify(T(e)?e(t):t)}catch(s){n(s)}}})}});var _=h;return m.prototype=a.prototype,m.defer=i,m.reject=f,m.when=h,m.resolve=_,m.all=p,m.race=g,m}function Tn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=i,a}]}function wn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=o(),this.$$ChildScope=null}return t.prototype=e,t}var i=10,a=t("$rootScope"),s=null,l=null;this.digestTtl=function(e){return arguments.length&&(i=e),i},this.$get=["$exceptionHandler","$parse","$browser",function(t,u,c){function f(e){e.currentScope.$$destroyed=!0}function d(e){9===qr&&(e.$$childHead&&d(e.$$childHead),e.$$nextSibling&&d(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function p(){this.$id=o(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function g(e){if(w.$$phase)throw a("inprog","{0} already in progress",w.$$phase);w.$$phase=e}function m(){w.$$phase=null}function y(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function _(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function E(){}function x(){for(;k.length;)try{k.shift()()}catch(e){t(e)}l=null}function S(){null===l&&(l=c.defer(function(){w.$apply(x)}))}p.prototype={constructor:p,$new:function(t,n){var r;return n=n||this,t?(r=new p,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!==this)&&r.$on("$destroy",f),r},$watch:function(e,t,n,r){var i=u(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var a=this,o=a.$$watchers,l={fn:t,last:E,get:i,exp:r||e,eq:!!n};return s=null,T(t)||(l.fn=h),o||(o=a.$$watchers=[],o.$$digestWatchIndex=-1),o.unshift(l),o.$$digestWatchIndex++,y(this,1),function(){var e=F(o,l);e>=0&&(y(a,-1),e<o.$$digestWatchIndex&&o.$$digestWatchIndex--),s=null}},$watchGroup:function(e,t){function n(){l=!1,u?(u=!1,t(a,a,s)):t(a,i,s)}var i=new Array(e.length),a=new Array(e.length),o=[],s=this,l=!1,u=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(a,a,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,r){a[0]=e,i[0]=n,t(a,e===n?a:i,r)}):(r(e,function(e,t){var r=s.$watch(e,function(e,r){a[t]=e,i[t]=r,l||(l=!0,s.$evalAsync(n))});o.push(r)}),function(){for(;o.length;)o.shift()()})},$watchCollection:function(e,t){function r(e){a=e;var t,r,i,s,l;if(!v(a)){if(b(a))if(n(a)){o!==h&&(o=h,m=o.length=0,f++),t=a.length,m!==t&&(f++,o.length=m=t);for(var u=0;u<t;u++)l=o[u],s=a[u],i=l!==l&&s!==s,i||l===s||(f++,o[u]=s)}else{o!==p&&(o=p={},m=0,f++),t=0;for(r in a)Ur.call(a,r)&&(t++,s=a[r],l=o[r],r in o?(i=l!==l&&s!==s,i||l===s||(f++,o[r]=s)):(m++,o[r]=s,f++));if(m>t){f++;for(r in o)Ur.call(a,r)||(m--,delete o[r])}}else o!==a&&(o=a,f++);return f}}function i(){if(g?(g=!1,t(a,a,l)):t(a,s,l),c)if(b(a))if(n(a)){s=new Array(a.length);for(var e=0;e<a.length;e++)s[e]=a[e]}else{s={};for(var r in a)Ur.call(a,r)&&(s[r]=a[r])}else s=a}r.$stateful=!0;var a,o,s,l=this,c=t.length>1,f=0,d=u(e,r),h=[],p={},g=!0,m=0;return this.$watch(d,i)},$digest:function(){var e,n,r,o,u,f,d,h,p,v,y,b=i,_=this,S=[];g("$digest"),c.$$checkUrlChange(),this===w&&null!==l&&(c.defer.cancel(l),x()),s=null;do{d=!1,p=_;for(var k=0;k<A.length;k++){try{y=A[k],y.scope.$eval(y.expression,y.locals)}catch(I){t(I)}s=null}A.length=0;e:do{if(f=p.$$watchers)for(f.$$digestWatchIndex=f.length;f.$$digestWatchIndex--;)try{if(e=f[f.$$digestWatchIndex])if(u=e.get,(n=u(p))===(r=e.last)||(e.eq?j(n,r):ni(n)&&ni(r))){if(e===s){d=!1;break e}}else d=!0,s=e,e.last=e.eq?U(n,null):n,o=e.fn,o(n,r===E?n:r,p),b<5&&(v=4-b,S[v]||(S[v]=[]),S[v].push({msg:T(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:n,oldVal:r}))}catch(I){t(I)}if(!(h=p.$$watchersCount&&p.$$childHead||p!==_&&p.$$nextSibling))for(;p!==_&&!(h=p.$$nextSibling);)p=p.$parent}while(p=h);if((d||A.length)&&!b--)throw m(),a("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",i,S)}while(d||A.length);for(m();O<C.length;)try{C[O++]()}catch(I){t(I)}C.length=O=0},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===w&&c.$$applicationDestroyed(),y(this,-this.$$watchersCount);for(var t in this.$$listenerCount)_(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=h,this.$on=this.$watch=this.$watchGroup=function(){return h},this.$$listeners={},this.$$nextSibling=null,d(this)}},$eval:function(e,t){return u(e)(this,t)},$evalAsync:function(e,t){w.$$phase||A.length||c.defer(function(){A.length&&w.$digest()}),A.push({scope:this,expression:u(e),locals:t})},$$postDigest:function(e){C.push(e)},$apply:function(e){try{g("$apply");try{return this.$eval(e)}finally{m()}}catch(n){t(n)}finally{try{w.$digest()}catch(n){throw t(n),n}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&k.push(t),e=u(e),S()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);r!==-1&&(n[r]=null,_(i,1,e))}},$emit:function(e,n){var r,i,a,o=[],s=this,l=!1,u={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=H([u],arguments,1);do{for(r=s.$$listeners[e]||o,u.currentScope=s,i=0,a=r.length;i<a;i++)if(r[i])try{r[i].apply(null,c)}catch(f){t(f)}else r.splice(i,1),i--,a--;if(l)return u.currentScope=null,u;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(e,n){var r=this,i=r,a=r,o={name:e,targetScope:r,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!r.$$listenerCount[e])return o;for(var s,l,u,c=H([o],arguments,1);i=a;){for(o.currentScope=i,s=i.$$listeners[e]||[],l=0,u=s.length;l<u;l++)if(s[l])try{s[l].apply(null,c)}catch(f){t(f)}else s.splice(l,1),l--,u--;if(!(a=i.$$listenerCount[e]&&i.$$childHead||i!==r&&i.$$nextSibling))for(;i!==r&&!(a=i.$$nextSibling);)i=i.$parent}return o.currentScope=null,o}};var w=new p,A=w.$$asyncQueue=[],C=w.$$postDigestQueue=[],k=w.$$applyAsyncQueue=[],O=0;return w}]}function An(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,a=r?t:e;return i=$n(n).href,""===i||i.match(a)?n:"unsafe:"+i}}}function Cn(e){if("self"===e)return e;if(E(e)){if(e.indexOf("***")>-1)throw Ba("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=oi(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(w(e))return new RegExp("^"+e.source+"$");throw Ba("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function kn(e){var t=[];return y(e)&&r(e,function(e){t.push(Cn(e))}),t}function On(){this.SCE_CONTEXTS=qa;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=kn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=kn(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Rn(t):!!e.exec(t.href)}function i(n){var i,a,o=$n(n.toString()),s=!1;for(i=0,a=e.length;i<a;i++)if(r(e[i],o)){s=!0;break}if(s)for(i=0,a=t.length;i<a;i++)if(r(t[i],o)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function o(e,t){var n=f.hasOwnProperty(e)?f[e]:null;if(!n)throw Ba("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||v(t)||""===t)return t;if("string"!=typeof t)throw Ba("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof c?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||v(t)||""===t)return t;var n=f.hasOwnProperty(e)?f[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===qa.RESOURCE_URL){if(i(t))return t;throw Ba("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===qa.HTML)return u(t);throw Ba("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(e){throw Ba("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(u=n.get("$sanitize"));var c=a(),f={};return f[qa.HTML]=a(c),f[qa.CSS]=a(c),f[qa.URL]=a(c),f[qa.JS]=a(c),f[qa.RESOURCE_URL]=a(f[qa.URL]),{trustAs:o,getTrusted:l,valueOf:s}}]}function In(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&qr<8)throw Ba("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=ve(qa);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=p),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var a=i.parseAs,o=i.getTrusted,s=i.trustAs;return r(qa,function(e,t){var n=jr(t);i[xe("parse_as_"+n)]=function(t){return a(e,t)},i[xe("get_trusted_"+n)]=function(t){return o(e,t)},i[xe("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function Mn(){this.$get=["$window","$document",function(e,t){var n,r,i={},a=e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),o=!a&&e.history&&e.history.pushState,s=f((/android (\d+)/.exec(jr((e.navigator||{}).userAgent))||[])[1]),l=/Boxee/i.test((e.navigator||{}).userAgent),u=t[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,d=u.body&&u.body.style,h=!1,p=!1;if(d){for(var g in d)if(r=c.exec(g)){n=r[0],n=n[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in d&&"webkit"),h=!!("transition"in d||n+"Transition"in d),p=!!("animation"in d||n+"Animation"in d),!s||h&&p||(h=E(d.webkitTransition),p=E(d.webkitAnimation))}return{history:!(!o||s<4||l),hasEvent:function(e){if("input"===e&&qr<=11)return!1;if(v(i[e])){var t=u.createElement("div");i[e]="on"+e in t}return i[e]},csp:si(),vendorPrefix:n,transitions:h,animations:p,android:s}}]}function Nn(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$templateCache","$http","$q","$sce",function(t,n,r,i){function a(o,s){function l(e){if(!s)throw Ya("tpload","Failed to load template: {0} (HTTP status: {1} {2})",o,e.status,e.statusText);return r.reject(e)}a.totalPendingRequests++,E(o)&&!v(t.get(o))||(o=i.getTrustedResourceUrl(o));var c=n.defaults&&n.defaults.transformResponse;return ri(c)?c=c.filter(function(e){return e!==Ct}):c===Ct&&(c=null),n.get(o,u({cache:t,transformResponse:c},e))["finally"](function(){a.totalPendingRequests--}).then(function(e){return t.put(o,e.data),e.data},l)}return a.totalPendingRequests=0,a}]}function Dn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),a=[];return r(i,function(e){var i=ei.element(e).data("$binding");i&&r(i,function(r){if(n){var i=new RegExp("(^|\\s)"+oi(t)+"(\\s|\\||$)");i.test(r)&&a.push(e)}else r.indexOf(t)!==-1&&a.push(e)})}),a},i.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a=n?"=":"*=",o="["+r[i]+"model"+a+'"'+t+'"]',s=e.querySelectorAll(o);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function Ln(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function a(a,s,l){T(a)||(l=s,s=a,a=h);var u,c=z(arguments,3),f=y(l)&&!l,d=(f?r:n).defer(),p=d.promise;return u=t.defer(function(){try{d.resolve(a.apply(null,c))}catch(t){d.reject(t),i(t)}finally{delete o[p.$$timeoutId]}f||e.$apply()},s),p.$$timeoutId=u,o[u]=d,p}var o={};return a.cancel=function(e){return!!(e&&e.$$timeoutId in o)&&(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},a}]}function $n(e){var t=e;return qr&&(Xa.setAttribute("href",t),t=Xa.href),Xa.setAttribute("href",t),{href:Xa.href,protocol:Xa.protocol?Xa.protocol.replace(/:$/,""):"",host:Xa.host,search:Xa.search?Xa.search.replace(/^\?/,""):"",hash:Xa.hash?Xa.hash.replace(/^#/,""):"",hostname:Xa.hostname,port:Xa.port,pathname:"/"===Xa.pathname.charAt(0)?Xa.pathname:"/"+Xa.pathname}}function Rn(e){var t=E(e)?$n(e):e;return t.protocol===Wa.protocol&&t.host===Wa.host}function Pn(){this.$get=g(e)}function Fn(e){function t(e){try{return e.cookie||""}catch(t){return""}}function n(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},i={},a="";return function(){var e,o,s,l,u,c=t(r);if(c!==a)for(a=c,e=a.split("; "),i={},s=0;s<e.length;s++)o=e[s],l=o.indexOf("="),l>0&&(u=n(o.substring(0,l)),v(i[u])&&(i[u]=n(o.substring(l+1))));return i}}function Un(){this.$get=Fn}function jn(e){function t(i,a){if(b(i)){var o={};return r(i,function(e,n){o[n]=t(n,e)}),o}return e.factory(i+n,a)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Yn),t("date",or),t("filter",Hn),t("json",sr),t("limitTo",lr),t("lowercase",eo),t("number",Xn),t("orderBy",cr),t("uppercase",to)}function Hn(){return function(e,r,i,a){if(!n(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}a=a||"$";var o,s,l=qn(r);switch(l){case"function":o=r;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":o=zn(r,i,a,s);break;default:return e}return Array.prototype.filter.call(e,o)}}function zn(e,t,n,r){var i,a=b(e)&&n in e;return t===!0?t=j:T(t)||(t=function(e,t){return!v(e)&&(null===e||null===t?e===t:!(b(t)||b(e)&&!m(e))&&(e=jr(""+e),t=jr(""+t),e.indexOf(t)!==-1))}),i=function(i){return a&&!b(i)?Bn(i,e[n],t,n,!1):Bn(i,e,t,n,r)}}function Bn(e,t,n,r,i,a){var o=qn(e),s=qn(t);if("string"===s&&"!"===t.charAt(0))return!Bn(e,t.substring(1),n,r,i);if(ri(e))return e.some(function(e){return Bn(e,t,n,r,i)});switch(o){case"object":var l;if(i){for(l in e)if("$"!==l.charAt(0)&&Bn(e[l],t,n,r,!0))return!0;return!a&&Bn(e,t,n,r,!1)}if("object"===s){for(l in t){var u=t[l];if(!T(u)&&!v(u)){var c=l===r,f=c?e:e[l];if(!Bn(f,u,n,r,c,c))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function qn(e){return null===e?"null":typeof e}function Yn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return v(n)&&(n=t.CURRENCY_SYM),v(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Vn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Xn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Vn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Wn(e){var t,n,r,i,a,o=0;for((n=e.indexOf(Va))>-1&&(e=e.replace(Va,"")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)===Ka;r++);if(r===(a=e.length))t=[0],n=1;else{for(a--;e.charAt(a)===Ka;)a--;for(n-=r,t=[],i=0;r<=a;r++,i++)t[i]=+e.charAt(r)}return n>Ga&&(t=t.splice(0,Ga-1),o=n-1,n=1),{d:t,e:o,i:n}}function Gn(e,t,n,r){var i=e.d,a=i.length-e.i;t=v(t)?Math.min(Math.max(n,a),r):+t;var o=t+e.i,s=i[o];if(o>0){i.splice(Math.max(e.i,o));for(var l=o;l<i.length;l++)i[l]=0}else{a=Math.max(0,a),e.i=1,i.length=Math.max(1,o=t+1),i[0]=0;for(var u=1;u<o;u++)i[u]=0}if(s>=5)if(o-1<0){for(var c=0;c>o;c--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[o-1]++;for(;a<Math.max(0,t);a++)i.push(0);var f=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);f&&(i.unshift(f),e.i++)}function Vn(e,t,n,r,i){if(!E(e)&&!x(e)||isNaN(e))return"";var a,o=!isFinite(e),s=!1,l=Math.abs(e)+"",u="";if(o)u="∞";else{a=Wn(l),Gn(a,i,t.minFrac,t.maxFrac);var c=a.d,f=a.i,d=a.e,h=[];for(s=c.reduce(function(e,t){return e&&!t},!0);f<0;)c.unshift(0),f++;f>0?h=c.splice(f,c.length):(h=c,c=[0]);var p=[];for(c.length>=t.lgSize&&p.unshift(c.splice(-t.lgSize,c.length).join(""));c.length>t.gSize;)p.unshift(c.splice(-t.gSize,c.length).join(""));c.length&&p.unshift(c.join("")),u=p.join(n),h.length&&(u+=r+h.join("")),d&&(u+="e+"+d)}return e<0&&!s?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function Kn(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=-e+1:(e=-e,i="-")),e=""+e;e.length<t;)e=Ka+e;return n&&(e=e.substr(e.length-t)),i+e}function Zn(e,t,n,r,i){return n=n||0,function(a){var o=a["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&n===-12&&(o=12),Kn(o,t,r,i)}}function Qn(e,t,n){return function(r,i){var a=r["get"+e](),o=(n?"STANDALONE":"")+(t?"SHORT":""),s=Hr(o+e);return i[s][a]}}function Jn(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Kn(Math[r>0?"floor":"ceil"](r/60),2)+Kn(Math.abs(r%60),2)}function er(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function tr(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function nr(e){return function(t){var n=er(t.getFullYear()),r=tr(t),i=+r-+n,a=1+Math.round(i/6048e5);return Kn(a,e)}}function rr(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function ir(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function ar(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function or(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,a=0,o=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=f(t[9]+t[10]),a=f(t[9]+t[11])),o.call(r,f(t[1]),f(t[2])-1,f(t[3]));var l=f(t[4]||0)-i,u=f(t[5]||0)-a,c=f(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,l,u,c,d),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,a){var o,s,l="",u=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,E(n)&&(n=Ja.test(n)?f(n):t(n)),x(n)&&(n=new Date(n)),!S(n)||!isFinite(n.getTime()))return n;for(;i;)s=Qa.exec(i),s?(u=H(u,s,1),i=u.pop()):(u.push(i),i=null);var c=n.getTimezoneOffset();return a&&(c=W(a,c),n=V(n,a,!0)),r(u,function(t){o=Za[t],l+=o?o(n,e.DATETIME_FORMATS,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function sr(){return function(e,t){return v(t)&&(t=2),Y(e,t)}}function lr(){return function(e,t,r){return t=Math.abs(Number(t))===1/0?Number(t):f(t),ni(t)?e:(x(e)&&(e=e.toString()),n(e)?(r=!r||isNaN(r)?0:f(r),r=r<0?Math.max(0,e.length+r):r,t>=0?ur(e,r,r+t):0===r?ur(e,t,e.length):ur(e,Math.max(0,r+t),r)):e)}}function ur(e,t,n){return E(e)?e.slice(t,n):Gr.call(e,t,n)}function cr(e){function r(t){return t.map(function(t){var n=1,r=p;if(T(t))r=t;else if(E(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})}function i(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function a(e){return T(e.valueOf)&&(e=e.valueOf(),i(e))?e:m(e)&&(e=e.toString(),i(e))?e:e}function o(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=a(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,i=t.type;if(r===i){var a=e.value,o=t.value;"string"===r?(a=a.toLowerCase(),o=o.toLowerCase()):"object"===r&&(b(a)&&(a=e.index),b(o)&&(o=t.index)),a!==o&&(n=a<o?-1:1)}else n=r<i?-1:1;return n}return function(e,i,a,l){function u(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:f.map(function(n){return o(n.get(e),t)})}}function c(e,t){for(var n=0,r=f.length;n<r;n++){var i=h(e.predicateValues[n],t.predicateValues[n]);if(i)return i*f[n].descending*d}return h(e.tieBreaker,t.tieBreaker)*d}if(null==e)return e;if(!n(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);ri(i)||(i=[i]),0===i.length&&(i=["+"]);var f=r(i),d=a?-1:1,h=T(l)?l:s,p=Array.prototype.map.call(e,u);return p.sort(c),e=p.map(function(e){return e.value})}}function fr(e){return T(e)&&(e={link:e}),e.restrict=e.restrict||"AC",g(e)}function dr(e,t){e.$name=t}function hr(e,t,n,i,a){var o=this,s=[];o.$error={},o.$$success={},o.$pending=void 0,o.$name=a(t.name||t.ngForm||"")(n),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,o.$$parentForm=io,o.$rollbackViewValue=function(){r(s,function(e){e.$rollbackViewValue()})},o.$commitViewValue=function(){r(s,function(e){e.$commitViewValue()})},o.$addControl=function(e){de(e.$name,"input"),s.push(e),e.$name&&(o[e.$name]=e),e.$$parentForm=o},o.$$renameControl=function(e,t){var n=e.$name;o[n]===e&&delete o[n],o[t]=e,e.$name=t},o.$removeControl=function(e){e.$name&&o[e.$name]===e&&delete o[e.$name],r(o.$pending,function(t,n){o.$setValidity(n,null,e)}),r(o.$error,function(t,n){o.$setValidity(n,null,e)}),r(o.$$success,function(t,n){o.$setValidity(n,null,e)}),F(s,e),e.$$parentForm=io},Lr({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);i===-1&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(F(r,n),0===r.length&&delete e[t])},$animate:i}),o.$setDirty=function(){i.removeClass(e,Bo),i.addClass(e,qo),o.$dirty=!0,o.$pristine=!1,o.$$parentForm.$setDirty()},o.$setPristine=function(){i.setClass(e,Bo,qo+" "+ao),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,r(s,function(e){e.$setPristine()})},o.$setUntouched=function(){r(s,function(e){e.$setUntouched()})},o.$setSubmitted=function(){i.addClass(e,ao),o.$submitted=!0,o.$$parentForm.$setSubmitted()}}function pr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function gr(e,t,n,r,i,a){mr(e,t,n,r,i,a),pr(r)}function mr(e,t,n,r,i,a){var o=jr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,u()})}var l,u=function(e){if(l&&(a.defer.cancel(l),l=null),!s){var i=t.val(),u=e&&e.type;"password"===o||n.ngTrim&&"false"===n.ngTrim||(i=ai(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))t.on("input",u);else{var c=function(e,t,n){l||(l=a.defer(function(){l=null,t&&t.value===n||u(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||c(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",u),_o[o]&&r.$$hasNativeValidators&&o===n.type&&t.on(bo,function(e){if(!l){var t=this[Fr],n=t.badInput,r=t.typeMismatch;l=a.defer(function(){l=null,t.badInput===n&&t.typeMismatch===r||u(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function vr(e,t){if(S(e))return e;if(E(e)){mo.lastIndex=0;var n=mo.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,l=0,u=er(r),c=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),
l=t.getMilliseconds()),new Date(r,0,u.getDate()+c,a,o,s,l)}}return NaN}function yr(e,t){return function(n,i){var a,o;if(S(n))return n;if(E(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),uo.test(n))return new Date(n);if(e.lastIndex=0,a=e.exec(n))return a.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(a,function(e,n){n<t.length&&(o[t[n]]=+e)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function br(e,t,n,r){return function(i,a,o,s,l,u,c){function f(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function d(e){return y(e)&&!S(e)?n(e)||void 0:e}_r(i,a,o,s),mr(i,a,o,s,l,u);var h,p=s&&s.$options&&s.$options.timezone;if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var r=n(e,h);return p&&(r=V(r,p)),r}}),s.$formatters.push(function(e){if(e&&!S(e))throw Ko("datefmt","Expected `{0}` to be a date",e);return f(e)?(h=e,h&&p&&(h=V(h,p,!0)),c("date")(e,r,p)):(h=null,"")}),y(o.min)||o.ngMin){var g;s.$validators.min=function(e){return!f(e)||v(g)||n(e)>=g},o.$observe("min",function(e){g=d(e),s.$validate()})}if(y(o.max)||o.ngMax){var m;s.$validators.max=function(e){return!f(e)||v(m)||n(e)<=m},o.$observe("max",function(e){m=d(e),s.$validate()})}}}function _r(e,t,n,r){var i=t[0],a=r.$$hasNativeValidators=b(i.validity);a&&r.$parsers.push(function(e){var n=t.prop(Fr)||{};return n.badInput||n.typeMismatch?void 0:e})}function Er(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:ho.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!x(t))throw Ko("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function xr(e){return y(e)&&!x(e)&&(e=parseFloat(e)),ni(e)?void 0:e}function Sr(e){return(0|e)===e}function Tr(e){var t=e.toString(),n=t.indexOf(".");if(n===-1){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function wr(e,t,n){var r=Number(e);if(!Sr(r)||!Sr(t)||!Sr(n)){var i=Math.max(Tr(r),Tr(t),Tr(n)),a=Math.pow(10,i);r*=a,t*=a,n*=a}return(r-t)%n===0}function Ar(e,t,n,r,i,a){_r(e,t,n,r),mr(e,t,n,r,i,a),Er(r);var o,s;(y(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||v(o)||e>=o},n.$observe("min",function(e){o=xr(e),r.$validate()})),(y(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||v(s)||e<=s},n.$observe("max",function(e){s=xr(e),r.$validate()}))}function Cr(e,t,n,r,i,a){function o(e,r){t.attr(e,n[e]),n.$observe(e,r)}function s(e){if(f=xr(e),!ni(r.$modelValue))if(c){var n=t.val();f>n&&(n=f,t.val(n)),r.$setViewValue(n)}else r.$validate()}function l(e){if(d=xr(e),!ni(r.$modelValue))if(c){var n=t.val();d<n&&(t.val(d),n=d<f?f:d),r.$setViewValue(n)}else r.$validate()}function u(e){h=xr(e),ni(r.$modelValue)||(c&&r.$viewValue!==t.val()?r.$setViewValue(t.val()):r.$validate())}_r(e,t,n,r),Er(r),mr(e,t,n,r,i,a);var c=r.$$hasNativeValidators&&"range"===t[0].type,f=c?0:void 0,d=c?100:void 0,h=c?1:void 0,p=t[0].validity,g=y(n.min),m=y(n.max),b=y(n.step),_=r.$render;r.$render=c&&y(p.rangeUnderflow)&&y(p.rangeOverflow)?function(){_(),r.$setViewValue(t.val())}:_,g&&(r.$validators.min=c?function(){return!0}:function(e,t){return r.$isEmpty(t)||v(f)||t>=f},o("min",s)),m&&(r.$validators.max=c?function(){return!0}:function(e,t){return r.$isEmpty(t)||v(d)||t<=d},o("max",l)),b&&(r.$validators.step=c?function(){return!p.stepMismatch}:function(e,t){return r.$isEmpty(t)||v(h)||wr(t,f||0,h)},o("step",u))}function kr(e,t,n,r,i,a){mr(e,t,n,r,i,a),pr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||co.test(n)}}function Or(e,t,n,r,i,a){mr(e,t,n,r,i,a),pr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||fo.test(n)}}function Ir(e,t,n,r){v(n.name)&&t.attr("name",o());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function Mr(e,t,n,r,i){var a;if(y(r)){if(a=e(r),!a.constant)throw Ko("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return i}function Nr(e,t,n,r,i,a,o,s){var l=Mr(s,e,"ngTrueValue",n.ngTrueValue,!0),u=Mr(s,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return j(e,l)}),r.$parsers.push(function(e){return e?l:u})}function Dr(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i===t[a])continue e;n.push(i)}return n}function a(e){var t=[];return ri(e)?(r(e,function(e){t=t.concat(a(e))}),t):E(e)?e.split(" "):b(e)?(r(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(o,s,l){function u(e){var t=f(e,1);l.$addClass(t)}function c(e){var t=f(e,-1);l.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||ge(),i=[];return r(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),s.data("$classCounts",n),i.join(" ")}function d(e,t){var r=i(t,e),a=i(e,t);r=f(r,1),a=f(a,-1),r&&r.length&&n.addClass(s,r),a&&a.length&&n.removeClass(s,a)}function h(e){if(t===!0||(1&o.$index)===t){var n=a(e||[]);if(p){if(!j(e,p)){var r=a(p);d(r,n)}}else u(n)}p=ri(e)?e.map(function(e){return ve(e)}):ve(e)}var p;l.$observe("class",function(t){h(o.$eval(l[e]))}),"ngClass"!==e&&o.$watch("$index",function(e,n){var r=1&e;if(r!==(1&n)){var i=a(p);r===t?u(i):c(i)}}),o.$watch(l[e],h,!0)}}}]}function Lr(e){function t(e,t,s){v(t)?n("$pending",e,s):r("$pending",e,s),M(t)?t?(c(o.$error,e,s),u(o.$$success,e,s)):(u(o.$error,e,s),c(o.$$success,e,s)):(c(o.$error,e,s),c(o.$$success,e,s)),o.$pending?(i(Wo,!0),o.$valid=o.$invalid=void 0,a("",null)):(i(Wo,!1),o.$valid=$r(o.$error),o.$invalid=!o.$valid,a("",o.$valid));var l;l=o.$pending&&o.$pending[e]?void 0:!o.$error[e]&&(!!o.$$success[e]||null),a(e,l),o.$$parentForm.$setValidity(e,l,o)}function n(e,t,n){o[e]||(o[e]={}),u(o[e],t,n)}function r(e,t,n){o[e]&&c(o[e],t,n),$r(o[e])&&(o[e]=void 0)}function i(e,t){t&&!l[e]?(f.addClass(s,e),l[e]=!0):!t&&l[e]&&(f.removeClass(s,e),l[e]=!1)}function a(e,t){e=e?"-"+le(e,"-"):"",i(Ho+e,t===!0),i(zo+e,t===!1)}var o=e.ctrl,s=e.$element,l={},u=e.set,c=e.unset,f=e.$animate;l[zo]=!(l[Ho]=s.hasClass(Ho)),o.$setValidity=t}function $r(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Rr(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}var Pr=/^\/(.+)\/([a-z]*)$/,Fr="validity",Ur=Object.prototype.hasOwnProperty,jr=function(e){return E(e)?e.toLowerCase():e},Hr=function(e){return E(e)?e.toUpperCase():e},zr=function(e){return E(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Br=function(e){return E(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)&-33)}):e};"i"!=="I".toLowerCase()&&(jr=zr,Hr=Br);var qr,Yr,Xr,Wr,Gr=[].slice,Vr=[].splice,Kr=[].push,Zr=Object.prototype.toString,Qr=Object.getPrototypeOf,Jr=t("ng"),ei=e.angular||(e.angular={}),ti=0;qr=e.document.documentMode;var ni=Number.isNaN||function(e){return e!==e};h.$inject=[],p.$inject=[];var ri=Array.isArray,ii=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,ai=function(e){return E(e)?e.trim():e},oi=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},si=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!y(si.rules)){var n=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");si.rules={noUnsafeEval:!r||r.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!r||r.indexOf("no-inline-style")!==-1}}else si.rules={noUnsafeEval:t(),noInlineStyle:!1}}return si.rules},li=function(){if(y(li.name_))return li.name_;var t,n,r,i,a=ci.length;for(n=0;n<a;++n)if(r=ci[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return li.name_=i},ui=/:/g,ci=["ng-","data-ng-","ng:","x-ng-"],fi=re(e.document),di=/[A-Z]/g,hi=!1,pi=1,gi=2,mi=3,vi=8,yi=9,bi=11,_i={full:"1.5.11",major:1,minor:5,dot:11,codeName:"princely-quest"};Ie.expando="ng339";var Ei=Ie.cache={},xi=1,Si=function(e,t,n){e.addEventListener(t,n,!1)},Ti=function(e,t,n){e.removeEventListener(t,n,!1)};Ie._data=function(e){return this.cache[e[this.expando]]||{}};var wi=/([:\-_]+(.))/g,Ai=/^moz([A-Z])/,Ci={mouseleave:"mouseout",mouseenter:"mouseover"},ki=t("jqLite"),Oi=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ii=/<|&#?\w+;/,Mi=/<([\w:-]+)/,Ni=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Di={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Di.optgroup=Di.option,Di.tbody=Di.tfoot=Di.colgroup=Di.caption=Di.thead,Di.th=Di.td;var Li=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},$i=Ie.prototype={ready:function(t){function n(){r||(r=!0,t())}var r=!1;"complete"===e.document.readyState?e.setTimeout(n):(this.on("DOMContentLoaded",n),Ie(e).on("load",n))},toString:function(){var e=[];return r(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Yr(e>=0?this[e]:this[this.length+e])},length:0,push:Kr,sort:[].sort,splice:[].splice},Ri={};r("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Ri[jr(e)]=e});var Pi={};r("input,select,option,textarea,button,form,details".split(","),function(e){Pi[e]=!0});var Fi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};r({data:Re,removeData:Le,hasData:we,cleanData:Ae},function(e,t){Ie[t]=e}),r({data:Re,inheritedData:ze,scope:function(e){return Yr.data(e,"$scope")||ze(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Yr.data(e,"$isolateScope")||Yr.data(e,"$isolateScopeNoTemplate")},controller:He,injector:function(e){return ze(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Pe,css:function(e,t,n){return t=xe(t),y(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,n){var r=e.nodeType;if(r!==mi&&r!==gi&&r!==vi){var i=jr(t);if(Ri[i]){if(!y(n))return e[t]||(e.attributes.getNamedItem(t)||h).specified?i:void 0;n?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(y(n))e.setAttribute(t,n);else if(e.getAttribute){var a=e.getAttribute(t,2);return null===a?void 0:a}}},prop:function(e,t,n){return y(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(v(t)){var n=e.nodeType;return n===pi||n===mi?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(v(t)){if(e.multiple&&"select"===P(e)){var n=[];return r(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return v(t)?e.innerHTML:(Ne(e,!0),void(e.innerHTML=t))},empty:Be},function(e,t){Ie.prototype[t]=function(t,n){var r,i,a=this.length;if(e!==Be&&v(2===e.length&&e!==Pe&&e!==He?t:n)){if(b(t)){for(r=0;r<a;r++)if(e===Re)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var o=e.$dv,s=v(o)?Math.min(a,1):a,l=0;l<s;l++){var u=e(this[l],t,n);o=o?o+u:u}return o}for(r=0;r<a;r++)e(this[r],t,n);return this}}),r({removeData:Le,on:function(e,t,n,r){if(y(r))throw ki("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Te(e)){var i=$e(e,!0),a=i.events,o=i.handle;o||(o=i.handle=Ge(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length,u=function(t,r,i){var s=a[t];s||(s=a[t]=[],s.specialHandlerWrapper=r,"$destroy"===t||i||Si(e,t,o)),s.push(n)};l--;)t=s[l],Ci[t]?(u(Ci[t],Ke),u(t,void 0,!0)):u(t)}},off:De,one:function(e,t,n){e=Yr(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;Ne(e),r(new Ie(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return r(e.childNodes,function(e){e.nodeType===pi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===pi||n===bi){t=new Ie(t);for(var r=0,i=t.length;r<i;r++){var a=t[r];e.appendChild(a)}}},prepend:function(e,t){if(e.nodeType===pi){var n=e.firstChild;r(new Ie(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){Oe(e,Yr(t).eq(0).clone()[0])},remove:qe,detach:function(e){qe(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r){t=new Ie(t);for(var i=0,a=t.length;i<a;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}}},addClass:Ue,removeClass:Fe,toggleClass:function(e,t,n){t&&r(t.split(" "),function(t){var r=n;v(r)&&(r=!Pe(e,t)),(r?Ue:Fe)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==bi?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Me,triggerHandler:function(e,t,n){var i,a,o,s=t.type||t,l=$e(e),c=l&&l.events,f=c&&c[s];f&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:h,type:s,target:e},t.type&&(i=u(i,t)),a=ve(f),o=n?[i].concat(n):[i],r(a,function(t){i.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){Ie.prototype[t]=function(t,n,r){for(var i,a=0,o=this.length;a<o;a++)v(i)?(i=e(this[a],t,n,r),y(i)&&(i=Yr(i))):je(i,e(this[a],t,n,r));return y(i)?i:this}}),Ie.prototype.bind=Ie.prototype.on,Ie.prototype.unbind=Ie.prototype.off,Je.prototype={put:function(e,t){this[Qe(e,this.nextUid)]=t},get:function(e){return this[Qe(e,this.nextUid)]},remove:function(e){var t=this[e=Qe(e,this.nextUid)];return delete this[e],t}};var Ui=[function(){this.$get=[function(){return Je}]}],ji=/^([^(]+?)=>/,Hi=/^[^(]*\(\s*([^)]*)\)/m,zi=/,/,Bi=/^\s*(_?)(\S+?)\1\s*$/,qi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Yi=t("$injector");it.$$annotate=rt;var Xi=t("$animate"),Wi=1,Gi="ng-animate",Vi=function(){this.$get=h},Ki=function(){var e=new Je,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function a(e,t,n){var i=!1;return t&&(t=E(t)?t.split(" "):ri(t)?t:[],r(t,function(t){t&&(i=!0,e[t]=n)})),i}function o(){r(t,function(t){var n=e.get(t);if(n){var i=lt(t.attr("class")),a="",o="";r(n,function(e,t){var n=!!i[t];e!==n&&(e?a+=(a.length?" ":"")+t:o+=(o.length?" ":"")+t)}),r(t,function(e){a&&Ue(e,a),o&&Fe(e,o)}),e.remove(t)}}),t.length=0}function s(n,r,s){var l=e.get(n)||{},u=a(l,r,!0),c=a(l,s,!1);(u||c)&&(e.put(n,l),t.push(n),1===t.length&&i.$$postDigest(o))}return{enabled:h,on:h,off:h,pin:h,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var a=new n;return a.complete(),a}}}]},Zi=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Xi("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+Gi+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw Xi("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Gi)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=st(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,a){return r=r&&Yr(r),i=i&&Yr(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",ut(a))},move:function(n,r,i,a){return r=r&&Yr(r),i=i&&Yr(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",ut(a))},leave:function(t,n){return e.push(t,"leave",ut(n),function(){t.remove()})},addClass:function(t,n,r){return r=ut(r),r.addClass=ot(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=ut(r),r.removeClass=ot(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=ut(i),i.addClass=ot(i.addClass,n),i.removeClass=ot(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,a){return a=ut(a),a.from=a.from?u(a.from,n):n,a.to=a.to?u(a.to,r):r,i=i||"ng-inline-animate",a.tempClasses=ot(a.tempClasses,i),e.push(t,"animate",a)}}}]}],Qi=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},Ji=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(e,t,n,i,a){function o(e){this.setHost(e);var t=n(),r=function(e){a(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){var n=i[0];n&&n.hidden?r(e):t(e)},this._state=0}var s=0,l=1,u=2;return o.chain=function(e,t){function n(){return r===e.length?void t(!0):void e[r](function(e){return e===!1?void t(!1):(r++,void n())})}var r=0;n()},o.all=function(e,t){function n(n){a=a&&n,++i===e.length&&t(a)}var i=0,a=!0;r(e,function(e){e.done(n)})},o.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===u?e():this._doneCallbacks.push(e)},progress:h,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=l,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==u&&(r(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=u)}},o}]},ea=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){a(),s||l.complete(),s=!0}),l}function a(){o.addClass&&(t.addClass(o.addClass),o.addClass=null),o.removeClass&&(t.removeClass(o.removeClass),o.removeClass=null),o.to&&(t.css(o.to),o.to=null)}var o=r||{};o.$$prepared||(o=U(o)),o.cleanupStyles&&(o.from=o.to=null),o.from&&(t.css(o.from),o.from=null);var s,l=new n;return{start:i,end:i}}}]},ta=t("$compile"),na=new pt;gt.$inject=["$provide","$$sanitizeUriProvider"],mt.prototype.isFirstChange=function(){return this.previousValue===na};var ra=/^((?:x|data)[:\-_])/i,ia=t("$controller"),aa=/^(\S+)(\s+as\s+([\w$]+))?$/,oa=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Yr&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},sa="application/json",la={"Content-Type":sa+";charset=utf-8"},ua=/^\[|^\{(?!\{)/,ca={"[":/]$/,"{":/}$/},fa=/^\)]\}',?\n/,da=t("$http"),ha=function(e){return function(){throw da("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},pa=ei.$interpolateMinErr=t("$interpolate");pa.throwNoconcat=function(e){throw pa("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},pa.interr=function(e,t){return pa("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var ga=function(){this.$get=["$window",function(e){function t(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var n=e.angular.callbacks,r={};return{createCallback:function(e){var i="_"+(n.$$counter++).toString(36),a="angular.callbacks."+i,o=t(i);return r[a]=n[i]=o,a},wasCalled:function(e){return r[e].called},getResponse:function(e){return r[e].data},removeCallback:function(e){var t=r[e];delete n[t.id],delete r[e]}}}]},ma=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,va={http:80,https:443,ftp:21},ya=t("$location"),ba=/^\s*[\\\/]{2,}/,_a={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Zt("$$absUrl"),url:function(e){if(v(e))return this.$$url;var t=ma.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Zt("$$protocol"),host:Zt("$$host"),port:Zt("$$port"),path:Qt("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(E(e)||x(e))e=e.toString(),this.$$search=Q(e);else{if(!b(e))throw ya("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=U(e,{}),r(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:v(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Qt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};r([Kt,Vt,Gt],function(e){e.prototype=Object.create(_a),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Gt||!this.$$html5)throw ya("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(t)?null:t,this}});var Ea=t("$parse"),xa=[].constructor,Sa=(!1).constructor,Ta=Function.constructor,wa=(0).constructor,Aa={}.constructor,Ca="".constructor,ka=xa.prototype,Oa=Sa.prototype,Ia=Ta.prototype,Ma=wa.prototype,Na=Aa.prototype,Da=Ca.prototype,La=Ia.call,$a=Ia.apply,Ra=Ia.bind,Pa=Na.valueOf,Fa=ge();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Fa[e]=!0});var Ua={n:"\n",f:"\f",r:"\r",t:"\t",v:"\x0B","'":"'",'"':'"'},ja=function(e){this.options=e};ja.prototype={constructor:ja,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Fa[t],a=Fa[n],o=Fa[r];if(i||a||o){var s=o?r:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\x0B"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=y(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Ea("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=jr(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var s=Ua[a];n+=s||a}i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var Ha=function(e,t){this.lexer=e,this.options=t};Ha.Program="Program",Ha.ExpressionStatement="ExpressionStatement",Ha.AssignmentExpression="AssignmentExpression",Ha.ConditionalExpression="ConditionalExpression",Ha.LogicalExpression="LogicalExpression",Ha.BinaryExpression="BinaryExpression",Ha.UnaryExpression="UnaryExpression",Ha.CallExpression="CallExpression",Ha.MemberExpression="MemberExpression",Ha.Identifier="Identifier",Ha.Literal="Literal",Ha.ArrayExpression="ArrayExpression",Ha.Property="Property",Ha.ObjectExpression="ObjectExpression",Ha.ThisExpression="ThisExpression",Ha.LocalsExpression="LocalsExpression",Ha.NGValueParameter="NGValueParameter",Ha.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Ha.Program,body:e}},expressionStatement:function(){return{type:Ha.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!dn(e))throw Ea("lval","Trying to assign a value to a non l-value");e={type:Ha.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Ha.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Ha.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Ha.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Ha.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Ha.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Ha.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Ha.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ha.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=U(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Ha.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:Ha.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Ha.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Ha.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Ha.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ha.Identifier,name:e.text}},constant:function(){return{type:Ha.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ha.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Ha.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Ha.ObjectExpression,properties:t}},throwError:function(e,t){throw Ea("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Ea("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Ea("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return a}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{"this":{type:Ha.ThisExpression},$locals:{type:Ha.LocalsExpression}}},mn.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],
own:{}},inputs:[]},cn(i,n.$filter);var a,o="";if(this.stage="assign",a=hn(i)){this.state.computing="assign";var s=this.nextId();this.recurse(a,s),this.return_(s),o="fn.assign="+this.generateFunction("assign","s,v,l")}var l=fn(i.body);n.stage="inputs",r(l,function(e,t){var r="fn"+t;n.state[r]={vars:[],body:[],own:{}},n.state.computing=r;var i=n.nextId();n.recurse(e,i),n.return_(i),n.state.inputs.push(r),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(i);var u='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",c=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",u)(this.$filter,tn,rn,an,nn,on,sn,ln,e);return this.state=this.stage=void 0,c.literal=pn(i),c.constant=gn(i),c},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return r(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return r(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,i,a,o){var s,l,u,c,f,d=this;if(i=i||h,!o&&y(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,i,a,!0));switch(e.type){case Ha.Program:r(e.body,function(t,n){d.recurse(t.expression,void 0,void 0,function(e){l=e}),n!==e.body.length-1?d.current().body.push(l,";"):d.return_(l)});break;case Ha.Literal:c=this.escape(e.value),this.assign(t,c),i(c);break;case Ha.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){l=e}),c=e.operator+"("+this.ifDefined(l,0)+")",this.assign(t,c),i(c);break;case Ha.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){l=e}),c="+"===e.operator?this.plus(s,l):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(l,0):"("+s+")"+e.operator+"("+l+")",this.assign(t,c),i(c);break;case Ha.LogicalExpression:t=t||this.nextId(),d.recurse(e.left,t),d.if_("&&"===e.operator?t:d.not(t),d.lazyRecurse(e.right,t)),i(t);break;case Ha.ConditionalExpression:t=t||this.nextId(),d.recurse(e.test,t),d.if_(t,d.lazyRecurse(e.alternate,t),d.lazyRecurse(e.consequent,t)),i(t);break;case Ha.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),tn(e.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",e.name)),function(){d.if_("inputs"===d.stage||"s",function(){a&&1!==a&&d.if_(d.not(d.nonComputedMember("s",e.name)),d.lazyAssign(d.nonComputedMember("s",e.name),"{}")),d.assign(t,d.nonComputedMember("s",e.name))})},t&&d.lazyAssign(t,d.nonComputedMember("l",e.name))),(d.state.expensiveChecks||yn(e.name))&&d.addEnsureSafeObject(t),i(t);break;case Ha.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(e.object,s,void 0,function(){d.if_(d.notNull(s),function(){a&&1!==a&&d.addEnsureSafeAssignContext(s),e.computed?(l=d.nextId(),d.recurse(e.property,l),d.getStringValue(l),d.addEnsureSafeMemberName(l),a&&1!==a&&d.if_(d.not(d.computedMember(s,l)),d.lazyAssign(d.computedMember(s,l),"{}")),c=d.ensureSafeObject(d.computedMember(s,l)),d.assign(t,c),n&&(n.computed=!0,n.name=l)):(tn(e.property.name),a&&1!==a&&d.if_(d.not(d.nonComputedMember(s,e.property.name)),d.lazyAssign(d.nonComputedMember(s,e.property.name),"{}")),c=d.nonComputedMember(s,e.property.name),(d.state.expensiveChecks||yn(e.property.name))&&(c=d.ensureSafeObject(c)),d.assign(t,c),n&&(n.computed=!1,n.name=e.property.name))},function(){d.assign(t,"undefined")}),i(t)},!!a);break;case Ha.CallExpression:t=t||this.nextId(),e.filter?(l=d.filter(e.callee.name),u=[],r(e.arguments,function(e){var t=d.nextId();d.recurse(e,t),u.push(t)}),c=l+"("+u.join(",")+")",d.assign(t,c),i(t)):(l=d.nextId(),s={},u=[],d.recurse(e.callee,l,s,function(){d.if_(d.notNull(l),function(){d.addEnsureSafeFunction(l),r(e.arguments,function(e){d.recurse(e,d.nextId(),void 0,function(e){u.push(d.ensureSafeObject(e))})}),s.name?(d.state.expensiveChecks||d.addEnsureSafeObject(s.context),c=d.member(s.context,s.name,s.computed)+"("+u.join(",")+")"):c=l+"("+u.join(",")+")",c=d.ensureSafeObject(c),d.assign(t,c)},function(){d.assign(t,"undefined")}),i(t)}));break;case Ha.AssignmentExpression:l=this.nextId(),s={},this.recurse(e.left,void 0,s,function(){d.if_(d.notNull(s.context),function(){d.recurse(e.right,l),d.addEnsureSafeObject(d.member(s.context,s.name,s.computed)),d.addEnsureSafeAssignContext(s.context),c=d.member(s.context,s.name,s.computed)+e.operator+l,d.assign(t,c),i(t||c)})},1);break;case Ha.ArrayExpression:u=[],r(e.elements,function(e){d.recurse(e,d.nextId(),void 0,function(e){u.push(e)})}),c="["+u.join(",")+"]",this.assign(t,c),i(c);break;case Ha.ObjectExpression:u=[],f=!1,r(e.properties,function(e){e.computed&&(f=!0)}),f?(t=t||this.nextId(),this.assign(t,"{}"),r(e.properties,function(e){e.computed?(s=d.nextId(),d.recurse(e.key,s)):s=e.key.type===Ha.Identifier?e.key.name:""+e.key.value,l=d.nextId(),d.recurse(e.value,l),d.assign(d.member(t,s,e.computed),l)})):(r(e.properties,function(t){d.recurse(t.value,e.constant?void 0:d.nextId(),void 0,function(e){u.push(d.escape(t.key.type===Ha.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+u.join(",")+"}",this.assign(t,c)),i(t||c);break;case Ha.ThisExpression:this.assign(t,"s"),i("s");break;case Ha.LocalsExpression:this.assign(t,"l"),i("l");break;case Ha.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,r,i,a){var o=this;return function(){o.recurse(e,t,n,r,i,a)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(E(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(x(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw Ea("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},vn.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,cn(i,n.$filter);var a,o;(a=hn(i))&&(o=this.recurse(a));var s,l=fn(i.body);l&&(s=[],r(l,function(e,t){var r=n.recurse(e);e.input=r,s.push(r),e.watchId=t}));var u=[];r(i.body,function(e){u.push(n.recurse(e.expression))});var c=0===i.body.length?h:1===i.body.length?u[0]:function(e,t){var n;return r(u,function(r){n=r(e,t)}),n};return o&&(c.assign=function(e,t,n){return o(e,n,t)}),s&&(c.inputs=s),c.literal=pn(i),c.constant=gn(i),c},recurse:function(e,t,n){var i,a,o,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ha.Literal:return this.value(e.value,t);case Ha.UnaryExpression:return a=this.recurse(e.argument),this["unary"+e.operator](a,t);case Ha.BinaryExpression:return i=this.recurse(e.left),a=this.recurse(e.right),this["binary"+e.operator](i,a,t);case Ha.LogicalExpression:return i=this.recurse(e.left),a=this.recurse(e.right),this["binary"+e.operator](i,a,t);case Ha.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Ha.Identifier:return tn(e.name,s.expression),s.identifier(e.name,s.expensiveChecks||yn(e.name),t,n,s.expression);case Ha.MemberExpression:return i=this.recurse(e.object,!1,!!n),e.computed||(tn(e.property.name,s.expression),a=e.property.name),e.computed&&(a=this.recurse(e.property)),e.computed?this.computedMember(i,a,t,n,s.expression):this.nonComputedMember(i,a,s.expensiveChecks,t,n,s.expression);case Ha.CallExpression:return o=[],r(e.arguments,function(e){o.push(s.recurse(e))}),e.filter&&(a=this.$filter(e.callee.name)),e.filter||(a=this.recurse(e.callee,!0)),e.filter?function(e,n,r,i){for(var s=[],l=0;l<o.length;++l)s.push(o[l](e,n,r,i));var u=a.apply(void 0,s,i);return t?{context:void 0,name:void 0,value:u}:u}:function(e,n,r,i){var l,u=a(e,n,r,i);if(null!=u.value){rn(u.context,s.expression),an(u.value,s.expression);for(var c=[],f=0;f<o.length;++f)c.push(rn(o[f](e,n,r,i),s.expression));l=rn(u.value.apply(u.context,c),s.expression)}return t?{value:l}:l};case Ha.AssignmentExpression:return i=this.recurse(e.left,!0,1),a=this.recurse(e.right),function(e,n,r,o){var l=i(e,n,r,o),u=a(e,n,r,o);return rn(l.value,s.expression),on(l.context),l.context[l.name]=u,t?{value:u}:u};case Ha.ArrayExpression:return o=[],r(e.elements,function(e){o.push(s.recurse(e))}),function(e,n,r,i){for(var a=[],s=0;s<o.length;++s)a.push(o[s](e,n,r,i));return t?{value:a}:a};case Ha.ObjectExpression:return o=[],r(e.properties,function(e){e.computed?o.push({key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}):o.push({key:e.key.type===Ha.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,n,r,i){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(e,n,r,i)]=o[s].value(e,n,r,i):a[o[s].key]=o[s].value(e,n,r,i);return t?{value:a}:a};case Ha.ThisExpression:return function(e){return t?{value:e}:e};case Ha.LocalsExpression:return function(e,n){return t?{value:n}:n};case Ha.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=y(o)?+o:0,t?{value:o}:o}},"unary-":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=y(o)?-o:0,t?{value:o}:o}},"unary!":function(e,t){return function(n,r,i,a){var o=!e(n,r,i,a);return t?{value:o}:o}},"binary+":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),l=t(r,i,a,o),u=ln(s,l);return n?{value:u}:u}},"binary-":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),l=t(r,i,a,o),u=(y(s)?s:0)-(y(l)?l:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)*t(r,i,a,o);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)/t(r,i,a,o);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)%t(r,i,a,o);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)===t(r,i,a,o);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!==t(r,i,a,o);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)==t(r,i,a,o);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!=t(r,i,a,o);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<t(r,i,a,o);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>t(r,i,a,o);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<=t(r,i,a,o);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>=t(r,i,a,o);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)&&t(r,i,a,o);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)||t(r,i,a,o);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,a,o,s){var l=e(i,a,o,s)?t(i,a,o,s):n(i,a,o,s);return r?{value:l}:l}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n,r,i){return function(a,o,s,l){var u=o&&e in o?o:a;r&&1!==r&&u&&!u[e]&&(u[e]={});var c=u?u[e]:void 0;return t&&rn(c,i),n?{context:u,name:e,value:c}:c}},computedMember:function(e,t,n,r,i){return function(a,o,s,l){var u,c,f=e(a,o,s,l);return null!=f&&(u=t(a,o,s,l),u=nn(u),tn(u,i),r&&1!==r&&(on(f),f&&!f[u]&&(f[u]={})),c=f[u],rn(c,i)),n?{context:f,name:u,value:c}:c}},nonComputedMember:function(e,t,n,r,i,a){return function(o,s,l,u){var c=e(o,s,l,u);i&&1!==i&&(on(c),c&&!c[t]&&(c[t]={}));var f=null!=c?c[t]:void 0;return(n||yn(t))&&rn(f,a),r?{context:c,name:t,value:f}:f}},inputs:function(e,t){return function(n,r,i,a){return a?a[t]:e(n,r,i)}}};var za=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new Ha(e,n),this.astCompiler=n.csp?new vn(this.ast,t):new mn(this.ast,t)};za.prototype={constructor:za,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var Ba=t("$sce"),qa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ya=t("$compile"),Xa=e.document.createElement("a"),Wa=$n(e.location.href);Fn.$inject=["$document"],jn.$inject=["$provide"];var Ga=22,Va=".",Ka="0";Yn.$inject=["$locale"],Xn.$inject=["$locale"];var Za={yyyy:Zn("FullYear",4,0,!1,!0),yy:Zn("FullYear",2,0,!0,!0),y:Zn("FullYear",1,0,!1,!0),MMMM:Qn("Month"),MMM:Qn("Month",!0),MM:Zn("Month",2,1),M:Zn("Month",1,1),LLLL:Qn("Month",!1,!0),dd:Zn("Date",2),d:Zn("Date",1),HH:Zn("Hours",2),H:Zn("Hours",1),hh:Zn("Hours",2,-12),h:Zn("Hours",1,-12),mm:Zn("Minutes",2),m:Zn("Minutes",1),ss:Zn("Seconds",2),s:Zn("Seconds",1),sss:Zn("Milliseconds",3),EEEE:Qn("Day"),EEE:Qn("Day",!0),a:rr,Z:Jn,ww:nr(2),w:nr(1),G:ir,GG:ir,GGG:ir,GGGG:ar},Qa=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Ja=/^-?\d+$/;or.$inject=["$locale"];var eo=g(jr),to=g(Hr);cr.$inject=["$parse"];var no=g({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Zr.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),ro={};r(Ri,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!==e){var r=vt("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),ro[r]=function(){return{restrict:"A",priority:100,link:i}}}}),r(Fi,function(e,t){ro[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(Pr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),r(["src","srcset","href"],function(e){var t=vt("ng-"+e);ro[t]=function(){return{priority:99,link:function(n,r,i){var a=e,o=e;"href"===e&&"[object SVGAnimatedString]"===Zr.call(r.prop("href"))&&(o="xlinkHref",i.$attr[o]="xlink:href",a=null),i.$observe(t,function(t){return t?(i.$set(o,t),void(qr&&a&&r.prop(a,i[o]))):void("href"===e&&i.$set(o,null))})}}}});var io={$addControl:h,$$renameControl:dr,$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h,$setSubmitted:h},ao="ng-submitted";hr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var oo=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||h}var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:hr,compile:function(n,i){n.addClass(Bo).addClass(Ho);var a=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,o){var s=o[0];if(!("action"in i)){var l=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};Si(n[0],"submit",l),n.on("$destroy",function(){t(function(){Ti(n[0],"submit",l)},0,!1)})}var c=o[1]||s.$$parentForm;c.$addControl(s);var f=a?r(s.$name):h;a&&(f(e,s),i.$observe(a,function(t){s.$name!==t&&(f(e,void 0),s.$$parentForm.$$renameControl(s,t),(f=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),f(e,void 0),u(s,io)})}}}};return i}]},so=oo(),lo=oo(!0),uo=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,co=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,fo=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ho=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,po=/^(\d{4,})-(\d{2})-(\d{2})$/,go=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,mo=/^(\d{4,})-W(\d\d)$/,vo=/^(\d{4,})-(\d\d)$/,yo=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,bo="keydown wheel mousedown",_o=ge();r("date,datetime-local,month,time,week".split(","),function(e){_o[e]=!0});var Eo={text:gr,date:br("date",po,yr(po,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":br("datetimelocal",go,yr(go,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:br("time",yo,yr(yo,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:br("week",mo,vr,"yyyy-Www"),month:br("month",vo,yr(vo,["yyyy","MM"]),"yyyy-MM"),number:Ar,url:kr,email:Or,radio:Ir,range:Cr,checkbox:Nr,hidden:h,button:h,submit:h,reset:h,file:h},xo=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){if(s[0]){var l=jr(o.type);"range"!==l||o.hasOwnProperty("ngInputRange")||(l="text"),(Eo[l]||Eo.text)(i,a,o,s[0],t,e,n,r)}}}}}],So=/^(true|false|\d+)$/,To=function(){return{restrict:"A",priority:100,compile:function(e,t){return So.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},wo=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=v(e)?"":e})}}}}],Ao=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var a=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,a.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=v(e)?"":e})}}}}],Co=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var a=t(i.ngBindHtml),o=t(i.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(o,function(){var n=a(t);r.html(e.getTrustedHtml(n)||"")})}}}}],ko=g({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Oo=Dr("",!0),Io=Dr("Odd",0),Mo=Dr("Even",1),No=fr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Do=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Lo={},$o={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=vt("ng-"+e);Lo[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,a){var o=n(a[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){o(t,{$event:n})};$o[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var Ro=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,l,u;n.$watch(i.ngIf,function(n){n?l||o(function(n,a){l=a,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=pe(s.clone),e.leave(u).done(function(e){e!==!1&&(u=null)}),s=null))})}}}],Po=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ei.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,l,u,c){var f,d,h,p=0,g=function(){d&&(d.remove(),d=null),f&&(f.$destroy(),f=null),h&&(n.leave(h).done(function(e){e!==!1&&(d=null)}),d=h,h=null)};r.$watch(a,function(a){var l=function(e){e===!1||!y(s)||s&&!r.$eval(s)||t()},d=++p;a?(e(a,!0).then(function(e){if(!r.$$destroyed&&d===p){var t=r.$new();u.template=e;var s=c(t,function(e){g(),n.enter(e,null,i).done(l)});f=t,h=s,f.$emit("$includeContentLoaded",a),r.$eval(o)}},function(){r.$$destroyed||d===p&&(g(),r.$emit("$includeContentError",a))}),r.$emit("$includeContentRequested",a)):(g(),u.template=null)})}}}}],Fo=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){return Zr.call(r[0]).match(/SVG/)?(r.empty(),void t(Ce(a.template,e.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(a.template),void t(r.contents())(n))}}}],Uo=fr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),jo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var a=t.attr(n.$attr.ngList)||", ",o="false"!==n.ngTrim,s=o?ai(a):a,l=function(e){if(!v(e)){var t=[];return e&&r(e.split(s),function(e){e&&t.push(o?ai(e):e)}),t}};i.$parsers.push(l),i.$formatters.push(function(e){if(ri(e))return e.join(a)}),i.$isEmpty=function(e){return!e||!e.length}}}},Ho="ng-valid",zo="ng-invalid",Bo="ng-pristine",qo="ng-dirty",Yo="ng-untouched",Xo="ng-touched",Wo="ng-pending",Go="ng-empty",Vo="ng-not-empty",Ko=t("ngModel"),Zo=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,n,i,a,o,s,l,u,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e),this.$$parentForm=io;var f,d=a(n.ngModel),p=d.assign,g=d,m=p,b=null,_=this;this.$$setOptions=function(e){if(_.$options=e,e&&e.getterSetter){var t=a(n.ngModel+"()"),r=a(n.ngModel+"($$$p)");g=function(e){var n=d(e);return T(n)&&(n=t(e)),n},m=function(e,t){T(d(e))?r(e,{$$$p:t}):p(e,t)}}else if(!d.assign)throw Ko("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,K(i))},this.$render=h,this.$isEmpty=function(e){return v(e)||""===e||null===e||e!==e},this.$$updateEmptyClasses=function(e){_.$isEmpty(e)?(o.removeClass(i,Vo),o.addClass(i,Go)):(o.removeClass(i,Go),o.addClass(i,Vo))};var E=0;Lr({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:o}),this.$setPristine=function(){_.$dirty=!1,_.$pristine=!0,o.removeClass(i,qo),o.addClass(i,Bo)},this.$setDirty=function(){_.$dirty=!0,_.$pristine=!1,o.removeClass(i,Bo),o.addClass(i,qo),_.$$parentForm.$setDirty()},this.$setUntouched=function(){_.$touched=!1,_.$untouched=!0,o.setClass(i,Yo,Xo)},this.$setTouched=function(){_.$touched=!0,_.$untouched=!1,o.setClass(i,Xo,Yo)},this.$rollbackViewValue=function(){s.cancel(b),_.$viewValue=_.$$lastCommittedViewValue,_.$render()},this.$validate=function(){if(!ni(_.$modelValue)){var e=_.$$lastCommittedViewValue,t=_.$$rawModelValue,n=_.$valid,r=_.$modelValue,i=_.$options&&_.$options.allowInvalid;_.$$runValidators(t,e,function(e){i||n===e||(_.$modelValue=e?t:void 0,_.$modelValue!==r&&_.$$writeModelToScope())})}},this.$$runValidators=function(e,t,n){function i(){var e=_.$$parserName||"parse";return v(f)?(s(e,null),!0):(f||(r(_.$validators,function(e,t){s(t,null)}),r(_.$asyncValidators,function(e,t){s(t,null)})),s(e,f),f)}function a(){var n=!0;return r(_.$validators,function(r,i){var a=r(e,t);n=n&&a,s(i,a)}),!!n||(r(_.$asyncValidators,function(e,t){s(t,null)}),!1)}function o(){var n=[],i=!0;r(_.$asyncValidators,function(r,a){var o=r(e,t);if(!N(o))throw Ko("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",o);s(a,void 0),n.push(o.then(function(){s(a,!0)},function(){i=!1,s(a,!1)}))}),n.length?u.all(n).then(function(){l(i)},h):l(!0)}function s(e,t){c===E&&_.$setValidity(e,t)}function l(e){c===E&&n(e)}E++;var c=E;return i()&&a()?void o():void l(!1)},this.$commitViewValue=function(){var e=_.$viewValue;s.cancel(b),(_.$$lastCommittedViewValue!==e||""===e&&_.$$hasNativeValidators)&&(_.$$updateEmptyClasses(e),_.$$lastCommittedViewValue=e,_.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){_.$modelValue!==a&&_.$$writeModelToScope()}var n=_.$$lastCommittedViewValue,r=n;if(f=!v(r)||void 0)for(var i=0;i<_.$parsers.length;i++)if(r=_.$parsers[i](r),v(r)){f=!1;break}ni(_.$modelValue)&&(_.$modelValue=g(e));var a=_.$modelValue,o=_.$options&&_.$options.allowInvalid;_.$$rawModelValue=r,o&&(_.$modelValue=r,t()),_.$$runValidators(r,_.$$lastCommittedViewValue,function(e){o||(_.$modelValue=e?r:void 0,t())})},this.$$writeModelToScope=function(){m(e,_.$modelValue),r(_.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){_.$viewValue=e,_.$options&&!_.$options.updateOnDefault||_.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=_.$options;i&&y(i.debounce)&&(n=i.debounce,x(n)?r=n:x(n[t])?r=n[t]:x(n["default"])&&(r=n["default"])),s.cancel(b),r?b=s(function(){_.$commitViewValue()},r):l.$$phase?_.$commitViewValue():e.$apply(function(){_.$commitViewValue()})},e.$watch(function(){var t=g(e);if(t!==_.$modelValue&&(_.$modelValue===_.$modelValue||t===t)){_.$modelValue=_.$$rawModelValue=t,f=void 0;for(var n=_.$formatters,r=n.length,i=t;r--;)i=n[r](i);_.$viewValue!==i&&(_.$$updateEmptyClasses(i),_.$viewValue=_.$$lastCommittedViewValue=i,_.$render(),_.$$runValidators(_.$modelValue,_.$viewValue,h))}return t})}],Qo=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Zo,priority:1,compile:function(t){return t.addClass(Bo).addClass(Yo).addClass(Ho),{pre:function(e,t,n,r){var i=r[0],a=r[1]||i.$$parentForm;i.$$setOptions(r[2]&&r[2].$options),a.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){var a=i[0];a.$options&&a.$options.updateOn&&n.on(a.$options.updateOn,function(e){a.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){a.$touched||(e.$$phase?t.$evalAsync(a.$setTouched):t.$apply(a.$setTouched))})}}}}}],Jo=/(\s+|^)default(\s+|$)/,es=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=U(e.$eval(t.ngModelOptions)),y(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=ai(this.$options.updateOn.replace(Jo,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ts=fr({terminal:!0,priority:1e3}),ns=t("ngOptions"),rs=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,is=["$compile","$document","$parse",function(t,i,a){function o(e,t,r){function i(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function o(e){var t;if(!u&&n(e))t=e;else{t=[];for(var r in e)e.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t.push(r)}return t}var s=e.match(rs);if(!s)throw ns("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,K(t));var l=s[5]||s[7],u=s[6],c=/ as /.test(s[0])&&s[1],f=s[9],d=a(s[2]?s[1]:l),h=c&&a(c),p=h||d,g=f&&a(f),m=f?function(e,t){return g(r,t)}:function(e){return Qe(e)},v=function(e,t){return m(e,S(e,t))},y=a(s[2]||s[1]),b=a(s[3]||""),_=a(s[4]||""),E=a(s[8]),x={},S=u?function(e,t){return x[u]=t,x[l]=e,x}:function(e){return x[l]=e,x};return{trackBy:f,getTrackByValue:v,getWatchables:a(E,function(e){var t=[];e=e||[];for(var n=o(e),i=n.length,a=0;a<i;a++){var l=e===n?a:n[a],u=e[l],c=S(u,l),f=m(u,c);if(t.push(f),s[2]||s[1]){var d=y(r,c);t.push(d)}if(s[4]){var h=_(r,c);t.push(h)}}return t}),getOptions:function(){for(var e=[],t={},n=E(r)||[],a=o(n),s=a.length,l=0;l<s;l++){var u=n===a?l:a[l],c=n[u],d=S(c,u),h=p(r,d),g=m(h,d),x=y(r,d),T=b(r,d),w=_(r,d),A=new i(g,h,x,T,w);e.push(A),t[g]=A}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return f?U(e.viewValue):e.viewValue}}}}}function s(e,n,a,s){function c(e,t){var n=l.cloneNode(!1);t.appendChild(n),f(e,n)}function f(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function d(){var e=T&&p.readValue();if(T)for(var t=T.items.length-1;t>=0;t--){var r=T.items[t];qe(y(r.group)?r.element.parentNode:r.element)}T=w.getOptions();var i={};if(E&&n.prepend(h),T.items.forEach(function(e){var t;y(e.group)?(t=i[e.group],t||(t=u.cloneNode(!1),A.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),c(e,t)):c(e,A)}),n[0].appendChild(A),g.$render(),!g.$isEmpty(e)){var a=p.readValue(),o=w.trackBy||m;(o?j(e,a):e===a)||(g.$setViewValue(a),g.$render())}}for(var h,p=s[0],g=s[1],m=a.multiple,v=0,b=n.children(),_=b.length;v<_;v++)if(""===b[v].value){h=b.eq(v);break}var E=!!h,x=!1,S=Yr(l.cloneNode(!1));S.val("?");var T,w=o(a.ngOptions,n,e),A=i[0].createDocumentFragment(),C=function(){E||n.prepend(h),n.val(""),x&&(h.prop("selected",!0),h.attr("selected",!0))},k=function(){E?x&&h.removeAttr("selected"):h.remove()},O=function(){n.prepend(S),n.val("?"),S.prop("selected",!0),S.attr("selected",!0)},I=function(){S.remove()};m?(g.$isEmpty=function(e){return!e||0===e.length},p.writeValue=function(e){T.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=T.getOptionFromViewValue(e);t&&(t.element.selected=!0)})},p.readValue=function(){var e=n.val()||[],t=[];return r(e,function(e){var n=T.selectValueMap[e];n&&!n.disabled&&t.push(T.getViewValueFromOption(n))}),t},w.trackBy&&e.$watchCollection(function(){if(ri(g.$viewValue))return g.$viewValue.map(function(e){return w.getTrackByValue(e)})},function(){g.$render()})):(p.writeValue=function(e){
var t=T.selectValueMap[n.val()],r=T.getOptionFromViewValue(e);t&&t.element.removeAttribute("selected"),r?(n[0].value!==r.selectValue&&(I(),k(),n[0].value=r.selectValue,r.element.selected=!0),r.element.setAttribute("selected","selected")):null===e||E?(I(),C()):(k(),O())},p.readValue=function(){var e=T.selectValueMap[n.val()];return e&&!e.disabled?(k(),I(),T.getViewValueFromOption(e)):null},w.trackBy&&e.$watch(function(){return w.getTrackByValue(g.$viewValue)},function(){g.$render()})),E?(h.remove(),t(h)(e),h[0].nodeType===vi?(x=!1,p.registerOption=function(e,t){""===t.val()&&(x=!0,h=t,h.removeClass("ng-scope"),g.$render(),t.on("$destroy",function(){h=void 0,x=!1}))}):(h.removeClass("ng-scope"),x=!0)):h=Yr(l.cloneNode(!1)),n.empty(),d(),e.$watchCollection(w.getWatchables,d)}var l=e.document.createElement("option"),u=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=h},post:s}}}],as=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,a=/^when(Minus)?(.+)$/;return{link:function(o,s,l){function u(e){s.text(e||"")}var c,f=l.count,d=l.$attr.when&&s.attr(l.$attr.when),p=l.offset||0,g=o.$eval(d)||{},m={},y=t.startSymbol(),b=t.endSymbol(),_=y+f+"-"+p+b,E=ei.noop;r(l,function(e,t){var n=a.exec(t);if(n){var r=(n[1]?"-":"")+jr(n[2]);g[r]=s.attr(l.$attr[t])}}),r(g,function(e,n){m[n]=t(e.replace(i,_))}),o.$watch(f,function(t){var r=parseFloat(t),i=ni(r);if(i||r in g||(r=e.pluralCat(r-p)),!(r===c||i&&ni(c))){E();var a=m[r];v(a)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+d),E=h,u()):E=o.$watch(a,u),c=r}})}}}],os=["$parse","$animate","$compile",function(e,i,a){var o="$$NG_REMOVED",s=t("ngRepeat"),l=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},u=function(e){return e.clone[0]},c=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,f){var d=f.ngRepeat,h=a.$$createComment("end ngRepeat",d),p=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",d);var g=p[1],m=p[2],v=p[3],y=p[4];if(p=g.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/),!p)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var b=p[3]||p[1],_=p[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var E,x,S,T,w={$id:Qe};return y?E=e(y):(S=function(e,t){return Qe(t)},T=function(e){return e}),function(e,t,a,f,p){E&&(x=function(t,n,r){return _&&(w[_]=t),w[b]=n,w.$index=r,E(e,w)});var g=ge();e.$watchCollection(m,function(a){var f,m,y,E,w,A,C,k,O,I,M,N,D=t[0],L=ge();if(v&&(e[v]=a),n(a))O=a,k=x||S;else{k=x||T,O=[];for(var $ in a)Ur.call(a,$)&&"$"!==$.charAt(0)&&O.push($)}for(E=O.length,M=new Array(E),f=0;f<E;f++)if(w=a===O?f:O[f],A=a[w],C=k(w,A,f),g[C])I=g[C],delete g[C],L[C]=I,M[f]=I;else{if(L[C])throw r(M,function(e){e&&e.scope&&(g[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",d,C,A);M[f]={id:C,scope:void 0,clone:void 0},L[C]=!0}for(var R in g){if(I=g[R],N=pe(I.clone),i.leave(N),N[0].parentNode)for(f=0,m=N.length;f<m;f++)N[f][o]=!0;I.scope.$destroy()}for(f=0;f<E;f++)if(w=a===O?f:O[f],A=a[w],I=M[f],I.scope){y=D;do y=y.nextSibling;while(y&&y[o]);u(I)!==y&&i.move(pe(I.clone),null,D),D=c(I),l(I.scope,f,b,A,_,w,E)}else p(function(e,t){I.scope=t;var n=h.cloneNode(!1);e[e.length++]=n,i.enter(e,null,D),D=n,I.clone=e,L[I.id]=I,l(I.scope,f,b,A,_,w,E)});g=L})}}}}],ss="ng-hide",ls="ng-hide-animate",us=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,ss,{tempClasses:ls})})}}}],cs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,ss,{tempClasses:ls})})}}}],fs=fr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&r(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),ds=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,a,o){var s=a.ngSwitch||a.on,l=[],u=[],c=[],f=[],d=function(e,t){return function(n){n!==!1&&e.splice(t,1)}};n.$watch(s,function(n){for(var i,a;c.length;)e.cancel(c.pop());for(i=0,a=f.length;i<a;++i){var s=pe(u[i].clone);f[i].$destroy();var h=c[i]=e.leave(s);h.done(d(c,i))}u.length=0,f.length=0,(l=o.cases["!"+n]||o.cases["?"])&&r(l,function(n){n.transclude(function(r,i){f.push(i);var a=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var o={clone:r};u.push(o),e.enter(r,a.parent(),a)})})})}}}],hs=fr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,a){var o=n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e});r(o,function(e){i.cases["!"+e]=i.cases["!"+e]||[],i.cases["!"+e].push({transclude:a,element:t})})}}),ps=fr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),gs=t("ngTransclude"),ms=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,a){function o(e,n){e.length?t.append(e):(s(),n.$destroy())}function s(){n(e,function(e){t.append(e)})}if(!a)throw gs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",K(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var l=r.ngTransclude||r.ngTranscludeSlot;a(o,null,l),l&&!a.isSlotFilled(l)&&s()}}}}],vs=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],ys={$setViewValue:h,$render:h},bs=["$element","$scope",function(t,n){var r=this,i=new Je;r.ngModelCtrl=ys,r.unknownOption=Yr(e.document.createElement("option")),r.renderUnknownOption=function(e){var n="? "+Qe(e)+" ?";r.unknownOption.val(n),t.prepend(r.unknownOption),t.val(n)},n.$on("$destroy",function(){r.renderUnknownOption=h}),r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.readValue=function(){return r.removeUnknownOption(),t.val()},r.writeValue=function(e){r.hasOption(e)?(r.removeUnknownOption(),t.val(e),""===e&&r.emptyOption.prop("selected",!0)):null==e&&r.emptyOption?(r.removeUnknownOption(),t.val("")):r.renderUnknownOption(e)},r.addOption=function(e,t){if(t[0].nodeType!==vi){de(e,'"option value"'),""===e&&(r.emptyOption=t);var n=i.get(e)||0;i.put(e,n+1),r.ngModelCtrl.$render(),Rr(t)}},r.removeOption=function(e){var t=i.get(e);t&&(1===t?(i.remove(e),""===e&&(r.emptyOption=void 0)):i.put(e,t-1))},r.hasOption=function(e){return!!i.get(e)},r.registerOption=function(e,t,n,i,a){if(i){var o;n.$observe("value",function(e){y(o)&&r.removeOption(o),o=e,r.addOption(e,t)})}else a?e.$watch(a,function(e,i){n.$set("value",e),i!==e&&r.removeOption(i),r.addOption(e,t)}):r.addOption(n.value,t);t.on("$destroy",function(){r.removeOption(n.value),r.ngModelCtrl.$render()})}}],_s=function(){function e(e,t,n,i){var a=i[1];if(a){var o=i[0];if(o.ngModelCtrl=a,t.on("change",function(){e.$apply(function(){a.$setViewValue(o.readValue())})}),n.multiple){o.readValue=function(){var e=[];return r(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},o.writeValue=function(e){var n=new Je(e);r(t.find("option"),function(e){e.selected=y(n.get(e.value))})};var s,l=NaN;e.$watch(function(){l!==a.$viewValue||j(s,a.$viewValue)||(s=ve(a.$viewValue),a.$render()),l=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}}}}function t(e,t,n,r){var i=r[1];if(i){var a=r[0];i.$render=function(){a.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:bs,priority:1,link:{pre:e,post:t}}},Es=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return y(n.ngValue)?r=!0:y(n.value)?r=e(n.value,!0):(i=e(t.text(),!0),i||n.$set("value",t.text())),function(e,t,n){var a="$selectController",o=t.parent(),s=o.data(a)||o.parent().data(a);s&&s.registerOption(e,t,n,r,i)}}}}],xs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Ss=function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var a,o=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(E(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,e,K(n));a=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||v(a)||a.test(t)}}}}},Ts=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=f(e);i=ni(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}}},ws=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=f(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void(e.console&&console.log("WARNING: Tried to load angular more than once.")):(ue(),_e(ei),ei.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r),a=(e*i|0)%i;return{v:r,f:a}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,a=n(e,t);return 1==i&&0==a.v?r.ONE:r.OTHER}})}]),void Yr(e.document).ready(function(){ie(e.document,ae)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),/**
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */
/**
 * Implementing Drag and Drop functionality in AngularJS is easier than ever.
 * Demo: http://codef0rmer.github.com/angular-dragdrop/
 *
 * @version 1.0.13
 *
 * (c) 2013 Amit Gharat a.k.a codef0rmer <amit.2006.it@gmail.com> - amitgharat.wordpress.com
 */
function(e,t,n,r){"use strict";var i=t.module("ngDragDrop",[]).service("ngDragDropService",["$timeout","$parse","$q",function(a,o,s){this.draggableScope=null,this.droppableScope=null,n("head").prepend('<style type="text/css">@charset "UTF-8";.angular-dragdrop-hide{display: none !important;}</style>'),this.callEventCallback=function(e,t,r,i){function a(t){var r=t.indexOf("(")!==-1?t.indexOf("("):t.length,i=t.lastIndexOf(")")!==-1?t.lastIndexOf(")"):t.length,a=t.substring(r+1,i),s=t.indexOf(".")!==-1?t.substr(0,t.indexOf(".")):null;return s=e[s]&&"function"==typeof e[s].constructor?s:null,{callback:t.substring(s&&s.length+1||0,r),args:n.map(a&&a.split(",")||[],function(t){return[o(t)(e)]}),constructor:s}}if(t){var s=a(t),l=s.callback,u=s.constructor,c=[r,i].concat(s.args);return(e[l]||e[u][l]).apply(e[l]?e:e[u],c)}},this.invokeDrop=function(e,o,l,u){var c,f,d,h="",p="",g={},m={},v=null,y={},b={},_=null,E=this.droppableScope,x=this.draggableScope,S=null,T=[];h=e.ngattr("ng-model"),p=o.ngattr("ng-model"),c=x.$eval(h),f=E.$eval(p),_=o.find("[jqyoui-draggable]:last,[data-jqyoui-draggable]:last"),m=E.$eval(o.attr("jqyoui-droppable")||o.attr("data-jqyoui-droppable"))||[],g=x.$eval(e.attr("jqyoui-draggable")||e.attr("data-jqyoui-draggable"))||[],g.index=this.fixIndex(x,g,c),m.index=this.fixIndex(E,m,f),v=t.isArray(c)?g.index:null,y=t.isArray(c)?c[v]:c,g.deepCopy&&(y=t.copy(y)),b=t.isArray(f)&&m&&m.index!==r?f[m.index]:t.isArray(f)?{}:f,m.deepCopy&&(b=t.copy(b)),g.beforeDrop&&T.push(this.callEventCallback(x,g.beforeDrop,l,u)),s.all(T).then(t.bind(this,function(){if(g.insertInline&&h===p){if(g.index>m.index){d=c[g.index];for(var r=g.index;r>m.index;r--)f[r]=t.copy(f[r-1]),f[r-1]={},f[r][g.direction]="left";f[m.index]=d}else{d=c[g.index];for(var r=g.index;r<m.index;r++)f[r]=t.copy(f[r+1]),f[r+1]={},f[r][g.direction]="right";f[m.index]=d}this.callEventCallback(E,m.onDrop,l,u)}else g.animate===!0?(S=e.clone(),S.css({position:"absolute"}).css(e.offset()),n("body").append(S),e.addClass("angular-dragdrop-hide"),this.move(S,_.length>0?_:o,null,"fast",m,function(){S.remove()}),this.move(_.length>0&&!m.multiple?_:[],e.parent("[jqyoui-droppable],[data-jqyoui-droppable]"),i.startXY,"fast",m,t.bind(this,function(){a(t.bind(this,function(){e.css({position:"relative",left:"",top:""}).removeClass("angular-dragdrop-hide"),_.css({position:"relative",left:"",top:"",display:"none"===_.css("display")?"":_.css("display")}),this.mutateDraggable(x,m,g,h,p,b,e),this.mutateDroppable(E,m,g,p,y,v),this.callEventCallback(E,m.onDrop,l,u)}))}))):a(t.bind(this,function(){this.mutateDraggable(x,m,g,h,p,b,e),this.mutateDroppable(E,m,g,p,y,v),this.callEventCallback(E,m.onDrop,l,u)}))}))["finally"](t.bind(this,function(){this.restore(e)}))},this.move=function(t,n,i,a,o,s){if(0===t.length)return s&&e.setTimeout(function(){s()},300),!1;var l=t.css("z-index"),u=t[o.containment||"offset"](),c=n.css("display"),f=n.hasClass("ng-hide"),d=n.hasClass("angular-dragdrop-hide");null===i&&n.length>0&&((n.attr("jqyoui-draggable")||n.attr("data-jqyoui-draggable"))!==r&&n.ngattr("ng-model")!==r&&n.is(":visible")&&o&&o.multiple?(i=n[o.containment||"offset"](),o.stack===!1?i.left+=n.outerWidth(!0):i.top+=n.outerHeight(!0)):(f&&n.removeClass("ng-hide"),d&&n.removeClass("angular-dragdrop-hide"),i=n.css({visibility:"hidden",display:"block"})[o.containment||"offset"](),n.css({visibility:"",display:c}))),t.css({position:"absolute","z-index":9999}).css(u).animate(i,a,function(){f&&n.addClass("ng-hide"),d&&n.addClass("angular-dragdrop-hide"),t.css("z-index",l),s&&s()})},this.mutateDroppable=function(e,n,r,i,a,s){var l=e.$eval(i);e.dndDragItem=a,t.isArray(l)?(n&&n.index>=0?l[n.index]=a:l.push(a),r&&r.placeholder===!0&&(l[l.length-1].jqyoui_pos=s)):(o(i+" = dndDragItem")(e),r&&r.placeholder===!0&&(l.jqyoui_pos=s))},this.mutateDraggable=function(e,n,i,a,s,l,u){var c=t.equals(l,{})||!l,f=e.$eval(a);e.dndDropItem=l,i&&i.placeholder?"keep"!=i.placeholder&&(t.isArray(f)&&i.index!==r?f[i.index]=l:o(a+" = dndDropItem")(e)):t.isArray(f)?c?i&&i.placeholder!==!0&&"keep"!==i.placeholder&&f.splice(i.index,1):f[i.index]=l:(o(a+" = dndDropItem")(e),e.$parent&&o(a+" = dndDropItem")(e.$parent)),this.restore(u)},this.restore=function(e){e.css({"z-index":"",left:"",top:""})},this.fixIndex=function(e,n,i){if(n.applyFilter&&t.isArray(i)&&i.length>0){var a=e[n.applyFilter](),o=a[n.index],s=r;return i.forEach(function(e,n){t.equals(e,o)&&(s=n)}),s}return n.index}}]).directive("jqyouiDraggable",["ngDragDropService",function(e){return{require:"?jqyouiDroppable",restrict:"A",link:function(r,a,o){var s,l,u,c,f=n(a),d=function(a,d){a?(s=r.$eval(f.attr("jqyoui-draggable")||f.attr("data-jqyoui-draggable"))||{},l=r.$eval(o.jqyouiOptions)||{},f.draggable({disabled:!1}).draggable(l).draggable({start:function(t,a){e.draggableScope=r,u=n(l.helper?a.helper:this).css("z-index"),n(l.helper?a.helper:this).css("z-index",9999),i.startXY=n(this)[s.containment||"offset"](),e.callEventCallback(r,s.onStart,t,a)},stop:function(t,i){n(l.helper?i.helper:this).css("z-index",u),e.callEventCallback(r,s.onStop,t,i)},drag:function(t,n){e.callEventCallback(r,s.onDrag,t,n)}})):f.draggable({disabled:!0}),c&&t.isDefined(a)&&(t.equals(o.drag,"true")||t.equals(o.drag,"false"))&&(c(),c=null)};c=r.$watch(function(){return r.$eval(o.drag)},d),d(),f.on("$destroy",function(){f.draggable({disabled:!0}).draggable("destroy")})}}}]).directive("jqyouiDroppable",["ngDragDropService","$q",function(e,r){return{restrict:"A",priority:1,link:function(i,a,o){var s,l,u,c=n(a),f=function(a,f){a?(s=i.$eval(n(c).attr("jqyoui-droppable")||n(c).attr("data-jqyoui-droppable"))||{},l=i.$eval(o.jqyouiOptions)||{},c.droppable({disabled:!1}).droppable(l).droppable({over:function(t,n){e.callEventCallback(i,s.onOver,t,n)},out:function(t,n){e.callEventCallback(i,s.onOut,t,n)},drop:function(a,u){var c=null;c=s.beforeDrop?e.callEventCallback(i,s.beforeDrop,a,u):function(){var e=r.defer();return e.resolve(),e.promise}(),c.then(t.bind(this,function(){n(u.draggable).ngattr("ng-model")&&o.ngModel?(e.droppableScope=i,e.invokeDrop(n(u.draggable),n(this),a,u)):e.callEventCallback(i,s.onDrop,a,u)}),function(){u.draggable.animate({left:"",top:""},l.revertDuration||0)})}})):c.droppable({disabled:!0}),u&&t.isDefined(a)&&(t.equals(o.drop,"true")||t.equals(o.drop,"false"))&&(u(),u=null)};u=i.$watch(function(){return i.$eval(o.drop)},f),f(),c.on("$destroy",function(){c.droppable({disabled:!0}).droppable("destroy")})}}}]);n.fn.ngattr=function(e,t){var n=this[0];return n.getAttribute(e)||n.getAttribute("data-"+e)}}(window,window.angular,window.jQuery),function(e){return e.module("ngOrderObjectBy",[]).filter("orderObjectBy",function(){return function(t,n,r){function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e,t){return e[t]}var o=[];return e.forEach(t,function(e,t){e.key=t,o.push(e)}),o.sort(function(e,t){var r,o=n.split(".").reduce(a,e),s=n.split(".").reduce(a,t);return i(o)&&i(s)&&(o=Number(o),s=Number(s)),r=o===s?0:o>s?1:-1}),r&&o.reverse(),o}})}(angular),/*
 * angular-tooltips
 * 1.0.10
 * 
 * Angular.js tooltips module.
 * http://720kb.github.io/angular-tooltips
 * 
 * MIT license
 * Sat Apr 30 2016
 */
!function(e,t){"use strict";var n="tooltips",r=function(){var e=[],n=0,r=function(r){r-n>=15?(e.forEach(function(e){e()}),n=r):t.console.log("Skipped!")},i=function(){t.requestAnimationFrame(r)},a=function(t){t&&e.push(t)};return{add:function(n){e.length||t.addEventListener("resize",i),a(n)}}}(),i=function(e){var t={};return e.removeAttr(n),void 0!==e.attr("tooltip-template")&&(t["tooltip-template"]=e.attr("tooltip-template"),e.removeAttr("tooltip-template")),void 0!==e.attr("tooltip-template-url")&&(t["tooltip-template-url"]=e.attr("tooltip-template-url"),e.removeAttr("tooltip-template-url")),void 0!==e.attr("tooltip-controller")&&(t["tooltip-controller"]=e.attr("tooltip-controller"),e.removeAttr("tooltip-controller")),void 0!==e.attr("tooltip-side")&&(t["tooltip-side"]=e.attr("tooltip-side"),e.removeAttr("tooltip-side")),void 0!==e.attr("tooltip-show-trigger")&&(t["tooltip-show-trigger"]=e.attr("tooltip-show-trigger"),e.removeAttr("tooltip-show-trigger")),void 0!==e.attr("tooltip-hide-trigger")&&(t["tooltip-hide-trigger"]=e.attr("tooltip-hide-trigger"),e.removeAttr("tooltip-hide-trigger")),void 0!==e.attr("tooltip-smart")&&(t["tooltip-smart"]=e.attr("tooltip-smart"),e.removeAttr("tooltip-smart")),void 0!==e.attr("tooltip-class")&&(t["tooltip-class"]=e.attr("tooltip-class"),e.removeAttr("tooltip-class")),void 0!==e.attr("tooltip-close-button")&&(t["tooltip-close-button"]=e.attr("tooltip-close-button"),e.removeAttr("tooltip-close-button")),void 0!==e.attr("tooltip-size")&&(t["tooltip-size"]=e.attr("tooltip-size"),e.removeAttr("tooltip-size")),void 0!==e.attr("tooltip-speed")&&(t["tooltip-speed"]=e.attr("tooltip-speed"),e.removeAttr("tooltip-speed")),t},a=function(e){return t.getComputedStyle?t.getComputedStyle(e,""):e.currentStyle?e.currentStyle:void 0},o=function(n){for(var r,i,a=t.document.querySelectorAll("._exradicated-tooltip"),o=0,s=a.length;s>o;o+=1)if(r=a.item(o),r&&(i=e.element(r),i.data("_tooltip-parent")&&i.data("_tooltip-parent")===n))return i},s=function(e){var t=o(e);t&&t.remove()},l=function(e){if(e){var n=e[0].getBoundingClientRect();return(n.top<0||n.top>t.document.body.offsetHeight||n.left<0||n.left>t.document.body.offsetWidth||n.bottom<0||n.bottom>t.document.body.offsetHeight||n.right<0||n.right>t.document.body.offsetWidth)&&(e.css({top:"",left:"",bottom:"",right:""}),!0)}throw new Error("You must provide a position")},u=function(){var e={side:"top",showTrigger:"mouseover",hideTrigger:"mouseleave","class":"",smart:!1,closeButton:!1,size:"",speed:"steady"};return{configure:function(t){var n,r=Object.keys(e),i=0;if(t)for(;i<r.length;i+=1)n=r[i],n&&t[n]&&(e[n]=t[n])},$get:function(){return e}}},c=["$log","$http","$compile","$timeout","$controller","$injector","tooltipsConf",function(n,u,c,f,d,h,p){var g=function(n,h,g,m,v){if(g.tooltipTemplate&&g.tooltipTemplateUrl)throw new Error("You can not define tooltip-template and tooltip-template-url together");if(!g.tooltipTemplateUrl&&!g.tooltipTemplate&&g.tooltipController)throw new Error("You can not have a controller without a template or templateUrl defined");var y,b="_"+p.side,_=p.showTrigger,E=p.hideTrigger,x=p.size,S="_"+p.speed;g.tooltipSide=g.tooltipSide||p.side,g.tooltipShowTrigger=g.tooltipShowTrigger||p.showTrigger,g.tooltipHideTrigger=g.tooltipHideTrigger||p.hideTrigger,g.tooltipClass=g.tooltipClass||p["class"],g.tooltipSmart="true"===g.tooltipSmart||p.smart,g.tooltipCloseButton=g.tooltipCloseButton||p.closeButton.toString(),g.tooltipSize=g.tooltipSize||p.size,g.tooltipSpeed=g.tooltipSpeed||p.speed,g.tooltipAppendToBody="true"===g.tooltipAppendToBody,v(n,function(n,p){var m=i(n),v=e.element(t.document.createElement("tooltip")),T=e.element(t.document.createElement("tip-cont")),w=e.element(t.document.createElement("tip")),A=e.element(t.document.createElement("tip-tip")),C=e.element(t.document.createElement("span")),k=e.element(t.document.createElement("tip-arrow")),O=function(){return T.html()},I=function(e){void 0!==e&&T[0].getClientRects().length>1?v.addClass("_multiline"):v.removeClass("_multiline")},M=function(n){if(w.addClass("_hidden"),g.tooltipSmart)switch(g.tooltipSide){case"top":l(w)&&(v.removeClass("_top"),v.addClass("_left"),l(w)&&(v.removeClass("_left"),v.addClass("_bottom"),l(w)&&(v.removeClass("_bottom"),v.addClass("_right"),l(w)&&(v.removeClass("_right"),v.addClass("_top")))));break;case"left":l(w)&&(v.removeClass("_left"),v.addClass("_bottom"),l(w)&&(v.removeClass("_bottom"),v.addClass("_right"),l(w)&&(v.removeClass("_right"),v.addClass("_top"),l(w)&&(v.removeClass("_top"),v.addClass("_left")))));break;case"bottom":l(w)&&(v.removeClass("_bottom"),v.addClass("_left"),l(w)&&(v.removeClass("_left"),v.addClass("_top"),l(w)&&(v.removeClass("_top"),v.addClass("_right"),l(w)&&(v.removeClass("_right"),v.addClass("_bottom")))));break;case"right":l(w)&&(v.removeClass("_right"),v.addClass("_top"),l(w)&&(v.removeClass("_top"),v.addClass("_left"),l(w)&&(v.removeClass("_left"),v.addClass("_bottom"),l(w)&&(v.removeClass("_bottom"),v.addClass("_right")))));break;default:throw new Error("Position not supported")}if(g.tooltipAppendToBody){var r,i,o,u,c,f=a(A[0]),d=a(k[0]),h=a(w[0]),p=w[0].getBoundingClientRect(),m=e.copy(w),y=0,b=f.length,_=0,E=d.length,x=0,S=h.length,T={},C={},O={};for(w.removeClass("_hidden"),m.removeClass("_hidden"),m.data("_tooltip-parent",v),s(v);b>y;y+=1)r=f[y],r&&f.getPropertyValue(r)&&(T[r]=f.getPropertyValue(r));for(;E>_;_+=1)r=d[_],r&&d.getPropertyValue(r)&&(O[r]=d.getPropertyValue(r));for(;S>x;x+=1)r=h[x],r&&"position"!==r&&"display"!==r&&"opacity"!==r&&"z-index"!==r&&"bottom"!==r&&"height"!==r&&"left"!==r&&"right"!==r&&"top"!==r&&"width"!==r&&h.getPropertyValue(r)&&(C[r]=h.getPropertyValue(r));i=t.parseInt(h.getPropertyValue("padding-top"),10),o=t.parseInt(h.getPropertyValue("padding-bottom"),10),u=t.parseInt(h.getPropertyValue("padding-left"),10),c=t.parseInt(h.getPropertyValue("padding-right"),10),C.top=p.top+t.scrollY+"px",C.left=p.left+t.scrollX+"px",C.height=p.height-(i+o)+"px",C.width=p.width-(u+c)+"px",m.css(C),m.children().css(T),m.children().next().css(O),n&&"true"!==g.tooltipHidden&&(m.addClass("_exradicated-tooltip"),e.element(t.document.body).append(m))}else w.removeClass("_hidden"),n&&"true"!==g.tooltipHidden&&v.addClass("active")},N=function(){g.tooltipAppendToBody?s(v):v.removeClass("active")},D=function re(e){var t,n=e.parent();e[0]&&(e[0].scrollHeight>e[0].clientHeight||e[0].scrollWidth>e[0].clientWidth)&&e.on("scroll",function(){var e=this;t&&f.cancel(t),t=f(function(){var t=o(v),n=v[0].getBoundingClientRect(),r=e.getBoundingClientRect();n.top<r.top||n.bottom>r.bottom||n.left<r.left||n.right>r.right?s(v):t&&M(!0)})}),n&&n.length&&re(n)},L=function(e){e?(v.removeClass("_force-hidden"),A.empty(),A.append(C),A.append(e),f(function(){M()})):(A.empty(),v.addClass("_force-hidden"))},$=function(e){e?u.get(e).then(function(e){e&&e.data&&(v.removeClass("_force-hidden"),A.empty(),A.append(C),A.append(c(e.data)(p)),f(function(){M()}))}):(A.empty(),v.addClass("_force-hidden"))},R=function(e){e&&(b&&v.removeAttr("_"+b),v.addClass("_"+e),b=e)},P=function(e){e&&(_&&v.off(_),v.on(e,M),_=e)},F=function(e){e&&(E&&v.off(E),v.on(e,N),E=e)},U=function(e){e&&(y&&w.removeClass(y),w.addClass(e),y=e)},j=function(){"boolean"!=typeof g.tooltipSmart&&(g.tooltipSmart="true"===g.tooltipSmart)},H=function(e){var t="true"===e;t?(C.on("click",N),C.css("display","block")):(C.off("click"),C.css("display","none"))},z=function(t){if(t){var n,r=d(t,{$scope:p}),i=p.$new(!1,p),a=t.indexOf("as");a>=0?(n=t.substr(a+3),i[n]=r):e.extend(i,r),A.replaceWith(c(A)(i)),J()}},B=function(e){e&&(x&&A.removeClass("_"+x),A.addClass("_"+e),x=e)},q=function(e){e&&(S&&v.removeClass("_"+S),v.addClass("_"+e),S=e)},Y=g.$observe("tooltipTemplate",L),X=g.$observe("tooltipTemplateUrl",$),W=g.$observe("tooltipSide",R),G=g.$observe("tooltipShowTrigger",P),V=g.$observe("tooltipHideTrigger",F),K=g.$observe("tooltipClass",U),Z=g.$observe("tooltipSmart",j),Q=g.$observe("tooltipCloseButton",H),J=g.$observe("tooltipController",z),ee=g.$observe("tooltipSize",B),te=g.$observe("tooltipSpeed",q),ne=p.$watch(O,I);C.attr({id:"close-button"}),C.html("&times;"),w.addClass("_hidden"),A.append(C),A.append(g.tooltipTemplate),w.append(A),w.append(k),T.append(n),v.attr(m),v.addClass("tooltips"),v.append(T),v.append(w),h.after(v),g.tooltipAppendToBody&&(r.add(function(){D(v)}),D(v)),r.add(function(){I(),M()}),f(function(){M(),w.removeClass("_hidden"),v.addClass("_ready")}),p.$on("$destroy",function(){Y(),X(),W(),G(),V(),K(),Z(),Q(),ee(),te(),ne(),n.off(g.tooltipShowTrigger+" "+g.tooltipHideTrigger)})})};return{restrict:"A",transclude:"element",priority:1,terminal:!0,link:g}}];e.module("720kb.tooltips",[]).provider(n+"Conf",u).directive(n,c)}(angular,window),function(){"use strict";function e(e){return e instanceof RegExp}function t(e){return e&&e.window===e}function n(e){return e&&e.$evalAsync&&e.$watch}function r(i,a){if(i===a)return{isEqual:!0,unequalVariable:"",stringDiff:!1,o1:i,o2:a};if(null===i||null===a)return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a};if(i!==i&&a!==a)return{isEqual:!0,unequalVariable:"",stringDiff:!1,o1:i,o2:a};var o,s,c,f=typeof i,h=typeof a;if(f==h){if("string"==f&&i!=a)return{isEqual:!1,unequalVariable:"",stringDiff:!0,o1:i,o2:a};if("object"==f){if(!u(i)){if(d(i))return{isEqual:d(a)&&i.getTime()==a.getTime(),unequalVariable:"",stringDiff:!1,o1:i,o2:a};if(e(i)&&e(a))return{isEqual:i.toString()==a.toString(),unequalVariable:"",stringDiff:!1,o1:i,o2:a};if(n(i)||n(a)||t(i)||t(a)||u(a))return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a};c={};var p={isEqual:!0,unequalVariable:"",stringDiff:!1,o1:i,o2:a};for(s in i)if("$"!==s.charAt(0)&&!l(i[s])){var g=r(i[s],a[s]);if(!g.isEqual){if(g.unequalVariable="."+String(s)+g.unequalVariable,!g.stringDiff)return g;p=g}c[s]=!0}for(s in a)if(!c.hasOwnProperty(s)&&"$"!==s.charAt(0)&&void 0!==a[s]&&!l(a[s]))return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a};return p}if(!u(a))return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a};if((o=i.length)==a.length){var p={isEqual:!0,unequalVariable:"",stringDiff:!1,o1:i,o2:a};for(s=0;s<o;s++){var g=r(i[s],a[s]);if(!g.isEqual){if(g.unequalVariable="["+String(s)+"]"+g.unequalVariable,!g.stringDiff)return g;p=g}}return p}}}return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a}}function i(e,t){if(e&&t){var n,r;e.length>t.length?(r=e.split(""),n=t.split("")):(n=e.split(""),r=t.split(""));for(var i,a=0,o=[],s=0;s<n.length&&a<r.length;s++){for(i="";n[s]!=r[a]&&a<r.length;)i+=r[a],a++;i&&o.push(i),n[s]==r[a]&&a++}var l=s==n.length;if(a<r.length){for(i="";a<r.length;)i+=r[a],a++;o.push(i)}}else var l=!1,o=[];return{areSimilar:l,differences:o}}function a(e){var t=/\s/g;if(1!=e.length)return!1;for(var n in e[0])if(e[0][n].match(t))return!1;return!0}var o=15,s=(angular.isDefined,angular.isUndefined),l=angular.isFunction,u=angular.isArray,c=angular.isString,f=angular.isObject,d=angular.isDate,h=(angular.forEach,angular.copy),p=angular.bind;angular.module("Chronicle",[]).service("Chronicle",["$rootScope","$parse",function(e,t){this.record=function(e,t,n,r){var i=new d(e,t,n,r);return i};var d=function(e,r,i,a){if(!c(e))throw new Error("Watch variable that is not a string was passed to Chronicle.");if(this.watchVar=e,this.parsedWatchVar=t(e),s(this.parsedWatchVar(r)))throw new Error(e+", the watch variable passed to Chronicle, is not defined in the given scope.");if(s(r))throw new Error("Undefined scope passed to Chronicle.");if(n(r))this.isScope=!0;else{if(!f(r))throw new Error("Incorrect scope type passed to Chronicle.");this.isScope=!1}if(this.scope=r,i!==!0&&"true"!==i?this.stringHandling=!1:this.stringHandling=!0,this.parsedNoWatchVars=[],u(a))for(var o in a){if(!c(a[o]))throw new Error("Not all passed 'no watch' variables are in string format");if(this.parsedNoWatchVars.push(t(a[o])),s(this.parsedNoWatchVars[o](r)))throw new Error(a[o]+", a 'no watch' variable passed to Chronicle, is not defined in the given scope")}else if(c(a)){if(this.parsedNoWatchVars.push(t(a)),s(this.parsedNoWatchVars[0](r)))throw new Error(a+", the 'no watch' variable passed to Chronicle, is not defined in the given scope")}else if(!s(a))throw new Error("Incorect type for 'no watch' variables");this.archive=[],this.onAdjustFunctions=[],this.onRedoFunctions=[],this.onUndoFunctions=[],this.currArchivePos=null,this.addWatch()};d.prototype.addOnAdjustFunction=function(e){if(!l(e))throw new Error("Function added to run on adjustment is not a function");this.onAdjustFunctions.push(e)},d.prototype.removeOnAdjustFunction=function(e){this.onAdjustFunctions.splice(this.onAdjustFunctions.indexOf(e),1)},d.prototype.addOnUndoFunction=function(e){if(!l(e))throw new Error("Function added to run on undo is not a function");this.onUndoFunctions.push(e)},d.prototype.removeOnUndoFunction=function(e){this.onUndoFunctions.splice(this.onUndoFunctions.indexOf(e),1)},d.prototype.addOnRedoFunction=function(e){if(!l(e))throw new Error("Function added to run on redo is not a function");this.onRedoFunctions.push(e)},d.prototype.removeOnRedoFunction=function(e){this.onRedoFunctions.splice(this.onRedoFunctions.indexOf(e),1)},d.prototype.undo=function(){if(this.canUndo()){this.currArchivePos-=1,this.revert(this.currArchivePos);for(var e=0;e<this.onUndoFunctions.length;e++)this.onUndoFunctions[e]();return!0}return!1},d.prototype.redo=function(){if(this.canRedo()){this.currArchivePos+=1,this.revert(this.currArchivePos);for(var e=0;e<this.onRedoFunctions.length;e++)this.onRedoFunctions[e]();return!0}return!1},d.prototype.revert=function(e){this.parsedWatchVar.assign(this.scope,h(this.archive[e].watchVar));for(var t=0;t<this.parsedNoWatchVars.length;t++)this.parsedNoWatchVars[t].assign(this.scope,h(this.archive[e].noWatchVars[t]))},d.prototype.canRedo=function(){return this.currArchivePos<this.archive.length-1},d.prototype.canUndo=function(){return this.currArchivePos>0},d.prototype.addToArchive=function(){var e=!1;if(this.archive.length){var n=r(this.parsedWatchVar(this.scope),this.archive[this.currArchivePos].watchVar);if(!n.isEqual){e=!0;var s=t(this.watchVar+n.unequalVariable);if(this.stringHandling&&n.stringDiff){var l=!1,u=i(n.o1,n.o2);if(u.areSimilar&&this.archive[this.currArchivePos].parsedUnequalVariable==s){var l=a(u.differences);"string"!=typeof t("watchVar"+n.unequalVariable)(this.archive[this.currArchivePos-1])?l=!1:l&&Math.abs(t("watchVar"+n.unequalVariable)(this.archive[this.currArchivePos-1]).length-t("watchVar"+n.unequalVariable)(this.archive[this.currArchivePos]).length)>=o&&(l=!1)}}}}else e=!0;e&&this.newEntry(l,s)},d.prototype.newEntry=function(e,t){var n={};n.noWatchVars=[],n.parsedUnequalVariable=t,n.watchVar=h(this.parsedWatchVar(this.scope));for(var r=0;r<this.parsedNoWatchVars.length;r++)n.noWatchVars.push(h(this.parsedNoWatchVars[r](this.scope)));if(this.archive.length-1>this.currArchivePos){var i=this.archive.length-this.currArchivePos-1;this.archive.splice(this.currArchivePos+1,i)}for(e&&this.archive.splice(this.currArchivePos,1),this.archive.push(n),this.currArchivePos=this.archive.length-1,r=0;r<this.onAdjustFunctions.length;r++)this.onAdjustFunctions[r]()},d.prototype.addWatch=function(){var t=this;t.isScope?t.cancelWatch=t.scope.$watch(t.watchVar,function(){t.addToArchive.apply(t)},!0):t.cancelWatch=e.$watch(p(t,function(){return t.parsedWatchVar(t.scope)}),function(){t.addToArchive.apply(t)},!0)}}])}(),/**
 * Angular Google Analytics - Easy tracking for your AngularJS application
 * @version v1.1.8 - 2016-12-30
 * @link http://github.com/revolunet/angular-google-analytics
 * @author Julien Bouquillon <julien@revolunet.com> (https://github.com/revolunet)
 * @contributors Julien Bouquillon (https://github.com/revolunet),Justin Saunders (https://github.com/justinsa),Chris Esplin (https://github.com/deltaepsilon),Adam Misiorny (https://github.com/adam187)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t){"use strict";"undefined"!=typeof module&&module.exports?(t("undefined"==typeof angular?require("angular"):angular),module.exports="angular-google-analytics"):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(this,function(e,t){"use strict";return e.module("angular-google-analytics",[]).provider("Analytics",function(){var n,r,i,a,o,s=!0,l="auto",u=!1,c=!1,f="USD",d=!1,h=!1,p=!1,g=!1,m=!1,v=!1,y=!1,b=!1,_=!1,E=!1,x=!1,S="$routeChangeSuccess",T=!1,w=!1,A=!1,C="",k=!0,O=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(r){return n=e.isUndefined(r)||r===!1?t:e.isArray(r)?r:e.isObject(r)?[r]:[{tracker:r,trackEvent:!0}],this},this.trackPages=function(e){return k=!!e,this},this.trackPrefix=function(e){return C=e,this},this.setDomainName=function(e){return i=e,this},this.useDisplayFeatures=function(e){return p=!!e,this},this.useAnalytics=function(e){return s=!!e,this},this.useEnhancedLinkAttribution=function(e){return y=!!e,this},this.useCrossDomainLinker=function(e){return c=!!e,this},this.setCrossLinkDomains=function(e){return r=e,this},this.setPageEvent=function(e){return S=e,this},this.setCookieConfig=function(e){return l=e,this},this.useECommerce=function(e,t){return m=!!e,v=!!t,this},this.setCurrency=function(e){return f=e,this},this.setRemoveRegExp=function(e){return e instanceof RegExp&&(o=e),this},this.setExperimentId=function(e){return a=e,this},this.ignoreFirstPageLoad=function(e){return b=!!e,this},this.trackUrlParams=function(e){return O=!!e,this},this.disableAnalytics=function(e){return g=!!e,this},this.setHybridMobileSupport=function(e){return E=!!e,this},this.startOffline=function(e){return x=!!e,x===!0&&this.delayScriptTag(!0),this},this.delayScriptTag=function(e){return h=!!e,this},this.logAllCalls=function(e){return _=!!e,this},this.enterTestMode=function(){return w=!0,this},this.enterDebugMode=function(e){return d=!0,A=!!e,this},this.readFromRoute=function(e){return T=!!e,this},this.$get=["$document","$location","$log","$rootScope","$window","$injector",function(I,M,N,D,L,$){var R=this,P=function(t,n){return e.isObject(n)&&e.isDefined(n[t])},F=function(e,t,n){return P(e,t)&&t[e]===n},U=function(t,n){return e.isString(n)?n+"."+t:P("name",n)?n.name+"."+t:t},j={};T&&($.has("$route")?j=$.get("$route"):N.warn("$route service is not available. Make sure you have included ng-route in your application dependencies."));var H=function(){if(T&&j.current&&"pageTrack"in j.current)return j.current.pageTrack;var e=O?M.url():M.path();return o?e.replace(o,""):e},z=function(){var t={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},n={};return e.forEach(M.search(),function(r,i){var a=t[i];e.isDefined(a)&&(n[a]=r)}),n},B=function(e,t,n,r,i,a,o,s,l){var u={};return e&&(u.id=e),t&&(u.affiliation=t),n&&(u.revenue=n),r&&(u.tax=r),i&&(u.shipping=i),a&&(u.coupon=a),o&&(u.list=o),s&&(u.step=s),l&&(u.option=l),u},q=function(t,n){var r="",i="https:"===document.location.protocol,a="chrome-extension:"===document.location.protocol,o=s===!0&&E===!0;return t=e.isString(t)?t:"",n=e.isString(n)?n:"",""!==t&&(r="http:"+t),(a||o||i&&""!==n)&&(r="https:"+n),r},Y=function(e){!s&&L._gaq&&"function"==typeof e&&e()},X=function(){var e=Array.prototype.slice.call(arguments);return x===!0?void R.offlineQueue.push([X,e]):(L._gaq||(L._gaq=[]),_===!0&&R._log.apply(R,e),void L._gaq.push(e))},W=function(e){s&&L.ga&&"function"==typeof e&&e()},G=function(){var e=Array.prototype.slice.call(arguments);return x===!0?void R.offlineQueue.push([G,e]):"function"!=typeof L.ga?void R._log("warn","ga function not set on window"):(_===!0&&R._log.apply(R,e),void L.ga.apply(null,e))},V=function(e){var t=Array.prototype.slice.call(arguments,1),r=t[0],i=[];return"function"==typeof e?n.forEach(function(t){e(t)&&i.push(t)}):i=n,0===i.length?void G.apply(R,t):void i.forEach(function(e){P("select",e)&&"function"==typeof e.select&&!e.select(t)||(t[0]=U(r,e),G.apply(R,t))})};return this._log=function(){var e=Array.prototype.slice.call(arguments);if(e.length>0){if(e.length>1)switch(e[0]){case"debug":case"error":case"info":case"log":case"warn":N[e[0]](e.slice(1))}R.log.push(e)}},this._createScriptTag=function(){R._registerScriptTags(),R._registerTrackers()},this._createAnalyticsScriptTag=function(){R._registerScriptTags(),R._registerTrackers()},this._registerScriptTags=function(){var e,t=I[0],r=q();if(u===!0)return void R._log("warn","Script tags already created");if(g===!0&&n.forEach(function(e){R._log("info","Analytics disabled: "+e.tracker),L["ga-disable-"+e.tracker]=!0}),s===!0){if(e=r+"//www.google-analytics.com/"+(d?"analytics_debug.js":"analytics.js"),w!==!0?!function(e,t,n,r,i,a,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(n),o=t.getElementsByTagName(n)[0],a.async=1,a.src=r,o.parentNode.insertBefore(a,o)}(window,t,"script",e,"ga"):("function"!=typeof L.ga&&(L.ga=function(){}),R._log("inject",e)),A&&(L.ga_debug={trace:!0}),a){var i=t.createElement("script"),o=t.getElementsByTagName("script")[0];i.src=r+"//www.google-analytics.com/cx/api.js?experiment="+a,o.parentNode.insertBefore(i,o)}}else e=q("//www","//ssl")+".google-analytics.com/ga.js",p===!0&&(e=r+"//stats.g.doubleclick.net/dc.js"),w!==!0?!function(){var n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src=e;var r=t.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}():R._log("inject",e);return u=!0,!0},this._registerTrackers=function(){return!n||n.length<1?void R._log("warn","No accounts to register"):(s===!0?n.forEach(function(t){t.crossDomainLinker=P("crossDomainLinker",t)?t.crossDomainLinker:c,t.crossLinkDomains=P("crossLinkDomains",t)?t.crossLinkDomains:r,t.displayFeatures=P("displayFeatures",t)?t.displayFeatures:p,t.enhancedLinkAttribution=P("enhancedLinkAttribution",t)?t.enhancedLinkAttribution:y,t.set=P("set",t)?t.set:{},t.trackEcommerce=P("trackEcommerce",t)?t.trackEcommerce:m,t.trackEvent=!!P("trackEvent",t)&&t.trackEvent;var n={};P("fields",t)?n=t.fields:P("cookieConfig",t)?e.isString(t.cookieConfig)?n.cookieDomain=t.cookieConfig:n=t.cookieConfig:e.isString(l)?n.cookieDomain=l:l&&(n=l),t.crossDomainLinker===!0&&(n.allowLinker=!0),P("name",t)&&(n.name=t.name),t.fields=n,G("create",t.tracker,t.fields),E===!0&&G(U("set",t),"checkProtocolTask",null);for(var i in t.set)t.set.hasOwnProperty(i)&&G(U("set",t),i,t.set[i]);t.crossDomainLinker===!0&&(G(U("require",t),"linker"),e.isDefined(t.crossLinkDomains)&&G(U("linker:autoLink",t),t.crossLinkDomains)),t.displayFeatures&&G(U("require",t),"displayfeatures"),t.trackEcommerce&&(v?(G(U("require",t),"ec"),G(U("set",t),"&cu",f)):G(U("require",t),"ecommerce")),t.enhancedLinkAttribution&&G(U("require",t),"linkid"),k&&!b&&G(U("send",t),"pageview",C+H())}):(n.length>1&&(R._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),n=n.slice(0,1)),X("_setAccount",n[0].tracker),i&&X("_setDomainName",i),y&&X("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),k&&!b&&(o?X("_trackPageview",H()):X("_trackPageview"))),!0)},this._ecommerceEnabled=function(e,t){var n=m&&!v;return e===!0&&n===!1&&(m&&v?R._log("warn",t+" is not available when Enhanced Ecommerce is enabled with analytics.js"):R._log("warn","Ecommerce must be enabled to use "+t+" with analytics.js")),n},this._enhancedEcommerceEnabled=function(e,t){var n=m&&v;return e===!0&&n===!1&&R._log("warn","Enhanced Ecommerce must be enabled to use "+t+" with analytics.js"),n},this._trackPage=function(n,r,i){n=n?n:H(),r=r?r:I[0].title,Y(function(){X("_set","title",r),X("_trackPageview",C+n)}),W(function(){var a={page:C+n,title:r};e.extend(a,z()),e.isObject(i)&&e.extend(a,i),V(t,"send","pageview",a)})},this._trackEvent=function(t,n,r,i,a,o){Y(function(){X("_trackEvent",t,n,r,i,!!a)}),W(function(){var s={},l=function(e){return F("trackEvent",e,!0)};e.isDefined(a)&&(s.nonInteraction=!!a),e.isObject(o)&&e.extend(s,o),e.isDefined(s.page)||(s.page=H()),V(l,"send","event",t,n,r,i,s)})},this._addTrans=function(e,t,n,r,i,a,o,s,l){Y(function(){X("_addTrans",e,t,n,r,i,a,o,s)}),W(function(){if(R._ecommerceEnabled(!0,"addTrans")){var a=function(e){return F("trackEcommerce",e,!0)};V(a,"ecommerce:addTransaction",{id:e,affiliation:t,revenue:n,tax:r,shipping:i,currency:l||"USD"})}})},this._addItem=function(e,t,n,r,i,a){Y(function(){X("_addItem",e,t,n,r,i,a)}),W(function(){if(R._ecommerceEnabled(!0,"addItem")){var o=function(e){return F("trackEcommerce",e,!0)};V(o,"ecommerce:addItem",{id:e,name:n,sku:t,category:r,price:i,quantity:a})}})},this._trackTrans=function(){Y(function(){X("_trackTrans")}),W(function(){if(R._ecommerceEnabled(!0,"trackTrans")){var e=function(e){return F("trackEcommerce",e,!0)};V(e,"ecommerce:send")}})},this._clearTrans=function(){W(function(){if(R._ecommerceEnabled(!0,"clearTrans")){var e=function(e){return F("trackEcommerce",e,!0)};V(e,"ecommerce:clear")}})},this._addProduct=function(t,n,r,i,a,o,s,l,u,c){Y(function(){X("_addProduct",t,n,r,i,a,o,s,l,u)}),W(function(){if(R._enhancedEcommerceEnabled(!0,"addProduct")){var f=function(e){return F("trackEcommerce",e,!0)},d={id:t,name:n,category:r,brand:i,variant:a,price:o,quantity:s,coupon:l,position:u};e.isObject(c)&&e.extend(d,c),V(f,"ec:addProduct",d)}})},this._addImpression=function(e,t,n,r,i,a,o,s){Y(function(){X("_addImpression",e,t,n,r,i,a,o,s)}),W(function(){if(R._enhancedEcommerceEnabled(!0,"addImpression")){var l=function(e){return F("trackEcommerce",e,!0)};V(l,"ec:addImpression",{id:e,name:t,category:i,brand:r,variant:a,list:n,position:o,price:s})}})},this._addPromo=function(e,t,n,r){Y(function(){X("_addPromo",e,t,n,r)}),W(function(){if(R._enhancedEcommerceEnabled(!0,"addPromo")){var i=function(e){return F("trackEcommerce",e,!0)};V(i,"ec:addPromo",{id:e,name:t,creative:n,position:r})}})},this._setAction=function(e,t){Y(function(){X("_setAction",e,t)}),W(function(){if(R._enhancedEcommerceEnabled(!0,"setAction")){var n=function(e){return F("trackEcommerce",e,!0)};V(n,"ec:setAction",e,t)}})},this._trackTransaction=function(e,t,n,r,i,a,o,s,l){this._setAction("purchase",B(e,t,n,r,i,a,o,s,l))},this._trackRefund=function(e){this._setAction("refund",B(e))},this._trackCheckOut=function(e,t){this._setAction("checkout",B(null,null,null,null,null,null,null,e,t))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(e,t){["add","remove"].indexOf(e)!==-1&&(this._setAction(e,{list:t}),this._trackEvent("UX","click",e+("add"===e?" to cart":" from cart")))},this._promoClick=function(e){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",e)},this._productClick=function(e){this._setAction("click",B(null,null,null,null,null,null,e,null,null)),this._trackEvent("UX","click",e)},this._pageView=function(e){W(function(){G(U("send",e),"pageview")})},this._send=function(){var e=Array.prototype.slice.call(arguments);e.unshift("send"),W(function(){G.apply(R,e)})},this._set=function(e,t,n){W(function(){G(U("set",n),e,t)})},this._trackTimings=function(e,n,r,i){W(function(){V(t,"send","timing",e,n,r,i)})},this._trackException=function(e,n){W(function(){V(t,"send","exception",{exDescription:e,exFatal:!!n})})},h||(this._registerScriptTags(),this._registerTrackers()),k&&D.$on(S,function(){(!T||j.current&&j.current.templateUrl&&!j.current.doNotTrack)&&R._trackPage()}),{log:R.log,offlineQueue:R.offlineQueue,configuration:{accounts:n,universalAnalytics:s,crossDomainLinker:c,crossLinkDomains:r,currency:f,debugMode:d,delayScriptTag:h,disableAnalytics:g,displayFeatures:p,domainName:i,ecommerce:R._ecommerceEnabled(),enhancedEcommerce:R._enhancedEcommerceEnabled(),enhancedLinkAttribution:y,experimentId:a,hybridMobileSupport:E,ignoreFirstPageLoad:b,logAllCalls:_,pageEvent:S,readFromRoute:T,removeRegExp:o,testMode:w,traceDebuggingMode:A,trackPrefix:C,trackRoutes:k,trackUrlParams:O},getUrl:H,setCookieConfig:function(e){return R._log("warn","DEPRECATION WARNING: setCookieConfig method is deprecated. Please use tracker fields instead."),R._setCookieConfig.apply(R,arguments)},getCookieConfig:function(){return R._log("warn","DEPRECATION WARNING: getCookieConfig method is deprecated. Please use tracker fields instead."),l},createAnalyticsScriptTag:function(e){return R._log("warn","DEPRECATION WARNING: createAnalyticsScriptTag method is deprecated. Please use registerScriptTags and registerTrackers methods instead."),e&&(l=e),R._createAnalyticsScriptTag()},createScriptTag:function(){return R._log("warn","DEPRECATION WARNING: createScriptTag method is deprecated. Please use registerScriptTags and registerTrackers methods instead."),R._createScriptTag()},registerScriptTags:function(){return R._registerScriptTags()},registerTrackers:function(){return R._registerTrackers()},offline:function(e){if(e===!0&&x===!1&&(x=!0),e===!1&&x===!0)for(x=!1;R.offlineQueue.length>0;){var t=R.offlineQueue.shift();t[0].apply(R,t[1])}return x},trackPage:function(e,t,n){R._trackPage.apply(R,arguments)},trackEvent:function(e,t,n,r,i,a){R._trackEvent.apply(R,arguments)},addTrans:function(e,t,n,r,i,a,o,s,l){R._addTrans.apply(R,arguments)},addItem:function(e,t,n,r,i,a){R._addItem.apply(R,arguments)},trackTrans:function(){R._trackTrans.apply(R,arguments)},clearTrans:function(){R._clearTrans.apply(R,arguments)},addProduct:function(e,t,n,r,i,a,o,s,l,u){R._addProduct.apply(R,arguments)},addPromo:function(e,t,n,r){R._addPromo.apply(R,arguments)},addImpression:function(e,t,n,r,i,a,o,s){R._addImpression.apply(R,arguments)},productClick:function(e){R._productClick.apply(R,arguments)},promoClick:function(e){R._promoClick.apply(R,arguments)},trackDetail:function(){R._trackDetail.apply(R,arguments)},trackCart:function(e,t){R._trackCart.apply(R,arguments)},trackCheckout:function(e,t){R._trackCheckOut.apply(R,arguments)},trackTimings:function(e,t,n,r){R._trackTimings.apply(R,arguments)},trackTransaction:function(e,t,n,r,i,a,o,s,l){R._trackTransaction.apply(R,arguments)},trackException:function(e,t){R._trackException.apply(R,arguments)},setAction:function(e,t){R._setAction.apply(R,arguments)},pageView:function(){R._pageView.apply(R,arguments)},send:function(e){R._send.apply(R,arguments)},set:function(e,t,n){R._set.apply(R,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(e,t){return{restrict:"A",link:function(n,r,i){var a=t(i.gaTrackEvent);r.bind("click",function(){i.gaTrackEventIf&&!n.$eval(i.gaTrackEventIf)||a.length>1&&e.trackEvent.apply(e,a(n))})}}}]),e.module("angular-google-analytics")}),/**
 * An Angular module that gives you access to the browsers local storage
 * @version v0.2.6 - 2016-03-16
 * @link https://github.com/grevory/angular-local-storage
 * @author grevory <greg@gregpike.ca>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function(e,t){var n=t.isDefined,r=t.isUndefined,i=t.isNumber,a=t.isObject,o=t.isArray,s=t.extend,l=t.toJson;t.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setStorageCookie=function(e,t){return this.cookie.expiry=e,this.cookie.path=t,this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse",function(e,t,u,c){var f,d=this,h=d.prefix,p=d.cookie,g=d.notify,m=d.storageType;u?u[0]&&(u=u[0]):u=document,"."!==h.substr(-1)&&(h=h?h+".":"");var v=function(e){return h+e},y=function(){try{var n=m in t&&null!==t[m],r=v("__"+Math.round(1e7*Math.random()));return n&&(f=t[m],f.setItem(r,""),f.removeItem(r)),n}catch(i){return m="cookie",e.$broadcast("LocalStorageModule.notification.error",i.message),!1}}(),b=function(t,n){if(n=r(n)?null:l(n),!y||"cookie"===d.storageType)return y||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:"cookie"}),w(t,n);try{f&&f.setItem(v(t),n),g.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:d.storageType})}catch(i){return e.$broadcast("LocalStorageModule.notification.error",i.message),w(t,n)}return!0},_=function(t){if(!y||"cookie"===d.storageType)return y||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),A(t);var n=f?f.getItem(v(t)):null;if(!n||"null"===n)return null;try{return JSON.parse(n)}catch(r){return n}},E=function(){var t,n;for(t=0;t<arguments.length;t++)if(n=arguments[t],y&&"cookie"!==d.storageType)try{f.removeItem(v(n)),g.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:d.storageType})}catch(r){e.$broadcast("LocalStorageModule.notification.error",r.message),C(n)}else y||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:"cookie"}),C(n)},x=function(){if(!y)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var t=h.length,n=[];for(var r in f)if(r.substr(0,t)===h)try{n.push(r.substr(t))}catch(i){return e.$broadcast("LocalStorageModule.notification.error",i.Description),[]}return n},S=function(t){var n=h?new RegExp("^"+h):new RegExp,r=t?new RegExp(t):new RegExp;if(!y||"cookie"===d.storageType)return y||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),k();var i=h.length;for(var a in f)if(n.test(a)&&r.test(a.substr(i)))try{E(a.substr(i))}catch(o){return e.$broadcast("LocalStorageModule.notification.error",o.message),k()}return!0},T=function(){try{return t.navigator.cookieEnabled||"cookie"in u&&(u.cookie.length>0||(u.cookie="test").indexOf.call(u.cookie,"test")>-1)}catch(n){return e.$broadcast("LocalStorageModule.notification.error",n.message),!1}}(),w=function(t,n,s){if(r(n))return!1;if((o(n)||a(n))&&(n=l(n)),!T)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var c="",f=new Date,d="";if(null===n?(f.setTime(f.getTime()+-864e5),c="; expires="+f.toGMTString(),n=""):i(s)&&0!==s?(f.setTime(f.getTime()+24*s*60*60*1e3),c="; expires="+f.toGMTString()):0!==p.expiry&&(f.setTime(f.getTime()+24*p.expiry*60*60*1e3),c="; expires="+f.toGMTString()),t){var h="; path="+p.path;p.domain&&(d="; domain="+p.domain),u.cookie=v(t)+"="+encodeURIComponent(n)+c+h+d}}catch(g){return e.$broadcast("LocalStorageModule.notification.error",g.message),!1}return!0},A=function(t){if(!T)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var n=u.cookie&&u.cookie.split(";")||[],r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(v(t)+"=")){var a=decodeURIComponent(i.substring(h.length+t.length+1,i.length));try{return JSON.parse(a)}catch(o){return a}}}return null},C=function(e){w(e,null)},k=function(){for(var e=null,t=h.length,n=u.cookie.split(";"),r=0;r<n.length;r++){for(e=n[r];" "===e.charAt(0);)e=e.substring(1,e.length);var i=e.substring(t,e.indexOf("="));C(i)}},O=function(){return m},I=function(e,t,r,i){i=i||t;var o=_(i);return null===o&&n(r)?o=r:a(o)&&a(r)&&(o=s(o,r)),c(t).assign(e,o),e.$watch(t,function(e){b(i,e)},a(e[t]))},M=function(){for(var e=0,n=t[m],r=0;r<n.length;r++)0===n.key(r).indexOf(h)&&e++;return e};return{isSupported:y,getStorageType:O,set:b,add:b,get:_,keys:x,remove:E,clearAll:S,bind:I,deriveKey:v,length:M,cookie:{isSupported:T,set:w,add:w,get:A,remove:C,clearAll:k}}}]})}(window,window.angular),/**
 * @license AngularJS v1.5.11
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e,t){"use strict";function n(e){var t,n=/^(-?\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;if(t=e.match(n)){var i=new Date(0),a=0,o=0;return t[9]&&(a=r(t[9]+t[10]),o=r(t[9]+t[11])),i.setUTCFullYear(r(t[1]),r(t[2])-1,r(t[3])),i.setUTCHours(r(t[4]||0)-a,r(t[5]||0)-o,r(t[6]||0),r(t[7]||0)),i}return e}function r(e){return parseInt(e,10)}function i(e,t,n){var r="";for(e<0&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function a(e,n,r,i){function a(e,n,r,i){return t.isFunction(e)?e:function(){return t.isNumber(e)?[e,n,r,i]:[200,e,n,r]}}function l(e,a,o,l,u,c,m,v,y,b){function _(e){return t.isString(e)||t.isFunction(e)||e instanceof RegExp?e:t.toJson(e)}function E(t){function r(){var n=t.response(e,a,o,u,t.params(a));x.$$respHeaders=n[2],l(g(n[0]),g(n[1]),x.getAllResponseHeaders(),g(n[3]||""))}function s(){for(var e=0,t=h.length;e<t;e++)if(h[e]===r){h.splice(e,1),l(-1,void 0,"");break}}return!i&&c&&(c.then?c.then(s):n(s,c)),r}var x=new s,S=d[0],T=!1;if(x.$$events=y,x.upload.$$events=b,S&&S.match(e,a)){if(!S.matchData(o))throw new Error("Expected "+S+" with different data\nEXPECTED: "+_(S.data)+"\nGOT:      "+o);if(!S.matchHeaders(u))throw new Error("Expected "+S+" with different headers\nEXPECTED: "+_(S.headers)+"\nGOT:      "+_(u));if(d.shift(),S.response)return void h.push(E(S));T=!0}for(var w,A=-1;w=f[++A];)if(w.match(e,a,o,u||{})){if(w.response)(i?i.defer:p)(E(w));else{if(!w.passThrough)throw new Error("No response defined !");r(e,a,o,l,u,c,m,v,y,b)}return}throw T?new Error("No response defined !"):new Error("Unexpected request: "+e+" "+a+"\n"+(S?"Expected "+S:"No more request expected"))}function u(e){var n={regexp:e},r=n.keys=[];return e&&t.isString(e)?(e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([?*])?/g,function(e,t,n,i){var a="?"===i?i:null,o="*"===i?i:null;return r.push({name:n,optional:!!a}),t=t||"",""+(a?"":t)+"(?:"+(a?t:"")+(o&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$*])/g,"\\$1"),n.regexp=new RegExp("^"+e,"i"),n):n}function c(e){t.forEach(["GET","DELETE","JSONP","HEAD"],function(t){l[e+t]=function(n,r,i){return l[e](t,n,void 0,r,i)}}),t.forEach(["PUT","POST","PATCH"],function(t){l[e+t]=function(n,r,i,a){return l[e](t,n,r,i,a)}})}var f=[],d=[],h=[],p=t.bind(h,h.push),g=t.copy;return l.when=function(e,t,n,r,s){var l=new o(e,t,n,r,s),u={respond:function(e,t,n,r){return l.passThrough=void 0,l.response=a(e,t,n,r),u}};return i&&(u.passThrough=function(){return l.response=void 0,l.passThrough=!0,u}),f.push(l),u},c("when"),l.whenRoute=function(e,t){var n=u(t);return l.when(e,n.regexp,void 0,void 0,n.keys)},l.expect=function(e,t,n,r,i){var s=new o(e,t,n,r,i),l={respond:function(e,t,n,r){return s.response=a(e,t,n,r),l}};return d.push(s),l},c("expect"),l.expectRoute=function(e,t){var n=u(t);return l.expect(e,n.regexp,void 0,void 0,n.keys)},l.flush=function(n,r,i){if(i!==!1&&e.$digest(),r=r||0,r>=h.length)throw new Error("No pending request to flush !");if(t.isDefined(n)&&null!==n)for(;n--;){var a=h.splice(r,1);if(!a.length)throw new Error("No more pending request to flush !");a[0]()}else for(;h.length>r;)h.splice(r,1)[0]();l.verifyNoOutstandingExpectation(i)},l.verifyNoOutstandingExpectation=function(t){if(t!==!1&&e.$digest(),d.length)throw new Error("Unsatisfied requests: "+d.join(", "))},l.verifyNoOutstandingRequest=function(){if(h.length)throw new Error("Unflushed requests: "+h.length)},l.resetExpectations=function(){d.length=0,h.length=0},l}function o(e,n,r,i,a){function o(e){var t=e.slice(e.indexOf("?")+1).split("&");return t.sort()}function s(e){return n.slice(0,n.indexOf("?"))===e.slice(0,e.indexOf("?"))&&o(n).join()===o(e).join()}this.data=r,this.headers=i,this.match=function(n,r,i,a){return e===n&&(!!this.matchUrl(r)&&(!(t.isDefined(i)&&!this.matchData(i))&&!(t.isDefined(a)&&!this.matchHeaders(a))))},this.matchUrl=function(e){return!n||(t.isFunction(n.test)?n.test(e):t.isFunction(n)?n(e):n===e||s(e))},this.matchHeaders=function(e){return!!t.isUndefined(i)||(t.isFunction(i)?i(e):t.equals(i,e))},this.matchData=function(e){return!!t.isUndefined(r)||(r&&t.isFunction(r.test)?r.test(e):r&&t.isFunction(r)?r(e):r&&!t.isString(r)?t.equals(t.fromJson(t.toJson(r)),t.fromJson(e)):r==e)},this.toString=function(){return e+" "+n},this.params=function(e){function r(){var r={};if(!n||!t.isFunction(n.test)||!a||0===a.length)return r;var i=n.exec(e);if(!i)return r;for(var o=1,s=i.length;o<s;++o){var l=a[o-1],u=i[o];l&&u&&(r[l.name||l]=u)}return r}function i(){var n,r,i={},a=e.indexOf("?")>-1?e.substring(e.indexOf("?")+1):"";return t.forEach(a.split("&"),function(e){if(e&&(n=e.replace(/\+/g,"%20").split("="),r=o(n[0]),t.isDefined(r))){var a=!t.isDefined(n[1])||o(n[1]);hasOwnProperty.call(i,r)?t.isArray(i[r])?i[r].push(a):i[r]=[i[r],a]:i[r]=a}}),i}function o(e){try{return decodeURIComponent(e)}catch(t){}}return t.extend(i(),r())}}function s(){s.$$lastInstance=this,this.open=function(e,t,n){this.$$method=e,this.$$url=t,this.$$async=n,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(e){this.$$data=e},this.setRequestHeader=function(e,t){this.$$reqHeaders[e]=t},this.getResponseHeader=function(e){var n=this.$$respHeaders[e];return n?n:(e=t.lowercase(e),(n=this.$$respHeaders[e])?n:(n=void 0,t.forEach(this.$$respHeaders,function(r,i){n||t.lowercase(i)!==e||(n=r)}),n))},this.getAllResponseHeaders=function(){var e=[];return t.forEach(this.$$respHeaders,function(t,n){e.push(n+": "+t)}),e.join("\n")},this.abort=t.noop,this.$$events={},this.addEventListener=function(e,n){t.isUndefined(this.$$events[e])&&(this.$$events[e]=[]),this.$$events[e].push(n)},this.upload={$$events:{},addEventListener:this.addEventListener}}function l(e){return t.mock.$ControllerDecorator=["$delegate",function(n){return function(r,i,a,o){if(a&&"object"==typeof a){var s=e.preAssignBindingsEnabled(),l=n(r,i,!0,o);s&&t.extend(l.instance,a);var u=l();return s&&u===l.instance||t.extend(u,a),u}return n(r,i,a,o)}}],t.mock.$ControllerDecorator}t.mock={},t.mock.$BrowserProvider=function(){this.$get=function(){return new t.mock.$Browser}},t.mock.$Browser=function(){var e=this;this.isMock=!0,e.$$url="http://server/",e.$$lastUrl=e.$$url,e.pollFns=[],e.$$completeOutstandingRequest=t.noop,e.$$incOutstandingRequestCount=t.noop,e.onUrlChange=function(t){return e.pollFns.push(function(){e.$$lastUrl===e.$$url&&e.$$state===e.$$lastState||(e.$$lastUrl=e.$$url,e.$$lastState=e.$$state,t(e.$$url,e.$$state))}),t},e.$$applicationDestroyed=t.noop,e.$$checkUrlChange=t.noop,e.deferredFns=[],e.deferredNextId=0,e.defer=function(t,n){return n=n||0,e.deferredFns.push({time:e.defer.now+n,fn:t,id:e.deferredNextId}),e.deferredFns.sort(function(e,t){return e.time-t.time}),e.deferredNextId++},e.defer.now=0,e.defer.cancel=function(n){var r;return t.forEach(e.deferredFns,function(e,t){e.id===n&&(r=t)}),!!t.isDefined(r)&&(e.deferredFns.splice(r,1),!0)},e.defer.flush=function(n){var r;if(t.isDefined(n))r=e.defer.now+n;else{if(!e.deferredFns.length)throw new Error("No deferred tasks to be flushed");r=e.deferredFns[e.deferredFns.length-1].time}for(;e.deferredFns.length&&e.deferredFns[0].time<=r;)e.defer.now=e.deferredFns[0].time,e.deferredFns.shift().fn();e.defer.now=r},e.$$baseHref="/",e.baseHref=function(){return this.$$baseHref}},t.mock.$Browser.prototype={poll:function(){t.forEach(this.pollFns,function(e){e()})},url:function(e,n,r){return t.isUndefined(r)&&(r=null),e?(this.$$url=e,this.$$state=t.copy(r),this):this.$$url},state:function(){return this.$$state},notifyWhenNoOutstandingRequests:function(e){e()}},t.mock.$ExceptionHandlerProvider=function(){var e;this.mode=function(t){switch(t){case"log":case"rethrow":var n=[];e=function(e){if(1===arguments.length?n.push(e):n.push([].slice.call(arguments,0)),"rethrow"===t)throw e},e.errors=n;break;default:throw new Error("Unknown mode '"+t+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return e},this.mode("rethrow")},t.mock.$LogProvider=function(){function e(e,t,n){return e.concat(Array.prototype.slice.call(t,n))}var n=!0;this.debugEnabled=function(e){return t.isDefined(e)?(n=e,this):n},this.$get=function(){var r={log:function(){r.log.logs.push(e([],arguments,0))},warn:function(){r.warn.logs.push(e([],arguments,0))},info:function(){r.info.logs.push(e([],arguments,0))},error:function(){r.error.logs.push(e([],arguments,0))},debug:function(){n&&r.debug.logs.push(e([],arguments,0))}};return r.reset=function(){r.log.logs=[],r.info.logs=[],r.warn.logs=[],r.error.logs=[],r.debug.logs=[]},r.assertEmpty=function(){var e=[];if(t.forEach(["error","warn","info","log","debug"],function(n){t.forEach(r[n].logs,function(r){t.forEach(r,function(t){e.push("MOCK $log ("+n+"): "+String(t)+"\n"+(t.stack||""))})})}),e.length)throw e.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),e.push(""),new Error(e.join("\n---------\n"))},r.reset(),r}},t.mock.$IntervalProvider=function(){this.$get=["$browser","$rootScope","$q","$$q",function(e,n,r,i){var a=[],o=0,s=0,l=function(l,u,c,f){function d(){if(v.notify(g++),c>0&&g>=c){var r;v.resolve(g),t.forEach(a,function(e,t){e.id===y.$$intervalId&&(r=t)}),t.isDefined(r)&&a.splice(r,1)}m?e.defer.flush():n.$apply()}var h=arguments.length>4,p=h?Array.prototype.slice.call(arguments,4):[],g=0,m=t.isDefined(f)&&!f,v=(m?i:r).defer(),y=v.promise;return c=t.isDefined(c)?c:0,y.then(null,null,h?function(){l.apply(null,p)}:l),y.$$intervalId=o,a.push({nextTime:s+u,delay:u,fn:d,id:o,deferred:v}),a.sort(function(e,t){return e.nextTime-t.nextTime}),o++,y};return l.cancel=function(e){if(!e)return!1;var n;return t.forEach(a,function(t,r){t.id===e.$$intervalId&&(n=r)}),!!t.isDefined(n)&&(a[n].deferred.reject("canceled"),a.splice(n,1),!0)},l.flush=function(e){for(s+=e;a.length&&a[0].nextTime<=s;){var t=a[0];t.fn(),t.nextTime+=t.delay,a.sort(function(e,t){return e.nextTime-t.nextTime})}return e},l}]},t.mock.TzDate=function(e,r){var a=new Date(0);if(t.isString(r)){var o=r;if(a.origDate=n(r),r=a.origDate.getTime(),isNaN(r))throw{name:"Illegal Argument",message:"Arg '"+o+"' passed into TzDate constructor is not a valid date string"}}else a.origDate=new Date(r);var s=new Date(r).getTimezoneOffset();a.offsetDiff=60*s*1e3-1e3*e*60*60,a.date=new Date(r+a.offsetDiff),a.getTime=function(){return a.date.getTime()-a.offsetDiff},a.toLocaleDateString=function(){return a.date.toLocaleDateString()},a.getFullYear=function(){return a.date.getFullYear()},a.getMonth=function(){return a.date.getMonth()},a.getDate=function(){return a.date.getDate()},a.getHours=function(){return a.date.getHours()},a.getMinutes=function(){return a.date.getMinutes()},a.getSeconds=function(){return a.date.getSeconds()},a.getMilliseconds=function(){return a.date.getMilliseconds()},a.getTimezoneOffset=function(){return 60*e},a.getUTCFullYear=function(){return a.origDate.getUTCFullYear()},a.getUTCMonth=function(){return a.origDate.getUTCMonth()},a.getUTCDate=function(){return a.origDate.getUTCDate()},a.getUTCHours=function(){return a.origDate.getUTCHours()},a.getUTCMinutes=function(){return a.origDate.getUTCMinutes()},a.getUTCSeconds=function(){return a.origDate.getUTCSeconds()},a.getUTCMilliseconds=function(){return a.origDate.getUTCMilliseconds()},a.getDay=function(){return a.date.getDay()},a.toISOString&&(a.toISOString=function(){return i(a.origDate.getUTCFullYear(),4)+"-"+i(a.origDate.getUTCMonth()+1,2)+"-"+i(a.origDate.getUTCDate(),2)+"T"+i(a.origDate.getUTCHours(),2)+":"+i(a.origDate.getUTCMinutes(),2)+":"+i(a.origDate.getUTCSeconds(),2)+"."+i(a.origDate.getUTCMilliseconds(),3)+"Z"});var l=["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"];return t.forEach(l,function(e){a[e]=function(){throw new Error("Method '"+e+"' is not implemented in the TzDate mock")}}),a},t.mock.TzDate.prototype=Date.prototype,t.mock.animate=t.module("ngAnimateMock",["ng"]).config(["$provide",function(e){e.factory("$$forceReflow",function(){function e(){e.totalReflows++}return e.totalReflows=0,e}),e.factory("$$animateAsyncRun",function(){var e=[],t=function(){return function(t){e.push(t)}};return t.flush=function(){if(0===e.length)return!1;for(var t=0;t<e.length;t++)e[t]();return e=[],!0},t}),e.decorator("$$animateJs",["$delegate",function(e){var t=[],n=function(){var n=e.apply(e,arguments);return n&&t.push(n),n};return n.$closeAndFlush=function(){t.forEach(function(e){e.end()}),t=[]},n}]),e.decorator("$animateCss",["$delegate",function(e){var t=[],n=function(n,r){var i=e(n,r);return t.push(i),i};return n.$closeAndFlush=function(){t.forEach(function(e){e.end()}),t=[]},n}]),e.decorator("$animate",["$delegate","$timeout","$browser","$$rAF","$animateCss","$$animateJs","$$forceReflow","$$animateAsyncRun","$rootScope",function(e,n,r,i,a,o,s,l,u){var c={queue:[],cancel:e.cancel,on:e.on,off:e.off,pin:e.pin,get reflows(){return s.totalReflows},enabled:e.enabled,closeAndFlush:function(){this.flush(!0),a.$closeAndFlush(),o.$closeAndFlush(),this.flush()},flush:function(e){u.$digest();var t,n=!1;do t=!1,i.queue.length&&(i.flush(),t=n=!0),l.flush()&&(t=n=!0);while(t);if(!n&&!e)throw new Error("No pending animations ready to be closed or flushed");u.$digest()}};return t.forEach(["animate","enter","leave","move","addClass","removeClass","setClass"],function(t){c[t]=function(){return c.queue.push({event:t,element:arguments[0],options:arguments[arguments.length-1],args:arguments}),e[t].apply(e,arguments)}}),c}])}]),t.mock.dump=function(e){function n(e){var i;return t.isElement(e)?(e=t.element(e),i=t.element("<div></div>"),t.forEach(e,function(e){i.append(t.element(e).clone())}),i=i.html()):t.isArray(e)?(i=[],t.forEach(e,function(e){i.push(n(e))}),i="[ "+i.join(", ")+" ]"):i=t.isObject(e)?t.isFunction(e.$eval)&&t.isFunction(e.$apply)?r(e):e instanceof Error?e.stack||""+e.name+": "+e.message:t.toJson(e,!0):String(e),i}function r(e,n){n=n||"  ";var i=[n+"Scope("+e.$id+"): {"];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&!a.match(/^(\$|this)/)&&i.push("  "+a+": "+t.toJson(e[a]));for(var o=e.$$childHead;o;)i.push(r(o,n+"  ")),o=o.$$nextSibling;return i.push("}"),i.join("\n"+n)}return n(e)},t.mock.$HttpBackendProvider=function(){this.$get=["$rootScope","$timeout",a]},t.mock.$TimeoutDecorator=["$delegate","$browser",function(e,n){function r(e){var n=[];return t.forEach(e,function(e){n.push("{id: "+e.id+", time: "+e.time+"}")}),n.join(", ")}return e.flush=function(e){n.defer.flush(e)},e.verifyNoPendingTasks=function(){if(n.deferredFns.length)throw new Error("Deferred tasks to flush ("+n.deferredFns.length+"): "+r(n.deferredFns))},e}],t.mock.$RAFDecorator=["$delegate",function(e){var t=function(e){var n=t.queue.length;return t.queue.push(e),function(){t.queue.splice(n,1)}};return t.queue=[],t.supported=e.supported,t.flush=function(){if(0===t.queue.length)throw new Error("No rAF callbacks present");for(var e=t.queue.length,n=0;n<e;n++)t.queue[n]();t.queue=t.queue.slice(n)},t}];var u;t.mock.$RootElementProvider=function(){this.$get=["$injector",function(e){return u=t.element("<div ng-app></div>").data("$injector",e)}]},t.mock.$ComponentControllerProvider=["$compileProvider",function(e){this.$get=["$controller","$injector","$rootScope",function(e,t,n){return function(r,i,a,o){var s=t.get(r+"Directive"),l=s.filter(function(e){return e.controller&&e.controllerAs&&"E"===e.restrict});if(0===l.length)throw new Error("No component found");if(l.length>1)throw new Error("Too many components found");var u=l[0];return i=i||{},i.$scope=i.$scope||n.$new(!0),e(u.controller,i,a,o||u.controllerAs)}}]}],t.module("ngMock",["ng"]).provider({$browser:t.mock.$BrowserProvider,$exceptionHandler:t.mock.$ExceptionHandlerProvider,$log:t.mock.$LogProvider,$interval:t.mock.$IntervalProvider,$httpBackend:t.mock.$HttpBackendProvider,$rootElement:t.mock.$RootElementProvider,$componentController:t.mock.$ComponentControllerProvider}).config(["$provide","$compileProvider",function(e,n){e.decorator("$timeout",t.mock.$TimeoutDecorator),e.decorator("$$rAF",t.mock.$RAFDecorator),e.decorator("$rootScope",t.mock.$RootScopeDecorator),e.decorator("$controller",l(n))}]),t.module("ngMockE2E",["ng"]).config(["$provide",function(e){e.value("$httpBackend",t.injector(["ng"]).get("$httpBackend")),e.decorator("$httpBackend",t.mock.e2e.$httpBackendDecorator)}]),t.mock.e2e={},t.mock.e2e.$httpBackendDecorator=["$rootScope","$timeout","$delegate","$browser",a],t.mock.$RootScopeDecorator=["$delegate",function(e){function t(){for(var e,t=0,n=[this.$$childHead];n.length;)for(e=n.shift();e;)t+=1,n.push(e.$$childHead),e=e.$$nextSibling;return t}function n(){for(var e,t=this.$$watchers?this.$$watchers.length:0,n=[this.$$childHead];n.length;)for(e=n.shift();e;)t+=e.$$watchers?e.$$watchers.length:0,n.push(e.$$childHead),e=e.$$nextSibling;return t}var r=Object.getPrototypeOf(e);return r.$countChildScopes=t,r.$countWatchers=n,e}],function(n){function r(){this.shared=!1,this.sharedError=null,this.cleanupAfterEach=function(){return!this.shared||this.sharedError}}if(n){var i=null,a=new r,o=[],l=function(){return!!i};t.mock.$$annotate=t.injector.$$annotate,t.injector.$$annotate=function(e){return"function"!=typeof e||e.$inject||o.push(e),t.mock.$$annotate.apply(this,arguments)};var c=e.module=t.mock.module=function(){function e(){if(i.$injector)throw new Error("Injector already created, can not register a module!");var e,r=i.$modules||(i.$modules=[]);t.forEach(n,function(n){e=t.isObject(n)&&!t.isArray(n)?["$provide",function(e){t.forEach(n,function(t,n){e.value(n,t)})}]:n,i.$providerInjector?i.$providerInjector.invoke(e):r.push(e)})}var n=Array.prototype.slice.call(arguments,0);return l()?e():e};c.$$beforeAllHook=e.before||e.beforeAll,c.$$afterAllHook=e.after||e.afterAll,c.$$currentSpec=function(e){return 0===arguments.length?e:void(i=e)},c.sharedInjector=function(){if(!c.$$beforeAllHook||!c.$$afterAllHook)throw Error("sharedInjector() cannot be used unless your test runner defines beforeAll/afterAll");var e=!1;c.$$beforeAllHook(function(){if(a.shared)throw a.sharedError=Error("sharedInjector() cannot be called inside a context that has already called sharedInjector()"),a.sharedError;e=!0,i=this,a.shared=!0}),c.$$afterAllHook(function(){e?(a=new r,c.$$cleanup()):a.sharedError=null})},c.$$beforeEach=function(){if(a.shared&&i&&i!==this){var e=i;i=this,t.forEach(["$injector","$modules","$providerInjector","$injectorStrict"],function(t){i[t]=e[t],e[t]=null})}else i=this,u=null,o=[]},c.$$afterEach=function(){a.cleanupAfterEach()&&c.$$cleanup()},c.$$cleanup=function(){var e=i.$injector;if(o.forEach(function(e){delete e.$inject}),t.forEach(i.$modules,function(e){e&&e.$$hashKey&&(e.$$hashKey=void 0)}),i.$injector=null,i.$modules=null,i.$providerInjector=null,i=null,e){var n=e.get("$rootElement"),r=n&&n[0],a=u?[u[0]]:[];!r||u&&r===u[0]||a.push(r),t.element.cleanData(a);var l=e.get("$rootScope");l&&l.$destroy&&l.$destroy()}t.forEach(t.element.fragments,function(e,n){delete t.element.fragments[n]}),s.$$lastInstance=null,t.forEach(t.callbacks,function(e,n){delete t.callbacks[n]}),t.callbacks.$$counter=0},(e.beforeEach||e.setup)(c.$$beforeEach),(e.afterEach||e.teardown)(c.$$afterEach);var f=function(e,t){this.message=e.message,this.name=e.name,e.line&&(this.line=e.line),e.sourceId&&(this.sourceId=e.sourceId),e.stack&&t&&(this.stack=e.stack+"\n"+t.stack),e.stackArray&&(this.stackArray=e.stackArray)};f.prototype=Error.prototype,e.inject=t.mock.inject=function(){function e(){var e=i.$modules||[],a=!!i.$injectorStrict;e.unshift(["$injector",function(e){i.$providerInjector=e}]),e.unshift("ngMock"),e.unshift("ng");var o=i.$injector;o||(a&&t.forEach(e,function(e){"function"==typeof e&&t.injector.$$annotate(e)}),o=i.$injector=t.injector(e,a),i.$injectorStrict=a);for(var s=0,l=n.length;s<l;s++){i.$injectorStrict&&o.annotate(n[s]);try{o.invoke(n[s]||t.noop,this)}catch(u){if(u.stack&&r)throw new f(u,r);throw u}finally{r=null}}}var n=Array.prototype.slice.call(arguments,0),r=new Error("Declaration Location");if(!r.stack)try{throw r}catch(a){}return l()?e.call(i):e},t.mock.inject.strictDi=function(e){function t(){if(e!==i.$injectorStrict){if(i.$injector)throw new Error("Injector already created, can not modify strict annotations");i.$injectorStrict=e}}return e=!arguments.length||!!e,l()?t():t}}}(e.jasmine||e.mocha)}(window,window.angular),/*
 *  Angular RangeSlider Directive
 * 
 *  Version: 0.0.13
 *
 *  Author: Daniel Crisp, danielcrisp.com
 *
 *  The rangeSlider has been styled to match the default styling
 *  of form elements styled using Twitter's Bootstrap
 *
 *  Originally forked from https://github.com/leongersen/noUiSlider
 *

    This code is released under the MIT Licence - http://opensource.org/licenses/MIT

    Copyright (c) 2013 Daniel Crisp

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.

*/
function(){"use strict";var e=1===angular.version.major&&0===angular.version.minor;angular.module("ui-rangeSlider",[]).directive("rangeSlider",["$document","$filter","$log",function(t,n,r){var i=".rangeSlider",a={disabled:!1,orientation:"horizontal",step:0,decimalPlaces:0,showValues:!0,preventEqualMinMax:!1,attachHandleValues:!1},o=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup",over:"pointerdown",out:"mouseout"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",over:"MSPointerDown",out:"mouseout"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend",over:"mouseover touchstart",out:"mouseout"},s=o.start+i,l=o.move+i,u=o.end+i,c=o.over+i,f=o.out+i,d=function(e){try{return[e.clientX||e.originalEvent.clientX||e.originalEvent.touches[0].clientX,e.clientY||e.originalEvent.clientY||e.originalEvent.touches[0].clientY]}catch(t){return["x","y"]}},h=function(e){return e<0?0:e>100?100:e},p=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},g={disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@",attachHandleValues:"@",getterSetter:"@"};return e&&(g.disabled="=",g.modelMin="=",g.modelMax="="),{restrict:"A",replace:!0,template:['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>',"</div>",'<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min" ng-show="showValues"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max" ng-show="showValues"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join(""),scope:g,link:function(e,o,g,m){function v(t){return e.getterSetter?arguments.length?e.modelMin(t):e.modelMin():arguments.length?e.modelMin=t:e.modelMin}function y(t){return e.getterSetter?arguments.length?e.modelMax(t):e.modelMax():arguments.length?e.modelMax=t:e.modelMax}function b(e){"min"===e?(angular.element(C[0]).css("display","none"),angular.element(C[1]).css("display","block")):"max"===e?(angular.element(C[0]).css("display","block"),angular.element(C[1]).css("display","none")):(angular.element(C[0]).css("display","block"),angular.element(C[1]).css("display","block"))}function _(e){e?A.addClass("ngrs-disabled"):A.removeClass("ngrs-disabled")}function E(){e.min>e.max&&T("min must be less than or equal to max"),angular.isDefined(e.min)&&angular.isDefined(e.max)&&(p(e.min)||T("min must be a number"),p(e.max)||T("max must be a number"),L=e.max-e.min,D=[e.min,e.max],x())}function x(){if(v()>y()&&(w("modelMin must be less than or equal to modelMax"),v(y())),(angular.isDefined(v())||"min"===e.pinHandle)&&(angular.isDefined(y())||"max"===e.pinHandle)){p(v())||("min"!==e.pinHandle&&w("modelMin must be a number"),v(e.min)),p(y())||("max"!==e.pinHandle&&w("modelMax must be a number"),y(e.max));var t,r,i=h((v()-e.min)/L*100),a=h((y()-e.min)/L*100);if(e.attachHandleValues&&(t=i,r=a),v(Math.max(e.min,v())),y(Math.min(e.max,y())),e.filter&&e.filterOptions)e.filteredModelMin=n(e.filter)(v(),e.filterOptions),e.filteredModelMax=n(e.filter)(y(),e.filterOptions);else if(e.filter){var o,s,l=e.filter.split(":"),u=e.filter.split(":")[0],c=l.slice().slice(1);c=c.map(function(e){return p(e)?+e:'"'==e[0]&&'"'==e[e.length-1]||"'"==e[0]&&"'"==e[e.length-1]?e.slice(1,-1):void 0}),o=c.slice(),s=c.slice(),o.unshift(v()),s.unshift(y()),e.filteredModelMin=n(u).apply(null,o),e.filteredModelMax=n(u).apply(null,s)}else e.filteredModelMin=v(),e.filteredModelMax=y();e.min===e.max&&v()==y()?(angular.element(C[0]).css(I,"0%"),angular.element(C[1]).css(I,"100%"),e.attachHandleValues&&(angular.element(k[0]).css(I,"0%"),angular.element(k[1]).css(I,"100%")),angular.element(O).css(I,"0%").css(M,"0%")):(angular.element(C[0]).css(I,i+"%"),angular.element(C[1]).css(I,a+"%"),e.attachHandleValues&&(angular.element(k[0]).css(I,t+"%"),angular.element(k[1]).css(I,r+"%"),angular.element(k[1]).css(M,"auto")),angular.element(O).css(I,i+"%").css(M,100-a+"%"),i>95&&angular.element(C[0]).css("z-index",3))}}function S(n){var r=C[n];r.bind(s+"X",function(a){var o=(0===n?"ngrs-handle-min":"ngrs-handle-max")+"-down",s=(0===n?v():y())-e.min,c=s/L*100,f=d(a),p=f,g=!1;angular.isFunction(e.onHandleDown)&&e.onHandleDown(),angular.element("body").bind("selectstart"+i,function(){return!1}),e.disabled||($=!0,r.addClass("ngrs-down"),A.addClass("ngrs-focus "+o),angular.element("body").addClass("ngrs-touching"),t.bind(l,function(t){t.preventDefault();var i,a,o=d(t),s=e.step/L*100,l=((0===n?y():v())-e.min)/L*100;"x"!==o[0]&&(o[0]-=f[0],o[1]-=f[1],i=[p[0]!==o[0],p[1]!==o[1]],a=c+100*o[N]/(N?A.height():A.width()),a=h(a),e.preventEqualMinMax&&(0===s&&(s=1/L*100),0===n?l-=s:1===n&&(l+=s)),0===n?a=a>l?l:a:1===n&&(a=a<l?l:a),e.step>0&&a<100&&a>0&&(a=Math.round(a/s)*s),a>95&&0===n?r.css("z-index",3):r.css("z-index",""),i[N]&&a!=g&&(0===n?v(parseFloat(parseFloat(a*L/100+e.min).toFixed(e.decimalPlaces))):1===n&&y(parseFloat(parseFloat(a*L/100+e.min).toFixed(e.decimalPlaces))),e.$apply(),g=a),p=o)}).bind(u,function(){angular.isFunction(e.onHandleUp)&&e.onHandleUp(),t.off(l),t.off(u),angular.element("body").removeClass("ngrs-touching"),$=!1,r.removeClass("ngrs-down"),r.removeClass("ngrs-over"),A.removeClass("ngrs-focus "+o)}))}).on(c,function(){r.addClass("ngrs-over")}).on(f,function(){$||r.removeClass("ngrs-over")})}function T(t){throw e.disabled=!0,new Error("RangeSlider: "+t)}function w(e){r.warn(e)}var A=angular.element(o),C=[o.find(".ngrs-handle-min"),o.find(".ngrs-handle-max")],k=[o.find(".ngrs-value-min"),o.find(".ngrs-value-max")],O=o.find(".ngrs-join"),I="left",M="right",N=0,D=[0,0],L=0,$=!1;e.filteredModelMin=v(),e.filteredModelMax=y(),g.$observe("disabled",function(t){angular.isDefined(t)||(e.disabled=a.disabled),e.$watch("disabled",_)}),g.$observe("orientation",function(t){angular.isDefined(t)||(e.orientation=a.orientation);for(var n,r=e.orientation.split(" "),i=0,o=r.length;i<o;i++)r[i]="ngrs-"+r[i];n=r.join(" "),A.addClass(n),"vertical"!==e.orientation&&"vertical left"!==e.orientation&&"vertical right"!==e.orientation||(I="top",M="bottom",N=1)}),g.$observe("step",function(t){angular.isDefined(t)||(e.step=a.step)}),g.$observe("decimalPlaces",function(t){angular.isDefined(t)||(e.decimalPlaces=a.decimalPlaces)}),g.$observe("showValues",function(t){angular.isDefined(t)?"false"===t?e.showValues=!1:e.showValues=!0:e.showValues=a.showValues}),g.$observe("pinHandle",function(t){angular.isDefined(t)&&("min"===t||"max"===t)?e.pinHandle=t:e.pinHandle=null,e.$watch("pinHandle",b)}),g.$observe("preventEqualMinMax",function(t){angular.isDefined(t)?"false"===t?e.preventEqualMinMax=!1:e.preventEqualMinMax=!0:e.preventEqualMinMax=a.preventEqualMinMax}),g.$observe("attachHandleValues",function(t){angular.isDefined(t)?"true"===t||""===t?(e.attachHandleValues=!0,o.find(".ngrs-value-runner").addClass("ngrs-attached-handles")):e.attachHandleValues=!1:e.attachHandleValues=a.attachHandleValues}),e.$watch("min",E),e.$watch("max",E),e.$watch(function(){return v()},x),e.$watch(function(){return y()},x),e.$on("$destroy",function(){A.off(i),angular.element("body").off(i),t.off(i);for(var e=0,n=C.length;e<n;e++)C[e].off(i),C[e].off(i+"X")}),A.bind("selectstart"+i,function(e){return!1}).bind("click",function(e){e.stopPropagation()}),S(0),S(1)}}}]),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()}(),/**
 * @license AngularJS v1.5.11
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e,t){"use strict";function n(){function n(e,t){var n,r={},i=e.split(",");for(n=0;n<i.length;n++)r[t?l(i[n]):i[n]]=!0;return r}function r(t,n){null===t||void 0===t?t="":"string"!=typeof t&&(t=""+t),y.innerHTML=t;var r=5;do{if(0===r)throw d("uinput","Failed to sanitize html because the input is unstable");r--,e.document.documentMode&&m(y),t=y.innerHTML,y.innerHTML=t}while(t!==y.innerHTML);for(var i=y.firstChild;i;){switch(i.nodeType){case 1:n.start(i.nodeName.toLowerCase(),h(i.attributes));break;case 3:n.chars(i.textContent)}var a;if(!(a=i.firstChild)&&(1===i.nodeType&&n.end(i.nodeName.toLowerCase()),a=i.nextSibling,!a))for(;null==a&&(i=i.parentNode,i!==y);)a=i.nextSibling,1===i.nodeType&&n.end(i.nodeName.toLowerCase());i=a}for(;i=y.firstChild;)y.removeChild(i)}function h(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function p(e){return e.replace(/&/g,"&amp;").replace(b,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(_,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=l(e),!n&&k[e]&&(n=e),n||O[e]!==!0||(r("<"),r(e),o(i,function(n,i){var a=l(i),o="img"===e&&"src"===a||"background"===a;D[a]!==!0||I[a]===!0&&!t(n,o)||(r(" "),r(i),r('="'),r(p(n)),r('"'))}),r(">"))},end:function(e){e=l(e),n||O[e]!==!0||E[e]===!0||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(p(e))}}}function m(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var a=n[r],o=a.name.toLowerCase();"xmlns:ns1"!==o&&0!==o.lastIndexOf("ns1:",0)||(t.removeAttributeNode(a),r--,i--)}var s=t.firstChild;s&&m(s),t=t.nextSibling}}var v=!1;this.$get=["$$sanitizeUri",function(e){return v&&a(O,C),function(t){var n=[];return c(t,f(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return s(e)?(v=e,this):v},i=t.bind,a=t.extend,o=t.forEach,s=t.isDefined,l=t.lowercase,u=t.noop,c=r,f=g;var y,b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=/([^#-~ |!])/g,E=n("area,br,col,hr,img,wbr"),x=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),S=n("rp,rt"),T=a({},S,x),w=a({},x,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),A=a({},S,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),k=n("script,style"),O=a({},E,w,A,T),I=n("background,cite,href,longdesc,src,xlink:href"),M=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),N=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),D=a({},I,N,M);!function(e){var t;if(!e.document||!e.document.implementation)throw d("noinert","Can't create an inert html document");t=e.document.implementation.createHTMLDocument("inert");var n=t.documentElement||t.getDocumentElement(),r=n.getElementsByTagName("body");if(1===r.length)y=r[0];else{var i=t.createElement("html");y=t.createElement("body"),i.appendChild(y),t.appendChild(i)}}(e)}function r(e){var t=[],n=f(t,u);return n.chars(e),t.join("")}var i,a,o,s,l,u,c,f,d=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,a=t.$$minErr("linky"),o=t.isDefined,s=t.isFunction,l=t.isObject,u=t.isString;return function(t,c,f){function d(e){e&&b.push(r(e))}function h(e,t){var n,r=v(e);b.push("<a ");for(n in r)b.push(n+'="'+r[n]+'" ');!o(c)||"target"in r||b.push('target="',c,'" '),b.push('href="',e.replace(/"/g,"&quot;"),'">'),d(t),b.push("</a>")}if(null==t||""===t)return t;if(!u(t))throw a("notstring","Expected string but received: {0}",t);for(var p,g,m,v=s(f)?f:l(f)?function(){return f}:function(){return{}},y=t,b=[];p=y.match(n);)g=p[0],p[2]||p[4]||(g=(p[3]?"http://":"mailto:")+g),m=p.index,d(y.substr(0,m)),h(g,p[0].replace(i,"")),y=y.substring(m+p[0].length);return d(y),e(b.join(""))}}])}(window,window.angular),function(e,t){"use strict";function n(e){if(!("clientX"in e||"clientY"in e)){var t=e.touches||e.originalEvent.touches;t&&t.length&&(e.clientX=t[0].clientX,e.clientY=t[0].clientY),e.preventDefault()}}function r(e){if(e=e[0],e.previousElementSibling)return t.element(e.previousElementSibling);for(var n=e.previousSibling;null!=n&&1!=n.nodeType;)n=n.previousSibling;return t.element(n)}function i(e,t){var n=r(e);n.length>0?n.after(t):e.parent().prepend(t)}function a(e,n){if(e instanceof t.element&&(e=e[0]),null!==l)return e[l](n)}var o=t.module("angular-sortable-view",[]);o.directive("svRoot",[function(){function e(e,t,n){return n?e.x-t.x<0:e.y-t.y<0}function t(e){return o[e]}function n(e){delete o[e]}var r,o=Object.create(null);return{restrict:"A",controller:["$scope","$attrs","$interpolate","$parse",function(s,l,u,c){var f=u(l.svRoot)(s)||s.$id;o[f]||(o[f]=[]);var d,h,p,g,m,v,y=!1,b=c(l.svOnSort);l.svOnStart=l.$$element[0].attributes["sv-on-start"],l.svOnStart=l.svOnStart&&l.svOnStart.value,l.svOnStop=l.$$element[0].attributes["sv-on-stop"],l.svOnStop=l.svOnStop&&l.svOnStop.value;var _=c(l.svOnStart),E=c(l.svOnStop);if(this.sortingInProgress=function(){return r},l.svGrid){if(y="true"===l.svGrid||"false"!==l.svGrid&&null,null===y)throw"Invalid value of sv-grid attribute"}else s.$watchCollection(function(){return t(f)},function(e){y=!1;var t=e.filter(function(e){return!e.container}).map(function(e){return{part:e.getPart().id,y:e.element[0].getBoundingClientRect().top}}),n=Object.create(null);t.forEach(function(e){n[e.part]?n[e.part].push(e.y):n[e.part]=[e.y]}),Object.keys(n).forEach(function(e){n[e].sort(),n[e].forEach(function(t,r){r<n[e].length-1&&t>0&&t===n[e][r+1]&&(y=!0)})})});this.$moveUpdate=function(n,o,l,u,c,b,E){var x=l[0].getBoundingClientRect();"element"===n.tolerance&&(o={x:~~(x.left+x.width/2),y:~~(x.top+x.height/2)}),r=!0,d=[],h||(c?(h=c.clone(),h.removeClass("ng-hide")):(h=u.clone(),h.addClass("sv-visibility-hidden"),h.addClass("sv-placeholder"),h.css({height:x.height+"px",width:x.width+"px"})),u.after(h),u.addClass("ng-hide"),m=u,p=n,g=l,_(s,{$helper:{element:g},$part:b.model(b.scope),$index:E,$item:b.model(b.scope)[E]}),s.$root&&s.$root.$$phase||s.$apply()),g[0].reposition({x:o.x+document.body.scrollLeft-o.offset.x*x.width,y:o.y+document.body.scrollTop-o.offset.y*x.height}),t(f).forEach(function(t,r){if(null==n.containment||a(t.element,n.containment)||a(t.element,n.containment+" *")){var i=t.element[0].getBoundingClientRect(),s={x:~~(i.left+i.width/2),y:~~(i.top+i.height/2)};t.container||!t.element[0].scrollHeight&&!t.element[0].scrollWidth||d.push({element:t.element,q:(s.x-o.x)*(s.x-o.x)+(s.y-o.y)*(s.y-o.y),view:t.getPart(),targetIndex:t.getIndex(),after:e(s,o,y)}),t.container&&!t.element[0].querySelector("[sv-element]:not(.sv-placeholder):not(.sv-source)")&&d.push({element:t.element,q:(s.x-o.x)*(s.x-o.x)+(s.y-o.y)*(s.y-o.y),view:t.getPart(),targetIndex:0,container:!0})}});var S=h[0].getBoundingClientRect(),T={x:~~(S.left+S.width/2),y:~~(S.top+S.height/2)};d.push({q:(T.x-o.x)*(T.x-o.x)+(T.y-o.y)*(T.y-o.y),element:h,placeholder:!0}),d.sort(function(e,t){return e.q-t.q}),d.forEach(function(e,t){0!==t||e.placeholder||e.container?0===t&&e.container?(v=e,e.element.append(h)):e.element.removeClass("sv-candidate"):(v=e,e.element.addClass("sv-candidate"),e.after?e.element.after(h):i(e.element,h))})},this.$drop=function(e,t,n){function i(){if(r=!1,h.remove(),g.remove(),m.removeClass("ng-hide"),d=void 0,h=void 0,n=void 0,g=void 0,m=void 0,E(s,{$part:e.model(e.scope),$index:t,$item:e.model(e.scope)[t]}),v){v.element.removeClass("sv-candidate");var i=e.model(e.scope).splice(t,1),a=v.targetIndex;v.view===e&&v.targetIndex>t&&a--,v.after&&a++,v.view.model(v.view.scope).splice(a,0,i[0]),v.view===e&&t===a||b(s,{$partTo:v.view.model(v.view.scope),$partFrom:e.model(e.scope),$item:i[0],$indexTo:a,$indexFrom:t})}v=void 0,s.$root&&s.$root.$$phase||s.$apply()}if(h)if(n.revert){var a=h[0].getBoundingClientRect(),o=g[0].getBoundingClientRect(),l=Math.sqrt(Math.pow(o.top-a.top,2)+Math.pow(o.left-a.left,2)),u=+n.revert*l/200;u=Math.min(u,+n.revert),["-webkit-","-moz-","-ms-","-o-",""].forEach(function(e){"undefined"!=typeof g[0].style[e+"transition"]&&(g[0].style[e+"transition"]="all "+u+"ms ease")}),setTimeout(i,u),g.css({top:a.top+document.body.scrollTop+"px",left:a.left+document.body.scrollLeft+"px"})}else i()},this.addToSortableElements=function(e){t(f).push(e)},this.removeFromSortableElements=function(e){var r=t(f),i=r.indexOf(e);i>-1&&(r.splice(i,1),0===r.length&&n(f))}}]}}]),o.directive("svPart",["$parse",function(e){return{restrict:"A",require:"^svRoot",controller:["$scope",function(e){e.$ctrl=this,this.getPart=function(){return e.part},this.$drop=function(t,n){e.$sortableRoot.$drop(e.part,t,n)}}],scope:!0,link:function(t,n,r,i){if(!r.svPart)throw new Error("no model provided");var a=e(r.svPart);if(!a.assign)throw new Error("model not assignable");t.part={id:t.$id,element:n,model:a,scope:t},t.$sortableRoot=i;var o={element:n,getPart:t.$ctrl.getPart,container:!0};i.addToSortableElements(o),t.$on("$destroy",function(){i.removeFromSortableElements(o)})}}}]),o.directive("svElement",["$parse",function(e){return{restrict:"A",require:["^svPart","^svRoot"],controller:["$scope",function(e){e.$ctrl=this}],link:function(r,i,a,o){function s(s){function l(e){n(e),h||(i.parent().prepend(m),h=!0),o[1].$moveUpdate(c,{x:e.clientX,y:e.clientY,offset:b},m,i,d,o[0].getPart(),r.$index)}if(n(s),!o[1].sortingInProgress()&&(0==s.button||"mousedown"!==s.type)){h=!1;var c=e(a.svElement)(r);if(c=t.extend({},{tolerance:"pointer",revert:200,containment:"html"},c),c.containment)var g=u.call(i,c.containment)[0].getBoundingClientRect();var m,v=i,y=i[0].getBoundingClientRect();f||(f=o[0].helper),d||(d=o[0].placeholder),f?(m=f.clone(),m.removeClass("ng-hide"),m.css({left:y.left+document.body.scrollLeft+"px",top:y.top+document.body.scrollTop+"px"}),v.addClass("sv-visibility-hidden")):(m=v.clone(),m.addClass("sv-helper").css({left:y.left+document.body.scrollLeft+"px",top:y.top+document.body.scrollTop+"px",width:y.width+"px"})),m[0].reposition=function(e){var t=e.x,n=e.y,r=m[0].getBoundingClientRect(),i=document.body;g&&(n<g.top+i.scrollTop&&(n=g.top+i.scrollTop),n+r.height>g.top+i.scrollTop+g.height&&(n=g.top+i.scrollTop+g.height-r.height),t<g.left+i.scrollLeft&&(t=g.left+i.scrollLeft),t+r.width>g.left+i.scrollLeft+g.width&&(t=g.left+i.scrollLeft+g.width-r.width)),this.style.left=t-i.scrollLeft+"px",this.style.top=n-i.scrollTop+"px"};var b={x:(s.clientX-y.left)/y.width,y:(s.clientY-y.top)/y.height};p.addClass("sv-sorting-in-progress"),p.on("mousemove touchmove",l).on("mouseup touchend touchcancel",function _(e){p.off("mousemove touchmove",l),p.off("mouseup touchend",_),p.removeClass("sv-sorting-in-progress"),h&&o[0].$drop(r.$index,c),i.removeClass("sv-visibility-hidden")})}}var l={element:i,getPart:o[0].getPart,getIndex:function(){return r.$index}};o[1].addToSortableElements(l),r.$on("$destroy",function(){o[1].removeFromSortableElements(l)});var c=i;c.on("mousedown touchstart",s),r.$watch("$ctrl.handle",function(e){e&&(c.off("mousedown touchstart",s),c=e,c.on("mousedown touchstart",s))});var f;r.$watch("$ctrl.helper",function(e){e&&(f=e)});var d;r.$watch("$ctrl.placeholder",function(e){e&&(d=e)});var h,p=(t.element(document.body),t.element(document.documentElement))}}}]),o.directive("svHandle",function(){return{require:"?^svElement",link:function(e,t,n,r){r&&(r.handle=t.add(r.handle))}}}),o.directive("svHelper",function(){return{require:["?^svPart","?^svElement"],link:function(e,t,n,r){t.addClass("sv-helper").addClass("ng-hide"),r[1]?r[1].helper=t:r[0]&&(r[0].helper=t)}}}),o.directive("svPlaceholder",function(){return{require:["?^svPart","?^svElement"],link:function(e,t,n,r){t.addClass("sv-placeholder").addClass("ng-hide"),r[1]?r[1].placeholder=t:r[0]&&(r[0].placeholder=t)}}}),t.element(document.head).append(["<style>.sv-helper{position: fixed !important;z-index: 99999;margin: 0 !important;}.sv-candidate{}.sv-placeholder{}.sv-sorting-in-progress{-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.sv-visibility-hidden{visibility: hidden !important;opacity: 0 !important;}</style>"].join(""));var s=document.documentElement,l=s.matches?"matches":s.matchesSelector?"matchesSelector":s.webkitMatches?"webkitMatches":s.webkitMatchesSelector?"webkitMatchesSelector":s.msMatches?"msMatches":s.msMatchesSelector?"msMatchesSelector":s.mozMatches?"mozMatches":s.mozMatchesSelector?"mozMatchesSelector":null;if(null==l)throw"This browser doesn't support the HTMLElement.matches method";var u=t.element.prototype.closest||function(e){for(var n=this[0].parentNode;n!==document.documentElement&&!n[l](e);)n=n.parentNode;return n[l](e)?t.element(n):t.element()};"function"!=typeof t.element.prototype.add&&(t.element.prototype.add=function(e){var n,r=t.element();for(e=t.element(e),n=0;n<this.length;n++)r.push(this[n]);for(n=0;n<e.length;n++)r.push(e[n]);return r})}(window,window.angular),/**
 * @license AngularJS v1.5.11
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e,t){"use strict";function n(e){return t.lowercase(e.nodeName||e[0]&&e[0].nodeName)}function r(e,n){var r=!1,i=!1;this.ngClickOverrideEnabled=function(a){return t.isDefined(a)?(a&&!i&&(i=!0,o.$$moduleName="ngTouch",n.directive("ngClick",o),e.decorator("ngClickDirective",["$delegate",function(e){if(r)e.shift();else for(var t=e.length-1;t>=0;){if("ngTouch"===e[t].$$moduleName){e.splice(t,1);break}t--}return e}])),r=a,this):r},this.$get=function(){return{ngClickOverrideEnabled:function(){return r}}}}function i(e,n,r){a.directive(e,["$parse","$swipe",function(i,a){var o=75,s=.3,l=30;return function(u,c,f){function d(e){if(!h)return!1;var t=Math.abs(e.y-h.y),r=(e.x-h.x)*n;return p&&t<o&&r>0&&r>l&&t/r<s}var h,p,g=i(f[e]),m=["touch"];t.isDefined(f.ngSwipeDisableMouse)||m.push("mouse"),a.bind(c,{start:function(e,t){h=e,p=!0},cancel:function(e){p=!1},end:function(e,t){d(e)&&u.$apply(function(){c.triggerHandler(r),g(u,{$event:t})})}},m)}}])}var a=t.module("ngTouch",[]);a.provider("$touch",r),r.$inject=["$provide","$compileProvider"],a.factory("$swipe",[function(){function e(e){var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],r=t.changedTouches&&t.changedTouches[0]||n[0];return{x:r.clientX,y:r.clientY}}function n(e,n){var r=[];return t.forEach(e,function(e){var t=i[e][n];t&&r.push(t)}),r.join(" ")}var r=10,i={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(t,i,a){var o,s,l,u,c=!1;a=a||["mouse","touch","pointer"],t.on(n(a,"start"),function(t){l=e(t),c=!0,o=0,s=0,u=l,i.start&&i.start(l,t)});var f=n(a,"cancel");f&&t.on(f,function(e){c=!1,i.cancel&&i.cancel(e)}),t.on(n(a,"move"),function(t){if(c&&l){var n=e(t);if(o+=Math.abs(n.x-u.x),s+=Math.abs(n.y-u.y),u=n,!(o<r&&s<r))return s>o?(c=!1,void(i.cancel&&i.cancel(t))):(t.preventDefault(),void(i.move&&i.move(n,t)))}}),t.on(n(a,"end"),function(t){c&&(c=!1,i.end&&i.end(e(t),t))})}}}]);var o=["$parse","$timeout","$rootElement",function(e,r,i){function a(e,t,n,r){return Math.abs(e-n)<m&&Math.abs(t-r)<m}function o(e,t,n){for(var r=0;r<e.length;r+=2)if(a(e[r],e[r+1],t,n))return e.splice(r,r+2),!0;return!1}function s(e){if(!(Date.now()-c>g)){var t=e.touches&&e.touches.length?e.touches:[e],r=t[0].clientX,i=t[0].clientY;r<1&&i<1||d&&d[0]===r&&d[1]===i||(d&&(d=null),"label"===n(e.target)&&(d=[r,i]),o(f,r,i)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur&&e.target.blur()))}}function l(e){var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].clientX,i=t[0].clientY;f.push(n,i),r(function(){for(var e=0;e<f.length;e+=2)if(f[e]===n&&f[e+1]===i)return void f.splice(e,e+2)},g,!1)}function u(e,t){f||(i[0].addEventListener("click",s,!0),i[0].addEventListener("touchstart",l,!0),f=[]),c=Date.now(),o(f,e,t)}var c,f,d,h=750,p=12,g=2500,m=25,v="ng-click-active";return function(n,r,i){function a(){d=!1,r.removeClass(v)}var o,s,l,c,f=e(i.ngClick),d=!1;r.on("touchstart",function(e){d=!0,o=e.target?e.target:e.srcElement,3===o.nodeType&&(o=o.parentNode),r.addClass(v),s=Date.now();var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],i=n[0];l=i.clientX,c=i.clientY}),r.on("touchcancel",function(e){a()}),r.on("touchend",function(e){var n=Date.now()-s,f=e.originalEvent||e,g=f.changedTouches&&f.changedTouches.length?f.changedTouches:f.touches&&f.touches.length?f.touches:[f],m=g[0],v=m.clientX,y=m.clientY,b=Math.sqrt(Math.pow(v-l,2)+Math.pow(y-c,2));d&&n<h&&b<p&&(u(v,y),o&&o.blur(),t.isDefined(i.disabled)&&i.disabled!==!1||r.triggerHandler("click",[e])),a()}),r.onclick=function(e){},r.on("click",function(e,t){n.$apply(function(){f(n,{$event:t||e})})}),r.on("mousedown",function(e){r.addClass(v)}),r.on("mousemove mouseup",function(e){r.removeClass(v)})}}];i("ngSwipeLeft",-1,"swipeleft"),i("ngSwipeRight",1,"swiperight")}(window,window.angular),angular.module("angular-websql",[]).factory("$webSql",["$q",function(e){return{openDatabase:function(t,n,r,i){try{var a=openDatabase(t,n,r,i);if("undefined"==typeof openDatabase)throw"Browser does not support web sql";return{executeQuery:function(t,n){var r=e.defer();return a.transaction(function(e){e.executeSql(t,n,function(e,t){r.resolve(t)},function(e,t){console.log("There has been an error: "+t.message),r.reject()})}),r.promise},insert:function(e,t,n){var r="boolean"==typeof n&&n?"INSERT OR REPLACE":"INSERT";r+=" INTO `{tableName}` ({fields}) VALUES({values});";var i="",a="",o=[];for(var s in t)i+=Object.keys(t)[Object.keys(t).length-1]==s?"`"+s+"`":"`"+s+"`, ",a+=Object.keys(t)[Object.keys(t).length-1]==s?"?":"?, ",o.push(t[s]);return this.executeQuery(this.replace(r,{"{tableName}":e,"{fields}":i,"{values}":a}),o)},update:function(e,t,n){var r="UPDATE `{tableName}` SET {update} WHERE {where}; ",i="",a=[];for(var o in t)i+=Object.keys(t)[Object.keys(t).length-1]==o?"`"+o+"`= ?":"`"+o+"`= ?,",a.push(t[o]);var s=this.whereClause(n);return this.executeQuery(this.replace(r,{"{tableName}":e,"{update}":i,"{where}":s.w}),a.concat(s.p))},del:function(e,t){var n="DELETE FROM `{tableName}` WHERE {where}; ",r=this.whereClause(t);return this.executeQuery(this.replace(n,{"{tableName}":e,"{where}":r.w}),r.p)},select:function(e,t){var n="SELECT * FROM `{tableName}` WHERE {where}; ",r=this.whereClause(t);return this.executeQuery(this.replace(n,{"{tableName}":e,"{where}":r.w}),r.p)},selectAll:function(e){return this.executeQuery("SELECT * FROM `"+e+"`; ",[])},whereClause:function(e){var t="",n=[];for(var r in e)"undefined"==typeof e[r]||"object"==typeof e[r]||"string"!=typeof e[r]||e[r].match(/NULL/gi)?"undefined"!=typeof e[r]&&"object"!=typeof e[r]&&"number"==typeof e[r]?n.push(e[r]):"undefined"==typeof e[r].value||"object"!=typeof e[r]||"number"!=typeof e[r].value&&e[r].value.match(/NULL/gi)||n.push(e[r].value):n.push(e[r]),t+="object"==typeof e[r]?"undefined"==typeof e[r].union?"string"==typeof e[r].value&&e[r].value.match(/NULL/gi)?"`"+r+"` "+e[r].value:"undefined"!=typeof e[r].operator?"`"+r+"` "+e[r].operator+" ? ":"`"+r+"` = ?":"string"==typeof e[r].value&&e[r].value.match(/NULL/gi)?"`"+r+"` "+e[r].value+" "+e[r].union+" ":"undefined"!=typeof e[r].operator?"`"+r+"` "+e[r].operator+" ? "+e[r].union+" ":"`"+r+"` = ? "+e[r].union+" ":"string"==typeof e[r]&&e[r].match(/NULL/gi)?"`"+r+"` "+e[r]:"`"+r+"` = ?";return{w:t,p:n}},replace:function(e,t){for(var n in t)e=e.replace(new RegExp(n,"ig"),t[n]);return e},createTable:function(e,t){var n="CREATE TABLE IF NOT EXISTS `{tableName}` ({fields}); ",r=[],i="";for(var a in t){var o="{type} {null}";i+="`"+a+"` ","undefined"==typeof t[a]["null"]&&(t[a]["null"]="NULL");for(var s in t[a])o=o.replace(new RegExp("{"+s+"}","ig"),t[a][s]);i+=o,"undefined"!=typeof t[a]["default"]&&(i+=" DEFAULT "+t[a]["default"]),"undefined"!=typeof t[a].primary&&(i+=" PRIMARY KEY"),"undefined"!=typeof t[a].auto_increment&&(i+=" AUTOINCREMENT"),Object.keys(t)[Object.keys(t).length-1]!=a&&(i+=","),"undefined"!=typeof t[a].primary&&t[a].primary&&r.push(a)}var l={tableName:e,fields:i};for(var u in l)n=n.replace(new RegExp("{"+u+"}","ig"),l[u]);return this.executeQuery(n,[])},dropTable:function(e){return this.executeQuery("DROP TABLE IF EXISTS `"+e+"`; ",[])}}}catch(o){console.error(o)}}}}]),/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface
 * Copyright (c) 2009-2016 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.3.0
 */
function(e,t){"use strict";var n,r,i,a=e,o=a.document,s=a.navigator,l=a.setTimeout,u=a.clearTimeout,c=a.setInterval,f=a.clearInterval,d=a.getComputedStyle,h=a.encodeURIComponent,p=a.ActiveXObject,g=a.Error,m=a.Number.parseInt||a.parseInt,v=a.Number.parseFloat||a.parseFloat,y=a.Number.isNaN||a.isNaN,b=a.Date.now,_=a.Object.keys,E=a.Object.prototype.hasOwnProperty,x=a.Array.prototype.slice,S=function(){var e=function(e){return e};if("function"==typeof a.wrap&&"function"==typeof a.unwrap)try{var t=o.createElement("div"),n=a.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=a.unwrap)}catch(r){}return e}(),T=function(e){return x.call(e,0)},w=function(){var e,n,r,i,a,o,s=T(arguments),l=s[0]||{};for(e=1,n=s.length;e<n;e++)if(null!=(r=s[e]))for(i in r)E.call(r,i)&&(a=l[i],o=r[i],l!==o&&o!==t&&(l[i]=o));return l},A=function(e){var t,n,r,i;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,r=e.length;n<r;n++)E.call(e,n)&&(t[n]=A(e[n]));else{t={};for(i in e)E.call(e,i)&&(t[i]=A(e[i]))}return t},C=function(e,t){for(var n={},r=0,i=t.length;r<i;r++)t[r]in e&&(n[t[r]]=e[t[r]]);return n},k=function(e,t){var n={};for(var r in e)t.indexOf(r)===-1&&(n[r]=e[r]);return n},O=function(e){if(e)for(var t in e)E.call(e,t)&&delete e[t];return e},I=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},M=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},N=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},D=function(){var e,t;try{throw new g}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||N(t.stack)),e},L=function(){var e,n,r;if(o.currentScript&&(e=o.currentScript.src))return e;if(n=o.getElementsByTagName("script"),1===n.length)return n[0].src||t;if("readyState"in(n[0]||document.createElement("script")))for(r=n.length;r--;)if("interactive"===n[r].readyState&&(e=n[r].src))return e;return"loading"===o.readyState&&(e=n[n.length-1].src)?e:(e=D())?e:t},$=function(){var e,n,r,i=o.getElementsByTagName("script");for(e=i.length;e--;){if(!(r=i[e].src)){n=null;break}if(r=M(r),null==n)n=r;else if(n!==r){n=null;break}}return n||t},R=function(){var e=M(L())||$()||"";return e+"ZeroClipboard.swf"},P=function(){var e=/win(dows|[\s]?(nt|me|ce|xp|vista|[\d]+))/i;return!!s&&(e.test(s.appVersion||"")||e.test(s.platform||"")||(s.userAgent||"").indexOf("Windows")!==-1)},F=function(){return null==a.opener&&(!!a.top&&a!=a.top||!!a.parent&&a!=a.parent)}(),U="html"===o.documentElement.nodeName,j={bridge:null,version:"0.0.0",pluginType:"unknown",sandboxed:null,disabled:null,outdated:null,insecure:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},H="11.0.0",z={},B={},q=null,Y=0,X=0,W={ready:"Flash communication is established",error:{"flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-insecure":"Flash will be unable to communicate due to a protocol mismatch between your `swfPath` configuration and the page","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity","browser-unsupported":"The browser does not support the required HTML DOM and JavaScript features"}},G=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],V=["flash-sandboxed","flash-disabled","flash-outdated","flash-insecure","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],K=new RegExp("^flash-("+V.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Z=new RegExp("^flash-("+V.filter(function(e){return"flash-disabled"!==e}).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Q={swfPath:R(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,fixLineEndings:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},J=function(e){"object"!=typeof e||!e||"length"in e||_(e).forEach(function(t){if(/^(?:forceHandCursor|title|zIndex|bubbleEvents|fixLineEndings)$/.test(t))Q[t]=e[t];else if(null==j.bridge)if("containerId"===t||"swfObjectId"===t){if(!me(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");Q[t]=e[t]}else Q[t]=e[t]});{if("string"!=typeof e||!e)return A(Q);if(E.call(Q,e))return Q[e]}},ee=function(){return Ke(),{browser:w(C(s,["userAgent","platform","appName","appVersion"]),{isSupported:te()}),flash:k(j,["bridge"]),zeroclipboard:{version:Qe.version,config:Qe.config()}}},te=function(){return!!(o.addEventListener&&a.Object.keys&&a.Array.prototype.map)},ne=function(){return!!(j.sandboxed||j.disabled||j.outdated||j.unavailable||j.degraded||j.deactivated)},re=function(e,r){var i,a,o,s={};if("string"==typeof e&&e?o=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof r||_(e).forEach(function(t){var n=e[t];"function"==typeof n&&Qe.on(t,n)}),o&&o.length&&r){for(i=0,a=o.length;i<a;i++)e=o[i].replace(/^on/,""),s[e]=!0,z[e]||(z[e]=[]),z[e].push(r);if(s.ready&&j.ready&&Qe.emit({type:"ready"}),s.error){for(te()||Qe.emit({type:"error",name:"browser-unsupported"}),i=0,a=V.length;i<a;i++)if(j[V[i].replace(/^flash-/,"")]===!0){Qe.emit({type:"error",name:V[i]});break}n!==t&&Qe.version!==n&&Qe.emit({type:"error",name:"version-mismatch",jsVersion:Qe.version,swfVersion:n})}}return Qe},ie=function(e,t){var n,r,i,a,o;if(0===arguments.length?a=_(z):"string"==typeof e&&e?a=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||_(e).forEach(function(t){var n=e[t];"function"==typeof n&&Qe.off(t,n)}),a&&a.length)for(n=0,r=a.length;n<r;n++)if(e=a[n].replace(/^on/,""),o=z[e],o&&o.length)if(t)for(i=o.indexOf(t);i!==-1;)o.splice(i,1),i=o.indexOf(t,i);else o.length=0;return Qe},ae=function(e){var t;return t="string"==typeof e&&e?A(z[e])||null:A(z)},oe=function(e){var t,n,r;if(e=ve(e),e&&!Te(e))return"ready"===e.type&&j.overdue===!0?Qe.emit({type:"error",name:"flash-overdue"}):(t=w({},e),xe.call(this,t),"copy"===e.type&&(r=De(B),n=r.data,q=r.formatMap),n)},se=function(){var e=Q.swfPath||"",t=e.slice(0,2),n=e.slice(0,e.indexOf("://")+1);return"\\\\"===t?"file:":"//"===t||""===n?a.location.protocol:n},le=function(){var e,t,n=j.sandboxed;return te()?(Ke(),"boolean"!=typeof j.ready&&(j.ready=!1),void(j.sandboxed!==n&&j.sandboxed===!0?(j.ready=!1,Qe.emit({type:"error",name:"flash-sandboxed"})):Qe.isFlashUnusable()||null!==j.bridge||(t=se(),t&&t!==a.location.protocol?Qe.emit({type:"error",name:"flash-insecure"}):(e=Q.flashLoadTimeout,"number"==typeof e&&e>=0&&(Y=l(function(){"boolean"!=typeof j.deactivated&&(j.deactivated=!0),j.deactivated===!0&&Qe.emit({type:"error",name:"flash-deactivated"})},e)),j.overdue=!1,Me())))):(j.ready=!1,void Qe.emit({type:"error",name:"browser-unsupported"}))},ue=function(){Qe.clearData(),Qe.blur(),Qe.emit("destroy"),Ne(),Qe.off()},ce=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,Qe.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var r in n)"string"==typeof r&&r&&E.call(n,r)&&"string"==typeof n[r]&&n[r]&&(B[r]=Ve(n[r]))},fe=function(e){"undefined"==typeof e?(O(B),q=null):"string"==typeof e&&E.call(B,e)&&delete B[e]},de=function(e){return"undefined"==typeof e?A(B):"string"==typeof e&&E.call(B,e)?B[e]:void 0},he=function(e){if(e&&1===e.nodeType){r&&(He(r,Q.activeClass),r!==e&&He(r,Q.hoverClass)),r=e,je(e,Q.hoverClass);var t=e.getAttribute("title")||Q.title;if("string"==typeof t&&t){var n=Oe(j.bridge);n&&n.setAttribute("title",t)}var i=Q.forceHandCursor===!0||"pointer"===ze(e,"cursor");We(i),Xe()}},pe=function(){var e=Oe(j.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),r&&(He(r,Q.hoverClass),He(r,Q.activeClass),r=null)},ge=function(){return r||null},me=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},ve=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=i),w(e,{type:t,target:e.target||r||null,relatedTarget:e.relatedTarget||null,currentTarget:j&&j.bridge||null,timeStamp:e.timeStamp||b()||null});var n=W[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&w(e,{target:null,version:j.version}),"error"===e.type&&(K.test(e.name)&&w(e,{target:null,minimumVersion:H}),Z.test(e.name)&&w(e,{version:j.version}),"flash-insecure"===e.name&&w(e,{pageProtocol:a.location.protocol,swfProtocol:se()})),"copy"===e.type&&(e.clipboardData={setData:Qe.setData,clearData:Qe.clearData}),"aftercopy"===e.type&&(e=Le(e,q)),e.target&&!e.relatedTarget&&(e.relatedTarget=ye(e.target)),be(e)}},ye=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?o.getElementById(t):null},be=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,r="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,i="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=Be(n),l=a.screenLeft||a.screenX||0,u=a.screenTop||a.screenY||0,c=o.body.scrollLeft+o.documentElement.scrollLeft,f=o.body.scrollTop+o.documentElement.scrollTop,d=s.left+("number"==typeof e._stageX?e._stageX:0),h=s.top+("number"==typeof e._stageY?e._stageY:0),p=d-c,g=h-f,m=l+p,v=u+g,y="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,w(e,{srcElement:n,fromElement:r,toElement:i,screenX:m,screenY:v,pageX:d,pageY:h,clientX:p,clientY:g,x:p,y:g,movementX:y,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},_e=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},Ee=function(e,t,n,r){r?l(function(){e.apply(t,n)},0):e.apply(t,n)},xe=function(e){if("object"==typeof e&&e&&e.type){var t=_e(e),n=z["*"]||[],r=z[e.type]||[],i=n.concat(r);if(i&&i.length){var o,s,l,u,c,f=this;for(o=0,s=i.length;o<s;o++)l=i[o],u=f,"string"==typeof l&&"function"==typeof a[l]&&(l=a[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(u=l,l=l.handleEvent),"function"==typeof l&&(c=w({},e),Ee(l,u,[c],t))}return this}},Se=function(e){var t=null;return(F===!1||e&&"error"===e.type&&e.name&&G.indexOf(e.name)!==-1)&&(t=!1),t},Te=function(e){var t=e.target||r||null,a="swf"===e._source;switch(delete e._source,e.type){case"error":var o="flash-sandboxed"===e.name||Se(e);"boolean"==typeof o&&(j.sandboxed=o),"browser-unsupported"===e.name?w(j,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1}):V.indexOf(e.name)!==-1?w(j,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,insecure:"flash-insecure"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(n=e.swfVersion,w(j,{disabled:!1,outdated:!1,insecure:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Ye();break;case"ready":n=e.swfVersion;var s=j.deactivated===!0;w(j,{sandboxed:!1,disabled:!1,outdated:!1,insecure:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:s,ready:!s}),Ye();break;case"beforecopy":i=t;break;case"copy":var l,u,c=e.relatedTarget;!B["text/html"]&&!B["text/plain"]&&c&&(u=c.value||c.outerHTML||c.innerHTML)&&(l=c.value||c.textContent||c.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),u!==l&&e.clipboardData.setData("text/html",u)):!B["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":we(e),Qe.clearData(),t&&t!==Ue()&&t.focus&&t.focus();break;case"_mouseover":Qe.focus(t),Q.bubbleEvents===!0&&a&&(t&&t!==e.relatedTarget&&!I(e.relatedTarget,t)&&Ae(w({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),Ae(w({},e,{type:"mouseover"})));break;case"_mouseout":Qe.blur(),Q.bubbleEvents===!0&&a&&(t&&t!==e.relatedTarget&&!I(e.relatedTarget,t)&&Ae(w({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),Ae(w({},e,{type:"mouseout"})));break;case"_mousedown":je(t,Q.activeClass),Q.bubbleEvents===!0&&a&&Ae(w({},e,{type:e.type.slice(1)}));break;case"_mouseup":He(t,Q.activeClass),Q.bubbleEvents===!0&&a&&Ae(w({},e,{type:e.type.slice(1)}));break;case"_click":i=null,Q.bubbleEvents===!0&&a&&Ae(w({},e,{type:e.type.slice(1)}));break;case"_mousemove":Q.bubbleEvents===!0&&a&&Ae(w({},e,{type:e.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type))return!0},we=function(e){if(e.errors&&e.errors.length>0){var t=A(e);w(t,{type:"error",name:"clipboard-error"}),delete t.success,l(function(){Qe.emit(t)},0)}},Ae=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,r=n&&n.ownerDocument||o,i={view:r.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:r.createEvent?0:1},s=w(i,e);n&&r.createEvent&&n.dispatchEvent&&(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=r.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),t._source="js",n.dispatchEvent(t)))}},Ce=function(){var e=Q.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=Q.swfObjectId+"_fallbackContent";X=c(function(){var e=o.getElementById(n);qe(e)&&(Ye(),j.deactivated=null,Qe.emit({type:"error",name:"swf-not-found"}))},t)}},ke=function(){var e=o.createElement("div");return e.id=Q.containerId,e.className=Q.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+Ge(Q.zIndex),e},Oe=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Ie=function(e){return"string"==typeof e&&e?e.replace(/["&'<>]/g,function(e){switch(e){case'"':return"&quot;";case"&":return"&amp;";case"'":return"&apos;";case"<":return"&lt;";case">":return"&gt;";default:return e}}):e},Me=function(){var e,t=j.bridge,n=Oe(t);if(!t){var r=Fe(a.location.host,Q),i="never"===r?"none":"all",s=Re(w({jsVersion:Qe.version},Q)),l=Q.swfPath+$e(Q.swfPath,Q);U&&(l=Ie(l)),n=ke();var u=o.createElement("div");n.appendChild(u),o.body.appendChild(n);var c=o.createElement("div"),f="activex"===j.pluginType;c.innerHTML='<object id="'+Q.swfObjectId+'" name="'+Q.swfObjectId+'" width="100%" height="100%" '+(f?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(f?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+r+'"/><param name="allowNetworking" value="'+i+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/><div id="'+Q.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=c.firstChild,c=null,S(t).ZeroClipboard=Qe,n.replaceChild(t,u),Ce()}return t||(t=o[Q.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),j.bridge=t||null,t},Ne=function(){var e=j.bridge;if(e){var r=Oe(e);r&&("activex"===j.pluginType&&"readyState"in e?(e.style.display="none",function i(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode&&e.parentNode.removeChild(e),r.parentNode&&r.parentNode.removeChild(r)}else l(i,10)}()):(e.parentNode&&e.parentNode.removeChild(e),r.parentNode&&r.parentNode.removeChild(r))),Ye(),j.ready=null,j.bridge=null,j.deactivated=null,j.insecure=null,n=t}},De=function(e){var t={},n={};if("object"==typeof e&&e){for(var r in e)if(r&&E.call(e,r)&&"string"==typeof e[r]&&e[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[r],n.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[r],n.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[r],n.rtf=r}return{data:t,formatMap:n}}},Le=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var r in e)if(E.call(e,r))if("errors"===r){n[r]=e[r]?e[r].slice():[];for(var i=0,a=n[r].length;i<a;i++)n[r][i].format=t[n[r][i].format]}else if("success"!==r&&"data"!==r)n[r]=e[r];else{n[r]={};var o=e[r];for(var s in o)s&&E.call(o,s)&&E.call(t,s)&&(n[r][t[s]]=o[s])}return n},$e=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(e.indexOf("?")===-1?"?":"&")+"noCache="+b():""},Re=function(e){var t,n,r,i,o="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?i=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(i=e.trustedDomains)),i&&i.length)for(t=0,n=i.length;t<n;t++)if(E.call(i,t)&&i[t]&&"string"==typeof i[t]){if(r=Pe(i[t]),!r)continue;if("*"===r){s.length=0,s.push(r);break}s.push.apply(s,[r,"//"+r,a.location.protocol+"//"+r])}return s.length&&(o+="trustedOrigins="+h(s.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+h(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(o+=(o?"&":"")+"jsVersion="+h(e.jsVersion)),o},Pe=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=t===-1?e:e.slice(t+2);var n=e.indexOf("/");return e=n===-1?e:t===-1||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},Fe=function(){var e=function(e){var t,n,r,i=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return i;for(t=0,n=e.length;t<n;t++)if(E.call(e,t)&&(r=Pe(e[t]))){if("*"===r){i.length=0,i.push("*");break}i.indexOf(r)===-1&&i.push(r)}return i};return function(t,n){var r=Pe(n.swfPath);null===r&&(r=t);var i=e(n.trustedDomains),a=i.length;if(a>0){if(1===a&&"*"===i[0])return"always";if(i.indexOf(t)!==-1)return 1===a&&t===r?"sameDomain":"always"}return"never"}}(),Ue=function(){try{return o.activeElement}catch(e){return null}},je=function(e,t){var n,r,i,a=[];if("string"==typeof t&&t&&(a=t.split(/\s+/)),e&&1===e.nodeType&&a.length>0){for(i=(" "+(e.className||"")+" ").replace(/[\t\r\n\f]/g," "),n=0,r=a.length;n<r;n++)i.indexOf(" "+a[n]+" ")===-1&&(i+=a[n]+" ");i=i.replace(/^\s+|\s+$/g,""),i!==e.className&&(e.className=i)}return e},He=function(e,t){var n,r,i,a=[];if("string"==typeof t&&t&&(a=t.split(/\s+/)),e&&1===e.nodeType&&a.length>0&&e.className){for(i=(" "+e.className+" ").replace(/[\t\r\n\f]/g," "),n=0,r=a.length;n<r;n++)i=i.replace(" "+a[n]+" "," ");i=i.replace(/^\s+|\s+$/g,""),i!==e.className&&(e.className=i)}return e},ze=function(e,t){var n=d(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Be=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),r=a.pageXOffset,i=a.pageYOffset,s=o.documentElement.clientLeft||0,l=o.documentElement.clientTop||0,u=0,c=0;if("relative"===ze(o.body,"position")){var f=o.body.getBoundingClientRect(),d=o.documentElement.getBoundingClientRect();u=f.left-d.left||0,c=f.top-d.top||0}t.left=n.left+r-s-u,t.top=n.top+i-l-c,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},qe=function(e){if(!e)return!1;var t=d(e,null);if(!t)return!1;var n=v(t.height)>0,r=v(t.width)>0,i=v(t.top)>=0,a=v(t.left)>=0,o=n&&r&&i&&a,s=o?null:Be(e),l="none"!==t.display&&"collapse"!==t.visibility&&(o||!!s&&(n||s.height>0)&&(r||s.width>0)&&(i||s.top>=0)&&(a||s.left>=0));return l},Ye=function(){u(Y),Y=0,f(X),X=0},Xe=function(){var e;if(r&&(e=Oe(j.bridge))){var t=Be(r);w(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+Ge(Q.zIndex)})}},We=function(e){j.ready===!0&&(j.bridge&&"function"==typeof j.bridge.setHandCursor?j.bridge.setHandCursor(e):j.ready=!1)},Ge=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||y(e)?"string"==typeof e&&(t=Ge(m(e,10))):t=e,"number"==typeof t?t:"auto"},Ve=function(e){var t=/(\r\n|\r|\n)/g;return"string"==typeof e&&Q.fixLineEndings===!0&&(P()?/((^|[^\r])\n|\r([^\n]|$))/.test(e)&&(e=e.replace(t,"\r\n")):/\r/.test(e)&&(e=e.replace(t,"\n"))),e},Ke=function(t){var n,r,i,a=j.sandboxed,o=null;if(t=t===!0,F===!1)o=!1;else{try{r=e.frameElement||null}catch(s){i={name:s.name,message:s.message}}if(r&&1===r.nodeType&&"IFRAME"===r.nodeName)try{o=r.hasAttribute("sandbox")}catch(s){o=null}else{try{n=document.domain||null}catch(s){n=null}(null===n||i&&"SecurityError"===i.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(i.message.toLowerCase()))&&(o=!0)}}return j.sandboxed=o,a===o||t||Ze(p),o},Ze=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function r(e){e&&(l=!0,e.version&&(f=t(e.version)),!f&&e.description&&(f=t(e.description)),e.filename&&(c=n(e.filename)))}var i,a,o,l=!1,u=!1,c=!1,f="";if(s.plugins&&s.plugins.length)i=s.plugins["Shockwave Flash"],r(i),s.plugins["Shockwave Flash 2.0"]&&(l=!0,f="2.0.0.11");else if(s.mimeTypes&&s.mimeTypes.length)o=s.mimeTypes["application/x-shockwave-flash"],i=o&&o.enabledPlugin,r(i);else if("undefined"!=typeof e){u=!0;try{a=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,f=t(a.GetVariable("$version"))}catch(d){try{a=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,f="6.0.21"}catch(h){try{a=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,f=t(a.GetVariable("$version"))}catch(p){u=!1}}}}j.disabled=l!==!0,j.outdated=f&&v(f)<v(H),j.version=f||"0.0.0",j.pluginType=c?"pepper":u?"activex":l?"netscape":"unknown"};Ze(p),Ke(!0);var Qe=function(){return this instanceof Qe?void("function"==typeof Qe._createClient&&Qe._createClient.apply(this,T(arguments))):new Qe};Qe.version="2.3.0",Qe.config=function(){return J.apply(this,T(arguments))},Qe.state=function(){return ee.apply(this,T(arguments))},Qe.isFlashUnusable=function(){return ne.apply(this,T(arguments))},Qe.on=function(){return re.apply(this,T(arguments))},Qe.off=function(){return ie.apply(this,T(arguments))},Qe.handlers=function(){return ae.apply(this,T(arguments))},Qe.emit=function(){return oe.apply(this,T(arguments))},Qe.create=function(){return le.apply(this,T(arguments))},Qe.destroy=function(){return ue.apply(this,T(arguments))},Qe.setData=function(){return ce.apply(this,T(arguments))},Qe.clearData=function(){return fe.apply(this,T(arguments))},Qe.getData=function(){return de.apply(this,T(arguments))},Qe.focus=Qe.activate=function(){return he.apply(this,T(arguments))},Qe.blur=Qe.deactivate=function(){return pe.apply(this,T(arguments))},Qe.activeElement=function(){return ge.apply(this,T(arguments))};var Je=0,et={},tt=0,nt={},rt={};w(Q,{autoActivate:!0});var it=function(e){var t,n=this;n.id=""+Je++,t={instance:n,elements:[],handlers:{},coreWildcardHandler:function(e){return n.emit(e)}},et[n.id]=t,e&&n.clip(e),Qe.on("*",t.coreWildcardHandler),Qe.on("destroy",function(){n.destroy()}),Qe.create()},at=function(e,r){var i,a,o,s={},l=this,u=et[l.id],c=u&&u.handlers;if(!u)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e?o=e.toLowerCase().split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof r||_(e).forEach(function(t){var n=e[t];"function"==typeof n&&l.on(t,n)}),o&&o.length&&r){for(i=0,a=o.length;i<a;i++)e=o[i].replace(/^on/,""),s[e]=!0,c[e]||(c[e]=[]),c[e].push(r);if(s.ready&&j.ready&&this.emit({type:"ready",client:this}),s.error){for(i=0,a=V.length;i<a;i++)if(j[V[i].replace(/^flash-/,"")]){this.emit({type:"error",name:V[i],client:this});break}n!==t&&Qe.version!==n&&this.emit({type:"error",name:"version-mismatch",jsVersion:Qe.version,swfVersion:n})}}return l},ot=function(e,t){var n,r,i,a,o,s=this,l=et[s.id],u=l&&l.handlers;if(!u)return s;if(0===arguments.length?a=_(u):"string"==typeof e&&e?a=e.split(/\s+/):"object"!=typeof e||!e||"length"in e||"undefined"!=typeof t||_(e).forEach(function(t){var n=e[t];"function"==typeof n&&s.off(t,n)}),a&&a.length)for(n=0,r=a.length;n<r;n++)if(e=a[n].toLowerCase().replace(/^on/,""),o=u[e],o&&o.length)if(t)for(i=o.indexOf(t);i!==-1;)o.splice(i,1),i=o.indexOf(t,i);else o.length=0;return s},st=function(e){var t=null,n=et[this.id]&&et[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:A(n)),t},lt=function(e){var t,n=this;return ht.call(n,e)&&("object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=w({},e)),t=w({},ve(e),{client:n}),pt.call(n,t)),n},ut=function(e){if(!et[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=gt(e);for(var t=0;t<e.length;t++)if(E.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?nt[e[t].zcClippingId].indexOf(this.id)===-1&&nt[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+tt++,nt[e[t].zcClippingId]=[this.id],Q.autoActivate===!0&&mt(e[t]));var n=et[this.id]&&et[this.id].elements;n.indexOf(e[t])===-1&&n.push(e[t])}return this},ct=function(e){var t=et[this.id];if(!t)return this;var n,r=t.elements;e="undefined"==typeof e?r.slice(0):gt(e);for(var i=e.length;i--;)if(E.call(e,i)&&e[i]&&1===e[i].nodeType){for(n=0;(n=r.indexOf(e[i],n))!==-1;)r.splice(n,1);var a=nt[e[i].zcClippingId];if(a){for(n=0;(n=a.indexOf(this.id,n))!==-1;)a.splice(n,1);0===a.length&&(Q.autoActivate===!0&&vt(e[i]),delete e[i].zcClippingId)}}return this},ft=function(){var e=et[this.id];return e&&e.elements?e.elements.slice(0):[]},dt=function(){var e=et[this.id];e&&(this.unclip(),this.off(),Qe.off("*",e.coreWildcardHandler),delete et[this.id])},ht=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=et[this.id],n=t&&t.elements,r=!!n&&n.length>0,i=!e.target||r&&n.indexOf(e.target)!==-1,a=e.relatedTarget&&r&&n.indexOf(e.relatedTarget)!==-1,o=e.client&&e.client===this;return!(!t||!(i||a||o))},pt=function(e){var t=et[this.id];if("object"==typeof e&&e&&e.type&&t){var n=_e(e),r=t&&t.handlers["*"]||[],i=t&&t.handlers[e.type]||[],o=r.concat(i);if(o&&o.length){var s,l,u,c,f,d=this;for(s=0,l=o.length;s<l;s++)u=o[s],c=d,"string"==typeof u&&"function"==typeof a[u]&&(u=a[u]),"object"==typeof u&&u&&"function"==typeof u.handleEvent&&(c=u,u=u.handleEvent),"function"==typeof u&&(f=w({},e),Ee(u,c,[f],n))}}},gt=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},mt=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=a.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=a.event))&&(t(n),Qe.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),rt[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},vt=function(e){if(e&&1===e.nodeType){var t=rt[e.zcClippingId];if("object"==typeof t&&t){for(var n,r,i=["move","leave","enter","out","over"],a=0,o=i.length;a<o;a++)n="mouse"+i[a],r=t[n],"function"==typeof r&&e.removeEventListener(n,r,!1);delete rt[e.zcClippingId]}}};Qe._createClient=function(){it.apply(this,T(arguments))},Qe.prototype.on=function(){return at.apply(this,T(arguments))},Qe.prototype.off=function(){return ot.apply(this,T(arguments))},Qe.prototype.handlers=function(){return st.apply(this,T(arguments))},Qe.prototype.emit=function(){return lt.apply(this,T(arguments))},Qe.prototype.clip=function(){return ut.apply(this,T(arguments))},Qe.prototype.unclip=function(){return ct.apply(this,T(arguments))},Qe.prototype.elements=function(){return ft.apply(this,T(arguments))},Qe.prototype.destroy=function(){return dt.apply(this,T(arguments))},Qe.prototype.setText=function(e){if(!et[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Qe.setData("text/plain",e),this},Qe.prototype.setHtml=function(e){if(!et[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Qe.setData("text/html",e),this},Qe.prototype.setRichText=function(e){if(!et[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Qe.setData("application/rtf",e),this},Qe.prototype.setData=function(){if(!et[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Qe.setData.apply(this,T(arguments)),this},Qe.prototype.clearData=function(){if(!et[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Qe.clearData.apply(this,T(arguments)),this},Qe.prototype.getData=function(){if(!et[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Qe.getData.apply(this,T(arguments))},"function"==typeof define&&define.amd?define(function(){return Qe}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Qe:e.ZeroClipboard=Qe}(function(){return this||window}()),angular.module("zeroclipboard",[]).provider("uiZeroclipConfig",function(){var e={buttonClass:"",swfPath:"ZeroClipboard.swf",trustedDomains:[window.location.host],cacheBust:!0,forceHandCursor:!1,zIndex:999999999,debug:!0,title:null,autoActivate:!0,flashLoadTimeout:3e4,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active"},t=!0;this.setZcConf=function(t){angular.extend(e,t)},this.setOverrideConfig=function(e){t=e},this.$get=function(){return{zeroclipConfig:e,overrideConfig:t}}}).directive("uiZeroclip",["$document","$window","uiZeroclipConfig",function(e,t,n){var r=n.zeroclipConfig||{},i=t.ZeroClipboard;return{scope:{onCopied:"&zeroclipCopied",onError:"&?zeroclipOnError",onBeforeCopy:"&?zeroclipOnBeforeCopy",client:"=?uiZeroclip",value:"=zeroclipModel",text:"@zeroclipText"
},link:function(e,t,a){var o,s=t[0];n.overrideConfig&&i.config(r),angular.isFunction(i)&&(e.client=new i(s)),e.$watch("value",function(e){void 0!==e&&t.attr("data-clipboard-text",e)}),e.$watch("text",function(e){t.attr("data-clipboard-text",e)}),e.client.on("aftercopy",o=function(t){e.$apply(function(){e.onCopied({$event:t})})}),e.client.on("error",function(t){e.onError&&e.$apply(function(){e.onError({$event:t})}),i.destroy()}),e.client.on("beforecopy",function(t){e.onBeforeCopy&&e.$apply(function(){e.onBeforeCopy({$event:t})})}),e.$on("$destroy",function(){e.client.off("complete",o),e.client=null,t.off(),i.destroy()})}}}]),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cql=e()}}(function(){var e;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){},{}],2:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e("d3-time",["exports"],i):i(t.d3_time={})}(this,function(e){"use strict";function t(e,n,r,o){function s(t){return e(t=new Date((+t))),t}return s.floor=s,s.round=function(t){var r=new Date((+t)),i=new Date(t-1);return e(r),e(i),n(i,1),t-r<i-t?r:i},s.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},s.offset=function(e,t){return n(e=new Date((+e)),null==t?1:Math.floor(t)),e},s.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date((+r)),i=null==i?1:Math.floor(i),!(t<r&&i>0))return a;for(n(t,1),e(t),t<r&&a.push(new Date((+t)));n(t,i),e(t),t<r;)a.push(new Date((+t)));return a},s.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(s.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),Math.floor(r(i,a))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,a=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var s=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()}),l=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),u=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),c=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=n(0),d=n(1),h=n(2),p=n(3),g=n(4),m=n(5),v=n(6),y=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),b=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),_=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),E=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),x=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),S=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),T=r(0),w=r(1),A=r(2),C=r(3),k=r(4),O=r(5),I=r(6),M=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),N=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),D=o.range,L=s.range,$=l.range,R=u.range,P=c.range,F=f.range,U=d.range,j=h.range,H=p.range,z=g.range,B=m.range,q=v.range,Y=f.range,X=y.range,W=b.range,G=o,V=D,K=_.range,Z=E.range,Q=x.range,J=S.range,ee=T.range,te=w.range,ne=A.range,re=C.range,ie=k.range,ae=O.range,oe=I.range,se=T.range,le=M.range,ue=N.range,ce="0.1.1";e.version=ce,e.milliseconds=D,e.seconds=L,e.minutes=$,e.hours=R,e.days=P,e.sundays=F,e.mondays=U,e.tuesdays=j,e.wednesdays=H,e.thursdays=z,e.fridays=B,e.saturdays=q,e.weeks=Y,e.months=X,e.years=W,e.utcMillisecond=G,e.utcMilliseconds=V,e.utcSeconds=K,e.utcMinutes=Z,e.utcHours=Q,e.utcDays=J,e.utcSundays=ee,e.utcMondays=te,e.utcTuesdays=ne,e.utcWednesdays=re,e.utcThursdays=ie,e.utcFridays=ae,e.utcSaturdays=oe,e.utcWeeks=se,e.utcMonths=le,e.utcYears=ue,e.millisecond=o,e.second=s,e.minute=l,e.hour=u,e.day=c,e.sunday=f,e.monday=d,e.tuesday=h,e.wednesday=p,e.thursday=g,e.friday=m,e.saturday=v,e.week=f,e.month=y,e.year=b,e.utcSecond=_,e.utcMinute=E,e.utcHour=x,e.utcDay=S,e.utcSunday=T,e.utcMonday=w,e.utcTuesday=A,e.utcWednesday=C,e.utcThursday=k,e.utcFriday=O,e.utcSaturday=I,e.utcWeek=T,e.utcMonth=M,e.utcYear=N,e.interval=t})},{}],3:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,s,l,u,c,f=e.maxbins||15,d=e.base||10,h=Math.log(d),p=e.div||[5,2],g=e.min,m=e.max,v=m-g;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,v/f,0,e.steps.length))];else{for(n=Math.ceil(Math.log(f)/h),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(v)/h)-n));Math.ceil(v/t)>f;)t*=d;for(u=0;u<p.length;++u)l=t/p[u],l>=r&&v/l<=f&&(t=l)}return l=Math.log(t),s=l>=0?0:~~(-l/h)+1,c=Math.pow(d,-s-1),g=Math.min(g,Math.floor(g/t+c)*t),m=Math.ceil(m/t)*t,{start:g,stop:m,step:t,unit:{precision:s},value:a,index:o}}function i(e,t,n,r){for(;n<r;){var i=n+r>>>1;u.cmp(e[i],t)<0?n=i+1:r=i}return n}function a(e){return this.step*Math.floor(e/this.step+f)}function o(e){return Math.floor((e-this.start)/this.step+f)}function s(e){return this.unit.date(a.call(this,e))}function l(e){return o.call(this,this.unit.unit(e))}var u=e("../util"),c=e("../time"),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?c.utc:c,n=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,u=+i-+n,f=e.unit?t[e.unit]:t.find(u,o,a),d=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:a,minstep:f.minstep,steps:f.step});return d.unit=f,d.index=l,e.raw||(d.value=s),d},t.exports=r},{"../time":7,"../util":8}],4:[function(e,t,n){var r=e("./util"),i=t.exports;i.repeat=function(e,t){var n,r=Array(t);for(n=0;n<t;++n)r[n]=e;return r},i.zeros=function(e){return i.repeat(0,e)},i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(n<0)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},i.random={},i.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,r=function(){return e+n*Math.random()};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r>=e&&r<=t?1/n:0},r.cdf=function(r){return r<e?0:r>t?1:(r-e)/n},r.icdf=function(t){return t>=0&&t<=1?e+t*n:NaN},r},i.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,r=function(){return e+Math.floor(n*Math.random())};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r===Math.floor(r)&&r>=e&&r<t?1/n:0},r.cdf=function(r){var i=Math.floor(r);return i<e?0:i>=t?1:(i-e+1)/n},r.icdf=function(t){return t>=0&&t<=1?e-1+Math.floor(t*n):NaN},r},i.random.normal=function(e,t){e=e||0,t=t||1;var n,r=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,r=a*a+o*o;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(n){var r=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*r},r.cdf=function(n){var r,i=(n-e)/t,a=Math.abs(i);if(a>37)r=0;else{var o,s=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,r=s*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,r/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,r=s/o/2.506628274631)}return i>0?1-r:r},r.icdf=function(n){if(n<=0||n>=1)return NaN;var r=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,o=Math.log(1-r*r)/i,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+t*Math.SQRT2*s},r},i.random.bootstrap=function(e,t){var n=e.filter(r.isValid),a=n.length,o=t?i.random.normal(0,t):null,s=function(){return n[~~(Math.random()*a)]+(o?o():0)};return s.samples=function(e){return i.zeros(e).map(s)},s}},{"./util":8}],5:[function(e,t,n){function r(e,t){return t?void(e[u]=t):e&&e[u]||null}function i(e,t){e=l.array(e),t=l.$(t);var n,r,i;if(e[u]&&(n=t(e[u]),l.isString(n)))return n;for(r=0,i=e.length;!l.isValid(n)&&r<i;++r)n=t?t(e[r]):e[r];return l.isDate(n)?"date":l.isNumber(n)?"number":l.isBoolean(n)?"boolean":l.isString(n)?"string":null}function a(e,t){if(e.length)return t=t||l.keys(e[0]),t.reduce(function(t,n){return t[n]=i(e,n),t},{})}function o(e,t){e=l.array(e),t=l.$(t);var n,r,i,a=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(i=t?t(e[n]):e[n],r=0;r<a.length;++r)l.isValid(i)&&!f[a[r]](i)&&(a.splice(r,1),r-=1);if(0===a.length)return"string"}return a[0]}function s(e,t){return t=t||l.keys(e[0]),t.reduce(function(t,n){return t[n]=o(e,n),t},{})}var l=e("../util"),u="__types__",c={"boolean":l["boolean"],integer:l.number,number:l.number,date:l.date,string:function(e){return""===e?null:e}},f={"boolean":function(e){return"true"===e||"false"===e||l.isBoolean(e)},integer:function(e){return f.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!l.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};i.annotation=r,i.all=a,i.infer=o,i.inferAll=s,i.parsers=c,t.exports=i},{"../util":8}],6:[function(e,t,n){function r(e,t,n){var r=e&&e.nullh||0,i=l.random.normal(0,1),a=u.mean(t,n),o=u.stdev(t,n)/Math.sqrt(u.count.valid(t,n));if(0===o)return a-r===0?1:0;var s=(a-r)/o;return 2*i.cdf(-Math.abs(s))}function i(e,t,n,r){var i,a=r?t.map(o.$(n)):t,s=r?t.map(o.$(r)):n,l=u.count(a),c=u.count(s),f=Array();if(l!==c)throw Error("Array lengths must match.");for(i=0;i<l;++i)o.isValid(a[i])&&o.isValid(s[i])&&f.push(a[i]-s[i]);return u.z.test(f,e&&e.nullh||0)}function a(e,t,n,r){var i=r?t.map(o.$(n)):t,a=r?t.map(o.$(r)):n,s=u.count.valid(i),c=u.count.valid(a),f=l.random.normal(0,1),d=u.mean(i)-u.mean(a)-(e&&e.nullh||0),h=Math.sqrt(u.variance(i)/s+u.variance(a)/c);if(0===h)return 0===d?1:0;var p=d/h;return 2*f.cdf(-Math.abs(p))}var o=e("./util"),s=e("./import/type"),l=e("./generate"),u=t.exports;u.unique=function(e,t,n){t=o.$(t),n=n||[];var r,i,a,s={};for(i=0,a=e.length;i<a;++i)r=t?t(e[i]):e[i],r in s||(s[r]=1,n.push(r));return n},u.count=function(e){return e&&e.length||0},u.count.valid=function(e,t){t=o.$(t);var n,r,i,a=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],o.isValid(n)&&(a+=1);return a},u.count.missing=function(e,t){t=o.$(t);var n,r,i,a=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],null==n&&(a+=1);return a},u.count.distinct=function(e,t){t=o.$(t);var n,r,i,a={},s=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],n in a||(a[n]=1,s+=1);return s},u.count.map=function(e,t){t=o.$(t);var n,r,i,a={};for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],a[n]=n in a?a[n]+1:1;return a},u.median=function(e,t){return t&&(e=e.map(o.$(t))),e=e.filter(o.isValid).sort(o.cmp),u.quantile(e,.5)},u.quartile=function(e,t){t&&(e=e.map(o.$(t))),e=e.filter(o.isValid).sort(o.cmp);var n=u.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},u.quantile=function(e,t,n){void 0===n&&(n=t,t=o.identity),t=o.$(t);var r=(e.length-1)*n+1,i=Math.floor(r),a=+t(e[i-1]),s=r-i;return s?a+s*(t(e[i])-a):a},u.sum=function(e,t){t=o.$(t);for(var n,r=0,i=0,a=e.length;i<a;++i)n=t?t(e[i]):e[i],o.isValid(n)&&(r+=n);return r},u.mean=function(e,t){t=o.$(t);var n,r,i,a,s,l=0;for(r=0,a=0,i=e.length;r<i;++r)s=t?t(e[r]):e[r],o.isValid(s)&&(n=s-l,l+=n/++a);return l},u.mean.geometric=function(e,t){t=o.$(t);var n,r,i,a,s=1;for(a=0,n=0,r=e.length;a<r;++a)if(i=t?t(e[a]):e[a],o.isValid(i)){if(i<=0)throw Error("Geometric mean only defined for positive values.");s*=i,++n}return s=n>0?Math.pow(s,1/n):0},u.mean.harmonic=function(e,t){t=o.$(t);var n,r,i,a,s=0;for(a=0,n=0,r=e.length;a<r;++a)i=t?t(e[a]):e[a],o.isValid(i)&&(s+=1/i,++n);return n/s},u.variance=function(e,t){if(t=o.$(t),!o.isArray(e)||e.length<2)return 0;var n,r,i,a,s=0,l=0;for(r=0,i=0;r<e.length;++r)a=t?t(e[r]):e[r],o.isValid(a)&&(n=a-s,s+=n/++i,l+=n*(a-s));return l/=i-1},u.stdev=function(e,t){return Math.sqrt(u.variance(e,t))},u.modeskew=function(e,t){var n=u.mean(e,t),r=u.median(e,t),i=u.stdev(e,t);return 0===i?0:(n-r)/i},u.min=function(e,t){return u.extent(e,t)[0]},u.max=function(e,t){return u.extent(e,t)[1]},u.extent=function(e,t){t=o.$(t);var n,r,i,a,s=e.length;for(a=0;a<s;++a)if(i=t?t(e[a]):e[a],o.isValid(i)){n=r=i;break}for(;a<s;++a)i=t?t(e[a]):e[a],o.isValid(i)&&(i<n&&(n=i),i>r&&(r=i));return[n,r]},u.extent.index=function(e,t){t=o.$(t);var n,r,i,a,s=-1,l=-1,u=e.length;for(a=0;a<u;++a)if(i=t?t(e[a]):e[a],o.isValid(i)){n=r=i,s=l=a;break}for(;a<u;++a)i=t?t(e[a]):e[a],o.isValid(i)&&(i<n&&(n=i,s=a),i>r&&(r=i,l=a));return[s,l]},u.dot=function(e,t,n){var r,i,a=0;if(n)for(t=o.$(t),n=o.$(n),r=0;r<e.length;++r)i=t(e[r])*n(e[r]),i===i&&(a+=i);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(r=0;r<e.length;++r)i=e[r]*t[r],i===i&&(a+=i)}return a},u.dist=function(e,t,n,r){var i,a,s=o.isFunction(n)||o.isString(n),l=e,u=s?e:t,c=s?r:n,f=2===c||null==c,d=e.length,h=0;for(s&&(t=o.$(t),n=o.$(n)),a=0;a<d;++a)i=s?t(l[a])-n(u[a]):l[a]-u[a],h+=f?i*i:Math.pow(Math.abs(i),c);return f?Math.sqrt(h):Math.pow(h,1/c)},u.cohensd=function(e,t,n){var r=n?e.map(o.$(t)):e,i=n?e.map(o.$(n)):t,a=u.mean(r),s=u.mean(i),l=u.count.valid(r),c=u.count.valid(i);if(l+c-2<=0)return 0;var f=u.variance(r),d=u.variance(i),h=Math.sqrt(((l-1)*f+(c-1)*d)/(l+c-2));return 0===h?0:(a-s)/h},u.covariance=function(e,t,n){var r,i,a,s,l,c=n?e.map(o.$(t)):e,f=n?e.map(o.$(n)):t,d=c.length,h=u.mean(c),p=u.mean(f),g=0,m=0;if(d!==f.length)throw Error("Input lengths must match.");for(r=0;r<d;++r)if(i=c[r],s=o.isValid(i),a=f[r],l=o.isValid(a),s&&l)g+=(i-h)*(a-p),++m;else if(s||l)throw Error("Valid values must align.");return g/(m-1)},u.rank=function(e,t){t=o.$(t)||o.identity;var n,r,i,a=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(o.comparator("val")),s=e.length,l=Array(s),u=-1,c={};for(n=0;n<s;++n){if(r=a[n].val,u<0&&c===r)u=n-1;else if(u>-1&&c!==r){for(i=1+(n-1+u)/2;u<n;++u)l[a[u].idx]=i;u=-1}l[a[n].idx]=n+1,c=r}if(u>-1)for(i=1+(s-1+u)/2;u<s;++u)l[a[u].idx]=i;return l},u.cor=function(e,t,n){var r=n;n=r?e.map(o.$(n)):t,t=r?e.map(o.$(t)):e;var i=u.dot(t,n),a=u.mean(t),s=u.mean(n),l=u.stdev(t),c=u.stdev(n),f=e.length;return(i-f*a*s)/((f-1)*l*c)},u.cor.rank=function(e,t,n){var r,i,a,o=n?u.rank(e,t):u.rank(e),s=n?u.rank(e,n):u.rank(t),l=e.length;for(r=0,i=0;r<l;++r)a=o[r]-s[r],i+=a*a;return 1-6*i/(l*(l*l-1))},u.cor.dist=function(e,t,n){var r,i,a,s,l=n?e.map(o.$(t)):e,c=n?e.map(o.$(n)):t,f=u.dist.mat(l),d=u.dist.mat(c),h=f.length;for(r=0,i=0,a=0,s=0;r<h;++r)i+=f[r]*f[r],a+=d[r]*d[r],s+=f[r]*d[r];return Math.sqrt(s/Math.sqrt(i*a))},u.linearRegression=function(e,t,n){var r,i,a=n?e.map(o.$(t)):e,s=n?e.map(o.$(n)):t,l=a.length,c=u.covariance(a,s),f=u.stdev(a),d=u.stdev(s),h=c/(f*f),p=u.mean(s)-h*u.mean(a),g={slope:h,intercept:p,R:c/(f*d),rss:0};for(i=0;i<l;++i)o.isValid(a[i])&&o.isValid(s[i])&&(r=h*a[i]+p-s[i],g.rss+=r*r);return g},u.bootstrap={},u.bootstrap.ci=function(e,t,n,r,i){var a,s,c,f,d,h,p;for(o.isFunction(t)||o.isString(t)?(a=e.map(o.$(t)),s=n,c=r,f=i):(a=e,s=t,c=n,f=r),s=s?+s:1e3,c=c||.05,d=l.random.bootstrap(a,f),p=0,h=Array(s);p<s;++p)h[p]=u.mean(d.samples(a.length));return h.sort(o.numcmp),[u.quantile(h,c/2),u.quantile(h,1-c/2)]},u.z={},u.z.ci=function(e,t,n){var r=e,i=t;(o.isFunction(t)||o.isString(t))&&(r=e.map(o.$(t)),i=n),i=i||.05;var a=.05===i?1.96:l.random.normal(0,1).icdf(1-i/2),s=u.mean(r),c=u.stdev(r)/Math.sqrt(u.count.valid(r));return[s-a*c,s+a*c]},u.z.test=function(e,t,n,s){return o.isFunction(n)||o.isString(n)?(s&&s.paired?i:a)(s,e,t,n):o.isArray(t)?(n&&n.paired?i:a)(n,e,t):o.isFunction(t)||o.isString(t)?r(n,e,t):r(t,e)},u.dist.mat=function(e){var t,n,r,i=e.length,a=i*i,o=Array(a),s=l.zeros(i),u=0;for(n=0;n<i;++n)for(o[n*i+n]=0,r=n+1;r<i;++r)o[n*i+r]=t=Math.abs(e[n]-e[r]),o[r*i+n]=t,s[n]+=t,s[r]+=t;for(n=0;n<i;++n)u+=s[n],s[n]/=i;for(u/=a,n=0;n<i;++n)for(r=n;r<i;++r)o[n*i+r]+=u-s[n]-s[r],o[r*i+n]=o[n*i+r];return o},u.entropy=function(e,t){t=o.$(t);var n,r,i=0,a=0,s=e.length;for(n=0;n<s;++n)i+=t?t(e[n]):e[n];if(0===i)return 0;for(n=0;n<s;++n)r=(t?t(e[n]):e[n])/i,r&&(a+=r*Math.log(r));return-a/Math.LN2},u.mutual=function(e,t,n,r){var i,a,s,l=r?e.map(o.$(t)):e,u=r?e.map(o.$(n)):t,c=r?e.map(o.$(r)):n,f={},d={},h=c.length,p=0,g=0,m=0;for(s=0;s<h;++s)f[l[s]]=0,d[u[s]]=0;for(s=0;s<h;++s)f[l[s]]+=c[s],d[u[s]]+=c[s],p+=c[s];for(a=1/(p*Math.LN2),s=0;s<h;++s)0!==c[s]&&(i=p*c[s]/(f[l[s]]*d[u[s]]),g+=c[s]*a*Math.log(i),m+=c[s]*a*Math.log(c[s]/p));return[g,1+g/m]},u.mutual.info=function(e,t,n,r){return u.mutual(e,t,n,r)[0]},u.mutual.dist=function(e,t,n,r){return u.mutual(e,t,n,r)[1]},u.profile=function(e,t){var n,r,i,a,l,c=0,f=0,d=0,h=0,p=null,g=null,m=0,v=[],y={};for(i=0;i<e.length;++i)a=t?t(e[i]):e[i],y[a]=a in y?y[a]+1:(h+=1,1),null==a?++d:o.isValid(a)&&(l="string"==typeof a?a.length:a,(null===p||l<p)&&(p=l),(null===g||l>g)&&(g=l),n=l-c,c+=n/++f,m+=n*(l-c),v.push(l));return m/=f-1,r=Math.sqrt(m),v.sort(o.cmp),{type:s(e,t),unique:y,count:e.length,valid:f,missing:d,distinct:h,min:p,max:g,mean:c,stdev:r,median:a=u.quantile(v,.5),q1:u.quantile(v,.25),q3:u.quantile(v,.75),modeskew:0===r?0:(c-a)/r}},u.summary=function(e,t){t=t||o.keys(e[0]);var n=t.map(function(t){var n=u.profile(e,o.$(t));return n.field=t,n});return n.__summary__=!0,n}},{"./generate":4,"./import/type":5,"./util":8}],7:[function(e,t,n){function r(e){return u.setTime(+e),u}function i(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,t,n,r,a,o){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,a,o)}function o(e,t,n,r){var i,a,o,s=p[0];for(i=1,a=p.length;i<a;++i)if(s=p[i],t>s[0]){if(o=t/s[0],o>r)return e[p[i-1][1]];if(o>=n)return e[s[1]]}return e[p[a-1][1]]}function s(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return o(e,t,n,r)},r}var l=e("d3-time"),u=new Date,c=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),d=[a("second",l.second,c),a("minute",l.minute,c),a("hour",l.hour,c),a("day",l.day,c,[1,7]),a("month",l.month,c,[1,3,6]),a("year",l.year,c),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],h=[a("second",l.utcSecond,f),a("minute",l.utcMinute,f),a("hour",l.utcHour,f),a("day",l.utcDay,f,[1,7]),a("month",l.utcMonth,f,[1,3,6]),a("year",l.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],p=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=s(d),t.exports.utc=s(h)},{"d3-time":2}],8:[function(e,t,n){(function(e){function n(e,t){var n,r="";for(n=0;n<e;++n)r+=t;return r}function r(e,t,n){var r=0,i=e.split(l);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,r<=t}).reverse():i.filter(function(e){return r+=e.length,r<=t}),e.length?e.join("").trim():i[0].slice(0,t)}var i=t.exports,a="__name__";i.namedfunc=function(e,t){return t[a]=e,t},i.name=function(e){return null==e?null:e[a]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.toMap=function(e,t){return(t=i.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},i.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;r<t;++r)n+="|"+String(e[r]);return n};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof e&&e.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"!==e&&!!e},i.date=function(e,t){var n=t?t:Date;return null==e||""===e?null:n.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var s=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(s).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var t;return i.isString(e)&&(t=i.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},i.$func=function(e,t){return function(n){n=i.$(n)||i.identity;var r=e+(i.name(n)?"_"+i.name(n):"");return i.namedfunc(r,function(e){return t(n(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,t){e=i.$(e);var n=i.isArray(t)?i.toMap(t):t;return function(t){return!!n[e(t)]}},i.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),i.accessor(e)}),function(n,r){var i,a,o,s,l;for(i=0,a=e.length;i<a;++i){if(o=e[i],s=o(n),l=o(r),s<l)return-1*t[i];if(s>l)return t[i]}return 0}},i.cmp=function(e,t){return e<t?-1:e>t?1:e>=t?0:null===e?-1:null===t?1:NaN},i.numcmp=function(e,t){return e-t},i.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return a<o?-1:a>o?1:r[n(e)]-r[n(i)]}),e},i.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},i.pad=function(e,t,r,i){i=i||" ";var a=t-e.length;if(a<=0)return e;switch(r){case"left":return n(a,i)+e;case"middle":case"center":return n(Math.floor(a/2),i)+e+n(Math.ceil(a/2),i);default:return e+n(a,i)}},i.truncate=function(e,t,n,i,a){var o=e.length;if(o<=t)return e;a=void 0!==a?String(a):"…";var s=Math.max(0,t-a.length);switch(n){case"left":return a+(i?r(e,s,1):e.slice(o-s));case"middle":case"center":var l=Math.ceil(s/2),u=Math.floor(s/2);return(i?r(e,l):e.slice(0,l))+a+(i?r(e,u,1):e.slice(o-u));default:return(i?r(e,s):e.slice(0,s))+a}};var l=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:1}],9:[function(e,t,n){"use strict";var r=e("vega-lite/src/channel"),i=e("vega-lite/src/aggregate"),a=e("vega-lite/src/mark"),o=e("vega-lite/src/scale"),s=e("vega-lite/src/sort"),l=e("vega-lite/src/timeunit"),u=e("vega-lite/src/type"),c=e("./property");n.DEFAULT_QUERY_CONFIG={verbose:!1,defaultSpecConfig:{overlay:{line:!0},scale:{useRawDomain:!0}},propertyPrecedence:c.DEFAULT_PROPERTY_PRECEDENCE,marks:[a.Mark.TICK,a.Mark.BAR,a.Mark.POINT,a.Mark.AREA,a.Mark.BOXPLOT,a.Mark.SCATTER3D,a.Mark.HEXAGON,a.Mark.CONTOUR],channels:[r.X,r.Y,r.ROW,r.COLUMN,r.SIZE,r.COLOR],aggregates:[void 0,i.AggregateOp.MEAN],timeUnits:[void 0,l.TimeUnit.YEAR,l.TimeUnit.MONTH,l.TimeUnit.DATE,l.TimeUnit.MINUTES,l.TimeUnit.SECONDS],types:[u.Type.NOMINAL,u.Type.ORDINAL,u.Type.QUANTITATIVE,u.Type.TEMPORAL],maxBinsList:[5,10,20],axisAxisColors:[void 0],axisAxisWidths:[void 0],axisLayers:["front","back"],axisOffsets:[void 0],axisOrients:[void 0],axisGridColors:[void 0],axisGridDashes:[void 0],axisGridOpacities:[void 0],axisGridWidths:[void 0],axisFormats:[void 0],axisLabelAngles:[void 0],axisLabelMaxLengths:[void 0],axisSubDivides:[void 0],axisTicks:[void 0],axisTickColors:[void 0],axisTickLabelColors:[void 0],axisTickLabelFonts:[void 0],axisTickLabelFontSizes:[void 0],axisTickPaddings:[void 0],axisTickSizes:[void 0],axisTickSizeMajors:[void 0],axisTickSizeMinors:[void 0],axisTickSizeEnds:[void 0],axisTickWidths:[void 0],axisValuesList:[void 0],axisTitles:[void 0],axisTitleColors:[void 0],axisTitleFonts:[void 0],axisTitleFontWeights:[void 0],axisTitleFontSizes:[void 0],axisTitleOffsets:[void 0],axisTitleMaxLengths:[void 0],axisCharacterWidths:[void 0],legendOrients:["left","right"],legendOffsets:[void 0],legendValuesList:[void 0],legendFormats:[void 0],legendLabelAligns:[void 0],legendLabelBaselines:[void 0],legendLabelColors:[void 0],legendLabelFonts:[void 0],legendLabelFontSizes:[void 0],legendSymbolColors:[void 0],legendSymbolShapes:[void 0],legendSymbolSizes:[void 0],legendSymbolStrokeWidths:[void 0],legendTitles:[void 0],legendTitleColors:[void 0],legendTitleFonts:[void 0],legendTitleFontSizes:[void 0],legendTitleFontWeights:[void 0],sorts:[s.SortOrder.ASCENDING,s.SortOrder.DESCENDING],sortOps:[i.AggregateOp.MIN,i.AggregateOp.MEAN],sortOrders:[s.SortOrder.ASCENDING,s.SortOrder.DESCENDING],scaleBandSizes:[17,21],scaleDomains:[void 0],scaleExponents:[1],scaleRanges:[void 0],scaleTypes:[void 0,o.ScaleType.LOG],numberNominalProportion:.05,numberNominalLimit:40,constraintManuallySpecifiedValue:!1,autoAddCount:!1,hasAppropriateGraphicTypeForMark:!0,omitAggregate:!1,omitAggregatePlotWithDimensionOnlyOnFacet:!0,omitAggregatePlotWithoutDimension:!1,omitBarLineAreaWithOcclusion:!0,omitBarTickWithSize:!0,omitMultipleNonPositionalChannels:!0,omitNonSumStack:!0,omitRaw:!1,omitRawContinuousFieldForAggregatePlot:!0,omitRepeatedField:!0,omitNonPositionalOrFacetOverPositionalChannels:!0,omitTableWithOcclusionIfAutoAddCount:!0,omitVerticalDotPlot:!1,preferredBinAxis:r.Channel.X,preferredTemporalAxis:r.Channel.X,preferredOrdinalAxis:r.Channel.Y,preferredNominalAxis:r.Channel.Y,preferredFacet:r.Channel.ROW,maxCardinalityForCategoricalColor:20,maxCardinalityForFacet:20,maxCardinalityForShape:6,timeUnitShouldHaveVariation:!0,typeMatchesSchemaType:!0,stylize:!0,smallBandSizeForHighCardinalityOrFacet:{maxCardinality:10,bandSize:12},nominalColorScaleForHighCardinality:{maxCardinality:10,palette:"category20"},xAxisOnTopForHighYCardinalityWithoutColumn:{maxCardinality:30},maxGoodCardinalityForFacet:5,maxGoodCardinalityForColor:7}},{"./property":21,"vega-lite/src/aggregate":43,"vega-lite/src/channel":46,"vega-lite/src/mark":49,"vega-lite/src/scale":50,"vega-lite/src/sort":51,"vega-lite/src/timeunit":53,"vega-lite/src/type":54}],10:[function(e,t,n){"use strict";var r=function(){function e(e){this.constraint=e}return e.prototype.name=function(){return this.constraint.name},e.prototype.description=function(){return this.constraint.description},e.prototype.properties=function(){return this.constraint.properties},e.prototype.strict=function(){return this.constraint.strict},e}();n.AbstractConstraintModel=r},{}],11:[function(e,t,n){"use strict";var r=e("./encoding"),i=e("./spec");n.encoding=r,n.spec=i},{"./encoding":12,"./spec":13}],12:[function(e,t,n){"use strict";function r(e,t,r,i,a,o){for(var s=n.ENCODING_CONSTRAINTS_BY_PROPERTY[e]||[],l=i.getEncodingQueryByIndex(r),u=0;u<s.length;u++){var c=s[u];if(c.strict()||o[c.name()]){var f=c.satisfy(l,a,i.enumSpecIndex.encodings[r],o);if(!f){var d="(enc) "+c.name();return o.verbose&&console.log(d+" failed with "+i.toShorthand()+" for "+t.name),d}}}return null}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("vega-lite/src/aggregate"),o=e("vega-lite/src/channel"),s=e("vega-lite/src/scale"),l=e("vega-lite/src/type"),u=e("./base"),c=e("../property"),f=e("../enumspec"),d=e("../schema"),h=e("../util"),p=e("../query/encoding"),g=function(e){function t(t){e.call(this,t)}return i(t,e),t.prototype.hasAllRequiredPropertiesSpecific=function(e){return h.every(this.constraint.properties,function(t){var n=c.getNestedEncodingProperty(t);if(n){var r=n.parent,i=n.child;return!e[r]||!f.isEnumSpec(e[r][i])}return!e[t]||!f.isEnumSpec(e[t])})},t.prototype.satisfy=function(e,t,n,r){
return!this.constraint.allowEnumSpecForProperties&&!this.hasAllRequiredPropertiesSpecific(e)||this.constraint.satisfy(e,t,n,r)},t}(u.AbstractConstraintModel);n.EncodingConstraintModel=g,n.ENCODING_CONSTRAINTS=[{name:"aggregateOpSupportedByType",description:"Aggregate function should be supported by data type.",properties:[c.Property.TYPE,c.Property.AGGREGATE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n,r){return!e.aggregate||e.type!==l.Type.ORDINAL&&e.type!==l.Type.NOMINAL}},{name:"asteriskFieldWithCountOnly",description:'Field="*" should be disallowed except aggregate="count"',properties:[c.Property.FIELD,c.Property.AGGREGATE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n,r){return"*"===e.field==(e.aggregate===a.AggregateOp.COUNT)}},{name:"binAppliedForQuantitative",description:"bin should be applied to quantitative field only.",properties:[c.Property.TYPE,c.Property.BIN],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n,r){return!e.bin||e.type===l.Type.QUANTITATIVE}},{name:"channelSupportsRole",description:"encoding channel should support the role of the field",properties:[c.Property.CHANNEL,c.Property.TYPE,c.Property.BIN,c.Property.TIMEUNIT],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,t,n,r){if(f.isEnumSpec(e.channel))return!0;if(!n.channel&&!r.constraintManuallySpecifiedValue)return!0;var i=o.getSupportedRole(e.channel);return p.isDimension(e)?i.dimension:!p.isMeasure(e)||i.measure}},{name:"hasFn",description:"A field with as hasFn flag should have one of aggregate, timeUnit, or bin.",properties:[c.Property.AGGREGATE,c.Property.BIN,c.Property.TIMEUNIT],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,t,n,r){return!e.hasFn||(!!e.aggregate||!!e.bin||!!e.timeUnit)}},{name:"omitScaleZeroWithBinnedField",description:"Do not use scale zero with binned field",properties:[c.Property.SCALE,c.Property.SCALE_ZERO,c.Property.BIN],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n,r){return!e.bin||!e.scale||e.scale.zero!==!0}},{name:"onlyOneTypeOfFunction",description:"Only of of aggregate, autoCount, timeUnit, or bin should be applied at the same time.",properties:[c.Property.AGGREGATE,c.Property.AUTOCOUNT,c.Property.TIMEUNIT,c.Property.BIN],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,t,n,r){var i=(!f.isEnumSpec(e.aggregate)&&e.aggregate?1:0)+(!f.isEnumSpec(e.autoCount)&&e.autoCount?1:0)+(!f.isEnumSpec(e.bin)&&e.bin?1:0)+(!f.isEnumSpec(e.timeUnit)&&e.timeUnit?1:0);return i<=1}},{name:"timeUnitAppliedForTemporal",description:"Time unit should be applied to temporal field only.",properties:[c.Property.TYPE,c.Property.TIMEUNIT],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n,r){return!e.timeUnit||e.type===l.Type.TEMPORAL}},{name:"timeUnitShouldHaveVariation",description:"A particular time unit should be applied only if they produce unique values.",properties:[c.Property.TIMEUNIT,c.Property.TYPE],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n,r){return!e.timeUnit||e.type!==l.Type.TEMPORAL||(!n.timeUnit&&!r.constraintManuallySpecifiedValue||t.timeUnitHasVariation(e))}},{name:"scalePropertiesSupportedByScaleType",description:"Scale properties must be supported by correct scale type",properties:c.SCALE_PROPERTIES.concat([c.Property.SCALE,c.Property.TYPE]),allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,t,n,r){if(e.scale){var i=e.scale,a=p.scaleType(e);if(void 0===a)return!0;for(var o in i)if(c.SUPPORTED_SCALE_PROPERTY_INDEX[o]&&!h.contains(c.SUPPORTED_SCALE_PROPERTY_INDEX[o],a))return!1}return!0}},{name:"typeMatchesPrimitiveType",description:"Data type should be supported by field's primitive type.",properties:[c.Property.FIELD,c.Property.TYPE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n,r){if("*"===e.field)return!0;var i=t.primitiveType(e.field),a=e.type;if(!n.field&&!n.type&&!r.constraintManuallySpecifiedValue)return!0;switch(i){case d.PrimitiveType.BOOLEAN:case d.PrimitiveType.STRING:return a!==l.Type.QUANTITATIVE&&a!==l.Type.TEMPORAL;case d.PrimitiveType.NUMBER:case d.PrimitiveType.INTEGER:return a!==l.Type.TEMPORAL;case d.PrimitiveType.DATE:return a===l.Type.TEMPORAL;case null:return!1}throw new Error("Not implemented")}},{name:"typeMatchesSchemaType",description:"Enumerated data type of a field should match the field's type in the schema.",properties:[c.Property.FIELD,c.Property.TYPE],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n,r){return!(n.field||n.type||r.constraintManuallySpecifiedValue)||("*"===e.field?e.type===l.Type.QUANTITATIVE:t.type(e.field)===e.type)}},{name:"maxCardinalityForCategoricalColor",description:"Categorical channel should not have too high cardinality",properties:[c.Property.CHANNEL,c.Property.FIELD],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n,r){return e.channel!==o.Channel.COLOR||e.type!==l.Type.NOMINAL||t.cardinality(e)<=r.maxCardinalityForCategoricalColor}},{name:"maxCardinalityForFacet",description:"Row/column channel should not have too high cardinality",properties:[c.Property.CHANNEL,c.Property.FIELD,c.Property.BIN,c.Property.TIMEUNIT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n,r){return e.channel!==o.Channel.ROW&&e.channel!==o.Channel.COLUMN||t.cardinality(e)<=r.maxCardinalityForFacet}},{name:"maxCardinalityForShape",description:"Shape channel should not have too high cardinality",properties:[c.Property.CHANNEL,c.Property.FIELD,c.Property.BIN,c.Property.TIMEUNIT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n,r){return e.channel!==o.Channel.SHAPE||t.cardinality(e)<=r.maxCardinalityForShape}},{name:"dataTypeAndFunctionMatchScaleType",description:"Scale type must match data type",properties:[c.Property.TYPE,c.Property.SCALE,c.Property.SCALE_TYPE,c.Property.TIMEUNIT,c.Property.BIN],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n,r){if(e.scale){var i=e.type,a=p.scaleType(e);if(h.contains([l.Type.ORDINAL,l.Type.NOMINAL],i))return h.contains([s.ScaleType.ORDINAL,void 0],a);if(i===l.Type.TEMPORAL)return e.timeUnit?h.contains([s.ScaleType.TIME,s.ScaleType.UTC,s.ScaleType.ORDINAL,void 0],a):h.contains([s.ScaleType.TIME,s.ScaleType.UTC,void 0],a);if(i===l.Type.QUANTITATIVE)return e.bin?h.contains([s.ScaleType.LINEAR,void 0],a):h.contains([s.ScaleType.LOG,s.ScaleType.POW,s.ScaleType.SQRT,s.ScaleType.QUANTILE,s.ScaleType.QUANTIZE,s.ScaleType.LINEAR,void 0],a)}return!0}}].map(function(e){return new g(e)}),n.ENCODING_CONSTRAINT_INDEX=n.ENCODING_CONSTRAINTS.reduce(function(e,t){return e[t.name()]=t,e},{}),n.ENCODING_CONSTRAINTS_BY_PROPERTY=n.ENCODING_CONSTRAINTS.reduce(function(e,t){return t.properties().forEach(function(n){e[n]=e[n]||[],e[n].push(t)}),e},{}),n.checkEncoding=r},{"../enumspec":16,"../property":21,"../query/encoding":22,"../schema":35,"../util":37,"./base":10,"vega-lite/src/aggregate":43,"vega-lite/src/channel":46,"vega-lite/src/scale":50,"vega-lite/src/type":54}],13:[function(e,t,n){"use strict";function r(e,t,r,i,a){for(var o=n.SPEC_CONSTRAINTS_BY_PROPERTY[e]||[],s=0;s<o.length;s++){var l=o[s];if(l.strict()||a[l.name()]){var u=l.satisfy(r,i,a);if(!u){var c="(spec) "+l.name();return a.verbose&&console.log(c+" failed with "+r.toShorthand()+" for "+t.name),c}}}return null}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=e("vega-lite/src/aggregate"),o=e("vega-lite/src/channel"),s=e("vega-lite/src/mark"),l=e("vega-lite/src/scale"),u=e("vega-lite/src/type"),c=e("./base"),f=e("../enumspec"),d=e("../property"),h=e("../query/encoding"),p=e("../util"),g=e("../query/encoding"),m=o.NONSPATIAL_CHANNELS.reduce(function(e,t){return e[t]=!0,e},{}),v=function(e){function t(t){e.call(this,t)}return i(t,e),t.prototype.hasAllRequiredPropertiesSpecific=function(e){return p.every(this.constraint.properties,function(t){if(t===d.Property.MARK)return!f.isEnumSpec(e.getMark());var n=d.getNestedEncodingProperty(t);if(n){var r=n.parent,i=n.child;return p.every(e.getEncodings(),function(e){return!e[r]||!f.isEnumSpec(e[r][i])})}if(!d.isEncodingProperty(t))throw new Error("UNIMPLEMENTED");return p.every(e.getEncodings(),function(e){return!e[t]||!f.isEnumSpec(e[t])})})},t.prototype.satisfy=function(e,t,n){return!this.constraint.allowEnumSpecForProperties&&!this.hasAllRequiredPropertiesSpecific(e)||this.constraint.satisfy(e,t,n)},t}(c.AbstractConstraintModel);n.SpecConstraintModel=v,n.SPEC_CONSTRAINTS=[{name:"noRepeatedChannel",description:"Each encoding channel should only be used once.",properties:[d.Property.CHANNEL],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,t,n){var r={};return p.every(e.getEncodings(),function(e){return!!f.isEnumSpec(e.channel)||!r[e.channel]&&(r[e.channel]=!0,!0)})}},{name:"alwaysIncludeZeroInScaleWithBarMark",description:"Do not recommend bar mark if scale does not start at zero",properties:[d.Property.MARK,d.Property.SCALE,d.Property.SCALE_ZERO,d.Property.CHANNEL,d.Property.TYPE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n){var r=e.getMark(),i=e.getEncodings();if(r===s.Mark.BAR)for(var a=0,l=i;a<l.length;a++){var c=l[a];if((c.channel===o.Channel.X||c.channel===o.Channel.Y)&&c.type===u.Type.QUANTITATIVE&&c.scale&&c.scale.zero===!1)return!1}return!0}},{name:"autoAddCount",description:"Automatically adding count only for plots with only ordinal, binned quantitative, or temporal with timeunit fields.",properties:[d.Property.BIN,d.Property.TIMEUNIT,d.Property.TYPE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,t,n){var r=p.some(e.getEncodings(),function(e){return e.autoCount===!0});if(r)return p.every(e.getEncodings(),function(e){if(void 0!==e.autoCount)return!0;switch(e.type){case u.Type.QUANTITATIVE:return!!e.bin;case u.Type.TEMPORAL:return!!e.timeUnit;case u.Type.ORDINAL:case u.Type.NOMINAL:return!0}throw new Error("Unsupported Type")});var i=p.every(e.enumSpecIndex.encodingIndicesByProperty.autoCount,function(t){return!f.isEnumSpec(e.getEncodingQueryByIndex(t).autoCount)});return!i||p.some(e.getEncodings(),function(e){return e.type===u.Type.QUANTITATIVE?e.autoCount!==!1&&(!e.bin||f.isEnumSpec(e.bin)):e.type===u.Type.TEMPORAL&&(!e.timeUnit||f.isEnumSpec(e.timeUnit))})}},{name:"channelPermittedByMarkType",description:"Each encoding channel should be supported by the mark type",properties:[d.Property.CHANNEL,d.Property.MARK],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,t,n){var r=e.getMark();return!!f.isEnumSpec(r)||p.every(e.getEncodings(),function(e){return!!f.isEnumSpec(e.channel)||o.supportMark(e.channel,r)})}},{name:"hasAllRequiredChannelsForMark",description:"All required channels for the specified mark should be specified",properties:[d.Property.CHANNEL,d.Property.MARK],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n){var r=e.getMark();switch(r){case s.Mark.AREA:case s.Mark.CONTOUR:case s.Mark.LINE:case s.Mark.HEXAGON:case s.Mark.LEADER:return e.channelUsed(o.Channel.X)&&e.channelUsed(o.Channel.Y);case s.Mark.TEXT:return e.channelUsed(o.Channel.TEXT);case s.Mark.BAR:case s.Mark.BOXPLOT:case s.Mark.CIRCLE:case s.Mark.SQUARE:case s.Mark.TICK:case s.Mark.RULE:return e.channelUsed(o.Channel.X)||e.channelUsed(o.Channel.Y);case s.Mark.POINT:return!e.enumSpecIndex.hasProperty(d.Property.CHANNEL)||e.channelUsed(o.Channel.X)||e.channelUsed(o.Channel.Y);case s.Mark.SCATTER3D:case s.Mark.RADAR:return e.channelUsed(o.Channel.X)&&e.channelUsed(o.Channel.Y)&&e.channelUsed(o.Channel.COLUMN)}throw new Error("hasAllRequiredChannelsForMark not implemented for mark"+r)}},{name:"omitAggregate",description:"Omit aggregate plots.",properties:[d.Property.AGGREGATE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,t,n){return!e.isAggregate()}},{name:"omitAggregatePlotWithDimensionOnlyOnFacet",description:"All required channels for the specified mark should be specified",properties:[d.Property.CHANNEL,d.Property.AGGREGATE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n){if(e.isAggregate()){var r=!1,i=!1,a=!1;if(e.specQuery.encodings.forEach(function(t,n){t.autoCount!==!1&&(t.aggregate||t.autoCount||(i=!0,p.contains([o.Channel.ROW,o.Channel.COLUMN],t.channel)?e.enumSpecIndex.hasEncodingProperty(n,d.Property.CHANNEL)&&(a=!0):r=!0))}),i&&!r&&(a||n.constraintManuallySpecifiedValue))return!1}return!0}},{name:"omitAggregatePlotWithoutDimension",description:"Aggregate plots without dimension should be omitted",properties:[d.Property.AGGREGATE,d.Property.AUTOCOUNT,d.Property.BIN,d.Property.TIMEUNIT,d.Property.TYPE],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n){return!e.isAggregate()||p.some(e.getEncodings(),function(e){return!!h.isDimension(e)})}},{name:"omitBarLineAreaWithOcclusion",description:"Don't use bar, line or area to visualize raw plot as they often lead to occlusion.",properties:[d.Property.MARK,d.Property.AGGREGATE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n){return!p.contains([s.Mark.BAR,s.Mark.LINE,s.Mark.AREA],e.getMark())||e.isAggregate()}},{name:"omitBarTickWithSize",description:"Do not map field to size channel with bar and tick mark",properties:[d.Property.CHANNEL,d.Property.MARK],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,t,n){var r=e.getMark();if(p.contains([s.Mark.TICK,s.Mark.BAR],r)&&e.channelUsed(o.Channel.SIZE)){if(n.constraintManuallySpecifiedValue)return!1;for(var i=e.specQuery.encodings,a=0;a<i.length;a++){var l=i[a];if(l.channel===o.Channel.SIZE)return!e.enumSpecIndex.hasEncodingProperty(a,d.Property.CHANNEL)}}return!0}},{name:"omitBarAreaForLogScale",description:"Do not use bar and area mark for x and y's log scale",properties:[d.Property.MARK,d.Property.CHANNEL,d.Property.SCALE,d.Property.SCALE_TYPE,d.Property.TYPE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n){var r=e.getMark(),i=e.getEncodings();if(r===s.Mark.AREA||r===s.Mark.BAR)for(var a=0,u=i;a<u.length;a++){var c=u[a];if((c.channel===o.Channel.X||c.channel===o.Channel.Y)&&c.scale){var f=g.scaleType(c);if(f===l.ScaleType.LOG)return!1}}return!0}},{name:"omitMultipleNonPositionalChannels",description:"Unless manually specified, do not use multiple non-positional encoding channel to avoid over-encoding.",properties:[d.Property.CHANNEL],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,t,n){for(var r=e.specQuery.encodings,i=0,a=!1,o=0;o<r.length;o++){var s=r[o];if(s.autoCount!==!1){var l=s.channel;if(!f.isEnumSpec(l)&&m[l]&&(i+=1,e.enumSpecIndex.hasEncodingProperty(o,d.Property.CHANNEL)&&(a=!0),i>1&&(a||n.constraintManuallySpecifiedValue)))return!1}}return!0}},{name:"omitNonPositionalOrFacetOverPositionalChannels",description:"Do not use non-positional channels unless all positional channels are used",properties:[d.Property.CHANNEL],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n){for(var r=e.specQuery.encodings,i=!1,a=!1,s=!1,l=!1,u=0;u<r.length;u++){var c=r[u];if(c.autoCount!==!1){var h=c.channel;h===o.Channel.X?s=!0:h===o.Channel.Y?l=!0:f.isEnumSpec(h)||(i=!0,e.enumSpecIndex.hasEncodingProperty(u,d.Property.CHANNEL)&&(a=!0))}}return!(a||n.constraintManuallySpecifiedValue&&i)||s&&l}},{name:"omitRaw",description:"Omit raw plots.",properties:[d.Property.AGGREGATE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n){return!!e.isAggregate()}},{name:"omitRawContinuousFieldForAggregatePlot",description:"Aggregate plot should not use raw continuous field as group by values. (Quantitative should be binned. Temporal should have time unit.)",properties:[d.Property.AGGREGATE,d.Property.AUTOCOUNT,d.Property.TIMEUNIT,d.Property.BIN,d.Property.TYPE],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,t,n){if(e.isAggregate())for(var r=e.specQuery.encodings,i=0;i<r.length;i++){var a=r[i];if(a.autoCount!==!1){if(a.type===u.Type.TEMPORAL&&!a.timeUnit&&(e.enumSpecIndex.hasEncodingProperty(i,d.Property.TIMEUNIT)||n.constraintManuallySpecifiedValue))return!1;if(a.type===u.Type.QUANTITATIVE&&!a.bin&&!a.aggregate&&!a.autoCount){if(e.enumSpecIndex.hasEncodingProperty(i,d.Property.BIN)||e.enumSpecIndex.hasEncodingProperty(i,d.Property.AGGREGATE)||e.enumSpecIndex.hasEncodingProperty(i,d.Property.AUTOCOUNT))return!1;if(n.constraintManuallySpecifiedValue)return!1}}}return!0}},{name:"omitRawDetail",description:"Do not use detail channel with raw plot.",properties:[d.Property.CHANNEL,d.Property.AGGREGATE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n){return!!e.isAggregate()||p.every(e.specQuery.encodings,function(t,r){return t.autoCount===!1||(t.channel!==o.Channel.DETAIL||!e.enumSpecIndex.hasEncodingProperty(r,d.Property.CHANNEL)&&!n.constraintManuallySpecifiedValue)})}},{name:"omitRepeatedField",description:"Each field should be mapped to only one channel",properties:[d.Property.FIELD],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,t,n){for(var r={},i={},a=e.specQuery.encodings,o=0;o<a.length;o++){var s=a[o];if(s.field&&!f.isEnumSpec(s.field)){var l=s.field;if(e.enumSpecIndex.hasEncodingProperty(o,d.Property.FIELD)&&(i[l]=!0),r[l]&&(i[l]||n.constraintManuallySpecifiedValue))return!1;r[l]=!0}}return!0}},{name:"omitVerticalDotPlot",description:"Do not output vertical dot plot.",properties:[d.Property.CHANNEL],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,t,n){var r=e.getEncodings();return 1!==r.length||r[0].channel!==o.Channel.Y}},{name:"hasAppropriateGraphicTypeForMark",description:"Has appropriate graphic type for mark",properties:[d.Property.CHANNEL,d.Property.MARK,d.Property.TYPE,d.Property.TIMEUNIT,d.Property.BIN,d.Property.AGGREGATE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n){var r=e.getMark();switch(r){case s.Mark.AREA:case s.Mark.LINE:if(e.isAggregate()){var i=e.getEncodingQueryByChannel(o.Channel.X),a=e.getEncodingQueryByChannel(o.Channel.Y),l=i&&g.isMeasure(i),c=a&&g.isMeasure(a);return i&&a&&l!==c&&!(!l&&i.type===u.Type.NOMINAL)&&!(!c&&a.type===u.Type.NOMINAL)}return!0;case s.Mark.TEXT:return!0;case s.Mark.BAR:case s.Mark.TICK:case s.Mark.BOXPLOT:return!e.channelUsed(o.Channel.SIZE)&&e.isMeasure(o.Channel.X)!==e.isMeasure(o.Channel.Y);case s.Mark.CIRCLE:case s.Mark.POINT:case s.Mark.SQUARE:case s.Mark.RULE:case s.Mark.HEXAGON:case s.Mark.LEADER:case s.Mark.CONTOUR:case s.Mark.SCATTER3D:case s.Mark.RADAR:return!0}throw new Error("hasAllRequiredChannelsForMark not implemented for mark"+r)}},{name:"omitNonLinearScaleTypeWithStack",description:"Stacked plot should only use linear scale",properties:[d.Property.CHANNEL,d.Property.MARK,d.Property.AGGREGATE,d.Property.AUTOCOUNT,d.Property.SCALE,d.Property.SCALE_TYPE,d.Property.TYPE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,t,n){var r=e.stack();if(r)for(var i=0,a=e.getEncodings();i<a.length;i++){var s=a[i];if((s.aggregate||s.autoCount===!0)&&s.type===u.Type.QUANTITATIVE&&p.contains([o.Channel.X,o.Channel.Y],s.channel)&&g.scaleType(s)!==l.ScaleType.LINEAR)return!1}return!0}},{name:"omitNonSumStack",description:"Stacked plot should use summative aggregation such as sum, count, or distinct",properties:[d.Property.CHANNEL,d.Property.MARK,d.Property.AGGREGATE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n){var r=e.stack();if(r){var i=e.getEncodingQueryByChannel(r.fieldChannel);return p.contains(a.SUM_OPS,i.aggregate)||!!i.autoCount}return!0}},{name:"omitTableWithOcclusionIfAutoAddCount",description:"Plots without aggregation or autocount where x and y are both dimensions should be omitted if autoAddCount is enabled as they often lead to occlusion",properties:[d.Property.CHANNEL,d.Property.TYPE,d.Property.TIMEUNIT,d.Property.BIN,d.Property.AGGREGATE,d.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,t,n){return!(n.autoAddCount&&e.isDimension(o.Channel.X)&&e.isDimension(o.Channel.Y)&&!e.isAggregate())}}].map(function(e){return new v(e)}),n.SPEC_CONSTRAINT_INDEX=n.SPEC_CONSTRAINTS.reduce(function(e,t){return e[t.name()]=t,e},{}),n.SPEC_CONSTRAINTS_BY_PROPERTY=n.SPEC_CONSTRAINTS.reduce(function(e,t){return t.properties().forEach(function(n){e[n]=e[n]||[],e[n].push(t)}),e},{}),n.checkSpec=r},{"../enumspec":16,"../property":21,"../query/encoding":22,"../util":37,"./base":10,"vega-lite/src/aggregate":43,"vega-lite/src/channel":46,"vega-lite/src/mark":49,"vega-lite/src/scale":50,"vega-lite/src/type":54}],14:[function(e,t,n){"use strict";n.version="0.6.7";var r=e("./util");n.config=e("./config"),n.constraint=e("./constraint/constraint"),n.enumerate=e("./enumerator"),n.enumSpec=e("./enumspec");var i=e("./generate");n.generate=i.generate,n.model=e("./model"),n.nest=e("./nest"),n.property=e("./property");var a=e("./query/query"),o=e("./query/query");n.query=r.extend(o.query,a),n.ranking=e("./ranking/ranking"),n.schema=e("./schema"),n.util=e("./util")},{"./config":9,"./constraint/constraint":11,"./enumerator":15,"./enumspec":16,"./generate":18,"./model":19,"./nest":20,"./property":21,"./query/query":24,"./ranking/ranking":34,"./schema":35,"./util":37}],15:[function(e,t,n){"use strict";function r(e){return function(t,n,r){return function(o,s){function l(c){if(c===u.length)return void o.push(s.duplicate());var f=u[c],d=t.encodings[f][e],h=s.getEncodingQueryByIndex(f),p=s.getEncodingProperty(f,e);h.autoCount!==!1&&p?(d["enum"].forEach(function(t){null===t&&(t=void 0),s.setEncodingProperty(f,e,t,d);var o=i.checkEncoding(e,d,f,s,n,r);if(!o){var u=a.checkSpec(e,d,s,n,r);u||l(c+1)}}),s.resetEncodingProperty(f,e,d)):l(c+1)}var u=t.encodingIndicesByProperty[e];return l(0),o}}}var i=e("./constraint/encoding"),a=e("./constraint/spec"),o=e("./property");n.ENUMERATOR_INDEX={},n.ENUMERATOR_INDEX[o.Property.MARK]=function(e,t,n){return function(r,i){var s=i.getMark();return s["enum"].forEach(function(s){i.setMark(s);var l=a.checkSpec(o.Property.MARK,e.mark,i,t,n);l||r.push(i.duplicate())}),i.resetMark(),r}},o.ENCODING_PROPERTIES.forEach(function(e){n.ENUMERATOR_INDEX[e]=r(e)}),o.NESTED_ENCODING_PROPERTIES.forEach(function(e){n.ENUMERATOR_INDEX[e.property]=r(e.property)}),n.EncodingPropertyGeneratorFactory=r},{"./constraint/encoding":12,"./constraint/spec":13,"./property":21}],16:[function(e,t,n){"use strict";function r(e){return e===n.SHORT_ENUM_SPEC||void 0!==e&&(!!e["enum"]||!!e.name)&&!a.isArray(e)}function i(e,t,r){return a.extend({},{name:t,"enum":r},e===n.SHORT_ENUM_SPEC?{}:e)}var a=e("./util");!function(e){e[e.ENUMSPEC="?"]="ENUMSPEC"}(n.ShortEnumSpec||(n.ShortEnumSpec={}));var o=n.ShortEnumSpec;n.SHORT_ENUM_SPEC=o.ENUMSPEC,n.isEnumSpec=r,n.initEnumSpec=i},{"./util":37}],17:[function(e,t,n){"use strict";var r=e("./property"),i=e("./util"),a=function(){function e(){this._mark=void 0,this._encodings={},this._encodingIndicesByProperty={}}return e.prototype.setEncodingProperty=function(e,t,n){var r=this._encodings,i=r[e]=r[e]||{};i[t]=n;var a=this._encodingIndicesByProperty;return(a[t]=a[t]||[]).push(e),this},e.prototype.hasEncodingProperty=function(e,t){return!!(this._encodings[e]||{})[t]},e.prototype.hasProperty=function(e){if(r.isEncodingProperty(e))return!!this.encodingIndicesByProperty[e];if(e===r.Property.MARK)return!!this.mark;throw new Error("Unimplemented for property "+e)},e.prototype.isEmpty=function(){return!this.mark&&0===i.keys(this.encodingIndicesByProperty).length},e.prototype.setMark=function(e){return this._mark=e,this},Object.defineProperty(e.prototype,"mark",{get:function(){return this._mark},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encodings",{get:function(){return this._encodings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encodingIndicesByProperty",{get:function(){return this._encodingIndicesByProperty},enumerable:!0,configurable:!0}),e}();n.EnumSpecIndex=a},{"./property":21,"./util":37}],18:[function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n=a.DEFAULT_QUERY_CONFIG);var r=o.SpecQueryModel.build(e,t,n),l=r.enumSpecIndex,u=[r];return n.propertyPrecedence.forEach(function(e){if(l.hasProperty(e)){var r=i.ENUMERATOR_INDEX[e](l,t,n);u=u.reduce(r,[])}}),!n.stylize||null===n.nominalColorScaleForHighCardinality&&null===n.smallBandSizeForHighCardinalityOrFacet&&null===n.xAxisOnTopForHighYCardinalityWithoutColumn?u:s.stylize(u,t,n)}var i=e("../src/enumerator"),a=e("./config"),o=e("./model"),s=e("./stylize");n.generate=r},{"../src/enumerator":15,"./config":9,"./model":19,"./stylize":36}],19:[function(e,t,n){"use strict";function r(e){switch(e){case s.Property.MARK:return"m";case s.Property.CHANNEL:return"c";case s.Property.AGGREGATE:return"a";case s.Property.AUTOCOUNT:return"#";case s.Property.BIN:return"b";case s.Property.BIN_MAXBINS:return"b-mb";case s.Property.SORT:return"so";case s.Property.SORT_FIELD:return"so-f";case s.Property.SORT_OP:return"so-op";case s.Property.SORT_ORDER:return"so-or";case s.Property.SCALE:return"s";case s.Property.SCALE_BANDSIZE:return"s-bs";case s.Property.SCALE_CLAMP:return"s-c";case s.Property.SCALE_DOMAIN:return"s-d";case s.Property.SCALE_EXPONENT:return"s-e";case s.Property.SCALE_NICE:return"s-n";case s.Property.SCALE_RANGE:return"s-ra";case s.Property.SCALE_ROUND:return"s-r";case s.Property.SCALE_TYPE:return"s-t";case s.Property.SCALE_USERAWDOMAIN:return"s-u";case s.Property.SCALE_ZERO:return"s-z";case s.Property.AXIS:return"ax";case s.Property.AXIS_AXISCOLOR:return"ax-ac";case s.Property.AXIS_AXISWIDTH:return"ax-aw";case s.Property.AXIS_LAYER:return"ax-lay";case s.Property.AXIS_OFFSET:return"ax-of";case s.Property.AXIS_ORIENT:return"ax-or";case s.Property.AXIS_GRID:return"ax-g";case s.Property.AXIS_GRIDCOLOR:return"ax-gc";case s.Property.AXIS_GRIDDASH:return"ax-gd";case s.Property.AXIS_GRIDOPACITY:return"ax-go";case s.Property.AXIS_GRIDWIDTH:return"ax-gw";case s.Property.AXIS_LABELS:return"ax-lab";case s.Property.AXIS_FORMAT:return"ax-f";case s.Property.AXIS_LABELANGLE:return"ax-laba";case s.Property.AXIS_LABELMAXLENGTH:return"ax-labm";case s.Property.AXIS_SHORTTIMELABELS:return"ax-stl";case s.Property.AXIS_SUBDIVIDE:return"ax-sub";case s.Property.AXIS_TICKS:return"ax-t";case s.Property.AXIS_TICKCOLOR:return"ax-tc";case s.Property.AXIS_TICKLABELCOLOR:return"ax-tlc";case s.Property.AXIS_TICKLABELFONT:return"ax-tlf";case s.Property.AXIS_TICKLABELFONTSIZE:return"ax-tlfs";case s.Property.AXIS_TICKPADDING:return"ax-tp";case s.Property.AXIS_TICKSIZE:return"ax-ts";case s.Property.AXIS_TICKSIZEMAJOR:return"ax-tsma";case s.Property.AXIS_TICKSIZEMINOR:return"ax-tsmi";case s.Property.AXIS_TICKSIZEEND:return"ax-tse";case s.Property.AXIS_TICKWIDTH:return"ax-tw";case s.Property.AXIS_VALUES:return"ax-v";case s.Property.AXIS_TITLE:return"ax-ti";case s.Property.AXIS_TITLECOLOR:return"ax-tic";case s.Property.AXIS_TITLEFONT:return"ax-tif";case s.Property.AXIS_TITLEFONTSIZE:return"ax-tifs";case s.Property.AXIS_TITLEFONTWEIGHT:return"ax-tifw";case s.Property.AXIS_TITLEOFFSET:return"ax-tio";case s.Property.AXIS_TITLEMAXLENGTH:return"ax-timl";case s.Property.AXIS_CHARACTERWIDTH:return"ax-cw";case s.Property.LEGEND:return"l";case s.Property.LEGEND_ORIENT:return"l-or";case s.Property.LEGEND_OFFSET:return"l-of";case s.Property.LEGEND_VALUES:return"l-v";case s.Property.LEGEND_FORMAT:return"l-f";case s.Property.LEGEND_LABELALIGN:return"l-la";case s.Property.LEGEND_LABELBASELINE:return"l-lb";case s.Property.LEGEND_LABELCOLOR:return"l-lc";case s.Property.LEGEND_LABELFONT:return"l-lf";case s.Property.LEGEND_LABELFONTSIZE:return"l-lfs";case s.Property.LEGEND_SHORTTIMELABELS:return"l-stl";case s.Property.LEGEND_SYMBOLCOLOR:return"l-syc";case s.Property.LEGEND_SYMBOLSHAPE:return"l-sysh";case s.Property.LEGEND_SYMBOLSIZE:return"l-sysi";case s.Property.LEGEND_SYMBOLSTROKEWIDTH:return"l-sysw";case s.Property.LEGEND_TITLE:return"l-ti";case s.Property.LEGEND_TITLECOLOR:return"l-tic";case s.Property.LEGEND_TITLEFONT:return"l-tif";case s.Property.LEGEND_TITLEFONTSIZE:return"l-tifs";case s.Property.LEGEND_TITLEFONTWEIGHT:return"l-tifw";case s.Property.TIMEUNIT:return"tu";case s.Property.FIELD:return"f";case s.Property.TYPE:return"t"}throw new Error("Default name undefined")}function i(e,t,n){switch(e){case s.Property.FIELD:case s.Property.SORT_FIELD:return t.fields();case s.Property.AXIS:case s.Property.AXIS_GRID:case s.Property.AXIS_LABELS:case s.Property.AXIS_SHORTTIMELABELS:case s.Property.BIN:case s.Property.LEGEND:case s.Property.LEGEND_SHORTTIMELABELS:case s.Property.SCALE:case s.Property.SCALE_CLAMP:case s.Property.SCALE_NICE:case s.Property.SCALE_ROUND:case s.Property.SCALE_USERAWDOMAIN:case s.Property.SCALE_ZERO:case s.Property.AUTOCOUNT:return[!1,!0];case s.Property.AGGREGATE:return n.aggregates;case s.Property.AXIS_AXISCOLOR:return n.axisAxisColors;case s.Property.AXIS_AXISWIDTH:return n.axisAxisWidths;case s.Property.AXIS_LAYER:return n.axisLayers;case s.Property.AXIS_OFFSET:return n.axisOffsets;case s.Property.AXIS_ORIENT:return n.axisOrients;case s.Property.AXIS_GRIDCOLOR:return n.axisGridColors;case s.Property.AXIS_GRIDDASH:return n.axisGridDashes;case s.Property.AXIS_GRIDOPACITY:return n.axisGridOpacities;case s.Property.AXIS_GRIDWIDTH:return n.axisGridWidths;case s.Property.AXIS_FORMAT:return n.axisFormats;case s.Property.AXIS_LABELANGLE:return n.axisLabelAngles;case s.Property.AXIS_LABELMAXLENGTH:return n.axisLabelMaxLengths;case s.Property.AXIS_SUBDIVIDE:return n.axisSubDivides;case s.Property.AXIS_TICKS:return n.axisTicks;case s.Property.AXIS_TICKCOLOR:return n.axisTickColors;case s.Property.AXIS_TICKLABELCOLOR:return n.axisTickLabelColors;case s.Property.AXIS_TICKLABELFONT:return n.axisTickLabelFonts;case s.Property.AXIS_TICKLABELFONTSIZE:return n.axisTickLabelFontSizes;case s.Property.AXIS_TICKPADDING:return n.axisTickPaddings;case s.Property.AXIS_TICKSIZE:return n.axisTickSizes;case s.Property.AXIS_TICKSIZEMAJOR:return n.axisTickSizeMajors;case s.Property.AXIS_TICKSIZEMINOR:return n.axisTickSizeMinors;case s.Property.AXIS_TICKSIZEEND:return n.axisTickSizeEnds;case s.Property.AXIS_TICKWIDTH:return n.axisTickWidths;case s.Property.AXIS_VALUES:return n.axisValuesList;case s.Property.AXIS_TITLE:return n.axisTitles;case s.Property.AXIS_TITLECOLOR:return n.axisTitleColors;case s.Property.AXIS_TITLEFONT:return n.axisTitleFonts;case s.Property.AXIS_TITLEFONTWEIGHT:return n.axisTitleFontWeights;case s.Property.AXIS_TITLEFONTSIZE:return n.axisTitleFontSizes;case s.Property.AXIS_TITLEOFFSET:return n.axisTitleOffsets;case s.Property.AXIS_TITLEMAXLENGTH:return n.axisTitleMaxLengths;case s.Property.AXIS_CHARACTERWIDTH:return n.axisCharacterWidths;case s.Property.BIN_MAXBINS:return n.maxBinsList;case s.Property.CHANNEL:return n.channels;case s.Property.MARK:return n.marks;case s.Property.LEGEND_ORIENT:return n.legendOrients;case s.Property.LEGEND_OFFSET:return n.legendOffsets;case s.Property.LEGEND_VALUES:return n.legendValuesList;case s.Property.LEGEND_FORMAT:return n.legendFormats;case s.Property.LEGEND_LABELALIGN:return n.legendLabelAligns;case s.Property.LEGEND_LABELBASELINE:return n.legendLabelBaselines;case s.Property.LEGEND_LABELCOLOR:return n.legendLabelColors;case s.Property.LEGEND_LABELFONT:return n.legendLabelFonts;case s.Property.LEGEND_LABELFONTSIZE:return n.legendLabelFontSizes;case s.Property.LEGEND_SYMBOLCOLOR:return n.legendSymbolColors;case s.Property.LEGEND_SYMBOLSHAPE:return n.legendSymbolShapes;case s.Property.LEGEND_SYMBOLSIZE:return n.legendSymbolSizes;case s.Property.LEGEND_SYMBOLSTROKEWIDTH:return n.legendSymbolStrokeWidths;case s.Property.LEGEND_TITLE:return n.legendTitles;case s.Property.LEGEND_TITLECOLOR:return n.legendTitleColors;case s.Property.LEGEND_TITLEFONT:return n.legendTitleFonts;case s.Property.LEGEND_TITLEFONTSIZE:return n.legendTitleFontSizes;case s.Property.LEGEND_TITLEFONTWEIGHT:return n.legendTitleFontWeights;case s.Property.SORT:return n.sorts;case s.Property.SORT_OP:return n.sortOps;case s.Property.SORT_ORDER:
return n.sortOrders;case s.Property.SCALE_BANDSIZE:return n.scaleBandSizes;case s.Property.SCALE_DOMAIN:return n.scaleDomains;case s.Property.SCALE_EXPONENT:return n.scaleExponents;case s.Property.SCALE_RANGE:return n.scaleRanges;case s.Property.SCALE_TYPE:return n.scaleTypes;case s.Property.TIMEUNIT:return n.timeUnits;case s.Property.TYPE:return n.types}throw new Error("No default enumValues for "+e)}var a=e("vega-lite/src/aggregate"),o=e("vega-lite/src/type"),s=e("./property"),l=e("./enumspec"),u=e("./enumspecindex"),c=e("./query/spec"),f=e("./query/encoding"),d=e("./query/groupby"),h=e("./query/shorthand"),p=e("./util");n.getDefaultName=r,n.getDefaultEnumValues=i;var g=function(){function e(e,t,n,r,i){this._rankingScore={},this._spec=e,this._channelCount=e.encodings.reduce(function(e,t){return l.isEnumSpec(t.channel)||t.autoCount===!1||(e[t.channel]=1),e},{}),this._enumSpecIndex=t,this._enumSpecAssignment=i,this._opt=r,this._schema=n}return e.build=function(t,n,a){var c=new u.EnumSpecIndex;if(l.isEnumSpec(t.mark)){var f=r(s.Property.MARK);t.mark=l.initEnumSpec(t.mark,f,a.marks),c.setMark(t.mark)}if(t.encodings.forEach(function(e,t){void 0!==e.autoCount&&(console.warn("A field with autoCount should not be included as autoCount meant to be an internal object."),e.type=o.Type.QUANTITATIVE),void 0===e.type&&(e.type=l.SHORT_ENUM_SPEC),s.ENCODING_PROPERTIES.forEach(function(o){if(l.isEnumSpec(e[o])){var s=r(o)+t,u=i(o,n,a),f=e[o]=l.initEnumSpec(e[o],s,u);c.setEncodingProperty(t,o,f)}}),s.NESTED_ENCODING_PROPERTIES.forEach(function(o){var s=e[o.parent];if(s){var u=o.property,f=o.child;if(l.isEnumSpec(s[f])){var d=r(u)+t,h=i(u,n,a),p=s[f]=l.initEnumSpec(s[f],d,h);c.setEncodingProperty(t,u,p)}}})}),a.autoAddCount){var d={channel:{name:r(s.Property.CHANNEL)+t.encodings.length,"enum":i(s.Property.CHANNEL,n,a)},autoCount:{name:r(s.Property.AUTOCOUNT)+t.encodings.length,"enum":[!1,!0]},type:o.Type.QUANTITATIVE};t.encodings.push(d);var h=t.encodings.length-1;c.setEncodingProperty(h,s.Property.CHANNEL,d.channel),c.setEncodingProperty(h,s.Property.AUTOCOUNT,d.autoCount)}return new e(t,c,n,a,{})},Object.defineProperty(e.prototype,"enumSpecIndex",{get:function(){return this._enumSpecIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this._schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specQuery",{get:function(){return this._spec},enumerable:!0,configurable:!0}),e.prototype.duplicate=function(){return new e(p.duplicate(this._spec),this._enumSpecIndex,this._schema,this._opt,p.duplicate(this._enumSpecAssignment))},e.prototype.setMark=function(e){var t=this._spec.mark.name;this._enumSpecAssignment[t]=this._spec.mark=e},e.prototype.resetMark=function(){var e=this._spec.mark=this._enumSpecIndex.mark;delete this._enumSpecAssignment[e.name]},e.prototype.getMark=function(){return this._spec.mark},e.prototype.getEncodingProperty=function(e,t){var n=this._spec.encodings[e],r=s.getNestedEncodingProperty(t);return r?n[r.parent][r.child]:n[t]},e.prototype.setEncodingProperty=function(e,t,n,r){var i=this._spec.encodings[e],a=s.getNestedEncodingProperty(t);t===s.Property.CHANNEL&&i.channel&&!l.isEnumSpec(i.channel)&&this._channelCount[i.channel]--,a?i[a.parent][a.child]=n:s.hasNestedProperty(t)&&n===!0?i[t]=p.extend({},i[t],{"enum":void 0,name:void 0}):i[t]=n,this._enumSpecAssignment[r.name]=n,t===s.Property.CHANNEL&&(this._channelCount[n]=(this._channelCount[n]||0)+1)},e.prototype.resetEncodingProperty=function(e,t,n){var r=this._spec.encodings[e],i=s.getNestedEncodingProperty(t);t===s.Property.CHANNEL&&this._channelCount[r.channel]--,i?r[i.parent][i.child]=n:r[t]=n,delete this._enumSpecAssignment[n.name]},e.prototype.channelUsed=function(e){return this._channelCount[e]>0},e.prototype.stack=function(){return c.stack(this._spec)},e.prototype.getEncodings=function(){return this._spec.encodings.filter(function(e){return e.autoCount!==!1})},e.prototype.getEncodingQueryByChannel=function(e){for(var t=0;t<this._spec.encodings.length;t++)if(this._spec.encodings[t].channel===e)return this._spec.encodings[t]},e.prototype.getEncodingQueryByIndex=function(e){return this._spec.encodings[e]},e.prototype.isDimension=function(e){var t=this.getEncodingQueryByChannel(e);return t&&f.isDimension(t)},e.prototype.isMeasure=function(e){var t=this.getEncodingQueryByChannel(e);return t&&f.isMeasure(t)},e.prototype.isAggregate=function(){return c.isAggregate(this._spec)},e.prototype.toShorthand=function(e){if(e){var t={},n={};return d.parse(e,t,n),h.spec(this._spec,t,h.getReplacerIndex(n))}return h.spec(this._spec)},e.prototype._encoding=function(){for(var e={},t=0;t<this._spec.encodings.length;t++){var n=this._spec.encodings[t],r={};if(n.autoCount===!0)r.aggregate=a.AggregateOp.COUNT,r.field="*",r.type=o.Type.QUANTITATIVE;else if(n.autoCount===!1)continue;if(l.isEnumSpec(n.channel))return null;for(var i=[s.Property.AGGREGATE,s.Property.BIN,s.Property.TIMEUNIT,s.Property.FIELD,s.Property.TYPE,s.Property.SCALE,s.Property.SORT,s.Property.AXIS,s.Property.LEGEND],u=0;u<i.length;u++){var c=i[u];if(l.isEnumSpec(n[c]))return null;void 0!==n[c]&&(h.PROPERTY_SUPPORTED_CHANNELS[c]&&!h.PROPERTY_SUPPORTED_CHANNELS[c][n.channel]||(r[c]=n[c]))}r.bin===!1&&delete r.bin,e[n.channel]=r}return e},e.prototype.toSpec=function(e){if(l.isEnumSpec(this._spec.mark))return null;var t={};return e=e||this._spec.data,e&&(t.data=e),this._spec.transform&&(t.transform=this._spec.transform),t.type=this._spec.type,t.mark=this._spec.mark,t.encoding=this._encoding(),null===t.encoding?null:((this._spec.config||this._opt.defaultSpecConfig)&&(t.config=p.extend({},this._opt.defaultSpecConfig,this._spec.config)),t)},e.prototype.getRankingScore=function(e){return this._rankingScore[e]},e.prototype.setRankingScore=function(e,t){this._rankingScore[e]=t},e}();n.SpecQueryModel=g;var m=function(){function e(e,t,n,r,i){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=[]),void 0===r&&(r=void 0),void 0===i&&(i=void 0),this._name=e,this._path=t,this._items=n,this._groupBy=r,this._orderGroupBy=i}return e.prototype.getTopSpecQueryModel=function(){var t=this._items[0];return t instanceof e?t.getTopSpecQueryModel():t},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupBy",{get:function(){return this._groupBy},set:function(e){this._groupBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderGroupBy",{get:function(){return this._orderGroupBy},set:function(e){this._orderGroupBy=e},enumerable:!0,configurable:!0}),e}();n.SpecQueryModelGroup=m},{"./enumspec":16,"./enumspecindex":17,"./property":21,"./query/encoding":22,"./query/groupby":23,"./query/shorthand":25,"./query/spec":26,"./util":37,"vega-lite/src/aggregate":43,"vega-lite/src/type":54}],20:[function(e,t,n){"use strict";function r(e,t){g[e]=t}function i(e,t){if(t.nest){for(var n=new c.SpecQueryModelGroup,r={},i=[],a=[],o=[],s=0;s<t.nest.length;s++){i.push(s>0?f.duplicate(i[s-1]):{}),a.push(s>0?f.duplicate(a[s-1]):{});var u=t.nest[s].groupBy;l.isArray(u)&&(d.parse(u,i[s],a[s]),o.push(h.getReplacerIndex(a[s])))}return e.forEach(function(e){for(var a="",s=n,u=0;u<t.nest.length;u++){var f=s.groupBy=t.nest[u].groupBy;s.orderGroupBy=t.nest[u].orderGroupBy;var d=l.isArray(f)?h.spec(e.specQuery,i[u],o[u]):g[f](e);a+="/"+d,r[a]||(r[a]=new c.SpecQueryModelGroup(d,a,[]),s.items.push(r[a])),s=r[a]}s.items.push(e)}),n}return new c.SpecQueryModelGroup("","",e)}function a(e){if(u.isEnumSpec(e))return u.SHORT_ENUM_SPEC+"";var t=e;switch(t){case s.Channel.X:case s.Channel.Y:return"xy";case s.Channel.ROW:case s.Channel.COLUMN:return"facet";case s.Channel.COLOR:case s.Channel.SIZE:case s.Channel.SHAPE:case s.Channel.OPACITY:return"non-xy";case s.Channel.TEXT:case s.Channel.DETAIL:case s.Channel.PATH:case s.Channel.ORDER:return t+"";default:return console.warn("channel type not implemented for "+t),t+""}}function o(e){var t=p.stack(e.specQuery);return t?"stack="+t.offset+"|":""}var s=e("vega-lite/src/channel"),l=e("datalib/src/util"),u=e("./enumspec"),c=e("./model"),f=e("./util"),d=e("./query/groupby"),h=e("./query/shorthand"),p=e("./query/spec"),g={};n.registerKeyFn=r,n.FIELD="field",n.FIELD_TRANSFORM="fieldTransform",n.ENCODING="encoding",n.TRANSPOSE="transpose",n.SPEC="spec",n.nest=i,r(n.FIELD,function(e){return e.getEncodings().map(function(e){return e.field}).filter(function(e){return e&&"*"!==e}).sort().join("|")}),r(n.FIELD_TRANSFORM,function(e){return e.getEncodings().map(function(e){return h.fieldDef(e)}).sort().join("|")}),r(n.ENCODING,function(e){return o(e)+e.getEncodings().map(function(e){var t=h.fieldDef(e);return a(e.channel)+":"+t}).sort().join("|")}),r(n.TRANSPOSE,function(e){return e.getMark()+"|"+o(e)+e.getEncodings().map(function(e){var t=h.fieldDef(e),n=e.channel===s.Channel.X||e.channel===s.Channel.Y?"xy":e.channel===s.Channel.ROW||e.channel===s.Channel.COLUMN?"facet":e.channel;return n+":"+t}).sort().join("|")}),r(n.SPEC,function(e){return JSON.stringify(e.specQuery)})},{"./enumspec":16,"./model":19,"./query/groupby":23,"./query/shorthand":25,"./query/spec":26,"./util":37,"datalib/src/util":8,"vega-lite/src/channel":46}],21:[function(e,t,n){"use strict";function r(e){switch(e){case u.BIN:case u.SCALE:case u.SORT:case u.AXIS:case u.LEGEND:return!0;case u.MARK:case u.FILTER:case u.CALCULATE:case u.FILTERINVALID:case u.STACK:case u.CHANNEL:case u.AGGREGATE:case u.AUTOCOUNT:case u.TIMEUNIT:case u.FIELD:case u.TYPE:case u.BIN_MAXBINS:case u.SCALE_BANDSIZE:case u.SCALE_CLAMP:case u.SCALE_DOMAIN:case u.SCALE_EXPONENT:case u.SCALE_NICE:case u.SCALE_RANGE:case u.SCALE_ROUND:case u.SCALE_TYPE:case u.SCALE_USERAWDOMAIN:case u.SCALE_ZERO:case u.AXIS_AXISCOLOR:case u.AXIS_AXISWIDTH:case u.AXIS_LAYER:case u.AXIS_OFFSET:case u.AXIS_ORIENT:case u.AXIS_GRID:case u.AXIS_GRIDCOLOR:case u.AXIS_GRIDDASH:case u.AXIS_GRIDOPACITY:case u.AXIS_GRIDWIDTH:case u.AXIS_LABELS:case u.AXIS_FORMAT:case u.AXIS_LABELANGLE:case u.AXIS_LABELMAXLENGTH:case u.AXIS_SHORTTIMELABELS:case u.AXIS_TICKS:case u.AXIS_SUBDIVIDE:case u.AXIS_TICKCOLOR:case u.AXIS_TICKLABELCOLOR:case u.AXIS_TICKLABELFONT:case u.AXIS_TICKLABELFONTSIZE:case u.AXIS_TICKPADDING:case u.AXIS_TICKSIZE:case u.AXIS_TICKSIZEMAJOR:case u.AXIS_TICKSIZEMINOR:case u.AXIS_TICKSIZEEND:case u.AXIS_TICKWIDTH:case u.AXIS_VALUES:case u.AXIS_TITLE:case u.AXIS_TITLECOLOR:case u.AXIS_TITLEFONT:case u.AXIS_TITLEFONTSIZE:case u.AXIS_TITLEFONTWEIGHT:case u.AXIS_CHARACTERWIDTH:case u.AXIS_TITLEMAXLENGTH:case u.AXIS_TITLEOFFSET:case u.LEGEND_ORIENT:case u.LEGEND_OFFSET:case u.LEGEND_VALUES:case u.LEGEND_FORMAT:case u.LEGEND_LABELALIGN:case u.LEGEND_LABELBASELINE:case u.LEGEND_LABELCOLOR:case u.LEGEND_LABELFONT:case u.LEGEND_LABELFONTSIZE:case u.LEGEND_SHORTTIMELABELS:case u.LEGEND_SYMBOLCOLOR:case u.LEGEND_SYMBOLSHAPE:case u.LEGEND_SYMBOLSIZE:case u.LEGEND_SYMBOLSTROKEWIDTH:case u.LEGEND_TITLE:case u.LEGEND_TITLECOLOR:case u.LEGEND_TITLEFONT:case u.LEGEND_TITLEFONTSIZE:case u.LEGEND_TITLEFONTWEIGHT:return!1}throw new Error("hasNestedProperty undefined for property "+e)}function i(e){return void 0!==d[e]}function a(e){return c[e]}function o(e){return f[e]}function s(e){return e in c}var l=e("vega-lite/src/scale");!function(e){e[e.MARK="mark"]="MARK",e[e.FILTER="filter"]="FILTER",e[e.CALCULATE="calculate"]="CALCULATE",e[e.FILTERINVALID="filterInvalid"]="FILTERINVALID",e[e.STACK="stack"]="STACK",e[e.CHANNEL="channel"]="CHANNEL",e[e.AGGREGATE="aggregate"]="AGGREGATE",e[e.AUTOCOUNT="autoCount"]="AUTOCOUNT",e[e.BIN="bin"]="BIN",e[e.BIN_MAXBINS="binMaxBins"]="BIN_MAXBINS",e[e.HAS_FN="hasFn"]="HAS_FN",e[e.TIMEUNIT="timeUnit"]="TIMEUNIT",e[e.FIELD="field"]="FIELD",e[e.TYPE="type"]="TYPE",e[e.SORT="sort"]="SORT",e[e.SORT_FIELD="sortField"]="SORT_FIELD",e[e.SORT_OP="sortOp"]="SORT_OP",e[e.SORT_ORDER="sortOrder"]="SORT_ORDER",e[e.SCALE="scale"]="SCALE",e[e.SCALE_BANDSIZE="scaleBandSize"]="SCALE_BANDSIZE",e[e.SCALE_CLAMP="scaleClamp"]="SCALE_CLAMP",e[e.SCALE_DOMAIN="scaleDomain"]="SCALE_DOMAIN",e[e.SCALE_EXPONENT="scaleExponent"]="SCALE_EXPONENT",e[e.SCALE_NICE="scaleNice"]="SCALE_NICE",e[e.SCALE_RANGE="scaleRange"]="SCALE_RANGE",e[e.SCALE_ROUND="scaleRound"]="SCALE_ROUND",e[e.SCALE_TYPE="scaleType"]="SCALE_TYPE",e[e.SCALE_USERAWDOMAIN="scaleUseRawDomain"]="SCALE_USERAWDOMAIN",e[e.SCALE_ZERO="scaleZero"]="SCALE_ZERO",e[e.AXIS="axis"]="AXIS",e[e.AXIS_AXISCOLOR="axisAxisColor"]="AXIS_AXISCOLOR",e[e.AXIS_AXISWIDTH="axisAxisWidth"]="AXIS_AXISWIDTH",e[e.AXIS_LAYER="axisLayer"]="AXIS_LAYER",e[e.AXIS_OFFSET="axisOffset"]="AXIS_OFFSET",e[e.AXIS_ORIENT="axisOrient"]="AXIS_ORIENT",e[e.AXIS_GRID="axisGrid"]="AXIS_GRID",e[e.AXIS_GRIDCOLOR="axisGridColor"]="AXIS_GRIDCOLOR",e[e.AXIS_GRIDDASH="axisGridDash"]="AXIS_GRIDDASH",e[e.AXIS_GRIDOPACITY="axisGridOpacity"]="AXIS_GRIDOPACITY",e[e.AXIS_GRIDWIDTH="axisGridWidth"]="AXIS_GRIDWIDTH",e[e.AXIS_LABELS="axisLabels"]="AXIS_LABELS",e[e.AXIS_FORMAT="axisFormat"]="AXIS_FORMAT",e[e.AXIS_LABELANGLE="axisLabelAngle"]="AXIS_LABELANGLE",e[e.AXIS_LABELMAXLENGTH="axisLabelMaxLength"]="AXIS_LABELMAXLENGTH",e[e.AXIS_SHORTTIMELABELS="axisShortTimeLabels"]="AXIS_SHORTTIMELABELS",e[e.AXIS_SUBDIVIDE="axisSubdivide"]="AXIS_SUBDIVIDE",e[e.AXIS_TICKS="axisTicks"]="AXIS_TICKS",e[e.AXIS_TICKCOLOR="axisTickColor"]="AXIS_TICKCOLOR",e[e.AXIS_TICKLABELCOLOR="axisTickLabelColor"]="AXIS_TICKLABELCOLOR",e[e.AXIS_TICKLABELFONT="axisTickLabelFont"]="AXIS_TICKLABELFONT",e[e.AXIS_TICKLABELFONTSIZE="axisTickLabelFontSize"]="AXIS_TICKLABELFONTSIZE",e[e.AXIS_TICKPADDING="axisTickPadding"]="AXIS_TICKPADDING",e[e.AXIS_TICKSIZE="axisTickSize"]="AXIS_TICKSIZE",e[e.AXIS_TICKSIZEMAJOR="axisTickSizeMajor"]="AXIS_TICKSIZEMAJOR",e[e.AXIS_TICKSIZEMINOR="axisTickSizeMinor"]="AXIS_TICKSIZEMINOR",e[e.AXIS_TICKSIZEEND="axisTickSizeEnd"]="AXIS_TICKSIZEEND",e[e.AXIS_TICKWIDTH="axisTickWidth"]="AXIS_TICKWIDTH",e[e.AXIS_VALUES="axisValues"]="AXIS_VALUES",e[e.AXIS_TITLE="axisTitle"]="AXIS_TITLE",e[e.AXIS_TITLECOLOR="axisTitleColor"]="AXIS_TITLECOLOR",e[e.AXIS_TITLEFONT="axisTitleFont"]="AXIS_TITLEFONT",e[e.AXIS_TITLEFONTSIZE="axisTitleFontSize"]="AXIS_TITLEFONTSIZE",e[e.AXIS_TITLEFONTWEIGHT="axisTitleFontWeight"]="AXIS_TITLEFONTWEIGHT",e[e.AXIS_TITLEOFFSET="axisTitleOffset"]="AXIS_TITLEOFFSET",e[e.AXIS_TITLEMAXLENGTH="axisTitleMaxLength"]="AXIS_TITLEMAXLENGTH",e[e.AXIS_CHARACTERWIDTH="axisCharacterWidth"]="AXIS_CHARACTERWIDTH",e[e.LEGEND="legend"]="LEGEND",e[e.LEGEND_ORIENT="legendOrient"]="LEGEND_ORIENT",e[e.LEGEND_OFFSET="legendOffset"]="LEGEND_OFFSET",e[e.LEGEND_VALUES="legendValues"]="LEGEND_VALUES",e[e.LEGEND_FORMAT="legendFormat"]="LEGEND_FORMAT",e[e.LEGEND_LABELALIGN="legendLabelAlign"]="LEGEND_LABELALIGN",e[e.LEGEND_LABELBASELINE="legendLabelBaseline"]="LEGEND_LABELBASELINE",e[e.LEGEND_LABELCOLOR="legendLabelColor"]="LEGEND_LABELCOLOR",e[e.LEGEND_LABELFONT="legendLabelFont"]="LEGEND_LABELFONT",e[e.LEGEND_LABELFONTSIZE="legendLabelFontSize"]="LEGEND_LABELFONTSIZE",e[e.LEGEND_SHORTTIMELABELS="legendShortTimeLabels"]="LEGEND_SHORTTIMELABELS",e[e.LEGEND_SYMBOLCOLOR="legendSymbolColor"]="LEGEND_SYMBOLCOLOR",e[e.LEGEND_SYMBOLSHAPE="legendSymbolShape"]="LEGEND_SYMBOLSHAPE",e[e.LEGEND_SYMBOLSIZE="legendSymbolSize"]="LEGEND_SYMBOLSIZE",e[e.LEGEND_SYMBOLSTROKEWIDTH="legendSymbolStrokeWidth"]="LEGEND_SYMBOLSTROKEWIDTH",e[e.LEGEND_TITLE="legendTitle"]="LEGEND_TITLE",e[e.LEGEND_TITLECOLOR="legendTitleColor"]="LEGEND_TITLECOLOR",e[e.LEGEND_TITLEFONT="legendTitleFont"]="LEGEND_TITLEFONT",e[e.LEGEND_TITLEFONTSIZE="legendTitleFontSize"]="LEGEND_TITLEFONTSIZE",e[e.LEGEND_TITLEFONTWEIGHT="legendTitleFontWeight"]="LEGEND_TITLEFONTWEIGHT"}(n.Property||(n.Property={}));var u=n.Property;n.hasNestedProperty=r,n.ENCODING_PROPERTIES=[u.CHANNEL,u.BIN,u.BIN_MAXBINS,u.TIMEUNIT,u.AGGREGATE,u.AUTOCOUNT,u.FIELD,u.TYPE,u.SORT,u.SORT_FIELD,u.SORT_OP,u.SORT_ORDER,u.SCALE,u.SCALE_BANDSIZE,u.SCALE_CLAMP,u.SCALE_DOMAIN,u.SCALE_EXPONENT,u.SCALE_NICE,u.SCALE_RANGE,u.SCALE_ROUND,u.SCALE_TYPE,u.SCALE_USERAWDOMAIN,u.SCALE_ZERO,u.AXIS,u.AXIS_AXISCOLOR,u.AXIS_AXISWIDTH,u.AXIS_CHARACTERWIDTH,u.AXIS_FORMAT,u.AXIS_GRID,u.AXIS_GRIDCOLOR,u.AXIS_GRIDDASH,u.AXIS_GRIDOPACITY,u.AXIS_GRIDWIDTH,u.AXIS_LABELANGLE,u.AXIS_LABELMAXLENGTH,u.AXIS_LABELS,u.AXIS_LAYER,u.AXIS_OFFSET,u.AXIS_ORIENT,u.AXIS_SHORTTIMELABELS,u.AXIS_SUBDIVIDE,u.AXIS_TICKCOLOR,u.AXIS_TICKLABELCOLOR,u.AXIS_TICKLABELFONT,u.AXIS_TICKLABELFONTSIZE,u.AXIS_TICKPADDING,u.AXIS_TICKS,u.AXIS_TICKSIZE,u.AXIS_TICKSIZEEND,u.AXIS_TICKSIZEMAJOR,u.AXIS_TICKSIZEMINOR,u.AXIS_TICKWIDTH,u.AXIS_TITLE,u.AXIS_TITLECOLOR,u.AXIS_TITLEFONT,u.AXIS_TITLEFONTSIZE,u.AXIS_TITLEFONTWEIGHT,u.AXIS_TITLEMAXLENGTH,u.AXIS_TITLEOFFSET,u.AXIS_VALUES,u.LEGEND,u.LEGEND_ORIENT,u.LEGEND_OFFSET,u.LEGEND_VALUES,u.LEGEND_FORMAT,u.LEGEND_LABELALIGN,u.LEGEND_LABELBASELINE,u.LEGEND_LABELCOLOR,u.LEGEND_LABELFONT,u.LEGEND_LABELFONTSIZE,u.LEGEND_SHORTTIMELABELS,u.LEGEND_SYMBOLCOLOR,u.LEGEND_SYMBOLSHAPE,u.LEGEND_SYMBOLSIZE,u.LEGEND_SYMBOLSTROKEWIDTH,u.LEGEND_TITLE,u.LEGEND_TITLECOLOR,u.LEGEND_TITLEFONT,u.LEGEND_TITLEFONTSIZE,u.LEGEND_TITLEFONTWEIGHT],n.DEFAULT_PROPERTY_PRECEDENCE=[u.TYPE,u.FIELD,u.BIN,u.TIMEUNIT,u.AGGREGATE,u.AUTOCOUNT,u.SORT,u.SORT_FIELD,u.SORT_OP,u.SORT_ORDER,u.BIN_MAXBINS,u.CHANNEL,u.MARK,u.SCALE,u.AXIS,u.LEGEND,u.SCALE_BANDSIZE,u.SCALE_CLAMP,u.SCALE_DOMAIN,u.SCALE_EXPONENT,u.SCALE_NICE,u.SCALE_RANGE,u.SCALE_ROUND,u.SCALE_TYPE,u.SCALE_USERAWDOMAIN,u.SCALE_ZERO,u.AXIS_AXISCOLOR,u.AXIS_AXISWIDTH,u.AXIS_CHARACTERWIDTH,u.AXIS_FORMAT,u.AXIS_GRID,u.AXIS_GRIDCOLOR,u.AXIS_GRIDDASH,u.AXIS_GRIDOPACITY,u.AXIS_GRIDWIDTH,u.AXIS_LABELANGLE,u.AXIS_LABELMAXLENGTH,u.AXIS_LABELS,u.AXIS_LAYER,u.AXIS_OFFSET,u.AXIS_ORIENT,u.AXIS_SHORTTIMELABELS,u.AXIS_SUBDIVIDE,u.AXIS_TICKCOLOR,u.AXIS_TICKLABELCOLOR,u.AXIS_TICKLABELFONT,u.AXIS_TICKLABELFONTSIZE,u.AXIS_TICKPADDING,u.AXIS_TICKS,u.AXIS_TICKSIZE,u.AXIS_TICKSIZEEND,u.AXIS_TICKSIZEMAJOR,u.AXIS_TICKSIZEMINOR,u.AXIS_TICKWIDTH,u.AXIS_TITLE,u.AXIS_TITLECOLOR,u.AXIS_TITLEFONT,u.AXIS_TITLEFONTSIZE,u.AXIS_TITLEFONTWEIGHT,u.AXIS_TITLEMAXLENGTH,u.AXIS_TITLEOFFSET,u.AXIS_VALUES,u.LEGEND_ORIENT,u.LEGEND_OFFSET,u.LEGEND_VALUES,u.LEGEND_FORMAT,u.LEGEND_LABELALIGN,u.LEGEND_LABELBASELINE,u.LEGEND_LABELCOLOR,u.LEGEND_LABELFONT,u.LEGEND_LABELFONTSIZE,u.LEGEND_SHORTTIMELABELS,u.LEGEND_SYMBOLCOLOR,u.LEGEND_SYMBOLSHAPE,u.LEGEND_SYMBOLSIZE,u.LEGEND_SYMBOLSTROKEWIDTH,u.LEGEND_TITLE,u.LEGEND_TITLECOLOR,u.LEGEND_TITLEFONT,u.LEGEND_TITLEFONTSIZE,u.LEGEND_TITLEFONTWEIGHT],n.NESTED_ENCODING_PROPERTIES=[{property:u.BIN_MAXBINS,parent:"bin",child:"maxbins"},{property:u.SORT_FIELD,parent:"sort",child:"field"},{property:u.SORT_OP,parent:"sort",child:"op"},{property:u.SORT_ORDER,parent:"sort",child:"order"},{property:u.SCALE_BANDSIZE,parent:"scale",child:"bandSize"},{property:u.SCALE_CLAMP,parent:"scale",child:"clamp"},{property:u.SCALE_DOMAIN,parent:"scale",child:"domain"},{property:u.SCALE_EXPONENT,parent:"scale",child:"exponent"},{property:u.SCALE_NICE,parent:"scale",child:"nice"},{property:u.SCALE_RANGE,parent:"scale",child:"range"},{property:u.SCALE_ROUND,parent:"scale",child:"round"},{property:u.SCALE_TYPE,parent:"scale",child:"type"},{property:u.SCALE_USERAWDOMAIN,parent:"scale",child:"useRawDomain"},{property:u.SCALE_ZERO,parent:"scale",child:"zero"},{property:u.AXIS_AXISCOLOR,parent:"axis",child:"axisColor"},{property:u.AXIS_AXISWIDTH,parent:"axis",child:"axisWidth"},{property:u.AXIS_LAYER,parent:"axis",child:"layer"},{property:u.AXIS_OFFSET,parent:"axis",child:"offset"},{property:u.AXIS_ORIENT,parent:"axis",child:"orient"},{property:u.AXIS_GRID,parent:"axis",child:"grid"},{property:u.AXIS_GRIDCOLOR,parent:"axis",child:"gridColor"},{property:u.AXIS_GRIDDASH,parent:"axis",child:"gridDash"},{property:u.AXIS_GRIDOPACITY,parent:"axis",child:"gridOpacity"},{property:u.AXIS_GRIDWIDTH,parent:"axis",child:"gridWidth"},{property:u.AXIS_LABELS,parent:"axis",child:"labels"},{property:u.AXIS_FORMAT,parent:"axis",child:"format"},{property:u.AXIS_LABELANGLE,parent:"axis",child:"labelAngle"},{property:u.AXIS_LABELMAXLENGTH,parent:"axis",child:"labelMaxLength"},{property:u.AXIS_SHORTTIMELABELS,parent:"axis",child:"shortTimeLabels"},{property:u.AXIS_TICKS,parent:"axis",child:"ticks"},{property:u.AXIS_SUBDIVIDE,parent:"axis",child:"subdivide"},{property:u.AXIS_TICKCOLOR,parent:"axis",child:"tickColor"},{property:u.AXIS_TICKLABELCOLOR,parent:"axis",child:"tickLabelColor"},{property:u.AXIS_TICKLABELFONT,parent:"axis",child:"tickLabelFont"},{property:u.AXIS_TICKLABELFONTSIZE,parent:"axis",child:"tickLabelFontSize"},{property:u.AXIS_TICKPADDING,parent:"axis",child:"tickPadding"},{property:u.AXIS_TICKSIZE,parent:"axis",child:"tickSize"},{property:u.AXIS_TICKSIZEMAJOR,parent:"axis",child:"tickSizeMajor"},{property:u.AXIS_TICKSIZEMINOR,parent:"axis",child:"tickSizeMinor"},{property:u.AXIS_TICKSIZEEND,parent:"axis",child:"tickSizeEnd"},{property:u.AXIS_TICKWIDTH,parent:"axis",child:"tickWidth"},{property:u.AXIS_VALUES,parent:"axis",child:"values"},{property:u.AXIS_TITLE,parent:"axis",child:"title"},{property:u.AXIS_TITLECOLOR,parent:"axis",child:"titleColor"},{property:u.AXIS_TITLEFONT,parent:"axis",child:"titleFont"},{property:u.AXIS_TITLEFONTSIZE,parent:"axis",child:"titleFontSize"},{property:u.AXIS_TITLEFONTWEIGHT,parent:"axis",child:"titleFontWeight"},{property:u.AXIS_CHARACTERWIDTH,parent:"axis",child:"characterWidth"},{property:u.AXIS_TITLEMAXLENGTH,parent:"axis",child:"titleMaxLength"},{property:u.AXIS_TITLEOFFSET,parent:"axis",child:"titleOffset"},{property:u.LEGEND_ORIENT,parent:"legend",child:"orient"},{property:u.LEGEND_OFFSET,parent:"legend",child:"offset"},{property:u.LEGEND_VALUES,parent:"legend",child:"values"},{property:u.LEGEND_FORMAT,parent:"legend",child:"format"},{property:u.LEGEND_LABELALIGN,parent:"legend",child:"labelAlign"},{property:u.LEGEND_LABELBASELINE,parent:"legend",child:"labelBaseline"},{property:u.LEGEND_LABELFONT,parent:"legend",child:"labelFont"},{property:u.LEGEND_LABELFONTSIZE,parent:"legend",child:"labelFontSize"},{property:u.LEGEND_SHORTTIMELABELS,parent:"legend",child:"shortTimeLabels"},{property:u.LEGEND_SYMBOLCOLOR,parent:"legend",child:"symbolColor"},{property:u.LEGEND_SYMBOLSHAPE,parent:"legend",child:"symbolShape"},{property:u.LEGEND_SYMBOLSIZE,parent:"legend",child:"symbolSize"},{property:u.LEGEND_SYMBOLSTROKEWIDTH,parent:"legend",child:"symbolStrokeWidth"},{property:u.LEGEND_TITLE,parent:"legend",child:"title"},{property:u.LEGEND_TITLECOLOR,parent:"legend",child:"titleColor"},{property:u.LEGEND_TITLEFONT,parent:"legend",child:"titleFont"},{property:u.LEGEND_TITLEFONTSIZE,parent:"legend",child:"titleFontSize"},{property:u.LEGEND_TITLEFONTWEIGHT,parent:"legend",child:"titleFontWeight"}];var c=n.NESTED_ENCODING_PROPERTIES.reduce(function(e,t){return e[t.property]=t,e},{}),f=n.NESTED_ENCODING_PROPERTIES.reduce(function(e,t){var n=t.parent;return n in e||(e[n]=[]),e[t.parent].push(t),e},{});n.SCALE_PROPERTIES=f.scale.map(function(e){return e.property});var d=n.ENCODING_PROPERTIES.reduce(function(e,t){return e[t]=t,e},{});n.isEncodingProperty=i,n.getNestedEncodingProperty=a,n.getNestedEncodingPropertyChildren=o,n.isNestedEncodingProperty=s;var h=[{property:"bandSize",supportedScaleType:[l.ScaleType.ORDINAL]},{property:"clamp",supportedScaleType:[l.ScaleType.LINEAR,l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.TIME,l.ScaleType.UTC]},{property:"domain",supportedScaleType:[l.ScaleType.LINEAR,l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.QUANTILE,l.ScaleType.QUANTIZE,l.ScaleType.ORDINAL,l.ScaleType.SQRT,l.ScaleType.TIME,l.ScaleType.UTC]},{property:"exponent",supportedScaleType:[l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.SQRT]},{property:"nice",supportedScaleType:[l.ScaleType.LINEAR,l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.TIME,l.ScaleType.UTC]},{property:"range",supportedScaleType:[l.ScaleType.LINEAR,l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.QUANTILE,l.ScaleType.QUANTIZE,l.ScaleType.ORDINAL,l.ScaleType.SQRT,l.ScaleType.TIME,l.ScaleType.UTC]},{property:"round",supportedScaleType:[l.ScaleType.LINEAR,l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.SQRT,l.ScaleType.TIME,l.ScaleType.UTC]},{property:"useRawDomain",supportedScaleType:[l.ScaleType.LINEAR,l.ScaleType.LOG,l.ScaleType.POW,l.ScaleType.QUANTILE,l.ScaleType.QUANTIZE,l.ScaleType.ORDINAL,l.ScaleType.SQRT,l.ScaleType.TIME,l.ScaleType.UTC]},{property:"zero",supportedScaleType:[l.ScaleType.LINEAR,l.ScaleType.POW,l.ScaleType.SQRT]}];n.SUPPORTED_SCALE_PROPERTY_INDEX=h.reduce(function(e,t){var n=t.property;return e[n]=t.supportedScaleType,e},{})},{"vega-lite/src/scale":50}],22:[function(e,t,n){"use strict";function r(e){return c.contains([l.Type.NOMINAL,l.Type.ORDINAL],e.type)||!u.isEnumSpec(e.bin)&&!!e.bin||!u.isEnumSpec(e.timeUnit)&&!!e.timeUnit}function i(e){return e.type===l.Type.QUANTITATIVE&&!e.bin||e.type===l.Type.TEMPORAL&&!e.timeUnit}function a(e){var t=e.scale===!0||e.scale===u.SHORT_ENUM_SPEC?{}:e.scale,n=e.type,r=e.timeUnit;if(t&&void 0!==t.type)return t.type;if(!u.isEnumSpec(n)){if(n===l.Type.QUANTITATIVE)return o.ScaleType.LINEAR;if(n===l.Type.ORDINAL||n===l.Type.NOMINAL)return o.ScaleType.ORDINAL;if(n===l.Type.TEMPORAL){if(void 0!==r){if(u.isEnumSpec(r))return;return s.defaultScaleType(r)}return o.ScaleType.TIME}throw new Error("Unsupported type: "+n+" in scaleType")}}var o=e("vega-lite/src/scale"),s=e("vega-lite/src/timeunit"),l=e("vega-lite/src/type"),u=e("../enumspec"),c=e("../util");n.isDimension=r,n.isMeasure=i,n.scaleType=a},{"../enumspec":16,"../util":37,"vega-lite/src/scale":50,"vega-lite/src/timeunit":53,"vega-lite/src/type":54}],23:[function(e,t,n){"use strict";function r(e){return o.isObject(e)&&!!e.property}function i(e,t,n){e.forEach(function(e){r(e)?(t[e.property]=!0,n[e.property]=e.replace):t[e]=!0})}function a(e){return o.isArray(e)?e.map(function(e){if(r(e)){if(e.replace){var t=s.keys(e.replace).reduce(function(t,n){var r=e.replace[n];return(t[r]=t[r]||[]).push(n),t},{});return e.property+"["+s.keys(t).map(function(e){var n=t[e].sort();return n.join(",")+"=>"+e}).join(";")+"]"}return e.property}return e}).join(","):e}var o=e("datalib/src/util"),s=e("../util");n.REPLACE_BLANK_FIELDS={"*":""},n.REPLACE_XY_CHANNELS={x:"xy",y:"xy"},n.REPLACE_FACET_CHANNELS={row:"facet",column:"facet"},n.REPLACE_MARK_STYLE_CHANNELS={color:"style",opacity:"style",shape:"style",size:"style"},n.isExtendedGroupBy=r,n.parse=i,n.toString=a},{"../util":37,"datalib/src/util":8}],24:[function(e,t,n){"use strict";function r(e,t,n){e=u.extend({},i(e),{config:u.extend({},a.DEFAULT_QUERY_CONFIG,n,e.config)});var r=o.generate(e.spec,t,e.config),c=s.nest(r,e),f=l.rank(c,e,t,0);return{query:e,result:f}}function i(e){if(e.groupBy){var t={groupBy:e.groupBy};e.orderBy&&(t.orderGroupBy=e.orderBy);var n={spec:u.duplicate(e.spec),nest:[t]};return e.chooseBy&&(n.chooseBy=e.chooseBy),e.config&&(n.config=e.config),n}return u.duplicate(e)}var a=e("../config"),o=e("../generate"),s=e("../nest"),l=e("../ranking/ranking"),u=e("../util");n.encoding=e("./encoding"),n.groupBy=e("./groupby"),n.shorthand=e("./shorthand"),n.spec=e("./spec"),n.transform=e("./transform"),n.query=r,n.normalize=i},{"../config":9,"../generate":18,"../nest":20,"../ranking/ranking":34,"../util":37,"./encoding":22,"./groupby":23,"./shorthand":25,"./spec":26,"./transform":27}],25:[function(e,t,n){"use strict";function r(e){return v.keys(e).reduce(function(t,n){return t[n]=i(e[n]),t},{})}function i(e){return function(t){return void 0!==e[t]?e[t]:t}}function a(e,t){return g.isEnumSpec(e)?e["enum"]?g.SHORT_ENUM_SPEC+JSON.stringify(e["enum"]):g.SHORT_ENUM_SPEC:t?t(e):e}function o(e,t){return t?t(e):e}function s(e,t,r){void 0===t&&(t=n.INCLUDE_ALL),void 0===r&&(r={});var i=p.fromSpec(e);return l(i)}function l(e,t,r){void 0===t&&(t=n.INCLUDE_ALL),void 0===r&&(r={});var i=[];if(t[m.Property.MARK]&&i.push(a(e.mark,r[m.Property.MARK])),e.transform&&(t[m.Property.CALCULATE]&&void 0!==e.transform.calculate&&i.push("calculate:"+u(e.transform.calculate)),t[m.Property.FILTER]&&void 0!==e.transform.filter&&i.push("filter:"+JSON.stringify(e.transform.filter)),t[m.Property.FILTERINVALID]&&void 0!==e.transform.filterInvalid&&i.push("filterInvalid:"+e.transform.filterInvalid)),t[m.Property.STACK]){var o=p.stack(e);if(o){var s=v.extend({},t,{type:!1}),l=f(o.fieldEncQ,s,r),d=f(o.groupByEncQ,s,r);i.push("stack={field:"+l+","+(d?"by:"+d+",":"")+"offset:"+o.offset+"}")}}return i.push(e.encodings.reduce(function(e,n){if(n.autoCount!==!1){var i=c(n,t,r);i&&e.push(i)}return e},[]).sort().join("|")),i.join("|")}function u(e){return e.map(function(e){return"{"+e.field+":"+e.expr+"}"}).join(",")}function c(e,t,r){void 0===t&&(t=n.INCLUDE_ALL),void 0===r&&(r={});var i=[];t[m.Property.CHANNEL]&&i.push(a(e.channel,r[m.Property.CHANNEL]));var o=f(e,t,r);return o&&i.push(o),i.join(":")}function f(e,t,r){void 0===t&&(t=n.INCLUDE_ALL),void 0===r&&(r={});var i=null,s=null,l=[];if(t[m.Property.AGGREGATE]&&e.autoCount===!1)return"-";if(t[m.Property.AGGREGATE]&&e.aggregate&&!g.isEnumSpec(e.aggregate))i=o(e.aggregate,r[m.Property.AGGREGATE]);else if(t[m.Property.AGGREGATE]&&e.autoCount&&!g.isEnumSpec(e.autoCount))i=o("count",r[m.Property.AGGREGATE]);else if(t[m.Property.TIMEUNIT]&&e.timeUnit&&!g.isEnumSpec(e.timeUnit))i=o(e.timeUnit,r[m.Property.TIMEUNIT]);else if(t[m.Property.BIN]&&e.bin&&!g.isEnumSpec(e.bin))i="bin",t[m.Property.BIN_MAXBINS]&&e.bin.maxbins&&l.push({key:"maxbins",value:a(e.bin.maxbins,r[m.Property.BIN_MAXBINS])});else{for(var u=0,c=[m.Property.AGGREGATE,m.Property.AUTOCOUNT,m.Property.TIMEUNIT,m.Property.BIN];u<c.length;u++){var f=c[u];t[f]&&e[f]&&g.isEnumSpec(e[f])&&(i=g.SHORT_ENUM_SPEC+"",s=s||{},s[f]=e[f]["enum"]||e[f],f===m.Property.BIN&&t[m.Property.BIN_MAXBINS]&&e.bin.maxbins&&l.push({key:"maxbins",value:a(e.bin.maxbins,r[m.Property.BIN_MAXBINS])}))}s&&e.hasFn&&(s.hasFn=!0)}for(var p=function(i){if(!g.isEnumSpec(e.channel)&&!n.PROPERTY_SUPPORTED_CHANNELS[i][e.channel])return"continue";if(t[i])if(e[i]&&!g.isEnumSpec(e[i]))if(h.isString(e[i]))l.push({key:i+"",value:JSON.stringify(e[i])});else{var a=m.getNestedEncodingPropertyChildren(i),s=a.reduce(function(n,a){return t[a.property]&&void 0!==e[i][a.child]&&(n[a.child]=o(e[i][a.child],r[a.property])),n},{});v.keys(s).length>0&&l.push({key:i+"",value:JSON.stringify(s)})}else e[i]!==!1&&null!==e[i]||l.push({key:i+"",value:!1})},y=0,b=[m.Property.SCALE,m.Property.SORT,m.Property.AXIS,m.Property.LEGEND];y<b.length;y++){var _=b[y];p(_)}var E=t[m.Property.FIELD]?a(e.field||"*",r[m.Property.FIELD]):"...";if(t[m.Property.TYPE])if(g.isEnumSpec(e.type))E+=","+a(e.type,r[m.Property.TYPE]);else{var x=((e.type||d.Type.QUANTITATIVE)+"").substr(0,1);E+=","+a(x,r[m.Property.TYPE])}return E+=l.map(function(e){return","+e.key+"="+e.value}).join(""),i?i+(s?JSON.stringify(s):"")+"("+E+")":E}var d=e("vega-lite/src/type"),h=e("datalib/src/util"),p=e("./spec"),g=e("../enumspec"),m=e("../property"),v=e("../util");n.getReplacerIndex=r,n.getReplacer=i,n.value=a,n.replace=o,n.INCLUDE_ALL=m.DEFAULT_PROPERTY_PRECEDENCE.concat([m.Property.CALCULATE,m.Property.FILTER,m.Property.FILTERINVALID,m.Property.STACK]).reduce(function(e,t){return e[t]=!0,e},{}),n.vlSpec=s,n.PROPERTY_SUPPORTED_CHANNELS={axis:{x:!0,y:!0,row:!0,column:!0},legend:{color:!0,opacity:!0,size:!0,shape:!0},scale:{x:!0,y:!0,color:!0,opacity:!0,row:!0,column:!0,size:!0,shape:!0},sort:{x:!0,y:!0,path:!0,order:!0}},n.spec=l,n.calculate=u,n.encoding=c,n.fieldDef=f},{"../enumspec":16,"../property":21,"../util":37,"./spec":26,"datalib/src/util":8,"vega-lite/src/type":54}],26:[function(e,t,n){"use strict";function r(e){return f.extend(e.data?{data:e.data}:{},e.transform?{transform:e.transform}:{},{mark:e.mark,encodings:f.keys(e.encoding).map(function(t){for(var n={channel:t},r=e.encoding[t],i=0,a=c.ENCODING_PROPERTIES;i<a.length;i++){var o=a[i];c.isNestedEncodingProperty(o)||void 0===r[o]||(n[o]=r[o]),f.contains([c.Property.SCALE,c.Property.AXIS,c.Property.LEGEND],o)&&null===n[o]&&(n[o]=!1)}return n})
},e.config?{config:e.config}:{})}function i(e){return f.some(e.encodings,function(e){return!u.isEnumSpec(e.aggregate)&&!!e.aggregate||e.autoCount===!0})}function a(e){var t=e.config,n=t&&t.mark?t.mark.stacked:void 0;if(f.contains([l.StackOffset.NONE,null,!1],n))return null;if(!f.contains([s.BAR,s.AREA],e.mark))return null;if(!i(e))return null;var r=e.encodings.reduce(function(e,t){return f.contains(o.STACK_GROUP_CHANNELS,t.channel)&&!t.aggregate&&e.push(t.channel),e},[]);if(0===r.length)return null;var a=e.encodings.reduce(function(e,t){return e||(t.channel===o.Channel.X?t:null)},null),u=e.encodings.reduce(function(e,t){return e||(t.channel===o.Channel.Y?t:null)},null),c=!(!a||!a.aggregate&&!a.autoCount),d=!(!u||!u.aggregate&&!u.autoCount);return c!==d?{groupbyChannel:c?u?o.Y:null:a?o.X:null,groupByEncQ:c?u:a,fieldChannel:c?o.X:o.Y,fieldEncQ:c?a:u,stackByChannels:r,offset:n||l.StackOffset.ZERO}:null}var o=e("vega-lite/src/channel"),s=e("vega-lite/src/mark"),l=e("vega-lite/src/stack"),u=e("../enumspec"),c=e("../property"),f=e("../util");n.fromSpec=r,n.isAggregate=i,n.stack=a},{"../enumspec":16,"../property":21,"../util":37,"vega-lite/src/channel":46,"vega-lite/src/mark":49,"vega-lite/src/stack":52}],27:[function(e,t,n){"use strict"},{}],28:[function(e,t,n){"use strict";function r(e,t,n){var r=i(e,t,n);return{score:r.score,features:[r]}}function i(e,t,r){var i=e.getEncodings();if(e.isAggregate()){var u=function(e){return e.type===o.Type.QUANTITATIVE&&!e.bin&&!e.aggregate&&!e.autoCount||e.type===o.Type.TEMPORAL&&!e.timeUnit};if(s.some(i,u))return{type:n.name,score:.1,feature:"Aggregate with raw continuous"};if(s.some(i,l.isDimension)){var c=s.some(i,function(e){return e.aggregate===a.AggregateOp.COUNT||e.autoCount===!0}),f=s.some(i,function(e){return!!e.bin});return c?{type:n.name,score:.8,feature:"Aggregate with count"}:f?{type:n.name,score:.7,feature:"Aggregate with bin but without count"}:{type:n.name,score:.9,feature:"Aggregate without count and without bin"}}return{type:n.name,score:.3,feature:"Aggregate without dimension"}}return s.some(i,l.isMeasure)?{type:n.name,score:1,feature:"Raw with measure"}:{type:n.name,score:.2,feature:"Raw without measure"}}var a=e("vega-lite/src/aggregate"),o=e("vega-lite/src/type"),s=e("../util"),l=e("../query/encoding");n.name="aggregationQuality",n.score=r},{"../query/encoding":22,"../util":37,"vega-lite/src/aggregate":43,"vega-lite/src/type":54}],29:[function(e,t,n){"use strict";var r,i=e("vega-lite/src/channel"),a=e("../../config"),o=e("../../query/shorthand"),s=e("../../util"),l=e("./effectiveness"),u=e("./type");!function(e){function t(){var e={},t={x:0,y:0,size:-.575,color:-.725,opacity:-.85,text:-.875,row:-.9,column:-.9,shape:-2.5,detail:-3};[u.Q,u.BIN_Q,u.T,u.TIMEUNIT_T,u.TIMEUNIT_O,u.O].forEach(function(r){s.keys(t).forEach(function(i){e[n(r,i)]=t[i]})}),[u.BIN_Q,u.TIMEUNIT_T,u.TIMEUNIT_O,u.O].forEach(function(t){[i.Channel.ROW,i.Channel.COLUMN].forEach(function(r){e[n(t,r)]+=.15})});var r={x:0,y:0,color:-.6,shape:-.65,row:-.7,column:-.7,text:-.8,size:-1.8,detail:-2,opacity:-2.1};return s.keys(r).forEach(function(t){e[n(u.N,t)]=r[t]}),e}function n(e,t){return e+"_"+t}function r(t,r,i){var a=t.getEncodings().reduce(function(e,t){var n=o.fieldDef(t);return(e[n]=e[n]||[]).push(t),e},{}),c=[];return s.forEach(a,function(t){var r=t.reduce(function(t,r){var i=u.getExtendedType(r),a=n(i,r.channel),o=l.getFeatureScore(e.TYPE_CHANNEL,a);return null===t||o.score>t.score?o:t},null);c.push(r)}),c}e.TYPE_CHANNEL="typeChannel",e.init=t,e.featurize=n,e.getScore=r}(r=n.TypeChannelScore||(n.TypeChannelScore={}));var c;!function(e){function t(e){void 0===e&&(e={}),e=s.extend({},a.DEFAULT_QUERY_CONFIG,e);var t={},n=[{feature:u.BIN_Q,opt:"preferredBinAxis"},{feature:u.T,opt:"preferredTemporalAxis"},{feature:u.TIMEUNIT_T,opt:"preferredTemporalAxis"},{feature:u.TIMEUNIT_O,opt:"preferredTemporalAxis"},{feature:u.O,opt:"preferredOrdinalAxis"},{feature:u.N,opt:"preferredNominalAxis"}];return n.forEach(function(n){e[n.opt]===i.Channel.X?t[n.feature+"_"+i.Channel.Y]=-.01:e[n.opt]===i.Channel.Y&&(t[n.feature+"_"+i.Channel.X]=-.01)}),t}function n(e,t){return e+"_"+t}function r(t,r,i){return t.getEncodings().reduce(function(t,r){var i=u.getExtendedType(r),a=n(i,r.channel),o=l.getFeatureScore(e.PREFERRED_AXIS,a);return o&&t.push(o),t},[])}e.PREFERRED_AXIS="preferredAxis",e.init=t,e.featurize=n,e.getScore=r}(c=n.PreferredAxisScore||(n.PreferredAxisScore={}));var f;!function(e){function t(e){e=s.extend({},a.DEFAULT_QUERY_CONFIG,e);var t={};return e.preferredFacet===i.Channel.ROW?t[i.Channel.COLUMN]=-.01:e.preferredFacet===i.Channel.COLUMN&&(t[i.Channel.ROW]=-.01),t}function n(t,n,r){return t.getEncodings().reduce(function(t,n){var r=l.getFeatureScore(e.PREFERRED_FACET,n.channel);return r&&t.push(r),t},[])}e.PREFERRED_FACET="preferredFacet",e.init=t,e.getScore=n}(f=n.PreferredFacetScore||(n.PreferredFacetScore={}));var d;!function(e){function t(){return{bar_size:-2,tick_size:-2}}function n(t,n,r){var i=t.getMark();return t.getEncodings().reduce(function(t,n){var r=i+"_"+n.channel,a=l.getFeatureScore(e.MARK_CHANNEL,r);return a&&t.push(a),t},[])}e.MARK_CHANNEL="markChannel",e.init=t,e.getScore=n}(d=n.MarkChannelScore||(n.MarkChannelScore={}));var h;!function(e){function t(){return{row:-2,column:-2,color:0,opacity:0,size:0,shape:0}}function n(t,n,r){return t.isAggregate()&&t.getEncodings().reduce(function(t,n){if(!n.aggregate&&!n.autoCount){var r=l.getFeatureScore(e.DIMENSION,n.channel+"");if(r.score>t.score)return r}return t},{type:e.DIMENSION,feature:"No Dimension",score:-5}),[]}e.DIMENSION="dimension",e.init=t,e.getScore=n}(h=n.DimensionScore||(n.DimensionScore={}))},{"../../config":9,"../../query/shorthand":25,"../../util":37,"./effectiveness":30,"./type":32,"vega-lite/src/channel":46}],30:[function(e,t,n){"use strict";function r(e,t){var r=n.FEATURE_INDEX[e][t];return void 0!==r?{score:r,type:e,feature:t}:null}function i(e){l.push(e),n.FEATURE_INDEX[e.type]=e.init()}function a(e,t,n){var r=l.reduce(function(r,i){var a=i.getScore(e,t,n);return r.concat(a)},[]);return{score:r.reduce(function(e,t){return e+t.score},0),features:r}}var o=e("./channel"),s=e("./mark");n.FEATURE_INDEX={};var l=[];n.getFeatureScore=r,n.addFeatureFactory=i,i({type:o.TypeChannelScore.TYPE_CHANNEL,init:o.TypeChannelScore.init,getScore:o.TypeChannelScore.getScore}),i({type:o.PreferredAxisScore.PREFERRED_AXIS,init:o.PreferredAxisScore.init,getScore:o.PreferredAxisScore.getScore}),i({type:o.PreferredFacetScore.PREFERRED_FACET,init:o.PreferredFacetScore.init,getScore:o.PreferredFacetScore.getScore}),i({type:o.MarkChannelScore.MARK_CHANNEL,init:o.MarkChannelScore.init,getScore:o.MarkChannelScore.getScore}),i({type:s.MarkScore.MARK_SCORE,init:s.MarkScore.init,getScore:s.MarkScore.getScore}),Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a},{"./channel":29,"./mark":31}],31:[function(e,t,n){"use strict";var r,i=e("vega-lite/src/channel"),a=e("vega-lite/src/mark"),o=e("../../util"),s=e("./effectiveness"),l=e("./type");!function(e){function t(e,t,n,r){return e+"_"+t+"_"+n+"_"+r}function n(){var e=[l.Q,l.T],n=[l.BIN_Q,l.TIMEUNIT_O,l.O,l.N],r=n.concat([l.NONE]),i={};return e.forEach(function(n){e.forEach(function(e){var r={point:0,text:-.2,tick:-.5,rect:-1,bar:-2,line:-2,area:-2,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(n,e,!0,a);i[o]=r});var a={point:0,text:-.2,tick:-.5,bar:-2,line:-2,area:-2,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(a,function(r,a){var o=t(n,e,!1,a);i[o]=r})})}),e.forEach(function(e){r.forEach(function(n){var r={tick:0,point:-.2,text:-.5,bar:-2,line:-2,area:-2,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(e,n,!0,a);i[o]=r;var s=t(n,e,!0,a);i[s]=r})}),[l.TIMEUNIT_T].forEach(function(n){var r={point:0,text:-.5,tick:-1,bar:-2,line:-2,area:-2,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(e,n,!0,a);i[o]=r;var s=t(n,e,!0,a);i[s]=r})}),[l.NONE,l.N,l.O].forEach(function(n){var r={bar:0,point:-.2,tick:-.25,text:-.3,line:-2,area:-2,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(e,n,!1,a);i[o]=r;var s=t(n,e,!1,a);i[s]=r})}),[l.BIN_Q].forEach(function(n){var r={bar:0,point:-.2,tick:-.25,text:-.3,line:-.5,area:-.5,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(e,n,!1,a);i[o]=r;var s=t(n,e,!1,a);i[s]=r})}),[l.TIMEUNIT_T,l.TIMEUNIT_O].forEach(function(n){var r={line:0,area:-.1,bar:-.2,point:-.3,tick:-.35,text:-.4,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(e,n,!1,a);i[o]=r;var s=t(n,e,!1,a);i[s]=r})})}),[l.TIMEUNIT_T].forEach(function(e){[l.TIMEUNIT_T].forEach(function(n){var r={point:0,rect:-.1,text:-.5,tick:-1,bar:-2,line:-2,area:-2,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(e,n,!0,a);i[o]=r}),o.forEach(r,function(r,a){var o=t(e,n,!1,a);i[o]=r})}),r.forEach(function(n){var r={tick:0,point:-.2,text:-.5,rect:-1,bar:-2,line:-2,area:-2,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(e,n,!0,a);i[o]=r}),o.forEach(r,function(r,a){var o=t(n,e,!0,a);i[o]=r}),o.forEach(r,function(r,a){var o=t(e,n,!1,a);i[o]=r}),o.forEach(r,function(r,a){var o=t(n,e,!1,a);i[o]=r})})}),r.forEach(function(e){r.forEach(function(n){var r={point:0,rect:0,text:-.1,tick:-1,bar:-2,line:-2,area:-2,rule:-2.5,boxplot:-.5,hexagon:-.5,leader:-.5,contour:-.5,scatter3D:-.5,radar:-.5};o.forEach(r,function(r,a){var o=t(e,n,!0,a);i[o]=r}),o.forEach(r,function(r,a){var o=t(e,n,!1,a);i[o]=r})})}),i}function r(t,n,r){var o=t.getMark();o!==a.Mark.CIRCLE&&o!==a.Mark.SQUARE||(o=a.Mark.POINT);var u=t.getEncodingQueryByChannel(i.Channel.X),c=u?l.getExtendedType(u):l.NONE,f=t.getEncodingQueryByChannel(i.Channel.Y),d=f?l.getExtendedType(f):l.NONE,h=!t.isAggregate(),p=c+"_"+d+"_"+h+"_"+o,g=s.getFeatureScore(e.MARK_SCORE,p);return[g]}e.MARK_SCORE="markScore",e.featurize=t,e.init=n,e.getScore=r}(r=n.MarkScore||(n.MarkScore={}))},{"../../util":37,"./effectiveness":30,"./type":32,"vega-lite/src/channel":46,"vega-lite/src/mark":49}],32:[function(e,t,n){"use strict";function r(e){return e.bin?s.BIN_Q:e.timeUnit?o.scaleType(e)===i.ScaleType.ORDINAL?s.TIMEUNIT_O:s.TIMEUNIT_T:e.type}var i=e("vega-lite/src/scale"),a=e("vega-lite/src/type"),o=e("../../query/encoding");!function(e){e[e.Q=a.Type.QUANTITATIVE]="Q",e[e.BIN_Q="bin_"+a.Type.QUANTITATIVE]="BIN_Q",e[e.T=a.Type.TEMPORAL]="T",e[e.TIMEUNIT_T="timeUnit_time"]="TIMEUNIT_T",e[e.TIMEUNIT_O="timeUnit_"+a.Type.ORDINAL]="TIMEUNIT_O",e[e.O=a.Type.ORDINAL]="O",e[e.N=a.Type.NOMINAL]="N",e[e.NONE="-"]="NONE"}(n.ExtendedType||(n.ExtendedType={}));var s=n.ExtendedType;n.Q=s.Q,n.BIN_Q=s.BIN_Q,n.T=s.T,n.TIMEUNIT_T=s.TIMEUNIT_T,n.TIMEUNIT_O=s.TIMEUNIT_O,n.O=s.O,n.N=s.N,n.NONE=s.NONE,n.getExtendedType=r},{"../../query/encoding":22,"vega-lite/src/scale":50,"vega-lite/src/type":54}],33:[function(e,t,n){"use strict";function r(e,t,n){var r=e.enumSpecIndex.encodingIndicesByProperty[i.Property.FIELD];if(!r)return{score:0,features:[]};for(var a=e.specQuery.encodings,o=t.fieldSchemas.length,s=[],l=0,u=1,c=r.length-1;c>=0;c--){var f=r[c],d=a[f].field,h=e.enumSpecIndex.encodings[f].field,p=t.fieldSchema(d).index,g=-p*u;l+=g,s.push({score:g,type:"fieldOrder",feature:"field "+h.name+" is "+d+" (#"+p+" in the schema)"}),u*=o}return{score:l,features:s}}var i=e("../property");n.name="fieldOrder",n.score=r},{"../property":21}],34:[function(e,t,n){"use strict";function r(e,t){c[e]=t}function i(e){return c[e]}function a(e,t,n,r){return t.nest&&r!==t.nest.length?(e.items.forEach(function(e){a(e,t,n,r+1)}),t.nest[r].orderGroupBy&&e.items.sort(s(t.nest[r].orderGroupBy,n,t.config))):(t.orderBy||t.chooseBy)&&(e.items.sort(o(t.orderBy||t.chooseBy,n,t.config)),t.chooseBy&&e.items.length>0&&e.items.splice(1)),e}function o(e,t,n){return function(r,i){return e instanceof Array?l(e,r,i,t,n):l([e],r,i,t,n)}}function s(e,t,n){return function(r,i){var a=r.getTopSpecQueryModel(),o=i.getTopSpecQueryModel();return e instanceof Array?l(e,a,o,t,n):l([e],a,o,t,n)}}function l(e,t,n,r,i){for(var a=0;a<e.length;a++){var o=u(n,e[a],r,i).score-u(t,e[a],r,i).score;if(0!==o)return o}return 0}function u(e,t,n,r){if(void 0!==e.getRankingScore(t))return e.getRankingScore(t);var a=i(t),o=a(e,n,r);return e.setRankingScore(t,o),o}n.effectiveness=e("./effectiveness/effectiveness"),n.aggregation=e("./aggregation"),n.fieldOrder=e("./fieldorder");var c={};n.register=r,n.get=i,n.rank=a,n.comparatorFactory=o,n.groupComparatorFactory=s,n.getScore=u,n.EFFECTIVENESS="effectiveness",r(n.EFFECTIVENESS,n.effectiveness["default"]),r(n.aggregation.name,n.aggregation.score),r(n.fieldOrder.name,n.fieldOrder.score)},{"./aggregation":28,"./effectiveness/effectiveness":30,"./fieldorder":33}],35:[function(e,t,n){"use strict";function r(e,t){var n=d({min:t.min,max:t.max,maxbins:e}),r=p.extend({},t);return r.unique=a(n,t.unique),r.distinct=(n.stop-n.start)/n.step,r.min=n.start,r.max=n.stop,r}function i(e,t){var n=p.extend({},t),r={};return p.keys(t.unique).forEach(function(n){var i,a="null"===n?null:new Date(n);i=null===a?null:isNaN(a.getTime())?"Invalid Date":(e===u.TimeUnit.DAY?a.getDay():u.convert(e,a)).toString(),r[i]=(r[i]||0)+t.unique[n]}),n.unique=r,n.distinct=p.keys(r).length,n}function a(e,t){var n={};for(var r in t){var i=void 0;i=null===r?null:isNaN(Number(r))?NaN:e.value(Number(r)),n[i]=(n[i]||0)+t[r]}return n}function o(e,t){return t.reduce(function(t,n){return e[n]?t+1:t},0)}var s=e("vega-lite/src/type"),l=e("vega-lite/src/bin"),u=e("vega-lite/src/timeunit"),c=e("datalib/src/stats"),f=e("datalib/src/import/type"),d=e("datalib/src/bins/bins"),h=e("./config"),p=e("./util"),g=function(){function e(e){this._fieldSchemas=e,this._fieldSchemaIndex=e.reduce(function(e,t){return e[t.field]=t,e},{})}return e.build=function(t,n){void 0===n&&(n={}),n=p.extend({},h.DEFAULT_QUERY_CONFIG,n);var a=c.summary(t),o=f.inferAll(t),l=a.map(function(e){var r,i=e.field,a=o[i],l=e.distinct;if(a===m.NUMBER)r=s.Type.QUANTITATIVE;else if(a===m.INTEGER)r=l<n.numberNominalLimit&&l/e.count<n.numberNominalProportion?s.Type.NOMINAL:s.Type.QUANTITATIVE;else if(a===m.DATE){r=s.Type.TEMPORAL,e.min=new Date(t[0][i]),e.max=new Date(t[0][i]);for(var u=0;u<t.length;u++){var c=new Date(t[u][i]).getTime();c<e.min.getTime()&&(e.min=new Date(c)),c>e.max.getTime()&&(e.max=new Date(c))}}else r=s.Type.NOMINAL;return{field:i,type:r,primitiveType:a,stats:e,timeStats:{},binStats:{}}}),u={nominal:0,ordinal:1,temporal:2,quantitative:3};l.sort(function(e,t){return u[e.type]<u[t.type]?-1:u[e.type]>u[t.type]?1:e.field.localeCompare(t.field)}),l.forEach(function(e,t){return e.index=t});for(var d=0,g=l;d<g.length;d++){var v=g[d];if(v.type===s.Type.QUANTITATIVE)for(var y=0,b=n.maxBinsList;y<b.length;y++){var _=b[y];v.binStats[_]=r(_,v.stats)}else if(v.type===s.Type.TEMPORAL)for(var E=0,x=n.timeUnits;E<x.length;E++){var S=x[E];void 0!==S&&(v.timeStats[S]=i(S,v.stats))}}return new e(l)},e.prototype.fields=function(){return this._fieldSchemas.map(function(e){return e.field})},Object.defineProperty(e.prototype,"fieldSchemas",{get:function(){return this._fieldSchemas},enumerable:!0,configurable:!0}),e.prototype.fieldSchema=function(e){return this._fieldSchemaIndex[e]},e.prototype.primitiveType=function(e){return this._fieldSchemaIndex[e]?this._fieldSchemaIndex[e].primitiveType:null},e.prototype.type=function(e){return this._fieldSchemaIndex[e]?this._fieldSchemaIndex[e].type:null},e.prototype.cardinality=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var a=this._fieldSchemaIndex[e.field];if(e.aggregate||e.autoCount)return 1;if(e.bin){var s;s="boolean"==typeof e.bin?{maxbins:l.autoMaxBins(e.channel)}:e.bin;var c=s.maxbins;return a.binStats[c]||(a.binStats[c]=r(c,a.stats)),a.binStats[c].distinct}if(e.timeUnit){if(t)switch(e.timeUnit){case u.TimeUnit.SECONDS:return 60;case u.TimeUnit.MINUTES:return 60;case u.TimeUnit.HOURS:return 24;case u.TimeUnit.DAY:return 7;case u.TimeUnit.DATE:return 31;case u.TimeUnit.MONTH:return 12;case u.TimeUnit.QUARTER:return 4;case u.TimeUnit.MILLISECONDS:return 1e3}var f=e.timeUnit,d=a.timeStats;return d[f]||(d[f]=i(e.timeUnit,a.stats)),n?d[f].distinct-o(d[f].unique,["Invalid Date",null]):d[f].distinct}return a?n?a.stats.distinct-o(a.stats.unique,[NaN,null]):a.stats.distinct:null},e.prototype.timeUnitHasVariation=function(e){if(e.timeUnit){if(e.timeUnit===u.TimeUnit.DAY){var t=p.extend({},e,{timeUnit:u.TimeUnit.DATE});if(this.cardinality(t,!1,!0)<=1)return!1}for(var n=e.timeUnit,r=0,i=u.SINGLE_TIMEUNITS;r<i.length;r++){var a=i[r];if(u.containsTimeUnit(n,a)&&(e.timeUnit=a,this.cardinality(e,!1,!0)<=1))return!1}return!0}},e.prototype.domain=function(e){var t=this._fieldSchemaIndex[e.field],n=p.keys(t.stats.unique);return t.type===s.Type.QUANTITATIVE?[+t.stats.min,+t.stats.max]:t.primitiveType===m.DATE?[t.stats.min,t.stats.max]:t.primitiveType===m.INTEGER||t.primitiveType===m.NUMBER?(n=n.map(function(e){return+e}),n.sort(p.cmp)):n.map(function(e){return"null"===e?null:e}).sort(p.cmp)},e.prototype.stats=function(e){var t=this._fieldSchemaIndex[e.field];return t?t.stats:null},e}();n.Schema=g,function(e){e[e.STRING="string"]="STRING",e[e.NUMBER="number"]="NUMBER",e[e.INTEGER="integer"]="INTEGER",e[e.BOOLEAN="boolean"]="BOOLEAN",e[e.DATE="date"]="DATE"}(n.PrimitiveType||(n.PrimitiveType={}));var m=n.PrimitiveType},{"./config":9,"./util":37,"datalib/src/bins/bins":3,"datalib/src/import/type":5,"datalib/src/stats":6,"vega-lite/src/bin":45,"vega-lite/src/timeunit":53,"vega-lite/src/type":54}],36:[function(e,t,n){"use strict";function r(e,t,n){var r={};return e=e.map(function(e){return n.smallBandSizeForHighCardinalityOrFacet&&(e=i(e,t,r,n)),n.nominalColorScaleForHighCardinality&&(e=a(e,t,r,n)),n.xAxisOnTopForHighYCardinalityWithoutColumn&&(e=o(e,t,r,n)),e})}function i(e,t,n,r){[l.Channel.ROW,l.Channel.Y,l.Channel.COLUMN,l.Channel.X].forEach(function(t){n[t]=e.getEncodingQueryByChannel(t)});var i=n[l.Channel.Y];void 0!==i&&(n[l.Channel.ROW]||t.cardinality(i)>r.smallBandSizeForHighCardinalityOrFacet.maxCardinality)&&(void 0===i.scale&&(i.scale={}),i.scale&&d.contains([u.ScaleType.ORDINAL,void 0],f.scaleType(i))&&(i.scale.bandSize||(i.scale.bandSize=12)));var a=n[l.Channel.X];return void 0!==a&&(n[l.Channel.COLUMN]||t.cardinality(a)>r.smallBandSizeForHighCardinalityOrFacet.maxCardinality)&&(void 0===a.scale&&(a.scale={}),a.scale&&d.contains([u.ScaleType.ORDINAL,void 0],f.scaleType(a))&&(a.scale.bandSize||(a.scale.bandSize=12))),e}function a(e,t,n,r){n[l.Channel.COLOR]=e.getEncodingQueryByChannel(l.Channel.COLOR);var i=n[l.Channel.COLOR];return void 0!==i&&i.type===c.Type.NOMINAL&&t.cardinality(i)>r.nominalColorScaleForHighCardinality.maxCardinality&&(void 0===i.scale&&(i.scale={}),i.scale&&(i.scale.range||(i.scale.range=r.nominalColorScaleForHighCardinality.palette))),e}function o(e,t,n,r){if([l.Channel.COLUMN,l.Channel.X,l.Channel.Y].forEach(function(t){n[t]=e.getEncodingQueryByChannel(t)}),void 0===n[l.Channel.COLUMN]){var i=n[l.Channel.X],a=n[l.Channel.Y];void 0!==a&&a.field&&f.scaleType(a)===u.ScaleType.ORDINAL&&void 0!==i&&t.cardinality(a)>r.xAxisOnTopForHighYCardinalityWithoutColumn.maxCardinality&&(void 0===i.axis&&(i.axis={}),i.axis&&!i.axis.orient&&(i.axis.orient=s.AxisOrient.TOP))}return e}var s=e("vega-lite/src/axis"),l=e("vega-lite/src/channel"),u=e("vega-lite/src/scale"),c=e("vega-lite/src/type"),f=e("./query/encoding"),d=e("./util");n.stylize=r,n.smallBandSizeForHighCardinalityOrFacet=i,n.nominalColorScaleForHighCardinality=a,n.xAxisOnTopForHighYCardinalityWithoutColumn=o},{"./query/encoding":22,"./util":37,"vega-lite/src/axis":44,"vega-lite/src/channel":46,"vega-lite/src/scale":50,"vega-lite/src/type":54}],37:[function(e,t,n){"use strict";function r(e,t){return e.indexOf(t)!==-1}function i(e,t){var n,r=0;for(n in e)if(!t(e[n],n,r++))return!1;return!0}function a(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)t.call(n,e[r],r,e)}function o(e,t){var n,r=0;for(n in e)if(t(e[n],n,r++))return!0;return!1}function s(e,t){return e.map(function(e){return u.isArray(e)?s(e,t):t(e)})}function l(e,t){return e.filter(function(e){return!r(t,e)})}var u=e("datalib/src/util"),c=e("datalib/src/util");n.cmp=c.cmp,n.keys=c.keys,n.duplicate=c.duplicate,n.extend=c.extend,n.isObject=c.isObject,n.isArray=c.isArray,n.contains=r,n.every=i,n.forEach=a,n.some=o,n.nestedMap=s,n.without=l},{"datalib/src/util":8}],38:[function(e,t,n){(function(e){function n(e,t){var n,r="";for(n=0;n<e;++n)r+=t;return r}function r(e,t,n){var r=0,i=e.split(l);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,r<=t}).reverse():i.filter(function(e){return r+=e.length,r<=t}),e.length?e.join("").trim():i[0].slice(0,t)}var i=t.exports,a="__name__";i.namedfunc=function(e,t){return t[a]=e,t},i.name=function(e){return null==e?null:e[a]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.toMap=function(e,t){return(t=i.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},i.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;r<t;++r)n+="|"+String(e[r]);return n};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof e&&e.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"!==e&&!!e},i.date=function(e,t){var n=t?t:Date;return null==e||""===e?null:n.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var s=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(s).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var t;return i.isString(e)&&(t=i.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},i.$func=function(e,t){return function(n){n=i.$(n)||i.identity;var r=e+(i.name(n)?"_"+i.name(n):"");return i.namedfunc(r,function(e){return t(n(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,t){e=i.$(e);var n=i.isArray(t)?i.toMap(t):t;return function(t){return!!n[e(t)]}},i.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),i.accessor(e)}),function(n,r){var a,o,s,l;for(a=0,o=e.length;a<o;++a)if(s=e[a],l=i.cmp(s(n),s(r)))return l*t[a];return 0}},i.cmp=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},i.numcmp=function(e,t){return e-t},i.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return a<o?-1:a>o?1:r[n(e)]-r[n(i)]}),e},i.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},i.pad=function(e,t,r,i){i=i||" ";var a=t-e.length;if(a<=0)return e;switch(r){case"left":return n(a,i)+e;case"middle":case"center":return n(Math.floor(a/2),i)+e+n(Math.ceil(a/2),i);default:return e+n(a,i)}},i.truncate=function(e,t,n,i,a){var o=e.length;if(o<=t)return e;a=void 0!==a?String(a):"…";var s=Math.max(0,t-a.length);switch(n){case"left":return a+(i?r(e,s,1):e.slice(o-s));case"middle":case"center":var l=Math.ceil(s/2),u=Math.floor(s/2);return(i?r(e,l):e.slice(0,l))+a+(i?r(e,u,1):e.slice(o-u));default:return(i?r(e,s):e.slice(0,s))+a}};var l=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:1}],39:[function(e,t,n){var r="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var o="boolean"==typeof t.cycles&&t.cycles,s=t.replacer||function(e,t){return t},l=t.cmp&&function(e){return function(t){return function(n,r){var i={key:n,value:t[n]},a={key:r,value:t[r]};return e(i,a)}}}(t.cmp),u=[];return function c(e,t,f,d){var h=n?"\n"+new Array(d+1).join(n):"",p=n?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),f=s.call(e,t,f),void 0!==f){if("object"!=typeof f||null===f)return r.stringify(f);if(i(f)){for(var g=[],m=0;m<f.length;m++){var v=c(f,m,f[m],d+1)||r.stringify(null);g.push(h+n+v)}return"["+g.join(",")+h+"]"}if(u.indexOf(f)!==-1){if(o)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(f);for(var y=a(f).sort(l&&l(f)),g=[],m=0;m<y.length;m++){var t=y[m],b=c(f,t,f[t],d+1);if(b){var _=r.stringify(t)+p+b;g.push(h+n+_)}}return u.splice(u.indexOf(f),1),"{"+g.join(",")+h+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},{jsonify:40}],40:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":41,"./lib/stringify":42}],41:[function(e,t,n){var r,i,a,o,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=function(e){throw{name:"SyntaxError",message:e,at:r,text:a}},u=function(e){return e&&e!==i&&l("Expected '"+e+"' instead of '"+i+"'"),i=a.charAt(r),r+=1,i},c=function(){var e,t="";for("-"===i&&(t="-",u("-"));i>="0"&&i<="9";)t+=i,u();if("."===i)for(t+=".";u()&&i>="0"&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,u(),"-"!==i&&"+"!==i||(t+=i,u());i>="0"&&i<="9";)t+=i,u();return e=+t,isFinite(e)?e:void l("Bad number")},f=function(){var e,t,n,r="";if('"'===i)for(;u();){if('"'===i)return u(),r;if("\\"===i)if(u(),"u"===i){for(n=0,t=0;t<4&&(e=parseInt(u(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof s[i])break;r+=s[i]}else r+=i}l("Bad string")},d=function(){for(;i&&i<=" ";)u()},h=function(){switch(i){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}l("Unexpected '"+i+"'")},p=function(){var e=[];if("["===i){if(u("["),d(),"]"===i)return u("]"),e;for(;i;){if(e.push(o()),d(),"]"===i)return u("]"),e;u(","),d()}}l("Bad array")},g=function(){var e,t={};if("{"===i){if(u("{"),d(),"}"===i)return u("}"),t;for(;i;){if(e=f(),d(),u(":"),Object.hasOwnProperty.call(t,e)&&l('Duplicate key "'+e+'"'),t[e]=o(),d(),"}"===i)return u("}"),t;u(","),d()}}l("Bad object")};o=function(){switch(d(),i){case"{":return g();case"[":return p();case'"':return f();case"-":return c();default:return i>="0"&&i<="9"?c():h()}},t.exports=function(e,t){var n;return a=e,r=0,i=" ",n=o(),d(),i&&l("Syntax error"),"function"==typeof t?function s(e,n){var r,i,a=e[n];if(a&&"object"==typeof a)for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=s(a,r),void 0!==i?a[r]=i:delete a[r]);return t.call(e,n,a)}({"":n},""):n}},{}],42:[function(e,t,n){function r(e){return l.lastIndex=0,l.test(e)?'"'+e.replace(l,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function i(e,t){var n,l,u,c,f,d=a,h=t[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),"function"==typeof s&&(h=s.call(t,e,h)),typeof h){case"string":return r(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(a+=o,f=[],"[object Array]"===Object.prototype.toString.apply(h)){for(c=h.length,n=0;n<c;n+=1)f[n]=i(n,h)||"null";return u=0===f.length?"[]":a?"[\n"+a+f.join(",\n"+a)+"\n"+d+"]":"["+f.join(",")+"]",a=d,u}if(s&&"object"==typeof s)for(c=s.length,n=0;n<c;n+=1)l=s[n],"string"==typeof l&&(u=i(l,h),u&&f.push(r(l)+(a?": ":":")+u));else for(l in h)Object.prototype.hasOwnProperty.call(h,l)&&(u=i(l,h),u&&f.push(r(l)+(a?": ":":")+u));return u=0===f.length?"{}":a?"{\n"+a+f.join(",\n"+a)+"\n"+d+"}":"{"+f.join(",")+"}",a=d,u}}var a,o,s,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.exports=function(e,t,n){var r;if(a="",o="","number"==typeof n)for(r=0;r<n;r+=1)o+=" ";else"string"==typeof n&&(o=n);if(s=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return i("",{"":e})}},{}],43:[function(e,t,n){"use strict";!function(e){e[e.VALUES="values"]="VALUES",e[e.COUNT="count"]="COUNT",e[e.VALID="valid"]="VALID",e[e.MISSING="missing"]="MISSING",e[e.DISTINCT="distinct"]="DISTINCT",e[e.SUM="sum"]="SUM",e[e.MEAN="mean"]="MEAN",e[e.AVERAGE="average"]="AVERAGE",e[e.VARIANCE="variance"]="VARIANCE",e[e.VARIANCEP="variancep"]="VARIANCEP",e[e.STDEV="stdev"]="STDEV",e[e.STDEVP="stdevp"]="STDEVP",e[e.MEDIAN="median"]="MEDIAN",e[e.Q1="q1"]="Q1",e[e.Q3="q3"]="Q3",e[e.MODESKEW="modeskew"]="MODESKEW",e[e.MIN="min"]="MIN",e[e.MAX="max"]="MAX",e[e.ARGMIN="argmin"]="ARGMIN",e[e.ARGMAX="argmax"]="ARGMAX"}(n.AggregateOp||(n.AggregateOp={}));var r=n.AggregateOp;n.AGGREGATE_OPS=[r.VALUES,r.COUNT,r.VALID,r.MISSING,r.DISTINCT,r.SUM,r.MEAN,r.AVERAGE,r.VARIANCE,r.VARIANCEP,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MODESKEW,r.MIN,r.MAX,r.ARGMIN,r.ARGMAX],n.SUM_OPS=[r.COUNT,r.SUM,r.DISTINCT],n.SHARED_DOMAIN_OPS=[r.MEAN,r.AVERAGE,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MIN,r.MAX]},{}],44:[function(e,t,n){"use strict";!function(e){e[e.TOP="top"]="TOP",e[e.RIGHT="right"]="RIGHT",e[e.LEFT="left"]="LEFT",e[e.BOTTOM="bottom"]="BOTTOM"}(n.AxisOrient||(n.AxisOrient={}));n.AxisOrient;n.defaultAxisConfig={offset:void 0,grid:void 0,labels:!0,labelMaxLength:25,tickSize:void 0,characterWidth:6},n.defaultFacetAxisConfig={axisWidth:0,labels:!0,grid:!1,tickSize:0}},{}],45:[function(e,t,n){"use strict";function r(e){switch(e){case i.ROW:case i.COLUMN:case i.SIZE:case i.SHAPE:return 6;default:return 10}}var i=e("./channel");n.autoMaxBins=r},{"./channel":46}],46:[function(e,t,n){"use strict";function r(e,t){return!!i(e)[t]}function i(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.DETAIL:case n.ORDER:case n.OPACITY:case n.ROW:case n.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,line:!0,area:!0,
text:!0,boxplot:!0,hexagon:!0,leader:!0,scatter3D:!0,contour:!0,radar:!0};case n.X2:case n.Y2:return{rule:!0,bar:!0,area:!0};case n.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0};case n.SHAPE:return{point:!0};case n.TEXT:return{text:!0};case n.PATH:return{line:!0}}return{}}function a(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.OPACITY:case n.LABEL:case n.DETAIL:return{measure:!0,dimension:!0};case n.ROW:case n.COLUMN:case n.SHAPE:return{measure:!1,dimension:!0};case n.X2:case n.Y2:case n.SIZE:case n.TEXT:return{measure:!0,dimension:!1};case n.PATH:return{measure:!1,dimension:!0}}throw new Error("Invalid encoding channel"+e)}function o(e){return!s.contains([n.DETAIL,n.PATH,n.TEXT,n.LABEL,n.ORDER],e)}var s=e("./util");!function(e){e[e.X="x"]="X",e[e.Y="y"]="Y",e[e.X2="x2"]="X2",e[e.Y2="y2"]="Y2",e[e.ROW="row"]="ROW",e[e.COLUMN="column"]="COLUMN",e[e.SHAPE="shape"]="SHAPE",e[e.SIZE="size"]="SIZE",e[e.COLOR="color"]="COLOR",e[e.TEXT="text"]="TEXT",e[e.DETAIL="detail"]="DETAIL",e[e.LABEL="label"]="LABEL",e[e.PATH="path"]="PATH",e[e.ORDER="order"]="ORDER",e[e.OPACITY="opacity"]="OPACITY"}(n.Channel||(n.Channel={}));var l=n.Channel;n.X=l.X,n.Y=l.Y,n.X2=l.X2,n.Y2=l.Y2,n.ROW=l.ROW,n.COLUMN=l.COLUMN,n.SHAPE=l.SHAPE,n.SIZE=l.SIZE,n.COLOR=l.COLOR,n.TEXT=l.TEXT,n.DETAIL=l.DETAIL,n.LABEL=l.LABEL,n.PATH=l.PATH,n.ORDER=l.ORDER,n.OPACITY=l.OPACITY,n.CHANNELS=[n.X,n.Y,n.X2,n.Y2,n.ROW,n.COLUMN,n.SIZE,n.SHAPE,n.COLOR,n.PATH,n.ORDER,n.OPACITY,n.TEXT,n.DETAIL,n.LABEL],n.UNIT_CHANNELS=s.without(n.CHANNELS,[n.ROW,n.COLUMN]),n.UNIT_SCALE_CHANNELS=s.without(n.UNIT_CHANNELS,[n.PATH,n.ORDER,n.DETAIL,n.TEXT,n.LABEL,n.X2,n.Y2]),n.NONSPATIAL_CHANNELS=s.without(n.UNIT_CHANNELS,[n.X,n.Y,n.X2,n.Y2]),n.NONSPATIAL_SCALE_CHANNELS=s.without(n.UNIT_SCALE_CHANNELS,[n.X,n.Y,n.X2,n.Y2]),n.STACK_GROUP_CHANNELS=[n.COLOR,n.DETAIL,n.ORDER,n.OPACITY,n.SIZE],n.supportMark=r,n.getSupportedMark=i,n.getSupportedRole=a,n.hasScale=o},{"./util":55}],47:[function(e,t,n){"use strict";function r(e){return!!(e&&(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds))}function i(e){return l.isNumber(e)?e-1+"":(console.warn("Potentially invalid quarter",e),e)}function a(e){if(l.isNumber(e))return e-1+"";var t=e.toLowerCase(),r=n.MONTHS.indexOf(t);if(r!==-1)return r+"";var i=t.substr(0,3),a=n.SHORT_MONTHS.indexOf(i);return a!==-1?a+"":(console.warn("Potentially invalid month",e),e)}function o(e){if(l.isNumber(e))return e%7+"";var t=e.toLowerCase(),r=n.DAYS.indexOf(t);if(r!==-1)return r+"";var i=t.substr(0,3),a=n.SHORT_DAYS.indexOf(i);return a!==-1?a+"":(console.warn("Potentially invalid day",e),e)}function s(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day)for(var r=0,s=["year","quarter","month","date"];r<s.length;r++){var u=s[r];if(void 0!==e[u]){console.warn("Dropping day from datetime",JSON.stringify(e),"as day cannot be combined with",u),e=l.duplicate(e),delete e.day;break}}if(void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(2006):n.push(0),void 0!==e.month){var c=t?a(e.month):e.month;n.push(c)}else if(void 0!==e.quarter){var f=t?i(e.quarter):e.quarter;n.push(f+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var d=t?o(e.day):e.day;n.push(d+"+1")}else n.push(1);for(var h=0,p=["hours","minutes","seconds","milliseconds"];h<p.length;h++){var g=p[h];void 0!==e[g]?n.push(e[g]):n.push(0)}return"datetime("+n.join(", ")+")"}var l=e("./util");n.isDateTime=r,n.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],n.SHORT_MONTHS=n.MONTHS.map(function(e){return e.substr(0,3)}),n.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n.SHORT_DAYS=n.DAYS.map(function(e){return e.substr(0,3)}),n.dateTimeExpr=s},{"./util":55}],48:[function(e,t,n){"use strict";function r(e){var t=0;return e.color&&t++,e.opacity&&t++,e.size&&t++,e.shape&&t++,t}function i(e){return g.CHANNELS.filter(function(t){return a(e,t)})}function a(e,t){var n=e&&e[t];return n&&(void 0!==n.field||m.isArray(n)&&n.length>0)}function o(e){return m.some(g.CHANNELS,function(t){return!(!a(e,t)||!e[t].aggregate)})}function s(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}function l(e){var t=[];return g.CHANNELS.forEach(function(n){a(e,n)&&(m.isArray(e[n])?e[n].forEach(function(e){t.push(e)}):t.push(e[n]))}),t}function u(e,t,n){c(g.CHANNELS,e,t,n)}function c(e,t,n,r){var i=0;e.forEach(function(e){a(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){n.call(r,t,e,i++)}):n.call(r,t[e],e,i++))})}function f(e,t,n){return d(g.CHANNELS,e,t,n)}function d(e,t,n,r){var i=[];return e.forEach(function(e){a(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){i.push(n.call(r,t,e))}):i.push(n.call(r,t[e],e)))}),i}function h(e,t,n,r){return p(g.CHANNELS,e,t,n,r)}function p(e,t,n,r,i){var o=r;return g.CHANNELS.forEach(function(e){a(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){o=n.call(i,o,t,e)}):o=n.call(i,o,t[e],e))}),o}var g=e("./channel"),m=e("./util");n.countRetinal=r,n.channels=i,n.has=a,n.isAggregate=o,n.isRanged=s,n.fieldDefs=l,n.forEach=u,n.channelMappingForEach=c,n.map=f,n.channelMappingMap=d,n.reduce=h,n.channelMappingReduce=p},{"./channel":46,"./util":55}],49:[function(e,t,n){"use strict";!function(e){e[e.AREA="area"]="AREA",e[e.BAR="bar"]="BAR",e[e.LINE="line"]="LINE",e[e.POINT="point"]="POINT",e[e.TEXT="text"]="TEXT",e[e.TICK="tick"]="TICK",e[e.RULE="rule"]="RULE",e[e.CIRCLE="circle"]="CIRCLE",e[e.SQUARE="square"]="SQUARE",e[e.ERRORBAR="errorBar"]="ERRORBAR",e[e.BOXPLOT="boxplot"]="BOXPLOT",e[e.HEXAGON="hexagon"]="HEXAGON",e[e.LEADER="leader"]="LEADER",e[e.CONTOUR="contour"]="CONTOUR",e[e.SCATTER3D="scatter3D"]="SCATTER3D",e[e.RADAR="radar"]="RADAR"}(n.Mark||(n.Mark={}));var r=n.Mark;n.AREA=r.AREA,n.BAR=r.BAR,n.LINE=r.LINE,n.POINT=r.POINT,n.TEXT=r.TEXT,n.TICK=r.TICK,n.RULE=r.RULE,n.CIRCLE=r.CIRCLE,n.SQUARE=r.SQUARE,n.ERRORBAR=r.ERRORBAR,n.BOXPLOT=r.BOXPLOT,n.HEXAGON=r.HEXAGON,n.LEADER=r.LEADER,n.CONTOUR=r.CONTOUR,n.SCATTER3D=r.SCATTER3D,n.RADAR=r.RADAR,n.PRIMITIVE_MARKS=[n.AREA,n.BAR,n.LINE,n.POINT,n.TEXT,n.TICK,n.RULE,n.CIRCLE,n.SQUARE]},{}],50:[function(e,t,n){"use strict";!function(e){e[e.LINEAR="linear"]="LINEAR",e[e.LOG="log"]="LOG",e[e.POW="pow"]="POW",e[e.SQRT="sqrt"]="SQRT",e[e.QUANTILE="quantile"]="QUANTILE",e[e.QUANTIZE="quantize"]="QUANTIZE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TIME="time"]="TIME",e[e.UTC="utc"]="UTC"}(n.ScaleType||(n.ScaleType={}));n.ScaleType;!function(e){e[e.SECOND="second"]="SECOND",e[e.MINUTE="minute"]="MINUTE",e[e.HOUR="hour"]="HOUR",e[e.DAY="day"]="DAY",e[e.WEEK="week"]="WEEK",e[e.MONTH="month"]="MONTH",e[e.YEAR="year"]="YEAR"}(n.NiceTime||(n.NiceTime={}));n.NiceTime;!function(e){e[e.FIT="fit"]="FIT"}(n.BandSize||(n.BandSize={}));var r=n.BandSize;n.BANDSIZE_FIT=r.FIT,n.defaultScaleConfig={round:!0,textBandWidth:90,bandSize:21,padding:.1,useRawDomain:!1,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]},n.defaultFacetScaleConfig={round:!0,padding:16}},{}],51:[function(e,t,n){"use strict";function r(e){return!!e&&!!e.field&&!!e.op}!function(e){e[e.ASCENDING="ascending"]="ASCENDING",e[e.DESCENDING="descending"]="DESCENDING",e[e.NONE="none"]="NONE"}(n.SortOrder||(n.SortOrder={}));n.SortOrder;n.isSortField=r},{}],52:[function(e,t,n){"use strict";function r(e,t,n){var r=n&&n.mark?n.mark.stacked:void 0;if(s.contains([l.NONE,null,!1],r))return null;if(!s.contains([o.BAR,o.AREA],e))return null;if(!a.isAggregate(t))return null;var u=i.STACK_GROUP_CHANNELS.reduce(function(e,n){return a.has(t,n)&&!t[n].aggregate&&e.push(n),e},[]);if(0===u.length)return null;var c=a.has(t,i.X),f=a.has(t,i.Y),d=c&&!!t.x.aggregate,h=f&&!!t.y.aggregate;return d!==h?{groupbyChannel:d?f?i.Y:null:c?i.X:null,fieldChannel:d?i.X:i.Y,stackByChannels:u,offset:r||l.ZERO}:null}var i=e("./channel"),a=e("./encoding"),o=e("./mark"),s=e("./util");!function(e){e[e.ZERO="zero"]="ZERO",e[e.CENTER="center"]="CENTER",e[e.NORMALIZE="normalize"]="NORMALIZE",e[e.NONE="none"]="NONE"}(n.StackOffset||(n.StackOffset={}));var l=n.StackOffset;n.stack=r},{"./channel":46,"./encoding":48,"./mark":49,"./util":55}],53:[function(e,t,n){"use strict";function r(e){return!!v[e]}function i(e,t){var r=new Date(0,0,1,0,0,0,0);return n.SINGLE_TIMEUNITS.forEach(function(n){if(o(e,n))switch(n){case m.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case m.YEAR:r.setFullYear(t.getFullYear());break;case m.QUARTER:r.setMonth(3*Math.floor(t.getMonth()/3));break;case m.MONTH:r.setMonth(t.getMonth());break;case m.DATE:r.setDate(t.getDate());break;case m.HOURS:r.setHours(t.getHours());break;case m.MINUTES:r.setMinutes(t.getMinutes());break;case m.SECONDS:r.setSeconds(t.getSeconds());break;case m.MILLISECONDS:r.setMilliseconds(t.getMilliseconds())}}),r}function a(e){return!!y[e]}function o(e,t){var n=e.toString(),r=t.toString(),i=n.indexOf(r);return i>-1&&(t!==m.SECONDS||0===i||"i"!==n.charAt(i-1))}function s(e){switch(e){case m.HOURS:case m.DAY:case m.MONTH:case m.QUARTER:return p.ScaleType.ORDINAL}return p.ScaleType.TIME}function l(e,t){function r(e){return e===m.QUARTER?"floor(month("+i+")/3)":e+"("+i+")"}var i='datum["'+t+'"]',a=n.SINGLE_TIMEUNITS.reduce(function(t,n){return o(e,n)&&(t[n]=r(n)),t},{});return a.day&&g.keys(a).length>1&&(console.warn('Time unit "'+e+'" is not supported. We are replacing it with ',(e+"").replace("day","date")+"."),delete a.day,a.date=r(m.DATE)),h.dateTimeExpr(a)}function u(e,t){if(g.contains([d.ROW,d.COLUMN,d.SHAPE,d.COLOR],t))return null;switch(e){case m.SECONDS:return g.range(0,60);case m.MINUTES:return g.range(0,60);case m.HOURS:return g.range(0,24);case m.DAY:return g.range(0,7);case m.DATE:return g.range(1,32);case m.MONTH:return g.range(0,12);case m.QUARTER:return[0,3,6,9]}return null}function c(e){if(e)return o(e,m.SECONDS)?"second":o(e,m.MINUTES)?"minute":o(e,m.HOURS)?"hour":o(e,m.DAY)||o(e,m.DATE)?"day":o(e,m.MONTH)?"month":o(e,m.YEAR)?"year":void 0}function f(e,t,n){if(e){var r=[];o(e,m.YEAR)&&r.push(n?"%y":"%Y"),o(e,m.QUARTER)&&r.push("'}}Q{{"+t+" | quarter}}{{"+t+" | time:'"),o(e,m.MONTH)&&r.push(n?"%b":"%B"),o(e,m.DAY)?r.push(n?"%a":"%A"):o(e,m.DATE)&&r.push("%d");var i=[];o(e,m.HOURS)&&i.push("%H"),o(e,m.MINUTES)&&i.push("%M"),o(e,m.SECONDS)&&i.push("%S"),o(e,m.MILLISECONDS)&&i.push("%L");var a=[];if(r.length>0&&a.push(r.join("-")),i.length>0&&a.push(i.join(":")),a.length>0){var s="{{"+t+" | time:'"+a.join(" ")+"'}}",l=t.replace(/(\[|\])/g,"\\$1");return s.replace(new RegExp("{{"+l+" \\| time:''}}","g"),"")}}}var d=e("./channel"),h=e("./datetime"),p=e("./scale"),g=e("./util");!function(e){e[e.YEAR="year"]="YEAR",e[e.MONTH="month"]="MONTH",e[e.DAY="day"]="DAY",e[e.DATE="date"]="DATE",e[e.HOURS="hours"]="HOURS",e[e.MINUTES="minutes"]="MINUTES",e[e.SECONDS="seconds"]="SECONDS",e[e.MILLISECONDS="milliseconds"]="MILLISECONDS",e[e.YEARMONTH="yearmonth"]="YEARMONTH",e[e.YEARMONTHDATE="yearmonthdate"]="YEARMONTHDATE",e[e.YEARMONTHDATEHOURS="yearmonthdatehours"]="YEARMONTHDATEHOURS",e[e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes"]="YEARMONTHDATEHOURSMINUTES",e[e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds"]="YEARMONTHDATEHOURSMINUTESSECONDS",e[e.HOURSMINUTES="hoursminutes"]="HOURSMINUTES",e[e.HOURSMINUTESSECONDS="hoursminutesseconds"]="HOURSMINUTESSECONDS",e[e.MINUTESSECONDS="minutesseconds"]="MINUTESSECONDS",e[e.SECONDSMILLISECONDS="secondsmilliseconds"]="SECONDSMILLISECONDS",e[e.QUARTER="quarter"]="QUARTER",e[e.YEARQUARTER="yearquarter"]="YEARQUARTER",e[e.QUARTERMONTH="quartermonth"]="QUARTERMONTH",e[e.YEARQUARTERMONTH="yearquartermonth"]="YEARQUARTERMONTH"}(n.TimeUnit||(n.TimeUnit={}));var m=n.TimeUnit;n.SINGLE_TIMEUNITS=[m.YEAR,m.QUARTER,m.MONTH,m.DAY,m.DATE,m.HOURS,m.MINUTES,m.SECONDS,m.MILLISECONDS];var v=n.SINGLE_TIMEUNITS.reduce(function(e,t){return e[t]=!0,e},{});n.isSingleTimeUnit=r,n.convert=i,n.MULTI_TIMEUNITS=[m.YEARQUARTER,m.YEARQUARTERMONTH,m.YEARMONTH,m.YEARMONTHDATE,m.YEARMONTHDATEHOURS,m.YEARMONTHDATEHOURSMINUTES,m.YEARMONTHDATEHOURSMINUTESSECONDS,m.QUARTERMONTH,m.HOURSMINUTES,m.HOURSMINUTESSECONDS,m.MINUTESSECONDS,m.SECONDSMILLISECONDS];var y=n.MULTI_TIMEUNITS.reduce(function(e,t){return e[t]=!0,e},{});n.isMultiTimeUnit=a,n.TIMEUNITS=n.SINGLE_TIMEUNITS.concat(n.MULTI_TIMEUNITS),n.containsTimeUnit=o,n.defaultScaleType=s,n.fieldExpr=l,n.rawDomain=u,n.smallestUnit=c,n.template=f},{"./channel":46,"./datetime":47,"./scale":50,"./util":55}],54:[function(e,t,n){"use strict";function r(e){var t=e;return n.TYPE_FROM_SHORT_TYPE[t.toUpperCase()]||t.toLowerCase()}!function(e){e[e.QUANTITATIVE="quantitative"]="QUANTITATIVE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TEMPORAL="temporal"]="TEMPORAL",e[e.NOMINAL="nominal"]="NOMINAL"}(n.Type||(n.Type={}));var i=n.Type;n.QUANTITATIVE=i.QUANTITATIVE,n.ORDINAL=i.ORDINAL,n.TEMPORAL=i.TEMPORAL,n.NOMINAL=i.NOMINAL,n.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"},n.TYPE_FROM_SHORT_TYPE={Q:n.QUANTITATIVE,T:n.TEMPORAL,O:n.ORDINAL,N:n.NOMINAL},n.getFullName=r},{}],55:[function(e,t,n){"use strict";function r(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}function i(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(n<0)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i}function a(e,t){var n=T.duplicate(e);return t.forEach(function(e){delete n[e]}),n}function o(e){return w.isString(e)||w.isNumber(e)||w.isBoolean(e)?String(e):x(e)}function s(e,t){return e.indexOf(t)>-1}function l(e,t){return e.filter(function(e){return!s(t,e)})}function u(e,t){return e.concat(l(t,e))}function c(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function f(e,t,n,r){if(e.reduce)return e.reduce.call(r,t,n);for(var i in e)e.hasOwnProperty(i)&&(n=t.call(r,n,e[i],i,e));return n}function d(e,t,n){if(e.map)return e.map.call(n,t);var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(t.call(n,e[i],i,e));return r}function h(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1}function p(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0}function g(e){return[].concat.apply([],e)}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=v(e,t[r]);return e}function v(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=m(t[n].constructor===Array?[]:{},t[n]):m(e[n],t[n]));return e}function y(e,t){var n,r,i,a=[],o={};for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],n in o||(o[n]=1,a.push(e[r]));return a}function b(e){console.warn("[VL Warning]",e)}function _(e){console.error("[VL Error]",e)}function E(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1}var x=e("json-stable-stringify"),S=e("datalib/src/util");n.keys=S.keys,n.extend=S.extend,n.duplicate=S.duplicate,n.isArray=S.isArray,n.vals=S.vals,n.truncate=S.truncate,n.toMap=S.toMap,n.isObject=S.isObject,n.isString=S.isString,n.isNumber=S.isNumber,n.isBoolean=S.isBoolean;var T=e("datalib/src/util"),w=e("datalib/src/util");n.pick=r,n.range=i,n.omit=a,n.hash=o,n.contains=s,n.without=l,n.union=u,n.forEach=c,n.reduce=f,n.map=d,n.some=h,n.every=p,n.flatten=g,n.mergeDeep=m,n.unique=y,n.warning=b,n.error=_,n.differ=E},{"datalib/src/util":38,"json-stable-stringify":39}]},{},[14])(14)}),/*! tether 1.4.4 */
function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Tether=t()}(this,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e){var n=e.getBoundingClientRect(),r={};for(var i in n)r[i]=n[i];if(e.ownerDocument!==document){var a=e.ownerDocument.defaultView.frameElement;if(a){var o=t(a);r.top+=o.top,r.bottom+=o.top,r.left+=o.left,r.right+=o.left}}return r}function n(e){var t=getComputedStyle(e)||{},n=t.position,r=[];if("fixed"===n)return[e];for(var i=e;(i=i.parentNode)&&i&&1===i.nodeType;){var a=void 0;try{a=getComputedStyle(i)}catch(o){}if("undefined"==typeof a||null===a)return r.push(i),r;var s=a,l=s.overflow,u=s.overflowX,c=s.overflowY;/(auto|scroll|overlay)/.test(l+c+u)&&("absolute"!==n||["relative","absolute","fixed"].indexOf(a.position)>=0)&&r.push(i)}return r.push(e.ownerDocument.body),e.ownerDocument!==document&&r.push(e.ownerDocument.defaultView),r}function r(){x&&document.body.removeChild(x),x=null}function i(e){var n=void 0;e===document?(n=document,e=document.documentElement):n=e.ownerDocument;var r=n.documentElement,i=t(e),a=w();return i.top-=a.top,i.left-=a.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-r.clientTop,i.left=i.left-r.clientLeft,i.right=n.body.clientWidth-i.width-i.left,i.bottom=n.body.clientHeight-i.height-i.top,i}function a(e){return e.offsetParent||document.documentElement}function o(){if(A)return A;var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");s(t.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow="scroll";var r=e.offsetWidth;n===r&&(r=t.clientWidth),document.body.removeChild(t);var i=n-r;return A={width:i,height:i}}function s(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=[];return Array.prototype.push.apply(t,arguments),t.slice(1).forEach(function(t){if(t)for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}),e}function l(e,t){if("undefined"!=typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.remove(t)});else{var n=new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi"),r=f(e).replace(n," ");d(e,r)}}function u(e,t){if("undefined"!=typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.add(t)});else{l(e,t);var n=f(e)+(" "+t);d(e,n)}}function c(e,t){if("undefined"!=typeof e.classList)return e.classList.contains(t);var n=f(e);return new RegExp("(^| )"+t+"( |$)","gi").test(n)}function f(e){return e.className instanceof e.ownerDocument.defaultView.SVGAnimatedString?e.className.baseVal:e.className}function d(e,t){e.setAttribute("class",t)}function h(e,t,n){n.forEach(function(n){t.indexOf(n)===-1&&c(e,n)&&l(e,n)}),t.forEach(function(t){c(e,t)||u(e,t)})}function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return e+n>=t&&t>=e-n}function m(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():+new Date}function v(){for(var e={top:0,left:0},t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){var n=t.top,r=t.left;"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof r&&(r=parseFloat(r,10)),e.top+=n,e.left+=r}),e}function y(e,t){return"string"==typeof e.left&&e.left.indexOf("%")!==-1&&(e.left=parseFloat(e.left,10)/100*t.width),"string"==typeof e.top&&e.top.indexOf("%")!==-1&&(e.top=parseFloat(e.top,10)/100*t.height),e}function b(e,t){return"scrollParent"===t?t=e.scrollParents[0]:"window"===t&&(t=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),t===document&&(t=t.documentElement),"undefined"!=typeof t.nodeType&&!function(){var e=t,n=i(t),r=n,a=getComputedStyle(t);if(t=[r.left,r.top,n.width+r.left,n.height+r.top],e.ownerDocument!==document){var o=e.ownerDocument.defaultView;t[0]+=o.pageXOffset,t[1]+=o.pageYOffset,t[2]+=o.pageXOffset,t[3]+=o.pageYOffset}X.forEach(function(e,n){e=e[0].toUpperCase()+e.substr(1),"Top"===e||"Left"===e?t[n]+=parseFloat(a["border"+e+"Width"]):t[n]-=parseFloat(a["border"+e+"Width"])})}(),t}var _=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=void 0;"undefined"==typeof E&&(E={modules:[]});var x=null,S=function(){var e=0;return function(){return++e}}(),T={},w=function(){var e=x;e&&document.body.contains(e)||(e=document.createElement("div"),e.setAttribute("data-tether-id",S()),s(e.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(e),x=e);var n=e.getAttribute("data-tether-id");return"undefined"==typeof T[n]&&(T[n]=t(e),k(function(){delete T[n]})),T[n]},A=null,C=[],k=function(e){C.push(e)},O=function(){for(var e=void 0;e=C.pop();)e()},I=function(){function t(){e(this,t)}return _(t,[{key:"on",value:function(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[e]&&(this.bindings[e]=[]),this.bindings[e].push({handler:t,ctx:n,once:r})}},{key:"once",value:function(e,t,n){this.on(e,t,n,!0)}},{key:"off",value:function(e,t){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[e])if("undefined"==typeof t)delete this.bindings[e];else for(var n=0;n<this.bindings[e].length;)this.bindings[e][n].handler===t?this.bindings[e].splice(n,1):++n}},{key:"trigger",value:function(e){if("undefined"!=typeof this.bindings&&this.bindings[e]){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(;t<this.bindings[e].length;){var a=this.bindings[e][t],o=a.handler,s=a.ctx,l=a.once,u=s;"undefined"==typeof u&&(u=this),o.apply(u,r),l?this.bindings[e].splice(t,1):++t}}}}]),t}();E.Utils={getActualBoundingClientRect:t,getScrollParents:n,getBounds:i,getOffsetParent:a,extend:s,addClass:u,removeClass:l,hasClass:c,updateClasses:h,defer:k,flush:O,uniqueId:S,Evented:I,getScrollBarSize:o,removeUtilElements:r};var M=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),N=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}};if("undefined"==typeof E)throw new Error("You must include the utils.js file before tether.js");var D=E.Utils,n=D.getScrollParents,i=D.getBounds,a=D.getOffsetParent,s=D.extend,u=D.addClass,l=D.removeClass,h=D.updateClasses,k=D.defer,O=D.flush,o=D.getScrollBarSize,r=D.removeUtilElements,L=function(){if("undefined"==typeof document)return"";for(var e=document.createElement("div"),t=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],n=0;n<t.length;++n){var r=t[n];if(void 0!==e.style[r])return r}}(),$=[],R=function(){$.forEach(function(e){e.position(!1)}),O()};!function(){var e=null,t=null,n=null,r=function i(){return"undefined"!=typeof t&&t>16?(t=Math.min(t-16,250),void(n=setTimeout(i,250))):void("undefined"!=typeof e&&m()-e<10||(null!=n&&(clearTimeout(n),n=null),e=m(),R(),t=m()-e))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(e){window.addEventListener(e,r)})}();var P={center:"center",left:"right",right:"left"},F={middle:"middle",top:"bottom",bottom:"top"},U={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},j=function(e,t){var n=e.left,r=e.top;return"auto"===n&&(n=P[t.left]),"auto"===r&&(r=F[t.top]),{left:n,top:r}},H=function(e){var t=e.left,n=e.top;return"undefined"!=typeof U[e.left]&&(t=U[e.left]),"undefined"!=typeof U[e.top]&&(n=U[e.top]),{left:t,top:n}},z=function(e){var t=e.split(" "),n=M(t,2),r=n[0],i=n[1];return{top:r,left:i}},B=z,q=function(t){function c(t){var n=this;e(this,c),N(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),this.position=this.position.bind(this),$.push(this),this.history=[],this.setOptions(t,!1),E.modules.forEach(function(e){"undefined"!=typeof e.initialize&&e.initialize.call(n)}),this.position()}return p(c,t),_(c,[{key:"getClass",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=this.options.classes;return"undefined"!=typeof t&&t[e]?this.options.classes[e]:this.options.classPrefix?this.options.classPrefix+"-"+e:e}},{key:"setOptions",value:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]||arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=s(i,e);var a=this.options,o=a.element,l=a.target,c=a.targetModifier;if(this.element=o,this.target=l,this.targetModifier=c,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(e){if("undefined"==typeof t[e])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof t[e].jquery?t[e]=t[e][0]:"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),u(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&u(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=B(this.options.targetAttachment),this.attachment=B(this.options.attachment),this.offset=z(this.options.offset),this.targetOffset=z(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=n(this.target),this.options.enabled!==!1&&this.enable(r)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return i(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var e=i(this.target),t={height:e.height,width:e.width,top:e.top,left:e.left};return t.height=Math.min(t.height,e.height-(pageYOffset-e.top)),t.height=Math.min(t.height,e.height-(e.top+e.height-(pageYOffset+innerHeight))),t.height=Math.min(innerHeight,t.height),t.height-=2,t.width=Math.min(t.width,e.width-(pageXOffset-e.left)),t.width=Math.min(t.width,e.width-(e.left+e.width-(pageXOffset+innerWidth))),t.width=Math.min(innerWidth,t.width),t.width-=2,t.top<pageYOffset&&(t.top=pageYOffset),t.left<pageXOffset&&(t.left=pageXOffset),t}if("scroll-handle"===this.targetModifier){var e=void 0,n=this.target;n===document.body?(n=document.documentElement,e={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):e=i(n);var r=getComputedStyle(n),a=n.scrollWidth>n.clientWidth||[r.overflow,r.overflowX].indexOf("scroll")>=0||this.target!==document.body,o=0;a&&(o=15);var s=e.height-parseFloat(r.borderTopWidth)-parseFloat(r.borderBottomWidth)-o,t={width:15,height:.975*s*(s/n.scrollHeight),left:e.left+e.width-parseFloat(r.borderLeftWidth)-15},l=0;s<408&&this.target===document.body&&(l=-11e-5*Math.pow(s,2)-.00727*s+22.58),this.target!==document.body&&(t.height=Math.max(t.height,24));var u=this.target.scrollTop/(n.scrollHeight-s);return t.top=u*(s-t.height-l)+e.top+parseFloat(r.borderTopWidth),this.target===document.body&&(t.height=Math.max(t.height,24)),t}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(e,t){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[e]&&(this._cache[e]=t.call(this)),this._cache[e]}},{key:"enable",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&u(this.target,this.getClass("enabled")),u(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(t){t!==e.target.ownerDocument&&t.addEventListener("scroll",e.position)}),t&&this.position()}},{key:"disable",value:function(){var e=this;l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.position)})}},{key:"destroy",value:function(){var e=this;this.disable(),$.forEach(function(t,n){t===e&&$.splice(n,1)}),0===$.length&&r()}},{key:"updateAttachClasses",value:function(e,t){var n=this;e=e||this.attachment,t=t||this.targetAttachment;var r=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var i=this._addAttachClasses;e.top&&i.push(this.getClass("element-attached")+"-"+e.top),e.left&&i.push(this.getClass("element-attached")+"-"+e.left),t.top&&i.push(this.getClass("target-attached")+"-"+t.top),t.left&&i.push(this.getClass("target-attached")+"-"+t.left);var a=[];r.forEach(function(e){a.push(n.getClass("element-attached")+"-"+e),a.push(n.getClass("target-attached")+"-"+e)}),k(function(){"undefined"!=typeof n._addAttachClasses&&(h(n.element,n._addAttachClasses,a),n.options.addTargetClasses!==!1&&h(n.target,n._addAttachClasses,a),delete n._addAttachClasses)})}},{key:"position",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var n=j(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var r=this.cache("element-bounds",function(){return i(e.element)}),s=r.width,l=r.height;if(0===s&&0===l&&"undefined"!=typeof this.lastSize){var u=this.lastSize;s=u.width,l=u.height}else this.lastSize={width:s,height:l};var c=this.cache("target-bounds",function(){return e.getTargetBounds()}),f=c,d=y(H(this.attachment),{width:s,height:l}),h=y(H(n),f),p=y(this.offset,{width:s,height:l}),g=y(this.targetOffset,f);d=v(d,p),h=v(h,g);for(var m=c.left+h.left-d.left,b=c.top+h.top-d.top,_=0;_<E.modules.length;++_){var x=E.modules[_],S=x.position.call(this,{left:m,top:b,targetAttachment:n,targetPos:c,elementPos:r,offset:d,targetOffset:h,manualOffset:p,manualTargetOffset:g,scrollbarSize:C,attachment:this.attachment});if(S===!1)return!1;"undefined"!=typeof S&&"object"==typeof S&&(b=S.top,m=S.left)}var T={page:{top:b,left:m},viewport:{top:b-pageYOffset,bottom:pageYOffset-b-l+innerHeight,left:m-pageXOffset,right:pageXOffset-m-s+innerWidth}},w=this.target.ownerDocument,A=w.defaultView,C=void 0;return A.innerHeight>w.documentElement.clientHeight&&(C=this.cache("scrollbar-size",o),T.viewport.bottom-=C.height),A.innerWidth>w.documentElement.clientWidth&&(C=this.cache("scrollbar-size",o),T.viewport.right-=C.width),["","static"].indexOf(w.body.style.position)!==-1&&["","static"].indexOf(w.body.parentElement.style.position)!==-1||(T.page.bottom=w.body.scrollHeight-b-l,T.page.right=w.body.scrollWidth-m-s),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var t=e.cache("target-offsetparent",function(){return a(e.target)}),n=e.cache("target-offsetparent-bounds",function(){return i(t)}),r=getComputedStyle(t),o=n,s={};if(["Top","Left","Bottom","Right"].forEach(function(e){s[e.toLowerCase()]=parseFloat(r["border"+e+"Width"])}),n.right=w.body.scrollWidth-n.left-o.width+s.right,n.bottom=w.body.scrollHeight-n.top-o.height+s.bottom,T.page.top>=n.top+s.top&&T.page.bottom>=n.bottom&&T.page.left>=n.left+s.left&&T.page.right>=n.right){var l=t.scrollTop,u=t.scrollLeft;T.offset={top:T.page.top-n.top+l-s.top,left:T.page.left-n.left+u-s.left}}}(),this.move(T),this.history.unshift(T),this.history.length>3&&this.history.pop(),t&&O(),!0}}},{key:"move",value:function(e){var t=this;if("undefined"!=typeof this.element.parentNode){var n={};for(var r in e){n[r]={};for(var i in e[r]){for(var o=!1,l=0;l<this.history.length;++l){var u=this.history[l];if("undefined"!=typeof u[r]&&!g(u[r][i],e[r][i])){o=!0;break}}o||(n[r][i]=!0)}}var c={top:"",left:"",right:"",bottom:""},f=function(e,n){var r="undefined"!=typeof t.options.optimizations,i=r?t.options.optimizations.gpu:null;if(i!==!1){var a=void 0,o=void 0;if(e.top?(c.top=0,a=n.top):(c.bottom=0,a=-n.bottom),e.left?(c.left=0,o=n.left):(c.right=0,o=-n.right),window.matchMedia){var s=window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches;s||(o=Math.round(o),a=Math.round(a))}c[L]="translateX("+o+"px) translateY("+a+"px)","msTransform"!==L&&(c[L]+=" translateZ(0)")}else e.top?c.top=n.top+"px":c.bottom=n.bottom+"px",e.left?c.left=n.left+"px":c.right=n.right+"px"},d=!1;if((n.page.top||n.page.bottom)&&(n.page.left||n.page.right)?(c.position="absolute",f(n.page,e.page)):(n.viewport.top||n.viewport.bottom)&&(n.viewport.left||n.viewport.right)?(c.position="fixed",f(n.viewport,e.viewport)):"undefined"!=typeof n.offset&&n.offset.top&&n.offset.left?!function(){c.position="absolute";var r=t.cache("target-offsetparent",function(){return a(t.target)});a(t.element)!==r&&k(function(){t.element.parentNode.removeChild(t.element),r.appendChild(t.element)}),f(n.offset,e.offset),d=!0}():(c.position="absolute",f({top:!0,left:!0},e.page)),!d)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var h=!0,p=this.element.parentNode;p&&1===p.nodeType&&"BODY"!==p.tagName;){if("static"!==getComputedStyle(p).position){h=!1;break}p=p.parentNode}h||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var m={},v=!1;for(var i in c){var y=c[i],b=this.element.style[i];b!==y&&(v=!0,m[i]=y)}v&&k(function(){s(t.element.style,m),t.trigger("repositioned")})}}}]),c}(I);q.modules=[],E.position=R;var Y=s(q,E),M=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=E.Utils,i=D.getBounds,s=D.extend,h=D.updateClasses,k=D.defer,X=["left","top","right","bottom"];E.modules.push({position:function(e){var t=this,n=e.top,r=e.left,a=e.targetAttachment;if(!this.options.constraints)return!0;var o=this.cache("element-bounds",function(){return i(t.element)}),l=o.height,u=o.width;if(0===u&&0===l&&"undefined"!=typeof this.lastSize){var c=this.lastSize;u=c.width,l=c.height}var f=this.cache("target-bounds",function(){return t.getTargetBounds()}),d=f.height,p=f.width,g=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(e){var t=e.outOfBoundsClass,n=e.pinnedClass;t&&g.push(t),n&&g.push(n)}),g.forEach(function(e){["left","top","right","bottom"].forEach(function(t){g.push(e+"-"+t)})});var m=[],v=s({},a),y=s({},this.attachment);return this.options.constraints.forEach(function(e){var i=e.to,o=e.attachment,s=e.pin;"undefined"==typeof o&&(o="");var c=void 0,f=void 0;if(o.indexOf(" ")>=0){var h=o.split(" "),g=M(h,2);f=g[0],c=g[1]}else c=f=o;var _=b(t,i);"target"!==f&&"both"!==f||(n<_[1]&&"top"===v.top&&(n+=d,v.top="bottom"),n+l>_[3]&&"bottom"===v.top&&(n-=d,v.top="top")),"together"===f&&("top"===v.top&&("bottom"===y.top&&n<_[1]?(n+=d,v.top="bottom",n+=l,y.top="top"):"top"===y.top&&n+l>_[3]&&n-(l-d)>=_[1]&&(n-=l-d,v.top="bottom",y.top="bottom")),"bottom"===v.top&&("top"===y.top&&n+l>_[3]?(n-=d,v.top="top",n-=l,y.top="bottom"):"bottom"===y.top&&n<_[1]&&n+(2*l-d)<=_[3]&&(n+=l-d,v.top="top",y.top="top")),"middle"===v.top&&(n+l>_[3]&&"top"===y.top?(n-=l,y.top="bottom"):n<_[1]&&"bottom"===y.top&&(n+=l,y.top="top"))),"target"!==c&&"both"!==c||(r<_[0]&&"left"===v.left&&(r+=p,v.left="right"),r+u>_[2]&&"right"===v.left&&(r-=p,v.left="left")),"together"===c&&(r<_[0]&&"left"===v.left?"right"===y.left?(r+=p,v.left="right",r+=u,y.left="left"):"left"===y.left&&(r+=p,v.left="right",r-=u,y.left="right"):r+u>_[2]&&"right"===v.left?"left"===y.left?(r-=p,v.left="left",r-=u,y.left="right"):"right"===y.left&&(r-=p,v.left="left",r+=u,y.left="left"):"center"===v.left&&(r+u>_[2]&&"left"===y.left?(r-=u,y.left="right"):r<_[0]&&"right"===y.left&&(r+=u,y.left="left"))),"element"!==f&&"both"!==f||(n<_[1]&&"bottom"===y.top&&(n+=l,y.top="top"),n+l>_[3]&&"top"===y.top&&(n-=l,y.top="bottom")),"element"!==c&&"both"!==c||(r<_[0]&&("right"===y.left?(r+=u,y.left="left"):"center"===y.left&&(r+=u/2,y.left="left")),r+u>_[2]&&("left"===y.left?(r-=u,y.left="right"):"center"===y.left&&(r-=u/2,y.left="right"))),"string"==typeof s?s=s.split(",").map(function(e){return e.trim()}):s===!0&&(s=["top","left","right","bottom"]),s=s||[];var E=[],x=[];n<_[1]&&(s.indexOf("top")>=0?(n=_[1],E.push("top")):x.push("top")),n+l>_[3]&&(s.indexOf("bottom")>=0?(n=_[3]-l,E.push("bottom")):x.push("bottom")),r<_[0]&&(s.indexOf("left")>=0?(r=_[0],E.push("left")):x.push("left")),r+u>_[2]&&(s.indexOf("right")>=0?(r=_[2]-u,E.push("right")):x.push("right")),E.length&&!function(){var e=void 0;e="undefined"!=typeof t.options.pinnedClass?t.options.pinnedClass:t.getClass("pinned"),m.push(e),E.forEach(function(t){m.push(e+"-"+t)})}(),x.length&&!function(){var e=void 0;e="undefined"!=typeof t.options.outOfBoundsClass?t.options.outOfBoundsClass:t.getClass("out-of-bounds"),m.push(e),x.forEach(function(t){m.push(e+"-"+t)})}(),(E.indexOf("left")>=0||E.indexOf("right")>=0)&&(y.left=v.left=!1),(E.indexOf("top")>=0||E.indexOf("bottom")>=0)&&(y.top=v.top=!1),v.top===a.top&&v.left===a.left&&y.top===t.attachment.top&&y.left===t.attachment.left||(t.updateAttachClasses(y,v),t.trigger("update",{attachment:y,targetAttachment:v}))}),k(function(){t.options.addTargetClasses!==!1&&h(t.target,m,g),h(t.element,m,g)}),{top:n,left:r}}});var D=E.Utils,i=D.getBounds,h=D.updateClasses,k=D.defer;E.modules.push({position:function(e){var t=this,n=e.top,r=e.left,a=this.cache("element-bounds",function(){return i(t.element)}),o=a.height,s=a.width,l=this.getTargetBounds(),u=n+o,c=r+s,f=[];n<=l.bottom&&u>=l.top&&["left","right"].forEach(function(e){var t=l[e];t!==r&&t!==c||f.push(e)}),r<=l.right&&c>=l.left&&["top","bottom"].forEach(function(e){var t=l[e];t!==n&&t!==u||f.push(e)});var d=[],p=[],g=["left","top","right","bottom"];return d.push(this.getClass("abutted")),g.forEach(function(e){d.push(t.getClass("abutted")+"-"+e)}),f.length&&p.push(this.getClass("abutted")),f.forEach(function(e){p.push(t.getClass("abutted")+"-"+e)}),k(function(){t.options.addTargetClasses!==!1&&h(t.target,p,d),h(t.element,p,d)}),!0}});var M=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return E.modules.push({position:function(e){var t=e.top,n=e.left;if(this.options.shift){var r=this.options.shift;"function"==typeof this.options.shift&&(r=this.options.shift.call(this,{top:t,left:n}));var i=void 0,a=void 0;if("string"==typeof r){r=r.split(" "),r[1]=r[1]||r[0];var o=r,s=M(o,2);i=s[0],a=s[1],i=parseFloat(i,10),a=parseFloat(a,10)}else i=r.top,a=r.left;return t+=i,n+=a,{top:t,left:n}}}}),Y}),/*! tether-drop 1.4.1 */
function(e,t){"function"==typeof define&&define.amd?define(["tether"],t):"object"==typeof exports?module.exports=t(require("tether")):e.Drop=t(e.Tether)}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t=e.split(" "),n=s(t,2),r=n[0],i=n[1];if(["left","right"].indexOf(r)>=0){var a=[i,r];r=a[0],i=a[1]}return[r,i].join(" ")}function i(e,t){for(var n=void 0,r=[];(n=e.indexOf(t))!==-1;)r.push(e.splice(n,1));return r}function a(){var s=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(o.apply(b,[null].concat(t)))};f(c,{createContext:a,drops:[],defaults:{}});var v={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,tetherOptions:{}}};f(c,v,s),f(c.defaults,v.defaults,s.defaults),"undefined"==typeof x[c.classPrefix]&&(x[c.classPrefix]=[]),c.updateBodyClasses=function(){for(var e=!1,t=x[c.classPrefix],n=t.length,r=0;r<n;++r)if(t[r].isOpened()){e=!0;break}e?d(document.body,c.classPrefix+"-open"):h(document.body,c.classPrefix+"-open")};var b=function(a){function o(e){if(t(this,o),u(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.options=f({},c.defaults,e),this.target=this.options.target,"undefined"==typeof this.target)throw new Error("Drop Error: You must provide a target.");var n="data-"+c.classPrefix,r=this.target.getAttribute(n);r&&null==this.options.content&&(this.options.content=r);for(var i=["position","openOn"],a=0;a<i.length;++a){var s=this.target.getAttribute(n+"-"+i[a]);s&&null==this.options[i[a]]&&(this.options[i[a]]=s)}this.options.classes&&this.options.addTargetClasses!==!1&&d(this.target,this.options.classes),c.drops.push(this),x[c.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return n(o,a),l(o,[{key:"_on",value:function(e,t,n){this._boundEvents.push({element:e,event:t,handler:n}),e.addEventListener(t,n)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var e=this;if(this.drop=document.createElement("div"),d(this.drop,c.classPrefix),this.options.classes&&d(this.drop,this.options.classes),this.content=document.createElement("div"),d(this.content,c.classPrefix+"-content"),"function"==typeof this.options.content){var t=function(){var t=e.options.content.call(e,e);if("string"==typeof t)e.content.innerHTML=t;else{if("object"!=typeof t)throw new Error("Drop Error: Content function should return a string or HTMLElement.");e.content.innerHTML="",e.content.appendChild(t)}};t(),this.on("open",t.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var t=this.options.position.split(" ");t[0]=E[t[0]],t=t.join(" ");var n=[];this.options.constrainToScrollParent?n.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):n.push({to:"scrollParent"}),this.options.constrainToWindow!==!1?n.push({to:"window",attachment:"together"}):n.push({to:"window"});var i={element:this.drop,target:this.target,attachment:r(t),targetAttachment:r(this.options.position),classPrefix:c.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:n,addTargetClasses:this.options.addTargetClasses};this.options.tetherOptions!==!1&&(this.tether=new e(f({},i,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var e=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));var t=this.options.openOn.split(" ");if(t.indexOf("click")>=0)for(var n=function(t){e.toggle(t),t.preventDefault()},r=function(t){e.isOpened()&&(t.target===e.drop||e.drop.contains(t.target)||t.target===e.target||e.target.contains(t.target)||e.close(t))},i=0;i<m.length;++i){var a=m[i];this._on(this.target,a,n),this._on(document,a,r)}var o=null,s=null,l=function(t){null!==s?clearTimeout(s):o=setTimeout(function(){e.open(t),o=null},("focus"===t.type?e.options.focusDelay:e.options.hoverOpenDelay)||e.options.openDelay)},u=function(t){null!==o?clearTimeout(o):s=setTimeout(function(){e.close(t),s=null},("blur"===t.type?e.options.blurDelay:e.options.hoverCloseDelay)||e.options.closeDelay)};t.indexOf("hover")>=0&&(this._on(this.target,"mouseover",l),this._on(this.drop,"mouseover",l),this._on(this.target,"mouseout",u),this._on(this.drop,"mouseout",u)),t.indexOf("focus")>=0&&(this._on(this.target,"focus",l),this._on(this.drop,"focus",l),this._on(this.target,"blur",u),this._on(this.drop,"blur",u))}}},{key:"isOpened",value:function(){if(this.drop)return p(this.drop,c.classPrefix+"-open")}},{key:"toggle",value:function(e){this.isOpened()?this.close(e):this.open(e)}},{key:"open",value:function(e){var t=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!=typeof this.tether&&this.tether.enable(),d(this.drop,c.classPrefix+"-open"),d(this.drop,c.classPrefix+"-open-transitionend"),setTimeout(function(){t.drop&&d(t.drop,c.classPrefix+"-after-open")}),"undefined"!=typeof this.tether&&this.tether.position(),this.trigger("open"),c.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(e){e.target===e.currentTarget&&(p(this.drop,c.classPrefix+"-open")||h(this.drop,c.classPrefix+"-open-transitionend"),this.drop.removeEventListener(y,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(e){var t=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,t=this.options.beforeClose(e,this)!==!1),this.isClosing=!1,t}},{key:"close",value:function(e){this.isOpened()&&this.beforeCloseHandler(e)&&(h(this.drop,c.classPrefix+"-open"),h(this.drop,c.classPrefix+"-after-open"),this.drop.addEventListener(y,this.transitionEndHandler),this.trigger("close"),"undefined"!=typeof this.tether&&this.tether.disable(),c.updateBodyClasses(),this.options.remove&&this.remove(e))}},{key:"remove",value:function(e){this.close(e),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&"undefined"!=typeof this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),"undefined"!=typeof this.tether&&this.tether.destroy();for(var e=0;e<this._boundEvents.length;++e){var t=this._boundEvents[e],n=t.element,r=t.event,a=t.handler;n.removeEventListener(r,a)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,i(x[c.classPrefix],this),i(c.drops,this)}}]),o}(g);return c}var o=Function.prototype.bind,s=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}},c=e.Utils,f=c.extend,d=c.addClass,h=c.removeClass,p=c.hasClass,g=c.Evented,m=["click"];"ontouchstart"in document.documentElement&&m.push("touchstart");var v={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},y="";for(var b in v)if({}.hasOwnProperty.call(v,b)){var _=document.createElement("p");"undefined"!=typeof _.style[b]&&(y=v[b])}var E={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},x={},S=a();return document.addEventListener("DOMContentLoaded",function(){S.updateBodyClasses()}),S}),function(){var e,t,n,r,i,a,o,s,l,u,c,f,d,h,p;n=Math.floor,u=Math.min,t=function(e,t){return e<t?-1:e>t?1:0},l=function(e,r,i,a,o){var s;if(null==i&&(i=0),null==o&&(o=t),i<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)s=n((i+a)/2),o(r,e[s])<0?a=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(r)),r},a=function(e,n,r){return null==r&&(r=t),e.push(n),h(e,0,e.length-1,r)},i=function(e,n){var r,i;return null==n&&(n=t),r=e.pop(),e.length?(i=e[0],e[0]=r,p(e,0,n)):i=r,i},s=function(e,n,r){var i;return null==r&&(r=t),i=e[0],e[0]=n,p(e,0,r),i},o=function(e,n,r){var i;return null==r&&(r=t),e.length&&r(e[0],n)<0&&(i=[e[0],n],n=i[0],e[0]=i[1],p(e,0,r)),n},r=function(e,r){var i,a,o,s,l,u;for(null==r&&(r=t),s=function(){u=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],a=0,o=s.length;a<o;a++)i=s[a],l.push(p(e,i,r));return l},d=function(e,n,r){var i;if(null==r&&(r=t),i=e.indexOf(n),i!==-1)return h(e,0,i,r),p(e,i,r)},c=function(e,n,i){var a,s,l,u,c;if(null==i&&(i=t),s=e.slice(0,n),!s.length)return s;for(r(s,i),c=e.slice(n),l=0,u=c.length;l<u;l++)a=c[l],o(s,a,i);return s.sort(i).reverse()},f=function(e,n,a){var o,s,c,f,d,h,p,g,m,v;if(null==a&&(a=t),10*n<=e.length){if(f=e.slice(0,n).sort(a),!f.length)return f;for(c=f[f.length-1],g=e.slice(n),d=0,p=g.length;d<p;d++)o=g[d],a(o,c)<0&&(l(f,o,0,null,a),f.pop(),c=f[f.length-1]);return f}for(r(e,a),v=[],s=h=0,m=u(n,e.length);0<=m?h<m:h>m;s=0<=m?++h:--h)v.push(i(e,a));return v},h=function(e,n,r,i){var a,o,s;for(null==i&&(i=t),a=e[r];r>n&&(s=r-1>>1,o=e[s],i(a,o)<0);)e[r]=o,r=s;return e[r]=a},p=function(e,n,r){var i,a,o,s,l;for(null==r&&(r=t),a=e.length,l=n,o=e[n],i=2*n+1;i<a;)s=i+1,s<a&&!(r(e[i],e[s])<0)&&(i=s),e[n]=e[i],n=i,i=2*n+1;return e[n]=o,h(e,l,n,r)},e=function(){function e(e){this.cmp=null!=e?e:t,this.nodes=[]}return e.push=a,e.pop=i,e.replace=s,e.pushpop=o,e.heapify=r,e.updateItem=d,e.nlargest=c,e.nsmallest=f,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return i(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return this.nodes.indexOf(e)!==-1},e.prototype.replace=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return r(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,t){return"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Heap=t()}(this,function(){return e})}.call(this),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){var r=n.length;switch(r){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t,n,r){for(var i=-1,a=e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function i(e,t){for(var n=-1,r=e.length,i=-1,a=t.length,o=Array(r+a);++n<r;)o[n]=e[n];for(;++i<a;)o[n++]=t[i];return o}function a(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function o(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function s(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=e.length,i=-1,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[++i]=o)}return a}function u(e,t){return!!e.length&&b(e,t,0)>-1}function c(e,t,n){for(var r=-1,i=e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function f(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function d(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function h(e,t,n,r){var i=-1,a=e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function p(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function g(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function m(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],o=t(a);if(null!=o&&(s===W?o===o:n(o,s)))var s=o,l=a}return l}function v(e,t,n,r){var i;return n(e,function(e,n,a){if(t(e,n,a))return i=r?n:e,!1}),i}function y(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function b(e,t,n){if(t!==t)return R(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function _(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function E(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function x(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==W&&(n=n===W?a:n+a)}return n}function S(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function T(e,t){return f(t,function(t){return[t,e[t]]})}function w(e){return function(t){return e(t)}}function A(e,t){return f(t,function(t){return e[t]})}function C(e,t){for(var n=-1,r=e.length;++n<r&&b(t,e[n],0)>-1;);return n}function k(e,t){for(var n=e.length;n--&&b(t,e[n],0)>-1;);return n}function O(e){return e&&e.Object===Object?e:null}function I(e,t){if(e!==t){var n=null===e,r=e===W,i=e===e,a=null===t,o=t===W,s=t===t;if(e>t&&!a||!i||n&&!o&&s||r&&s)return 1;if(e<t&&!n||!s||a&&!r&&i||o&&i)return-1}return 0}function M(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var l=I(i[r],a[r]);if(l){if(r>=s)return l;var u=n[r];return l*("desc"==u?-1:1)}}return e.index-t.index}function N(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}function D(e){return yn[e]}function L(e){return bn[e]}function $(e){return"\\"+xn[e]}function R(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var a=e[i];if(a!==a)return i}return-1}function P(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function F(e,t){return e="number"==typeof e||St.test(e)?+e:-1,t=null==t?ye:t,e>-1&&e%1==0&&e<t}function U(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function j(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function H(e,t){for(var n=-1,r=e.length,i=-1,a=[];++n<r;){var o=e[n];o!==t&&o!==Te||(e[n]=Te,a[++i]=n)}return a}function z(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function B(e){if(!e||!cn.test(e))return e.length;for(var t=un.lastIndex=0;un.test(e);)t++;return t}function q(e){return e.match(un)}function Y(e){return _n[e]}function X(O){function St(e){if(Uo(e)&&!Ec(e)&&!(e instanceof Ot)){if(e instanceof kt)return e;if(ql.call(e,"__wrapped__"))return Di(e)}return new kt(e)}function Ct(){}function kt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=W}function Ot(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ee,this.__views__=[]}function It(){var e=new Ot(this.__wrapped__);return e.__actions__=Fr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Fr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Fr(this.__views__),e}function Mt(){if(this.__filtered__){var e=new Ot(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Nt(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ec(e),r=t<0,i=n?e.length:0,a=mi(0,i,this.__views__),o=a.start,s=a.end,l=s-o,u=r?s:o-1,c=this.__iteratees__,f=c.length,d=0,h=gu(l,this.__takeCount__);if(!n||i<fe||i==l&&h==l)return Ar(e,this.__actions__);var p=[];e:for(;l--&&d<h;){u+=t;for(var g=-1,m=e[u];++g<f;){var v=c[g],y=v.iteratee,b=v.type,_=y(m);if(b==he)m=_;else if(!_){if(b==de)continue e;break e}}p[d++]=m}return p}function Dt(){}function Lt(e,t){return Rt(e,t)&&delete e[t]}function $t(e,t){if(xu){var n=e[t];return n===me?W:n}return ql.call(e,t)?e[t]:W}function Rt(e,t){return xu?e[t]!==W:ql.call(e,t)}function Pt(e,t,n){e[t]=xu&&n===W?me:n}function Ft(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ut(){this.__data__={hash:new Dt,map:bu?new bu:[],string:new Dt}}function jt(e){var t=this.__data__;return Ti(e)?Lt("string"==typeof e?t.string:t.hash,e):bu?t.map["delete"](e):Jt(t.map,e)}function Ht(e){var t=this.__data__;return Ti(e)?$t("string"==typeof e?t.string:t.hash,e):bu?t.map.get(e):en(t.map,e)}function zt(e){var t=this.__data__;return Ti(e)?Rt("string"==typeof e?t.string:t.hash,e):bu?t.map.has(e):tn(t.map,e)}function Bt(e,t){var n=this.__data__;return Ti(e)?Pt("string"==typeof e?n.string:n.hash,e,t):bu?n.map.set(e,t):rn(n.map,e,t),this}function qt(e){var t=-1,n=e?e.length:0;for(this.__data__=new Ft;++t<n;)this.push(e[t])}function Yt(e,t){var n=e.__data__;if(Ti(t)){var r=n.__data__,i="string"==typeof t?r.string:r.hash;return i[t]===me}return n.has(t)}function Xt(e){var t=this.__data__;if(Ti(e)){var n=t.__data__,r="string"==typeof e?n.string:n.hash;r[e]=me}else t.set(e,me)}function Wt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gt(){this.__data__={array:[],map:null}}function Vt(e){var t=this.__data__,n=t.array;return n?Jt(n,e):t.map["delete"](e)}function Kt(e){var t=this.__data__,n=t.array;return n?en(n,e):t.map.get(e)}function Zt(e){var t=this.__data__,n=t.array;return n?tn(n,e):t.map.has(e)}function Qt(e,t){var n=this.__data__,r=n.array;r&&(r.length<fe-1?rn(r,e,t):(n.array=null,n.map=new Ft(r)));var i=n.map;return i&&i.set(e,t),this}function Jt(e,t){var n=nn(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():lu.call(e,n,1),!0}function en(e,t){var n=nn(e,t);return n<0?W:e[n][1]}function tn(e,t){return nn(e,t)>-1}function nn(e,t){for(var n=e.length;n--;)if(_o(e[n][0],t))return n;return-1}function rn(e,t,n){var r=nn(e,t);r<0?e.push([t,n]):e[r][1]=n}function an(e,t,n,r){return e===W||_o(e,zl[n])&&!ql.call(r,n)?t:e}function on(e,t,n){(n===W||_o(e[t],n))&&("number"!=typeof t||n!==W||t in e)||(e[t]=n)}function sn(e,t,n){var r=e[t];ql.call(e,t)&&_o(r,n)&&(n!==W||t in e)||(e[t]=n)}function un(e,t,n,r){return Mu(e,function(e,i,a){t(r,e,n(e),a)}),r}function yn(e,t){return e&&Ur(t,ws(t),e)}function bn(e,t){for(var n=-1,r=null==e,i=t.length,a=Array(i);++n<i;)a[n]=r?W:xs(e,t[n]);return a}function _n(e){return Ao(e)?e:[]}function En(e){return"function"==typeof e?e:pl}function xn(e){return Ec(e)?e:Ni(e)}function wn(e,t,n){return e===e&&(n!==W&&(e=e<=n?e:n),t!==W&&(e=e>=t?e:t)),e}function An(e,t,n,r,i,o){var s;if(n&&(s=i?n(e,r,i,o):n(e)),s!==W)return s;if(!Fo(e))return e;var l=Ec(e);if(l){if(s=yi(e),!t)return Fr(e,s)}else{var u=gi(e),c=u==Ie||u==Me;if(xc(e))return Or(e,t);if(u==Le||u==we||c&&!i){if(P(e))return i?e:{};if(s=bi(c?{}:e),!t)return Hr(e,yn(s,e))}else{if(!vn[u])return i?e:{};s=_i(e,u,t)}}o||(o=new Wt);var f=o.get(e);return f?f:(o.set(e,s),(l?a:Un)(e,function(r,i){sn(s,i,An(r,t,n,i,e,o))}),l?s:Hr(e,s))}function kn(e){var t=ws(e),n=t.length;return function(r){if(null==r)return!n;for(var i=n;i--;){var a=t[i],o=e[a],s=r[a];if(s===W&&!(a in Object(r))||!o(s))return!1}return!0}}function On(e){return Fo(e)?au(e):{}}function In(e,t,n){if("function"!=typeof e)throw new jl(ge);return su(function(){e.apply(W,n)},t)}function Mn(e,t,n,r){var i=-1,a=u,o=!0,s=e.length,l=[],d=t.length;if(!s)return l;n&&(t=f(t,w(n))),r?(a=c,o=!1):t.length>=fe&&(a=Yt,o=!1,t=new qt(t));e:for(;++i<s;){var h=e[i],p=n?n(h):h;if(o&&p===p){for(var g=d;g--;)if(t[g]===p)continue e;l.push(h)}else a(t,p,r)||l.push(h)}return l}function Ln(e,t){var n=!0;return Mu(e,function(e,r,i){return n=!!t(e,r,i)}),n}function $n(e,t,n,r){var i=e.length;for(n=ss(n),n<0&&(n=-n>i?0:i+n),r=r===W||r>i?i:ss(r),r<0&&(r+=i),r=n>r?0:ls(r);n<r;)e[n++]=t;return e}function Rn(e,t){var n=[];return Mu(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Pn(e,t,n,r){r||(r=[]);for(var i=-1,a=e.length;++i<a;){var o=e[i];t>0&&Ao(o)&&(n||Ec(o)||So(o))?t>1?Pn(o,t-1,n,r):d(r,o):n||(r[r.length]=o)}return r}function Fn(e,t){return null==e?e:Du(e,t,As)}function Un(e,t){return e&&Du(e,t,ws)}function jn(e,t){return e&&Lu(e,t,ws)}function Hn(e,t){return l(t,function(t){return $o(e[t])})}function zn(e,t){t=Si(t,e)?[t+""]:xn(t);for(var n=0,r=t.length;null!=e&&n<r;)e=e[t[n++]];return n&&n==r?e:W}function Bn(e,t){return ql.call(e,t)||"object"==typeof e&&t in e&&null===nu(e)}function qn(e,t){return t in Object(e)}function Yn(e,t,n){return e>=gu(t,n)&&e<pu(t,n)}function Xn(e,t,n){for(var r=n?c:u,i=e.length,a=i,o=Array(i),s=[];a--;){var l=e[a];a&&t&&(l=f(l,w(t))),o[a]=!n&&(t||l.length>=120)?new qt(a&&l):W}l=e[0];var d=-1,h=l.length,p=o[0];e:for(;++d<h;){var g=l[d],m=t?t(g):g;if(!(p?Yt(p,m):r(s,m,n))){for(var a=i;--a;){var v=o[a];if(!(v?Yt(v,m):r(e[a],m,n)))continue e}p&&p.push(m),s.push(g)}}return s}function Wn(e,t,n,r){return Un(e,function(e,i,a){t(r,n(e),i,a)}),r}function Gn(e,t,r){Si(t,e)||(t=xn(t),e=Ii(e,t),t=Zi(t));var i=null==e?e:e[t];return null==i?W:n(i,e,r)}function Vn(e,t,n,r,i){return e===t||(null==e||null==t||!Fo(e)&&!Uo(t)?e!==e&&t!==t:Kn(e,t,Vn,n,r,i))}function Kn(e,t,n,r,i,a){var o=Ec(e),s=Ec(t),l=Ae,u=Ae;o||(l=gi(e),l==we?l=Le:l!=Le&&(o=es(e))),s||(u=gi(t),u==we?u=Le:u!=Le&&(s=es(t)));var c=l==Le&&!P(e),f=u==Le&&!P(t),d=l==u;if(d&&!o&&!c)return li(e,t,l,n,r,i);var h=i&oe;if(!h){var p=c&&ql.call(e,"__wrapped__"),g=f&&ql.call(t,"__wrapped__");if(p||g)return n(p?e.value():e,g?t.value():t,r,i,a)}return!!d&&(a||(a=new Wt),(o?si:ui)(e,t,n,r,i,a))}function Zn(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=n[i];var l=s[0],u=e[l],c=s[1];if(o&&s[2]){if(u===W&&!(l in e))return!1}else{var f=new Wt,d=r?r(u,c,l,e,t,f):W;if(!(d===W?Vn(c,u,r,ae|oe,f):d))return!1}}return!0}function Qn(e){var t=typeof e;return"function"==t?e:null==e?pl:"object"==t?Ec(e)?rr(e[0],e[1]):nr(e):xl(e)}function Jn(e){return hu(Object(e))}function er(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function tr(e,t){var n=-1,r=wo(e)?Array(e.length):[];return Mu(e,function(e,i,a){r[++n]=t(e,i,a)}),r}function nr(e){var t=di(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&(e[n]===r&&(r!==W||n in Object(e)))}}return function(n){return n===e||Zn(n,e,t)}}function rr(e,t){return function(n){var r=xs(n,e);return r===W&&r===t?Ts(n,e):Vn(t,r,W,ae|oe)}}function ir(e,t,n,r,i){if(e!==t){var o=Ec(t)||es(t)?W:As(t);a(o||t,function(a,s){if(o&&(s=a,a=t[s]),Fo(a))i||(i=new Wt),ar(e,t,s,n,ir,r,i);else{var l=r?r(e[s],a,s+"",e,t,i):W;l===W&&(l=a),on(e,s,l)}})}}function ar(e,t,n,r,i,a,o){var s=e[n],l=t[n],u=o.get(l);if(u)return void on(e,n,u);var c=a?a(s,l,n+"",e,t,o):W,f=c===W;f&&(c=l,Ec(l)||es(l)?Ec(s)?c=s:Ao(s)?c=Fr(s):(f=!1,c=An(l,!0)):Go(l)||So(l)?So(s)?c=cs(s):!Fo(s)||r&&$o(s)?(f=!1,c=An(l,!0)):c=s:f=!1),o.set(l,c),f&&i(c,l,r,a,o),on(e,n,c)}function or(e,t,n){var r=-1,i=fi();t=f(t.length?t:Array(1),function(e){return i(e)});var a=tr(e,function(e,n,i){var a=f(t,function(t){return t(e)});return{criteria:a,index:++r,value:e}});return E(a,function(e,t){return M(e,t,n)})}function sr(e,t){return e=Object(e),h(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function lr(e,t){var n={};return Fn(e,function(e,r){t(e,r)&&(n[r]=e)}),n}function ur(e){return function(t){return null==t?W:t[e]}}function cr(e){return function(t){return zn(t,e)}}function fr(e,t){return dr(e,t)}function dr(e,t,n){var r=-1,i=t.length,a=e;for(n&&(a=f(e,function(e){return n(e)}));++r<i;)for(var o=0,s=t[r],l=n?n(s):s;(o=b(a,l,o))>-1;)a!==e&&lu.call(a,o,1),lu.call(e,o,1);return e}function hr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(r==n||i!=a){var a=i;if(F(i))lu.call(e,i,1);else if(Si(i,e))delete e[i];else{var o=xn(i),s=Ii(e,o);null!=s&&delete s[Zi(o)]}}}return e}function pr(e,t){return e+cu(vu()*(t-e+1))}function gr(e,t,n,r){for(var i=-1,a=pu(uu((t-e)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=e,e+=n;return o}function mr(e,t,n,r){t=Si(t,e)?[t+""]:xn(t);for(var i=-1,a=t.length,o=a-1,s=e;null!=s&&++i<a;){var l=t[i];if(Fo(s)){var u=n;if(i!=o){var c=s[l];u=r?r(c,l,s):W,u===W&&(u=null==c?F(t[i+1])?[]:{}:c)}sn(s,l,u)}s=s[l]}return e}function vr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}function yr(e,t){var n;return Mu(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function br(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&i<=Se){for(;r<i;){var a=r+i>>>1,o=e[a];(n?o<=t:o<t)&&null!==o?r=a+1:i=a}return i}return _r(e,t,pl,n)}function _r(e,t,n,r){t=n(t);for(var i=0,a=e?e.length:0,o=t!==t,s=null===t,l=t===W;i<a;){var u=cu((i+a)/2),c=n(e[u]),f=c!==W,d=c===c;if(o)var h=d||r;else h=s?d&&f&&(r||null!=c):l?d&&(r||f):null!=c&&(r?c<=t:c<t);h?i=u+1:a=u}return gu(a,xe)}function Er(e){return xr(e)}function xr(e,t){for(var n=0,r=e.length,i=e[0],a=t?t(i):i,o=a,s=0,l=[i];++n<r;)i=e[n],a=t?t(i):i,_o(a,o)||(o=a,l[++s]=i);return l}function Sr(e,t,n){var r=-1,i=u,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=c;else if(a>=fe){var f=t?null:Ru(e);if(f)return z(f);o=!1,i=Yt,l=new qt}else l=t?[]:s;e:for(;++r<a;){var d=e[r],h=t?t(d):d;if(o&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue e;t&&l.push(h),s.push(d)}else i(l,h,n)||(l!==s&&l.push(h),s.push(d))}return s}function Tr(e,t){t=Si(t,e)?[t+""]:xn(t),e=Ii(e,t);var n=Zi(t);return null==e||!Ss(e,n)||delete e[n]}function wr(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?vr(e,r?0:a,r?a+1:i):vr(e,r?a+1:0,r?i:a)}function Ar(e,t){var n=e;return n instanceof Ot&&(n=n.value()),h(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},n)}function Cr(e,t,n){for(var r=-1,i=e.length;++r<i;)var a=a?d(Mn(a,e[r],t,n),Mn(e[r],a,t,n)):e[r];return a&&a.length?Sr(a,t,n):[]}function kr(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;)n(o,e[r],r<a?t[r]:W);return o}function Or(e,t){if(t)return e.slice();var n=e.constructor,r=new n(e.length);return e.copy(r),r}function Ir(e){var t=e.constructor,n=new t(e.byteLength),r=new Jl(n);return r.set(new Jl(e)),n}function Mr(t){var n=t.constructor;return h(j(t),e,new n)}function Nr(e){var t=e.constructor,n=new t(e.source,vt.exec(e));return n.lastIndex=e.lastIndex,n}function Dr(e){var n=e.constructor;return h(z(e),t,new n)}function Lr(e){return Ql?Object(ku.call(e)):{}}function $r(e,t){var n=e.buffer,r=t?Ir(n):n,i=e.constructor;return new i(r,e.byteOffset,e.length)}function Rr(e,t,n,r){for(var i=-1,a=e.length,o=n.length,s=-1,l=t.length,u=pu(a-o,0),c=Array(l+u),f=!r;++s<l;)c[s]=t[s];for(;++i<o;)(f||i<a)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function Pr(e,t,n,r){for(var i=-1,a=e.length,o=-1,s=n.length,l=-1,u=t.length,c=pu(a-s,0),f=Array(c+u),d=!r;++i<c;)f[i]=e[i];for(var h=i;++l<u;)f[h+l]=t[l];for(;++o<s;)(d||i<a)&&(f[h+n[o]]=e[i++]);return f}function Fr(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function Ur(e,t,n){return jr(e,t,n)}function jr(e,t,n,r){n||(n={});for(var i=-1,a=t.length;++i<a;){var o=t[i],s=r?r(n[o],e[o],o,n,e):e[o];sn(n,o,s)}return n}function Hr(e,t){return Ur(e,Uu(e),t)}function zr(e,t){return function(n,i){var a=Ec(n)?r:un,o=t?t():{};return a(n,e,fi(i),o)}}function Br(e){return uo(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:W,o=i>2?n[2]:W;for(a="function"==typeof a?(i--,a):W,o&&xi(n[0],n[1],o)&&(a=i<3?W:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}function qr(e,t){return function(n,r){if(null==n)return n;if(!wo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}function Yr(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(n(a[l],l,a)===!1)break}return t}}function Xr(e,t,n){function r(){var t=this&&this!==Nn&&this instanceof r?a:e;return t.apply(i?n:this,arguments)}var i=t&V,a=Vr(e);return r}function Wr(e){return function(t){t=ds(t);var n=cn.test(t)?q(t):W,r=n?n[0]:t.charAt(0),i=n?n.slice(1).join(""):t.slice(1);return r[e]()+i}}function Gr(e){return function(t){return h(cl(qs(t)),e,"")}}function Vr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=On(e.prototype),r=e.apply(n,t);return Fo(r)?r:n}}function Kr(e,t,r){function i(){for(var o=arguments.length,s=Array(o),l=o,u=pi(i);l--;)s[l]=arguments[l];var c=o<3&&s[0]!==u&&s[o-1]!==u?[]:H(s,u);if(o-=c.length,o<r)return ii(e,t,Qr,i.placeholder,W,s,c,W,W,r-o);var f=this&&this!==Nn&&this instanceof i?a:e;return n(f,this,s)}var a=Vr(e);return i}function Zr(e){return uo(function(t){t=Pn(t,1);var n=t.length,r=n,i=kt.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new jl(ge);if(i&&!o&&"wrapper"==ci(a))var o=new kt([],(!0))}for(r=o?r:n;++r<n;){a=t[r];var s=ci(a),l="wrapper"==s?Pu(a):W;o=l&&wi(l[0])&&l[1]==(ne|Q|ee|re)&&!l[4].length&&1==l[9]?o[ci(l[0])].apply(o,l[3]):1==a.length&&wi(a)?o[s]():o.thru(a)}return function(){var e=arguments,r=e[0];if(o&&1==e.length&&Ec(r)&&r.length>=fe)return o.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}})}function Qr(e,t,n,r,i,a,o,s,l,u){function c(){for(var v=arguments.length,y=v,b=Array(v);y--;)b[y]=arguments[y];if(p)var _=pi(c),E=N(b,_);if(r&&(b=Rr(b,r,i,p)),a&&(b=Pr(b,a,o,p)),v-=E,p&&v<u){var x=H(b,_);return ii(e,t,Qr,c.placeholder,n,b,x,s,l,u-v)}var S=d?n:this,T=h?S[e]:e;return v=b.length,s?b=Mi(b,s):g&&v>1&&b.reverse(),f&&l<v&&(b.length=l),this&&this!==Nn&&this instanceof c&&(T=m||Vr(T)),T.apply(S,b)}var f=t&ne,d=t&V,h=t&K,p=t&(Q|J),g=t&ie,m=h?W:Vr(e);return c}function Jr(e,t){return function(n,r){return Wn(n,e,t(r),{})}}function ei(e){return uo(function(t){return t=f(Pn(t,1),fi()),uo(function(r){var i=this;return e(t,function(e){return n(e,i,r)})})})}function ti(e,t,n){t=ss(t);var r=B(e);if(!t||r>=t)return"";var i=t-r;n=n===W?" ":n+"";var a=Qs(n,uu(i/B(n)));return cn.test(n)?q(a).slice(0,i).join(""):a.slice(0,i)}function ni(e,t,r,i){function a(){for(var t=-1,l=arguments.length,u=-1,c=i.length,f=Array(c+l),d=this&&this!==Nn&&this instanceof a?s:e;++u<c;)f[u]=i[u];for(;l--;)f[u++]=arguments[++t];return n(d,o?r:this,f)}var o=t&V,s=Vr(e);return a}function ri(e){return function(t,n,r){return r&&"number"!=typeof r&&xi(t,n,r)&&(n=r=W),t=us(t),t=t===t?t:0,n===W?(n=t,t=0):n=us(n)||0,r=r===W?t<n?1:-1:us(r)||0,gr(t,n,r,e)}}function ii(e,t,n,r,i,a,o,s,l,u){var c=t&Q,f=s?Fr(s):W,d=c?o:W,h=c?W:o,p=c?a:W,g=c?W:a;t|=c?ee:te,t&=~(c?te:ee),t&Z||(t&=~(V|K));var m=[e,t,i,p,d,g,h,f,l,u],v=n.apply(W,m);return wi(e)&&ju(v,m),v.placeholder=r,v}function ai(e){var t=Fl[e];return function(e,n){if(e=us(e),n=ss(n)){var r=(ds(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));
return r=(ds(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function oi(e,t,n,r,i,a,o,s){var l=t&K;if(!l&&"function"!=typeof e)throw new jl(ge);var u=r?r.length:0;if(u||(t&=~(ee|te),r=i=W),o=o===W?o:pu(ss(o),0),s=s===W?s:ss(s),u-=i?i.length:0,t&te){var c=r,f=i;r=i=W}var d=l?W:Pu(e),h=[e,t,n,r,i,c,f,a,o,s];if(d&&ki(h,d),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=null==h[9]?l?0:e.length:pu(h[9]-u,0),!s&&t&(Q|J)&&(t&=~(Q|J)),t&&t!=V)p=t==Q||t==J?Kr(e,t,s):t!=ee&&t!=(V|ee)||i.length?Qr.apply(W,h):ni(e,t,n,r);else var p=Xr(e,t,n);var g=d?$u:ju;return g(p,h)}function si(e,t,n,r,i,a){var o=-1,s=i&oe,l=i&ae,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var f=a.get(e);if(f)return f==t;var d=!0;for(a.set(e,t);++o<u;){var h=e[o],p=t[o];if(r)var m=s?r(p,h,o,t,e,a):r(h,p,o,e,t,a);if(m!==W){if(m)continue;d=!1;break}if(l){if(!g(t,function(e){return h===e||n(h,e,r,i,a)})){d=!1;break}}else if(h!==p&&!n(h,p,r,i,a)){d=!1;break}}return a["delete"](e),d}function li(e,t,n,r,i,a){switch(n){case He:return!(e.byteLength!=t.byteLength||!r(new Jl(e),new Jl(t)));case Ce:case ke:return+e==+t;case Oe:return e.name==t.name&&e.message==t.message;case De:return e!=+e?t!=+t:e==+t;case $e:case Pe:return e==t+"";case Ne:var o=j;case Re:var s=a&oe;return o||(o=z),(s||e.size==t.size)&&r(o(e),o(t),i,a|ae);case Fe:return!!Ql&&ku.call(e)==ku.call(t)}return!1}function ui(e,t,n,r,i,a){var o=i&oe,s=ws(e),l=s.length,u=ws(t),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var d=s[f];if(!(o?d in t:Bn(t,d)))return!1}var h=a.get(e);if(h)return h==t;var p=!0;a.set(e,t);for(var g=o;++f<l;){d=s[f];var m=e[d],v=t[d];if(r)var y=o?r(v,m,d,t,e,a):r(m,v,d,e,t,a);if(!(y===W?m===v||n(m,v,r,i,a):y)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return a["delete"](e),p}function ci(e){for(var t=e.name+"",n=Iu[t],r=ql.call(Iu,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function fi(){var e=St.iteratee||gl;return e=e===gl?Qn:e,arguments.length?e(arguments[0],arguments[1]):e}function di(e){for(var t=Ls(e),n=t.length;n--;)t[n][2]=Ci(t[n][1]);return t}function hi(e,t){var n=null==e?W:e[t];return qo(n)?n:W}function pi(e){var t=ql.call(St,"placeholder")?St:e;return t.placeholder}function gi(e){return Wl.call(e)}function mi(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=gu(t,e+o);break;case"takeRight":e=pu(e,t-o)}}return{start:e,end:t}}function vi(e,t,n){if(null==e)return!1;var r=n(e,t);r||Si(t)||(t=xn(t),e=Ii(e,t),null!=e&&(t=Zi(t),r=n(e,t)));var i=e?e.length:W;return r||!!i&&Po(i)&&F(t,i)&&(Ec(e)||Qo(e)||So(e))}function yi(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&ql.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function bi(e){return $o(e.constructor)&&!Ai(e)?On(nu(e)):{}}function _i(e,t,n){var r=e.constructor;switch(t){case He:return Ir(e);case Ce:case ke:return new r((+e));case ze:case Be:case qe:case Ye:case Xe:case We:case Ge:case Ve:case Ke:return $r(e,n);case Ne:return Mr(e);case De:case Pe:return new r(e);case $e:return Nr(e);case Re:return Dr(e);case Fe:return Lr(e)}}function Ei(e){var t=e?e.length:W;return Po(t)&&(Ec(e)||Qo(e)||So(e))?S(t,String):null}function xi(e,t,n){if(!Fo(n))return!1;var r=typeof t;return!!("number"==r?wo(n)&&F(t,n.length):"string"==r&&t in n)&&_o(n[t],e)}function Si(e,t){return"number"==typeof e||!Ec(e)&&(lt.test(e)||!st.test(e)||null!=t&&e in Object(t))}function Ti(e){var t=typeof e;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=e||null==e}function wi(e){var t=ci(e),n=St[t];if("function"!=typeof n||!(t in Ot.prototype))return!1;if(e===n)return!0;var r=Pu(n);return!!r&&e===r[0]}function Ai(e){var t=e&&e.constructor,n=$o(t)&&t.prototype||zl;return e===n}function Ci(e){return e===e&&!Fo(e)}function ki(e,t){var n=e[1],r=t[1],i=n|r,a=i<(V|K|ne),o=r==ne&&n==Q||r==ne&&n==re&&e[7].length<=t[8]||r==(ne|re)&&t[7].length<=t[8]&&n==Q;if(!a&&!o)return e;r&V&&(e[2]=t[2],i|=n&V?0:Z);var s=t[3];if(s){var l=e[3];e[3]=l?Rr(l,s,t[4]):Fr(s),e[4]=l?H(e[3],Te):Fr(t[4])}return s=t[5],s&&(l=e[5],e[5]=l?Pr(l,s,t[6]):Fr(s),e[6]=l?H(e[5],Te):Fr(t[6])),s=t[7],s&&(e[7]=Fr(s)),r&ne&&(e[8]=null==e[8]?t[8]:gu(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Oi(e,t,n,r,i,a){return Fo(e)&&Fo(t)&&(a.set(t,e),ir(e,t,W,Oi,a)),e}function Ii(e,t){return 1==t.length?e:xs(e,vr(t,0,-1))}function Mi(e,t){for(var n=e.length,r=gu(t.length,n),i=Fr(e);r--;){var a=t[r];e[r]=F(a,n)?i[a]:W}return e}function Ni(e){var t=[];return ds(e).replace(ut,function(e,n,r,i){t.push(r?i.replace(gt,"$1"):n||e)}),t}function Di(e){if(e instanceof Ot)return e.clone();var t=new kt(e.__wrapped__,e.__chain__);return t.__actions__=Fr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Li(e,t){t=pu(ss(t),0);var n=e?e.length:0;if(!n||t<1)return[];for(var r=0,i=-1,a=Array(uu(n/t));r<n;)a[++i]=vr(e,r,r+=t);return a}function $i(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var a=e[t];a&&(i[++r]=a)}return i}function Ri(e,t,n){var r=e?e.length:0;return r?(t=n||t===W?1:ss(t),vr(e,t<0?0:t,r)):[]}function Pi(e,t,n){var r=e?e.length:0;return r?(t=n||t===W?1:ss(t),t=r-t,vr(e,0,t<0?0:t)):[]}function Fi(e,t){return e&&e.length?wr(e,fi(t,3),!0,!0):[]}function Ui(e,t){return e&&e.length?wr(e,fi(t,3),!0):[]}function ji(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&xi(e,t,n)&&(n=0,r=i),$n(e,t,n,r)):[]}function Hi(e,t){return e&&e.length?y(e,fi(t,3)):-1}function zi(e,t){return e&&e.length?y(e,fi(t,3),!0):-1}function Bi(e){var t=e?e.length:0;return t?Pn(e,1):[]}function qi(e){var t=e?e.length:0;return t?Pn(e,ve):[]}function Yi(e,t){var n=e?e.length:0;return n?(t=t===W?1:ss(t),Pn(e,t)):[]}function Xi(e){for(var t=-1,n=e?e.length:0,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function Wi(e){return e?e[0]:W}function Gi(e,t,n){var r=e?e.length:0;return r?(n=ss(n),n<0&&(n=pu(r+n,0)),b(e,t,n)):-1}function Vi(e){return Pi(e,1)}function Ki(e,t){return e?du.call(e,t):""}function Zi(e){var t=e?e.length:0;return t?e[t-1]:W}function Qi(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(n!==W&&(i=ss(n),i=(i<0?pu(r+i,0):gu(i,r-1))+1),t!==t)return R(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function Ji(e,t){return e&&e.length&&t&&t.length?fr(e,t):e}function ea(e,t,n){return e&&e.length&&t&&t.length?dr(e,t,fi(n)):e}function ta(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=fi(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return hr(e,i),n}function na(e){return e?yu.call(e):e}function ra(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&xi(e,t,n)?(t=0,n=r):(t=null==t?0:ss(t),n=n===W?r:ss(n)),vr(e,t,n)):[]}function ia(e,t){return br(e,t)}function aa(e,t,n){return _r(e,t,fi(n))}function oa(e,t){var n=e?e.length:0;if(n){var r=br(e,t);if(r<n&&_o(e[r],t))return r}return-1}function sa(e,t){return br(e,t,!0)}function la(e,t,n){return _r(e,t,fi(n),!0)}function ua(e,t){var n=e?e.length:0;if(n){var r=br(e,t,!0)-1;if(_o(e[r],t))return r}return-1}function ca(e){return e&&e.length?Er(e):[]}function fa(e,t){return e&&e.length?xr(e,fi(t)):[]}function da(e){return Ri(e,1)}function ha(e,t,n){return e&&e.length?(t=n||t===W?1:ss(t),vr(e,0,t<0?0:t)):[]}function pa(e,t,n){var r=e?e.length:0;return r?(t=n||t===W?1:ss(t),t=r-t,vr(e,t<0?0:t,r)):[]}function ga(e,t){return e&&e.length?wr(e,fi(t,3),!1,!0):[]}function ma(e,t){return e&&e.length?wr(e,fi(t,3)):[]}function va(e){return e&&e.length?Sr(e):[]}function ya(e,t){return e&&e.length?Sr(e,fi(t)):[]}function ba(e,t){return e&&e.length?Sr(e,W,t):[]}function _a(e){if(!e||!e.length)return[];var t=0;return e=l(e,function(e){if(Ao(e))return t=pu(e.length,t),!0}),S(t,function(t){return f(e,ur(t))})}function Ea(e,t){if(!e||!e.length)return[];var r=_a(e);return null==t?r:f(r,function(e){return n(t,W,e)})}function xa(e,t){return kr(e||[],t||[],sn)}function Sa(e,t){return kr(e||[],t||[],mr)}function Ta(e){var t=St(e);return t.__chain__=!0,t}function wa(e,t){return t(e),e}function Aa(e,t){return t(e)}function Ca(){return Ta(this)}function ka(){return new kt(this.value(),this.__chain__)}function Oa(e){return this.map(e).flatten()}function Ia(){this.__values__===W&&(this.__values__=os(this.value()));var e=this.__index__>=this.__values__.length,t=e?W:this.__values__[this.__index__++];return{done:e,value:t}}function Ma(){return this}function Na(e){for(var t,n=this;n instanceof Ct;){var r=Di(n);r.__index__=0,r.__values__=W,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function Da(){var e=this.__wrapped__;if(e instanceof Ot){var t=e;return this.__actions__.length&&(t=new Ot(this)),t=t.reverse(),t.__actions__.push({func:Aa,args:[na],thisArg:W}),new kt(t,this.__chain__)}return this.thru(na)}function La(){return Ar(this.__wrapped__,this.__actions__)}function $a(e,t,n){var r=Ec(e)?s:Ln;return n&&xi(e,t,n)&&(t=W),r(e,fi(t,3))}function Ra(e,t){var n=Ec(e)?l:Rn;return n(e,fi(t,3))}function Pa(e,t){if(t=fi(t,3),Ec(e)){var n=y(e,t);return n>-1?e[n]:W}return v(e,t,Mu)}function Fa(e,t){if(t=fi(t,3),Ec(e)){var n=y(e,t,!0);return n>-1?e[n]:W}return v(e,t,Nu)}function Ua(e,t){return Pn(Ba(e,t),1)}function ja(e,t){return"function"==typeof t&&Ec(e)?a(e,t):Mu(e,En(t))}function Ha(e,t){return"function"==typeof t&&Ec(e)?o(e,t):Nu(e,En(t))}function za(e,t,n,r){e=wo(e)?e:Fs(e),n=n&&!r?ss(n):0;var i=e.length;return n<0&&(n=pu(i+n,0)),Qo(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&b(e,t,n)>-1}function Ba(e,t){var n=Ec(e)?f:tr;return n(e,fi(t,3))}function qa(e,t,n,r){return null==e?[]:(Ec(t)||(t=null==t?[]:[t]),n=r?W:n,Ec(n)||(n=null==n?[]:[n]),or(e,t,n))}function Ya(e,t,n){var r=Ec(e)?h:_,i=arguments.length<3;return r(e,fi(t,4),n,i,Mu)}function Xa(e,t,n){var r=Ec(e)?p:_,i=arguments.length<3;return r(e,fi(t,4),n,i,Nu)}function Wa(e,t){var n=Ec(e)?l:Rn;return t=fi(t,3),n(e,function(e,n,r){return!t(e,n,r)})}function Ga(e){var t=wo(e)?e:Fs(e),n=t.length;return n>0?t[pr(0,n-1)]:W}function Va(e,t){var n=-1,r=os(e),i=r.length,a=i-1;for(t=wn(ss(t),0,i);++n<t;){var o=pr(n,a),s=r[o];r[o]=r[n],r[n]=s}return r.length=t,r}function Ka(e){return Va(e,Ee)}function Za(e){if(null==e)return 0;if(wo(e)){var t=e.length;return t&&Qo(e)?B(e):t}return ws(e).length}function Qa(e,t,n){var r=Ec(e)?g:yr;return n&&xi(e,t,n)&&(t=W),r(e,fi(t,3))}function Ja(e,t){if("function"!=typeof t)throw new jl(ge);return e=ss(e),function(){if(--e<1)return t.apply(this,arguments)}}function eo(e,t,n){return t=n?W:t,t=e&&null==t?e.length:t,oi(e,ne,W,W,W,W,t)}function to(e,t){var n;if("function"!=typeof t)throw new jl(ge);return e=ss(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=W),n}}function no(e,t,n){t=n?W:t;var r=oi(e,Q,W,W,W,W,W,t);return r.placeholder=no.placeholder,r}function ro(e,t,n){t=n?W:t;var r=oi(e,J,W,W,W,W,W,t);return r.placeholder=ro.placeholder,r}function io(e,t,n){function r(){p&&eu(p),c&&eu(c),m=0,u=c=h=p=g=W}function i(t,n){n&&eu(n),c=p=g=W,t&&(m=dc(),f=e.apply(h,u),p||c||(u=h=W))}function a(){var e=t-(dc()-d);e<=0||e>t?i(g,c):p=su(a,e)}function o(){return(p&&g||c&&b)&&(f=e.apply(h,u)),r(),f}function s(){i(b,p)}function l(){if(u=arguments,d=dc(),h=this,g=b&&(p||!v),y===!1)var n=v&&!p;else{m||c||v||(m=d);var r=y-(d-m),i=(r<=0||r>y)&&(v||c);i?(c&&(c=eu(c)),m=d,f=e.apply(h,u)):c||(c=su(s,r))}return i&&p?p=eu(p):p||t===y||(p=su(a,t)),n&&(i=!0,f=e.apply(h,u)),!i||p||c||(u=h=W),f}var u,c,f,d,h,p,g,m=0,v=!1,y=!1,b=!0;if("function"!=typeof e)throw new jl(ge);return t=us(t)||0,Fo(n)&&(v=!!n.leading,y="maxWait"in n&&pu(us(n.maxWait)||0,t),b="trailing"in n?!!n.trailing:b),l.cancel=r,l.flush=o,l}function ao(e){return oi(e,ie)}function oo(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new jl(ge);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new oo.Cache,n}function so(e){if("function"!=typeof e)throw new jl(ge);return function(){return!e.apply(this,arguments)}}function lo(e){return to(2,e)}function uo(e,t){if("function"!=typeof e)throw new jl(ge);return t=pu(t===W?e.length-1:ss(t),0),function(){for(var r=arguments,i=-1,a=pu(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,r[0],o);case 2:return e.call(this,r[0],r[1],o)}var s=Array(t+1);for(i=-1;++i<t;)s[i]=r[i];return s[t]=o,n(e,this,s)}}function co(e,t){if("function"!=typeof e)throw new jl(ge);return t=t===W?0:pu(ss(t),0),uo(function(r){var i=r[t],a=r.slice(0,t);return i&&d(a,i),n(e,this,a)})}function fo(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new jl(ge);return Fo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),io(e,t,{leading:r,maxWait:t,trailing:i})}function ho(e){return eo(e,1)}function po(e,t){return t=null==t?pl:t,yc(t,e)}function go(){if(!arguments.length)return[];var e=arguments[0];return Ec(e)?e:[e]}function mo(e){return An(e)}function vo(e,t){return An(e,!1,t)}function yo(e){return An(e,!0)}function bo(e,t){return An(e,!0,t)}function _o(e,t){return e===t||e!==e&&t!==t}function Eo(e,t){return e>t}function xo(e,t){return e>=t}function So(e){return Ao(e)&&ql.call(e,"callee")&&(!ou.call(e,"callee")||Wl.call(e)==we)}function To(e){return Uo(e)&&Wl.call(e)==He}function wo(e){return null!=e&&!("function"==typeof e&&$o(e))&&Po(Fu(e))}function Ao(e){return Uo(e)&&wo(e)}function Co(e){return e===!0||e===!1||Uo(e)&&Wl.call(e)==Ce}function ko(e){return Uo(e)&&Wl.call(e)==ke}function Oo(e){return!!e&&1===e.nodeType&&Uo(e)&&!Go(e)}function Io(e){if(wo(e)&&(Ec(e)||Qo(e)||$o(e.splice)||So(e)))return!e.length;for(var t in e)if(ql.call(e,t))return!1;return!0}function Mo(e,t){return Vn(e,t)}function No(e,t,n){n="function"==typeof n?n:W;var r=n?n(e,t):W;return r===W?Vn(e,t,n):!!r}function Do(e){return!!Uo(e)&&(Wl.call(e)==Oe||"string"==typeof e.message&&"string"==typeof e.name)}function Lo(e){return"number"==typeof e&&fu(e)}function $o(e){var t=Fo(e)?Wl.call(e):"";return t==Ie||t==Me}function Ro(e){return"number"==typeof e&&e==ss(e)}function Po(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ye}function Fo(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Uo(e){return!!e&&"object"==typeof e}function jo(e){return Uo(e)&&gi(e)==Ne}function Ho(e,t){return e===t||Zn(e,t,di(t))}function zo(e,t,n){return n="function"==typeof n?n:W,Zn(e,t,di(t),n)}function Bo(e){return Wo(e)&&e!=+e}function qo(e){return null!=e&&($o(e)?Vl.test(Bl.call(e)):Uo(e)&&(P(e)?Vl:Et).test(e))}function Yo(e){return null===e}function Xo(e){return null==e}function Wo(e){return"number"==typeof e||Uo(e)&&Wl.call(e)==De}function Go(e){if(!Uo(e)||Wl.call(e)!=Le||P(e))return!1;var t=nu(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&Bl.call(n)==Xl}function Vo(e){return Fo(e)&&Wl.call(e)==$e}function Ko(e){return Ro(e)&&e>=-ye&&e<=ye}function Zo(e){return Uo(e)&&gi(e)==Re}function Qo(e){return"string"==typeof e||!Ec(e)&&Uo(e)&&Wl.call(e)==Pe}function Jo(e){return"symbol"==typeof e||Uo(e)&&Wl.call(e)==Fe}function es(e){return Uo(e)&&Po(e.length)&&!!mn[Wl.call(e)]}function ts(e){return e===W}function ns(e){return Uo(e)&&gi(e)==Ue}function rs(e){return Uo(e)&&Wl.call(e)==je}function is(e,t){return e<t}function as(e,t){return e<=t}function os(e){if(!e)return[];if(wo(e))return Qo(e)?q(e):Fr(e);if(iu&&e[iu])return U(e[iu]());var t=gi(e),n=t==Ne?j:t==Re?z:Fs;return n(e)}function ss(e){if(!e)return 0===e?e:0;if(e=us(e),e===ve||e===-ve){var t=e<0?-1:1;return t*be}var n=e%1;return e===e?n?e-n:e:0}function ls(e){return e?wn(ss(e),0,Ee):0}function us(e){if(Fo(e)){var t=$o(e.valueOf)?e.valueOf():e;e=Fo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(dt,"");var n=_t.test(e);return n||xt.test(e)?Tn(e.slice(2),n?2:8):bt.test(e)?_e:+e}function cs(e){return Ur(e,As(e))}function fs(e){return wn(ss(e),-ye,ye)}function ds(e){if("string"==typeof e)return e;if(null==e)return"";if(Jo(e))return Ql?Ou.call(e):"";var t=e+"";return"0"==t&&1/e==-ve?"-0":t}function hs(e,t){var n=On(e);return t?yn(n,t):n}function ps(e,t){return v(e,fi(t,3),Un,!0)}function gs(e,t){return v(e,fi(t,3),jn,!0)}function ms(e,t){return null==e?e:Du(e,En(t),As)}function vs(e,t){return null==e?e:Lu(e,En(t),As)}function ys(e,t){return e&&Un(e,En(t))}function bs(e,t){return e&&jn(e,En(t))}function _s(e){return null==e?[]:Hn(e,ws(e))}function Es(e){return null==e?[]:Hn(e,As(e))}function xs(e,t,n){var r=null==e?W:zn(e,t);return r===W?n:r}function Ss(e,t){return vi(e,t,Bn)}function Ts(e,t){return vi(e,t,qn)}function ws(e){var t=Ai(e);if(!t&&!wo(e))return Jn(e);var n=Ei(e),r=!!n,i=n||[],a=i.length;for(var o in e)!Bn(e,o)||r&&("length"==o||F(o,a))||t&&"constructor"==o||i.push(o);return i}function As(e){for(var t=-1,n=Ai(e),r=er(e),i=r.length,a=Ei(e),o=!!a,s=a||[],l=s.length;++t<i;){var u=r[t];o&&("length"==u||F(u,l))||"constructor"==u&&(n||!ql.call(e,u))||s.push(u)}return s}function Cs(e,t){var n={};return t=fi(t,3),Un(e,function(e,r,i){n[t(e,r,i)]=e}),n}function ks(e,t){var n={};return t=fi(t,3),Un(e,function(e,r,i){n[r]=t(e,r,i)}),n}function Os(e,t){return t=fi(t),lr(e,function(e,n){return!t(e,n)})}function Is(e,t){return null==e?{}:lr(e,fi(t))}function Ms(e,t,n){if(Si(t,e))r=null==e?W:e[t];else{t=xn(t);var r=xs(e,t);e=Ii(e,t)}return r===W&&(r=n),$o(r)?r.call(e):r}function Ns(e,t,n){return null==e?e:mr(e,t,n)}function Ds(e,t,n,r){return r="function"==typeof r?r:W,null==e?e:mr(e,t,n,r)}function Ls(e){return T(e,ws(e))}function $s(e){return T(e,As(e))}function Rs(e,t,n){var r=Ec(e)||es(e);if(t=fi(t,4),null==n)if(r||Fo(e)){var i=e.constructor;n=r?Ec(e)?new i:[]:$o(i)?On(nu(e)):{}}else n={};return(r?a:Un)(e,function(e,r,i){return t(n,e,r,i)}),n}function Ps(e,t){return null==e||Tr(e,t)}function Fs(e){return e?A(e,ws(e)):[]}function Us(e){return null==e?[]:A(e,As(e))}function js(e,t,n){return n===W&&(n=t,t=W),n!==W&&(n=us(n),n=n===n?n:0),t!==W&&(t=us(t),t=t===t?t:0),wn(us(e),t,n)}function Hs(e,t,n){return t=us(t)||0,n===W?(n=t,t=0):n=us(n)||0,e=us(e),Yn(e,t,n)}function zs(e,t,n){if(n&&"boolean"!=typeof n&&xi(e,t,n)&&(t=n=W),n===W&&("boolean"==typeof t?(n=t,t=W):"boolean"==typeof e&&(n=e,e=W)),e===W&&t===W?(e=0,t=1):(e=us(e)||0,t===W?(t=e,e=0):t=us(t)||0),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=vu();return gu(e+i*(t-e+Sn("1e-"+((i+"").length-1))),t)}return pr(e,t)}function Bs(e){return Hc(ds(e).toLowerCase())}function qs(e){return e=ds(e),e&&e.replace(Tt,D).replace(ln,"")}function Ys(e,t,n){e=ds(e),t="string"==typeof t?t:t+"";var r=e.length;return n=n===W?r:wn(ss(n),0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}function Xs(e){return e=ds(e),e&&rt.test(e)?e.replace(tt,L):e}function Ws(e){return e=ds(e),e&&ft.test(e)?e.replace(ct,"\\$&"):e}function Gs(e,t,n){e=ds(e),t=ss(t);var r=B(e);if(!t||r>=t)return e;var i=(t-r)/2,a=cu(i),o=uu(i);return ti("",a,n)+e+ti("",o,n)}function Vs(e,t,n){return e=ds(e),e+ti(e,t,n)}function Ks(e,t,n){return e=ds(e),ti(e,t,n)+e}function Zs(e,t,n){return n||null==t?t=0:t&&(t=+t),e=ds(e).replace(dt,""),mu(e,t||(yt.test(e)?16:10))}function Qs(e,t){e=ds(e),t=ss(t);var n="";if(!e||t<1||t>ye)return n;do t%2&&(n+=e),t=cu(t/2),e+=e;while(t);return n}function Js(){var e=arguments,t=ds(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function el(e,t,n){return ds(e).split(t,n)}function tl(e,t,n){return e=ds(e),n=wn(ss(n),0,e.length),e.lastIndexOf(t,n)==n}function nl(e,t,n){var r=St.templateSettings;n&&xi(e,t,n)&&(t=W),e=ds(e),t=wc({},t,r,an);var i,a,o=wc({},t.imports,r.imports,an),s=ws(o),l=A(o,s),u=0,c=t.interpolate||wt,f="__p += '",d=Ul((t.escape||wt).source+"|"+c.source+"|"+(c===ot?mt:wt).source+"|"+(t.evaluate||wt).source+"|$","g"),h="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++gn+"]")+"\n";e.replace(d,function(t,n,r,o,s,l){return r||(r=o),f+=e.slice(u,l).replace(At,$),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t}),f+="';\n";var p=t.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(Ze,""):f).replace(Qe,"$1").replace(Je,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Yc(function(){return Function(s,h+"return "+f).apply(W,l)});if(g.source=f,Do(g))throw g;return g}function rl(e){return ds(e).toLowerCase()}function il(e){return ds(e).toUpperCase()}function al(e,t,n){if(e=ds(e),!e)return e;if(n||t===W)return e.replace(dt,"");if(t+="",!t)return e;var r=q(e),i=q(t);return r.slice(C(r,i),k(r,i)+1).join("")}function ol(e,t,n){if(e=ds(e),!e)return e;if(n||t===W)return e.replace(pt,"");if(t+="",!t)return e;var r=q(e);return r.slice(0,k(r,q(t))+1).join("")}function sl(e,t,n){if(e=ds(e),!e)return e;if(n||t===W)return e.replace(ht,"");if(t+="",!t)return e;var r=q(e);return r.slice(C(r,q(t))).join("")}function ll(e,t){var n=se,r=le;if(Fo(t)){var i="separator"in t?t.separator:i;n="length"in t?ss(t.length):n,r="omission"in t?ds(t.omission):r}e=ds(e);var a=e.length;if(cn.test(e)){var o=q(e);a=o.length}if(n>=a)return e;var s=n-B(r);if(s<1)return r;var l=o?o.slice(0,s).join(""):e.slice(0,s);if(i===W)return l+r;if(o&&(s+=l.length-s),Vo(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=Ul(i.source,ds(vt.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var f=u.index;l=l.slice(0,f===W?s:f)}}else if(e.indexOf(i,s)!=s){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r}function ul(e){return e=ds(e),e&&nt.test(e)?e.replace(et,Y):e}function cl(e,t,n){return e=ds(e),t=n?W:t,t===W&&(t=hn.test(e)?dn:fn),e.match(t)||[]}function fl(e){var t=e?e.length:0,r=fi();return e=t?f(e,function(e){if("function"!=typeof e[1])throw new jl(ge);return[r(e[0]),e[1]]}):[],uo(function(r){for(var i=-1;++i<t;){var a=e[i];if(n(a[0],this,r))return n(a[1],this,r)}})}function dl(e){return kn(An(e,!0))}function hl(e){return function(){return e}}function pl(e){return e}function gl(e){return Qn("function"==typeof e?e:An(e,!0))}function ml(e){return nr(An(e,!0))}function vl(e,t){return rr(e,An(t,!0))}function yl(e,t,n){var r=ws(t),i=Hn(t,r);null!=n||Fo(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Hn(t,ws(t)));var o=!(Fo(n)&&"chain"in n)||n.chain,s=$o(e);return a(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Fr(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,d([this.value()],arguments))})}),e}function bl(){return Nn._===this&&(Nn._=Gl),this}function _l(){}function El(e){return e=ss(e),function(){return arguments[e]}}function xl(e){return Si(e)?ur(e):cr(e)}function Sl(e){return function(t){return null==e?W:zn(e,t)}}function Tl(e,t){if(e=ss(e),e<1||e>ye)return[];var n=Ee,r=gu(e,Ee);t=En(t),e-=Ee;for(var i=S(r,t);++n<e;)t(n);return i}function wl(e){return Ec(e)?f(e,String):Ni(e)}function Al(e){var t=++Yl;return ds(e)+t}function Cl(e,t){var n;return e===W&&t===W?0:(e!==W&&(n=e),t!==W&&(n=n===W?t:n+t),n)}function kl(e){return e&&e.length?m(e,pl,Eo):W}function Ol(e,t){return e&&e.length?m(e,fi(t),Eo):W}function Il(e){return Ll(e)/(e?e.length:0)}function Ml(e){return e&&e.length?m(e,pl,is):W}function Nl(e,t){return e&&e.length?m(e,fi(t),is):W}function Dl(e,t){var n;return e===W&&t===W?0:(e!==W&&(n=e),t!==W&&(n=n===W?t:n-t),n)}function Ll(e){return e&&e.length?x(e,pl):0}function $l(e,t){return e&&e.length?x(e,fi(t)):0}O=O?Dn.defaults({},O,Dn.pick(Nn,pn)):Nn;var Rl=O.Date,Pl=O.Error,Fl=O.Math,Ul=O.RegExp,jl=O.TypeError,Hl=O.Array.prototype,zl=O.Object.prototype,Bl=O.Function.prototype.toString,ql=zl.hasOwnProperty,Yl=0,Xl=Bl.call(Object),Wl=zl.toString,Gl=Nn._,Vl=Ul("^"+Bl.call(ql).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kl=Cn?O.Buffer:W,Zl=O.Reflect,Ql=O.Symbol,Jl=O.Uint8Array,eu=O.clearTimeout,tu=Zl?Zl.enumerate:W,nu=Object.getPrototypeOf,ru=Object.getOwnPropertySymbols,iu="symbol"==typeof(iu=Ql&&Ql.iterator)?iu:W,au=Object.create,ou=zl.propertyIsEnumerable,su=O.setTimeout,lu=Hl.splice,uu=Fl.ceil,cu=Fl.floor,fu=O.isFinite,du=Hl.join,hu=Object.keys,pu=Fl.max,gu=Fl.min,mu=O.parseInt,vu=Fl.random,yu=Hl.reverse,bu=hi(O,"Map"),_u=hi(O,"Set"),Eu=hi(O,"WeakMap"),xu=hi(Object,"create"),Su=Eu&&new Eu,Tu=bu?Bl.call(bu):"",wu=_u?Bl.call(_u):"",Au=Eu?Bl.call(Eu):"",Cu=Ql?Ql.prototype:W,ku=Ql?Cu.valueOf:W,Ou=Ql?Cu.toString:W,Iu={};St.templateSettings={escape:it,evaluate:at,interpolate:ot,variable:"",imports:{_:St}};var Mu=qr(Un),Nu=qr(jn,!0),Du=Yr(),Lu=Yr(!0);tu&&!ou.call({valueOf:1},"valueOf")&&(er=function(e){return U(tu(e))});var $u=Su?function(e,t){return Su.set(e,t),e}:pl,Ru=_u&&2===new _u([1,2]).size?function(e){return new _u(e)}:_l,Pu=Su?function(e){return Su.get(e)}:_l,Fu=ur("length"),Uu=ru||function(){return[]};(bu&&gi(new bu)!=Ne||_u&&gi(new _u)!=Re||Eu&&gi(new Eu)!=Ue)&&(gi=function(e){var t=Wl.call(e),n=t==Le?e.constructor:null,r="function"==typeof n?Bl.call(n):"";if(r)switch(r){case Tu:return Ne;case wu:return Re;case Au:return Ue}return t});var ju=function(){var e=0,t=0;return function(n,r){var i=dc(),a=ce-(i-t);if(t=i,a>0){if(++e>=ue)return n}else e=0;return $u(n,r)}}(),Hu=uo(function(e,t){return Ec(e)||(e=null==e?[]:[Object(e)]),t=Pn(t,1),i(e,t)}),zu=uo(function(e,t){return Ao(e)?Mn(e,Pn(t,1,!0)):[]}),Bu=uo(function(e,t){var n=Zi(t);return Ao(n)&&(n=W),Ao(e)?Mn(e,Pn(t,1,!0),fi(n)):[]}),qu=uo(function(e,t){var n=Zi(t);return Ao(n)&&(n=W),Ao(e)?Mn(e,Pn(t,1,!0),W,n):[]}),Yu=uo(function(e){var t=f(e,_n);return t.length&&t[0]===e[0]?Xn(t):[]}),Xu=uo(function(e){var t=Zi(e),n=f(e,_n);return t===Zi(n)?t=W:n.pop(),n.length&&n[0]===e[0]?Xn(n,fi(t)):[]}),Wu=uo(function(e){var t=Zi(e),n=f(e,_n);return t===Zi(n)?t=W:n.pop(),n.length&&n[0]===e[0]?Xn(n,W,t):[]}),Gu=uo(Ji),Vu=uo(function(e,t){t=f(Pn(t,1),String);var n=bn(e,t);return hr(e,t.sort(I)),n}),Ku=uo(function(e){return Sr(Pn(e,1,!0))}),Zu=uo(function(e){var t=Zi(e);return Ao(t)&&(t=W),Sr(Pn(e,1,!0),fi(t))}),Qu=uo(function(e){var t=Zi(e);return Ao(t)&&(t=W),Sr(Pn(e,1,!0),W,t)}),Ju=uo(function(e,t){return Ao(e)?Mn(e,t):[]}),ec=uo(function(e){return Cr(l(e,Ao))}),tc=uo(function(e){var t=Zi(e);return Ao(t)&&(t=W),Cr(l(e,Ao),fi(t))}),nc=uo(function(e){var t=Zi(e);return Ao(t)&&(t=W),Cr(l(e,Ao),W,t)}),rc=uo(_a),ic=uo(function(e){var t=e.length,n=t>1?e[t-1]:W;return n="function"==typeof n?(e.pop(),n):W,Ea(e,n)}),ac=uo(function(e){e=Pn(e,1);var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return bn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Ot&&F(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Aa,args:[i],thisArg:W}),new kt(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(W),e})):this.thru(i)}),oc=zr(function(e,t,n){ql.call(e,n)?++e[n]:e[n]=1}),sc=zr(function(e,t,n){ql.call(e,n)?e[n].push(t):e[n]=[t]}),lc=uo(function(e,t,r){var i=-1,a="function"==typeof t,o=Si(t),s=wo(e)?Array(e.length):[];return Mu(e,function(e){var l=a?t:o&&null!=e?e[t]:W;s[++i]=l?n(l,e,r):Gn(e,t,r)}),s}),uc=zr(function(e,t,n){e[n]=t}),cc=zr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),fc=uo(function(e,t){if(null==e)return[];var n=t.length;return n>1&&xi(e,t[0],t[1])?t=[]:n>2&&xi(t[0],t[1],t[2])&&(t.length=1),or(e,Pn(t,1),[])}),dc=Rl.now,hc=uo(function(e,t,n){var r=V;if(n.length){var i=H(n,pi(hc));r|=ee}return oi(e,r,t,n,i)}),pc=uo(function(e,t,n){var r=V|K;if(n.length){var i=H(n,pi(pc));r|=ee}return oi(t,r,e,n,i)}),gc=uo(function(e,t){return In(e,1,t)}),mc=uo(function(e,t,n){return In(e,us(t)||0,n)}),vc=uo(function(e,t){t=f(Pn(t,1),fi());var r=t.length;return uo(function(i){for(var a=-1,o=gu(i.length,r);++a<o;)i[a]=t[a].call(this,i[a]);return n(e,this,i)})}),yc=uo(function(e,t){var n=H(t,pi(yc));return oi(e,ee,W,t,n)}),bc=uo(function(e,t){var n=H(t,pi(bc));return oi(e,te,W,t,n)}),_c=uo(function(e,t){return oi(e,re,W,W,W,Pn(t,1))}),Ec=Array.isArray,xc=Kl?function(e){return e instanceof Kl}:hl(!1),Sc=Br(function(e,t){Ur(t,ws(t),e)}),Tc=Br(function(e,t){Ur(t,As(t),e)}),wc=Br(function(e,t,n,r){jr(t,As(t),e,r)}),Ac=Br(function(e,t,n,r){jr(t,ws(t),e,r)}),Cc=uo(function(e,t){return bn(e,Pn(t,1))}),kc=uo(function(e){return e.push(W,an),n(wc,W,e)}),Oc=uo(function(e){return e.push(W,Oi),n(Lc,W,e)}),Ic=Jr(function(e,t,n){e[t]=n},hl(pl)),Mc=Jr(function(e,t,n){ql.call(e,t)?e[t].push(n):e[t]=[n]},fi),Nc=uo(Gn),Dc=Br(function(e,t,n){ir(e,t,n)}),Lc=Br(function(e,t,n,r){ir(e,t,n,r)}),$c=uo(function(e,t){return null==e?{}:(t=f(Pn(t,1),String),sr(e,Mn(As(e),t)))}),Rc=uo(function(e,t){return null==e?{}:sr(e,Pn(t,1))}),Pc=Gr(function(e,t,n){return t=t.toLowerCase(),e+(n?Bs(t):t)}),Fc=Gr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Uc=Gr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),jc=Wr("toLowerCase"),Hc=Wr("toUpperCase"),zc=Gr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Bc=Gr(function(e,t,n){return e+(n?" ":"")+Bs(t)}),qc=Gr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Yc=uo(function(e,t){try{return n(e,W,t)}catch(r){return Do(r)?r:new Pl(r)}}),Xc=uo(function(e,t){return a(Pn(t,1),function(t){e[t]=hc(e[t],e)}),e}),Wc=Zr(),Gc=Zr(!0),Vc=uo(function(e,t){return function(n){return Gn(n,e,t)}}),Kc=uo(function(e,t){return function(n){return Gn(e,n,t)}}),Zc=ei(f),Qc=ei(s),Jc=ei(g),ef=ri(),tf=ri(!0),nf=ai("ceil"),rf=ai("floor"),af=ai("round");return St.prototype=Ct.prototype,kt.prototype=On(Ct.prototype),kt.prototype.constructor=kt,Ot.prototype=On(Ct.prototype),Ot.prototype.constructor=Ot,Dt.prototype=xu?xu(null):zl,Ft.prototype.clear=Ut,Ft.prototype["delete"]=jt,Ft.prototype.get=Ht,Ft.prototype.has=zt,Ft.prototype.set=Bt,qt.prototype.push=Xt,Wt.prototype.clear=Gt,Wt.prototype["delete"]=Vt,Wt.prototype.get=Kt,Wt.prototype.has=Zt,Wt.prototype.set=Qt,oo.Cache=Ft,St.after=Ja,St.ary=eo,St.assign=Sc,St.assignIn=Tc,St.assignInWith=wc,St.assignWith=Ac,St.at=Cc,St.before=to,St.bind=hc,St.bindAll=Xc,St.bindKey=pc,St.castArray=go,St.chain=Ta,St.chunk=Li,St.compact=$i,St.concat=Hu,St.cond=fl,St.conforms=dl,St.constant=hl,St.countBy=oc,St.create=hs,St.curry=no,St.curryRight=ro,St.debounce=io,St.defaults=kc,St.defaultsDeep=Oc,St.defer=gc,St.delay=mc,St.difference=zu,St.differenceBy=Bu,St.differenceWith=qu,St.drop=Ri,St.dropRight=Pi,St.dropRightWhile=Fi,St.dropWhile=Ui,St.fill=ji,St.filter=Ra,St.flatMap=Ua,St.flatten=Bi,St.flattenDeep=qi,St.flattenDepth=Yi,St.flip=ao,St.flow=Wc,St.flowRight=Gc,St.fromPairs=Xi,St.functions=_s,St.functionsIn=Es,St.groupBy=sc,St.initial=Vi,St.intersection=Yu,St.intersectionBy=Xu,St.intersectionWith=Wu,St.invert=Ic,St.invertBy=Mc,St.invokeMap=lc,St.iteratee=gl,St.keyBy=uc,St.keys=ws,St.keysIn=As,St.map=Ba,St.mapKeys=Cs,St.mapValues=ks,St.matches=ml,St.matchesProperty=vl,St.memoize=oo,St.merge=Dc,St.mergeWith=Lc,St.method=Vc,St.methodOf=Kc,St.mixin=yl,St.negate=so,St.nthArg=El,St.omit=$c,St.omitBy=Os,St.once=lo,St.orderBy=qa,St.over=Zc,St.overArgs=vc,St.overEvery=Qc,St.overSome=Jc,St.partial=yc,St.partialRight=bc,St.partition=cc,St.pick=Rc,St.pickBy=Is,St.property=xl,St.propertyOf=Sl,St.pull=Gu,St.pullAll=Ji,St.pullAllBy=ea,St.pullAt=Vu,St.range=ef,St.rangeRight=tf,St.rearg=_c,St.reject=Wa,St.remove=ta,St.rest=uo,St.reverse=na,St.sampleSize=Va,St.set=Ns,St.setWith=Ds,St.shuffle=Ka,St.slice=ra,St.sortBy=fc,St.sortedUniq=ca,St.sortedUniqBy=fa,St.split=el,St.spread=co,St.tail=da,St.take=ha,St.takeRight=pa,St.takeRightWhile=ga,St.takeWhile=ma,St.tap=wa,St.throttle=fo,St.thru=Aa,St.toArray=os,St.toPairs=Ls,St.toPairsIn=$s,St.toPath=wl,St.toPlainObject=cs,St.transform=Rs,St.unary=ho,St.union=Ku,St.unionBy=Zu,St.unionWith=Qu,St.uniq=va,St.uniqBy=ya,St.uniqWith=ba,St.unset=Ps,St.unzip=_a,St.unzipWith=Ea,St.values=Fs,St.valuesIn=Us,St.without=Ju,St.words=cl,St.wrap=po,St.xor=ec,St.xorBy=tc,St.xorWith=nc,St.zip=rc,St.zipObject=xa,St.zipObjectDeep=Sa,St.zipWith=ic,St.extend=Tc,St.extendWith=wc,yl(St,St),St.add=Cl,St.attempt=Yc,St.camelCase=Pc,
St.capitalize=Bs,St.ceil=nf,St.clamp=js,St.clone=mo,St.cloneDeep=yo,St.cloneDeepWith=bo,St.cloneWith=vo,St.deburr=qs,St.endsWith=Ys,St.eq=_o,St.escape=Xs,St.escapeRegExp=Ws,St.every=$a,St.find=Pa,St.findIndex=Hi,St.findKey=ps,St.findLast=Fa,St.findLastIndex=zi,St.findLastKey=gs,St.floor=rf,St.forEach=ja,St.forEachRight=Ha,St.forIn=ms,St.forInRight=vs,St.forOwn=ys,St.forOwnRight=bs,St.get=xs,St.gt=Eo,St.gte=xo,St.has=Ss,St.hasIn=Ts,St.head=Wi,St.identity=pl,St.includes=za,St.indexOf=Gi,St.inRange=Hs,St.invoke=Nc,St.isArguments=So,St.isArray=Ec,St.isArrayBuffer=To,St.isArrayLike=wo,St.isArrayLikeObject=Ao,St.isBoolean=Co,St.isBuffer=xc,St.isDate=ko,St.isElement=Oo,St.isEmpty=Io,St.isEqual=Mo,St.isEqualWith=No,St.isError=Do,St.isFinite=Lo,St.isFunction=$o,St.isInteger=Ro,St.isLength=Po,St.isMap=jo,St.isMatch=Ho,St.isMatchWith=zo,St.isNaN=Bo,St.isNative=qo,St.isNil=Xo,St.isNull=Yo,St.isNumber=Wo,St.isObject=Fo,St.isObjectLike=Uo,St.isPlainObject=Go,St.isRegExp=Vo,St.isSafeInteger=Ko,St.isSet=Zo,St.isString=Qo,St.isSymbol=Jo,St.isTypedArray=es,St.isUndefined=ts,St.isWeakMap=ns,St.isWeakSet=rs,St.join=Ki,St.kebabCase=Fc,St.last=Zi,St.lastIndexOf=Qi,St.lowerCase=Uc,St.lowerFirst=jc,St.lt=is,St.lte=as,St.max=kl,St.maxBy=Ol,St.mean=Il,St.min=Ml,St.minBy=Nl,St.noConflict=bl,St.noop=_l,St.now=dc,St.pad=Gs,St.padEnd=Vs,St.padStart=Ks,St.parseInt=Zs,St.random=zs,St.reduce=Ya,St.reduceRight=Xa,St.repeat=Qs,St.replace=Js,St.result=Ms,St.round=af,St.runInContext=X,St.sample=Ga,St.size=Za,St.snakeCase=zc,St.some=Qa,St.sortedIndex=ia,St.sortedIndexBy=aa,St.sortedIndexOf=oa,St.sortedLastIndex=sa,St.sortedLastIndexBy=la,St.sortedLastIndexOf=ua,St.startCase=Bc,St.startsWith=tl,St.subtract=Dl,St.sum=Ll,St.sumBy=$l,St.template=nl,St.times=Tl,St.toInteger=ss,St.toLength=ls,St.toLower=rl,St.toNumber=us,St.toSafeInteger=fs,St.toString=ds,St.toUpper=il,St.trim=al,St.trimEnd=ol,St.trimStart=sl,St.truncate=ll,St.unescape=ul,St.uniqueId=Al,St.upperCase=qc,St.upperFirst=Hc,St.each=ja,St.eachRight=Ha,St.first=Wi,yl(St,function(){var e={};return Un(St,function(t,n){ql.call(St.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),St.VERSION=G,a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){St[e].placeholder=St}),a(["drop","take"],function(e,t){Ot.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new Ot(this);n=n===W?1:pu(ss(n),0);var i=this.clone();return r?i.__takeCount__=gu(n,i.__takeCount__):i.__views__.push({size:gu(n,Ee),type:e+(i.__dir__<0?"Right":"")}),i},Ot.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),a(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==de||n==pe;Ot.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:fi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),a(["head","last"],function(e,t){var n="take"+(t?"Right":"");Ot.prototype[e]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Ot.prototype[e]=function(){return this.__filtered__?new Ot(this):this[n](1)}}),Ot.prototype.compact=function(){return this.filter(pl)},Ot.prototype.find=function(e){return this.filter(e).head()},Ot.prototype.findLast=function(e){return this.reverse().find(e)},Ot.prototype.invokeMap=uo(function(e,t){return"function"==typeof e?new Ot(this):this.map(function(n){return Gn(n,e,t)})}),Ot.prototype.reject=function(e){return e=fi(e,3),this.filter(function(t){return!e(t)})},Ot.prototype.slice=function(e,t){e=ss(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ot(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==W&&(t=ss(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Ot.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ot.prototype.toArray=function(){return this.take(Ee)},Un(Ot.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=St[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(St.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,s=t instanceof Ot,l=o[0],u=s||Ec(t),c=function(e){var t=i.apply(St,d([e],o));return r&&f?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var f=this.__chain__,h=!!this.__actions__.length,p=a&&!f,g=s&&!h;if(!a&&u){t=g?t:new Ot(this);var m=e.apply(t,o);return m.__actions__.push({func:Aa,args:[c],thisArg:W}),new kt(m,f)}return p&&g?e.apply(this,o):(m=this.thru(c),p?r?m.value()[0]:m.value():m)})}),a(["pop","push","shift","sort","splice","unshift"],function(e){var t=Hl[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);St.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Un(Ot.prototype,function(e,t){var n=St[t];if(n){var r=n.name+"",i=Iu[r]||(Iu[r]=[]);i.push({name:t,func:n})}}),Iu[Qr(W,K).name]=[{name:"wrapper",func:W}],Ot.prototype.clone=It,Ot.prototype.reverse=Mt,Ot.prototype.value=Nt,St.prototype.at=ac,St.prototype.chain=Ca,St.prototype.commit=ka,St.prototype.flatMap=Oa,St.prototype.next=Ia,St.prototype.plant=Na,St.prototype.reverse=Da,St.prototype.toJSON=St.prototype.valueOf=St.prototype.value=La,iu&&(St.prototype[iu]=Ma),St}var W,G="4.5.1",V=1,K=2,Z=4,Q=8,J=16,ee=32,te=64,ne=128,re=256,ie=512,ae=1,oe=2,se=30,le="...",ue=150,ce=16,fe=200,de=1,he=2,pe=3,ge="Expected a function",me="__lodash_hash_undefined__",ve=1/0,ye=9007199254740991,be=1.7976931348623157e308,_e=NaN,Ee=4294967295,xe=Ee-1,Se=Ee>>>1,Te="__lodash_placeholder__",we="[object Arguments]",Ae="[object Array]",Ce="[object Boolean]",ke="[object Date]",Oe="[object Error]",Ie="[object Function]",Me="[object GeneratorFunction]",Ne="[object Map]",De="[object Number]",Le="[object Object]",$e="[object RegExp]",Re="[object Set]",Pe="[object String]",Fe="[object Symbol]",Ue="[object WeakMap]",je="[object WeakSet]",He="[object ArrayBuffer]",ze="[object Float32Array]",Be="[object Float64Array]",qe="[object Int8Array]",Ye="[object Int16Array]",Xe="[object Int32Array]",We="[object Uint8Array]",Ge="[object Uint8ClampedArray]",Ve="[object Uint16Array]",Ke="[object Uint32Array]",Ze=/\b__p \+= '';/g,Qe=/\b(__p \+=) '' \+/g,Je=/(__e\(.*?\)|\b__t\)) \+\n'';/g,et=/&(?:amp|lt|gt|quot|#39|#96);/g,tt=/[&<>"'`]/g,nt=RegExp(et.source),rt=RegExp(tt.source),it=/<%-([\s\S]+?)%>/g,at=/<%([\s\S]+?)%>/g,ot=/<%=([\s\S]+?)%>/g,st=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lt=/^\w*$/,ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,ct=/[\\^$.*+?()[\]{}|]/g,ft=RegExp(ct.source),dt=/^\s+|\s+$/g,ht=/^\s+/,pt=/\s+$/,gt=/\\(\\)?/g,mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vt=/\w*$/,yt=/^0x/i,bt=/^[-+]0x[0-9a-f]+$/i,_t=/^0b[01]+$/i,Et=/^\[object .+?Constructor\]$/,xt=/^0o[0-7]+$/i,St=/^(?:0|[1-9]\d*)$/,Tt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,wt=/($^)/,At=/['\n\r\u2028\u2029\\]/g,Ct="\\ud800-\\udfff",kt="\\u0300-\\u036f\\ufe20-\\ufe23",Ot="\\u20d0-\\u20f0",It="\\u2700-\\u27bf",Mt="a-z\\xdf-\\xf6\\xf8-\\xff",Nt="\\xac\\xb1\\xd7\\xf7",Dt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Lt="\\u2018\\u2019\\u201c\\u201d",$t=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rt="A-Z\\xc0-\\xd6\\xd8-\\xde",Pt="\\ufe0e\\ufe0f",Ft=Nt+Dt+Lt+$t,Ut="["+Ct+"]",jt="["+Ft+"]",Ht="["+kt+Ot+"]",zt="\\d+",Bt="["+It+"]",qt="["+Mt+"]",Yt="[^"+Ct+Ft+zt+It+Mt+Rt+"]",Xt="\\ud83c[\\udffb-\\udfff]",Wt="(?:"+Ht+"|"+Xt+")",Gt="[^"+Ct+"]",Vt="(?:\\ud83c[\\udde6-\\uddff]){2}",Kt="[\\ud800-\\udbff][\\udc00-\\udfff]",Zt="["+Rt+"]",Qt="\\u200d",Jt="(?:"+qt+"|"+Yt+")",en="(?:"+Zt+"|"+Yt+")",tn=Wt+"?",nn="["+Pt+"]?",rn="(?:"+Qt+"(?:"+[Gt,Vt,Kt].join("|")+")"+nn+tn+")*",an=nn+tn+rn,on="(?:"+[Bt,Vt,Kt].join("|")+")"+an,sn="(?:"+[Gt+Ht+"?",Ht,Vt,Kt,Ut].join("|")+")",ln=RegExp(Ht,"g"),un=RegExp(Xt+"(?="+Xt+")|"+sn+an,"g"),cn=RegExp("["+Qt+Ct+kt+Ot+Pt+"]"),fn=/[a-zA-Z0-9]+/g,dn=RegExp([Zt+"?"+qt+"+(?="+[jt,Zt,"$"].join("|")+")",en+"+(?="+[jt,Zt+Jt,"$"].join("|")+")",Zt+"?"+Jt+"+",Zt+"+",zt,on].join("|"),"g"),hn=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pn=["Array","Buffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gn=-1,mn={};mn[ze]=mn[Be]=mn[qe]=mn[Ye]=mn[Xe]=mn[We]=mn[Ge]=mn[Ve]=mn[Ke]=!0,mn[we]=mn[Ae]=mn[He]=mn[Ce]=mn[ke]=mn[Oe]=mn[Ie]=mn[Ne]=mn[De]=mn[Le]=mn[$e]=mn[Re]=mn[Pe]=mn[Ue]=!1;var vn={};vn[we]=vn[Ae]=vn[He]=vn[Ce]=vn[ke]=vn[ze]=vn[Be]=vn[qe]=vn[Ye]=vn[Xe]=vn[Ne]=vn[De]=vn[Le]=vn[$e]=vn[Re]=vn[Pe]=vn[Fe]=vn[We]=vn[Ge]=vn[Ve]=vn[Ke]=!0,vn[Oe]=vn[Ie]=vn[Ue]=!1;var yn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},bn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},_n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},En={"function":!0,object:!0},xn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sn=parseFloat,Tn=parseInt,wn=En[typeof exports]&&exports&&!exports.nodeType?exports:W,An=En[typeof module]&&module&&!module.nodeType?module:W,Cn=An&&An.exports===wn?wn:W,kn=O(wn&&An&&"object"==typeof global&&global),On=O(En[typeof self]&&self),In=O(En[typeof window]&&window),Mn=O(En[typeof this]&&this),Nn=kn||In!==(Mn&&Mn.window)&&In||On||Mn||Function("return this")(),Dn=X();(In||On||{})._=Dn,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Dn}):wn&&An?(Cn&&((An.exports=Dn)._=Dn),wn._=Dn):Nn._=Dn}.call(this),/*!
	Papa Parse
	v4.1.4
	https://github.com/mholt/PapaParse
*/
function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Papa=t()}(this,function(){"use strict";function e(e,t){if(t=t||{},t.dynamicTyping=t.dynamicTyping||!1,t.worker&&T.WORKERS_SUPPORTED){var n=u();return n.userStep=t.step,n.userChunk=t.chunk,n.userComplete=t.complete,n.userError=t.error,t.step=m(t.step),t.chunk=m(t.chunk),t.complete=m(t.complete),t.error=m(t.error),delete t.worker,void n.postMessage({input:e,config:t,workerId:n.id})}var o=null;return"string"==typeof e?o=t.download?new r(t):new a(t):(y.File&&e instanceof File||e instanceof Object)&&(o=new i(t)),o.stream(e)}function t(e,t){function n(){"object"==typeof t&&("string"==typeof t.delimiter&&1===t.delimiter.length&&T.BAD_DELIMITERS.indexOf(t.delimiter)===-1&&(u=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(s=t.quotes),"string"==typeof t.newline&&(c=t.newline),"string"==typeof t.quoteChar&&(f=t.quoteChar),"boolean"==typeof t.header&&(l=t.header))}function r(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function i(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var r=e instanceof Array&&e.length>0,i=!(t[0]instanceof Array);if(r&&l){for(var o=0;o<e.length;o++)o>0&&(n+=u),n+=a(e[o],o);t.length>0&&(n+=c)}for(var s=0;s<t.length;s++){for(var f=r?e.length:t[s].length,d=0;d<f;d++){d>0&&(n+=u);var h=r&&i?e[d]:d;n+=a(t[s][h],d)}s<t.length-1&&(n+=c)}return n}function a(e,t){if("undefined"==typeof e||null===e)return"";e=e.toString().replace(d,f+f);var n="boolean"==typeof s&&s||s instanceof Array&&s[t]||o(e,T.BAD_DELIMITERS)||e.indexOf(u)>-1||" "===e.charAt(0)||" "===e.charAt(e.length-1);return n?f+e+f:e}function o(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var s=!1,l=!0,u=",",c="\r\n",f='"';n();var d=new RegExp(f,"g");if("string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return i(null,e);if("object"==typeof e[0])return i(r(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=e.data[0]instanceof Array?e.fields:r(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),i(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function n(e){function t(e){var t=p(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new o(t),this._handle.streamer=this,this._config=t}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},t.call(this,e),this.parseChunk=function(e){if(this.isFirstChunk&&m(this._config.beforeFirstChunk)){var t=this._config.beforeFirstChunk(e);void 0!==t&&(e=t)}this.isFirstChunk=!1;var n=this._partialLine+e;this._partialLine="";var r=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var i=r.meta.cursor;this._finished||(this._partialLine=n.substring(i-this._baseIndex),this._baseIndex=i),r&&r.data&&(this._rowCount+=r.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(_)y.postMessage({results:r,workerId:T.WORKER_ID,finished:a});else if(m(this._config.chunk)){if(this._config.chunk(r,this._handle),this._paused)return;r=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),!a||!m(this._config.complete)||r&&r.meta.aborted||this._config.complete(this._completeResults,this._input),a||r&&r.meta.paused||this._nextChunk(),r}},this._sendError=function(e){m(this._config.error)?this._config.error(e):_&&this._config.error&&y.postMessage({workerId:T.WORKER_ID,error:e,finished:!1})}}function r(e){function t(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substr(t.lastIndexOf("/")+1))}e=e||{},e.chunkSize||(e.chunkSize=T.RemoteChunkSize),n.call(this,e);var r;b?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),b||(r.onload=g(this._chunkLoaded,this),r.onerror=g(this._chunkError,this)),r.open("GET",this._input,!b),this._config.chunkSize){var e=this._start+this._config.chunkSize-1;r.setRequestHeader("Range","bytes="+this._start+"-"+e),r.setRequestHeader("If-None-Match","webkit-no-cache")}try{r.send()}catch(t){this._chunkError(t.message)}b&&0===r.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==r.readyState){if(r.status<200||r.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>t(r),this.parseChunk(r.responseText)}},this._chunkError=function(e){var t=r.statusText||e;this._sendError(t)}}function i(e){e=e||{},e.chunkSize||(e.chunkSize=T.LocalChunkSize),n.call(this,e);var t,r,i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,i?(t=new FileReader,t.onload=g(this._chunkLoaded,this),t.onerror=g(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,n)}var a=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function a(e){e=e||{},n.call(this,e);var t,r;this.stream=function(e){return t=e,r=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?r.substr(0,e):r;return r=e?r.substr(e):"",this._finished=!r,this.parseChunk(t)}}}function o(e){function t(){if(x&&h&&(c("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+T.DefaultDelimiter+"'"),h=!1),e.skipEmptyLines)for(var t=0;t<x.data.length;t++)1===x.data[t].length&&""===x.data[t][0]&&x.data.splice(t--,1);return n()&&r(),a()}function n(){return e.header&&0===E.length}function r(){if(x){for(var e=0;n()&&e<x.data.length;e++)for(var t=0;t<x.data[e].length;t++)E.push(x.data[e][t]);x.data.splice(0,1)}}function i(t,n){return(e.dynamicTyping[t]||e.dynamicTyping)===!0?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&u(n):n}function a(){if(!x||!e.header&&!e.dynamicTyping)return x;for(var t=0;t<x.data.length;t++){for(var n=e.header?{}:[],r=0;r<x.data[t].length;r++){var a=r,o=x.data[t][r];e.header&&(a=r>=E.length?"__parsed_extra":E[r]),o=i(a,o),"__parsed_extra"===a?(n[a]=n[a]||[],n[a].push(o)):n[a]=o}x.data[t]=n,e.header&&(r>E.length?c("FieldMismatch","TooManyFields","Too many fields: expected "+E.length+" fields but parsed "+r,t):r<E.length&&c("FieldMismatch","TooFewFields","Too few fields: expected "+E.length+" fields but parsed "+r,t))}return e.header&&x.meta&&(x.meta.fields=E),x}function o(t,n){for(var r,i,a,o=[",","\t","|",";",T.RECORD_SEP,T.UNIT_SEP],l=0;l<o.length;l++){var u=o[l],c=0,f=0;a=void 0;for(var d=new s({delimiter:u,newline:n,preview:10}).parse(t),h=0;h<d.data.length;h++){var p=d.data[h].length;f+=p,"undefined"!=typeof a?p>1&&(c+=Math.abs(p-a),a=p):a=p}d.data.length>0&&(f/=d.data.length),("undefined"==typeof i||c<i)&&f>1.99&&(i=c,r=u)}return e.delimiter=r,{successful:!!r,bestDelimiter:r}}function l(e){e=e.substr(0,1048576);var t=e.split("\r"),n=e.split("\n"),r=n.length>1&&n[0].length<t[0].length;if(1===t.length||r)return"\n";for(var i=0,a=0;a<t.length;a++)"\n"===t[a][0]&&i++;return i>=t.length/2?"\r\n":"\r"}function u(e){var t=g.test(e);return t?parseFloat(e):e}function c(e,t,n,r){x.errors.push({type:e,code:t,message:n,row:r})}var f,d,h,g=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,v=this,y=0,b=!1,_=!1,E=[],x={data:[],errors:[],meta:{}};if(m(e.step)){var S=e.step;e.step=function(r){if(x=r,n())t();else{if(t(),0===x.data.length)return;y+=r.data.length,e.preview&&y>e.preview?d.abort():S(x,v)}}}this.parse=function(n,r,i){if(e.newline||(e.newline=l(n)),h=!1,e.delimiter)"function"==typeof e.delimiter&&(e.delimiter=e.delimiter(n),x.meta.delimiter=e.delimiter);else{var a=o(n,e.newline);a.successful?e.delimiter=a.bestDelimiter:(h=!0,e.delimiter=T.DefaultDelimiter),x.meta.delimiter=e.delimiter}var u=p(e);return e.preview&&e.header&&u.preview++,f=n,d=new s(u),x=d.parse(f,r,i),t(),b?{meta:{paused:!0}}:x||{meta:{paused:!1}}},this.paused=function(){return b},this.pause=function(){b=!0,d.abort(),f=f.substr(d.getCharIndex())},this.resume=function(){b=!1,v.streamer.parseChunk(f)},this.aborted=function(){return _},this.abort=function(){_=!0,d.abort(),x.meta.aborted=!0,m(e.complete)&&e.complete(x),f=""}}function s(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,a=e.preview,o=e.fastMode,s=e.quoteChar||'"';if(("string"!=typeof t||T.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw"Comment character same as delimiter";r===!0?r="#":("string"!=typeof r||T.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!=n&&"\r"!=n&&"\r\n"!=n&&(n="\n");var l=0,u=!1;this.parse=function(e,c,f){function d(e){x.push(e),w=l}function h(t){return f?g():("undefined"==typeof t&&(t=e.substr(l)),T.push(t),l=v,d(T),E&&m(),g())}function p(t){l=t,d(T),T=[],O=e.indexOf(n,l)}function g(e){return{data:x,errors:S,meta:{delimiter:t,linebreak:n,aborted:u,truncated:!!e,cursor:w+(c||0)}}}function m(){i(g()),x=[],S=[]}if("string"!=typeof e)throw"Input must be a string";var v=e.length,y=t.length,b=n.length,_=r.length,E="function"==typeof i;l=0;var x=[],S=[],T=[],w=0;if(!e)return g();if(o||o!==!1&&e.indexOf(s)===-1){for(var A=e.split(n),C=0;C<A.length;C++){var T=A[C];if(l+=T.length,C!==A.length-1)l+=n.length;else if(f)return g();if(!r||T.substr(0,_)!==r){if(E){if(x=[],d(T.split(t)),m(),u)return g()}else d(T.split(t));if(a&&C>=a)return x=x.slice(0,a),g(!0)}}return g()}for(var k=e.indexOf(t,l),O=e.indexOf(n,l),I=new RegExp(s+s,"g");;)if(e[l]!==s)if(r&&0===T.length&&e.substr(l,_)===r){if(O===-1)return g();l=O+b,O=e.indexOf(n,l),k=e.indexOf(t,l)}else if(k!==-1&&(k<O||O===-1))T.push(e.substring(l,k)),l=k+y,k=e.indexOf(t,l);else{if(O===-1)break;if(T.push(e.substring(l,O)),p(O+b),E&&(m(),u))return g();if(a&&x.length>=a)return g(!0)}else{var M=l;for(l++;;){var M=e.indexOf(s,M+1);if(M===-1)return f||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:l}),h();if(M===v-1){var N=e.substring(l,M).replace(I,s);return h(N)}if(e[M+1]!==s){if(e[M+1]===t){T.push(e.substring(l,M).replace(I,s)),l=M+1+y,k=e.indexOf(t,l),O=e.indexOf(n,l);break}if(e.substr(M+1,b)===n){if(T.push(e.substring(l,M).replace(I,s)),p(M+1+b),k=e.indexOf(t,l),E&&(m(),u))return g();if(a&&x.length>=a)return g(!0);break}}else M++}}return h()},this.abort=function(){u=!0},this.getCharIndex=function(){return l}}function l(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function u(){if(!T.WORKERS_SUPPORTED)return!1;if(!E&&null===T.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=T.SCRIPT_PATH||v;e+=(e.indexOf("?")!==-1?"&":"?")+"papaworker";var t=new y.Worker(e);return t.onmessage=c,t.id=S++,x[t.id]=t,t}function c(e){var t=e.data,n=x[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i=function(){r=!0,f(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},a={abort:i,pause:d,resume:d};if(m(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:[t.results.data[o]],errors:t.results.errors,meta:t.results.meta},a),!r);o++);delete t.results}else m(n.userChunk)&&(n.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!r&&f(t.workerId,t.results)}function f(e,t){var n=x[e];m(n.userComplete)&&n.userComplete(t),n.terminate(),delete x[e]}function d(){throw"Not implemented."}function h(e){var t=e.data;if("undefined"==typeof T.WORKER_ID&&t&&(T.WORKER_ID=t.workerId),"string"==typeof t.input)y.postMessage({workerId:T.WORKER_ID,results:T.parse(t.input,t.config),finished:!0});else if(y.File&&t.input instanceof File||t.input instanceof Object){var n=T.parse(t.input,t.config);n&&y.postMessage({workerId:T.WORKER_ID,results:n,finished:!0})}}function p(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=p(e[n]);return t}function g(e,t){return function(){e.apply(t,arguments)}}function m(e){return"function"==typeof e}var v,y=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof y?y:{}}(),b=!y.document&&!!y.postMessage,_=b&&/(\?|&)papaworker(=|&|$)/.test(y.location.search),E=!1,x={},S=0,T={};if(T.parse=e,T.unparse=t,T.RECORD_SEP=String.fromCharCode(30),T.UNIT_SEP=String.fromCharCode(31),T.BYTE_ORDER_MARK="\ufeff",T.BAD_DELIMITERS=["\r","\n",'"',T.BYTE_ORDER_MARK],T.WORKERS_SUPPORTED=!b&&!!y.Worker,T.SCRIPT_PATH=null,T.LocalChunkSize=10485760,T.RemoteChunkSize=5242880,T.DefaultDelimiter=",",T.Parser=s,T.ParserHandle=o,T.NetworkStreamer=r,T.FileStreamer=i,T.StringStreamer=a,y.jQuery){var w=y.jQuery;w.fn.parse=function(e){function t(){if(0===a.length)return void(m(e.complete)&&e.complete());var t=a[0];if(m(e.before)){var i=e.before(t.file,t.inputElem);if("object"==typeof i){if("abort"===i.action)return void n("AbortError",t.file,t.inputElem,i.reason);if("skip"===i.action)return void r();"object"==typeof i.config&&(t.instanceConfig=w.extend(t.instanceConfig,i.config))}else if("skip"===i)return void r()}var o=t.instanceConfig.complete;t.instanceConfig.complete=function(e){m(o)&&o(e,t.file,t.inputElem),r()},T.parse(t.file,t.instanceConfig)}function n(t,n,r,i){m(e.error)&&e.error({name:t},n,r,i)}function r(){a.splice(0,1),t()}var i=e.config||{},a=[];return this.each(function(e){var t="INPUT"===w(this).prop("tagName").toUpperCase()&&"file"===w(this).attr("type").toLowerCase()&&y.FileReader;if(!t||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)a.push({file:this.files[n],inputElem:this,instanceConfig:w.extend({},i)})}),t(),this}}return _?y.onmessage=h:T.WORKERS_SUPPORTED&&(v=l(),document.body?document.addEventListener("DOMContentLoaded",function(){E=!0},!0):E=!0),r.prototype=Object.create(n.prototype),r.prototype.constructor=r,i.prototype=Object.create(n.prototype),i.prototype.constructor=i,a.prototype=Object.create(a.prototype),a.prototype.constructor=a,T}),!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function r(e){return null===e?NaN:+e}function i(e){return!isNaN(e)}function a(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function o(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(e){return(e+="")===Eo||e[0]===xo?xo+e:e}function f(e){return(e+="")[0]===xo?e.slice(1):e}function d(e){return c(e)in this._}function h(e){return(e=c(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(f(t));return e}function g(){var e=0;for(var t in this._)++e;return e}function m(){for(var e in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(e){return e}function b(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function _(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=So.length;n<r;++n){var i=So[n]+t;if(i in e)return i}}function E(){}function x(){}function S(e){function t(){for(var t,r=n,i=-1,a=r.length;++i<a;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new u;return t.on=function(t,i){var a,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function T(){so.event.preventDefault()}function w(){for(var e,t=so.event;e=t.sourceEvent;)t=e;return t}function A(e){for(var t=new x,n=0,r=arguments.length;++n<r;)t[arguments[n]]=S(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=so.event;i.target=e,so.event=i,t[i.type].apply(n,r)}finally{so.event=a}}},t}function C(e){return wo(e,Oo),e}function k(e){return"function"==typeof e?e:function(){return Ao(e,this)}}function O(e){return"function"==typeof e?e:function(){return Co(e,this)}}function I(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=so.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:o:e.local?a:i}function M(e){return e.trim().replace(/\s+/g," ")}function N(e){return new RegExp("(?:^|\\s+)"+so.requote(e)+"(?:\\s+|$)","g")}function D(e){return(e+"").trim().split(/^|\s+/)}function L(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=D(e).map($);var i=e.length;return"function"==typeof t?r:n}function $(e){var t=N(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",M(i+" "+e))):n.setAttribute("class",M(i.replace(t," ")))}}function R(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?a:i}function P(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function F(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===Io&&t.documentElement.namespaceURI===Io?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=so.ns.qualify(e)).local?n:t}function U(){var e=this.parentNode;e&&e.removeChild(this)}function j(e){return{__data__:e}}function H(e){return function(){return ko(this,e)}}function z(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function B(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,n);return e}function q(e){return wo(e,No),e}function Y(e){var t,n;return function(r,i,a){var o,s=e[a].update,l=s.length;for(a!=n&&(n=a,t=0),i>=t&&(t=i+1);!(o=s[t])&&++t<l;);return o}}function X(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=l(t,uo(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+so.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,s=e.indexOf("."),l=W;s>0&&(e=e.slice(0,s));var u=Do.get(e);return u&&(e=u,l=G),s?t?i:r:t?E:a}function W(e,t){return function(n){var r=so.event;so.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{so.event=r}}}function G(e,t){var n=W(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function V(n){var r=".dragsuppress-"+ ++$o,i="click"+r,a=so.select(t(n)).on("touchmove"+r,T).on("dragstart"+r,T).on("selectstart"+r,T);if(null==Lo&&(Lo=!("onselectstart"in n)&&_(n.style,"userSelect")),Lo){var o=e(n).style,s=o[Lo];o[Lo]="none"}return function(e){if(a.on(r,null),Lo&&(o[Lo]=s),e){var t=function(){a.on(i,null)};a.on(i,function(){T(),t()},!0),setTimeout(t,0)}}}function K(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(Ro<0){var a=t(e);if(a.scrollX||a.scrollY){r=so.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Ro=!(o.f||o.e),r.remove()}}return Ro?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function Z(){return so.event.changedTouches[0].identifier}function Q(e){return e>0?1:e<0?-1:0}function J(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:e<-1?Uo:Math.acos(e)}function te(e){return e>1?zo:e<-1?-zo:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function re(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return((e=Math.exp(2*e))-1)/(e+1)}function ae(e){return(e=Math.sin(e/2))*e}function oe(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):Ee(""+e,xe,se):new se(e,t,n)}function le(e,t,n){function r(e){return e>360?e-=360:e<0&&(e+=360),e<60?a+(o-a)*e/60:e<180?o:e<240?a+(o-a)*(240-e)/60:a}function i(e){return Math.round(255*r(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,o=n<=.5?n*(1+t):n+t-n*t,a=2*n-o,new ve(i(e+120),i(e),i(e-120))}function ue(e,t,n){return this instanceof ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ue?new ue(e.h,e.c,e.l):e instanceof fe?he(e.l,e.a,e.b):he((e=Se((e=so.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ue(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new fe(n,Math.cos(e*=Bo)*t,Math.sin(e)*t)}function fe(e,t,n){return this instanceof fe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof fe?new fe(e.l,e.a,e.b):e instanceof ue?ce(e.h,e.c,e.l):Se((e=ve(e)).r,e.g,e.b):new fe(e,t,n)}function de(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return i=pe(i)*es,r=pe(r)*ts,a=pe(a)*ns,new ve(me(3.2404542*i-1.5371385*r-.4985314*a),me(-.969266*i+1.8760108*r+.041556*a),me(.0556434*i-.2040259*r+1.0572252*a))}function he(e,t,n){return e>0?new ue(Math.atan2(n,t)*qo,Math.sqrt(t*t+n*n),e):new ue(NaN,NaN,e)}function pe(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ge(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function me(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ve(e,t,n){return this instanceof ve?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ve?new ve(e.r,e.g,e.b):Ee(""+e,ve,le):new ve(e,t,n)}function ye(e){return new ve(e>>16,e>>8&255,255&e)}function be(e){return ye(e)+""}function _e(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Ee(e,t,n){var r,i,a,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(we(i[0]),we(i[1]),we(i[2]))}return(a=as.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,l=15&a,l=l<<4|l):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function xe(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new se(r,i,l)}function Se(e,t,n){e=Te(e),t=Te(t),n=Te(n);var r=ge((.4124564*e+.3575761*t+.1804375*n)/es),i=ge((.2126729*e+.7151522*t+.072175*n)/ts),a=ge((.0193339*e+.119192*t+.9503041*n)/ns);return fe(116*i-16,500*(r-i),200*(i-a))}function Te(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function we(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Ae(e){return"function"==typeof e?e:function(){return e}}function Ce(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),ke(t,n,e,r)}}function ke(e,t,n,r){function i(){var e,t=l.status;if(!t&&Ie(l)||t>=200&&t<300||304===t){try{e=n.call(a,l)}catch(r){return void o.error.call(a,r)}o.load.call(a,e)}else o.error.call(a,l)}var a={},o=so.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(e){var t=so.event;so.event=e;try{o.progress.call(a,l)}finally{so.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(u=e,a):u},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(uo(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=i&&a.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(a,l),l.send(null==r?null:r),a},a.abort=function(){return l.abort(),a},so.rebind(a,o,"on"),null==r?a:a.get(Oe(r))}function Oe(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ie(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Me(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,a={c:e,t:i,n:null};return ss?ss.n=a:os=a,ss=a,ls||(us=clearTimeout(us),ls=1,cs(Ne)),a}function Ne(){var e=De(),t=Le()-e;t>24?(isFinite(t)&&(clearTimeout(us),us=setTimeout(Ne,t)),ls=0):(ls=1,cs(Ne))}function De(){for(var e=Date.now(),t=os;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Le(){for(var e,t=os,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:os=t.n;return ss=e,n}function $e(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Re(e,t){var n=Math.pow(10,3*_o(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Pe(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,a=r&&n?function(e,t){for(var i=e.length,a=[],o=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>t));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:y;return function(e){var n=ds.exec(e),r=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],d=n[8],h=n[9],p=1,g="",m="",v=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===r&&"="===o)&&(u=r="0",o="="),h){case"n":f=!0,h="g";break;case"%":p=100,m="%",h="f";break;case"p":p=100,m="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":v=!0,d=0;break;case"s":p=-1,h="r"}"$"===l&&(g=i[0],m=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):"e"!=h&&"f"!=h||(d=Math.max(0,Math.min(20,d)))),h=hs.get(h)||Fe;var b=u&&f;return function(e){var n=m;if(v&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===s?"":s;if(p<0){var l=so.formatPrefix(e,d);e=l.scale(e),n=l.symbol+m}else e*=p;e=h(e,d);var _,E,x=e.lastIndexOf(".");if(x<0){var S=y?e.lastIndexOf("e"):-1;S<0?(_=e,E=""):(_=e.substring(0,S),E=e.substring(S))}else _=e.substring(0,x),E=t+e.substring(x+1);!u&&f&&(_=a(_,1/0));var T=g.length+_.length+E.length+(b?0:i.length),w=T<c?new Array(T=c-T+1).join(r):"";return b&&(_=a(w+_,w.length?c-E.length:1/0)),i+=g,e=_+E,("<"===o?i+e+w:">"===o?w+i+e:"^"===o?w.substring(0,T>>=1)+i+e+w.substring(T):i+(b?e:w+e))+n}}}function Fe(e){return e+""}function Ue(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function je(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new gs(n-1)),1),n}function a(e,n){return t(e=new gs((+e)),n),e}function o(e,r,a){var o=i(e),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date((+o))),t(o,1);else for(;o<r;)s.push(new Date((+o))),t(o,1);return s}function s(e,t,n){try{gs=Ue;var r=new Ue;return r._=e,o(r,t,n)}finally{gs=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var l=e.utc=He(e);return l.floor=l,l.round=He(r),l.ceil=He(i),l.offset=He(a),l.range=s,e}function He(e){return function(t,n){try{gs=Ue;var r=new Ue;return r._=t,e(r,n)._}finally{gs=Date}}}function ze(e){function t(e){function t(t){for(var n,i,a,o=[],s=-1,l=0;++s<r;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=vs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(a=k[n])&&(n=a(t,null==i?"e"===n?" ":"0":i)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&gs!==Ue,o=new(a?Ue:gs);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,a,o,s=0,l=t.length,u=n.length;s<l;){if(r>=u)return-1;if(i=t.charCodeAt(s++),37===i){if(o=t.charAt(s++),a=O[o in vs?t.charAt(s++):o],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){x.lastIndex=0;var r=x.exec(t.slice(n));return r?(e.w=S.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){A.lastIndex=0;var r=A.exec(t.slice(n));return r?(e.m=C.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.slice(n));return r?(e.m=w.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,k.c.toString(),t,r)}function l(e,t,r){return n(e,k.x.toString(),t,r)}function u(e,t,r){return n(e,k.X.toString(),t,r)}function c(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var f=e.dateTime,d=e.date,h=e.time,p=e.periods,g=e.days,m=e.shortDays,v=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{gs=Ue;var t=new gs;return t._=e,r(t)}finally{gs=Date}}var r=t(e);return n.parse=function(e){try{gs=Ue;var t=r.parse(e);return t&&t._}finally{gs=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=lt;var b=so.map(),_=qe(g),E=Ye(g),x=qe(m),S=Ye(m),T=qe(v),w=Ye(v),A=qe(y),C=Ye(y);p.forEach(function(e,t){b.set(e.toLowerCase(),t)});var k={a:function(e){return m[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(f),d:function(e,t){return Be(e.getDate(),t,2)},e:function(e,t){
return Be(e.getDate(),t,2)},H:function(e,t){return Be(e.getHours(),t,2)},I:function(e,t){return Be(e.getHours()%12||12,t,2)},j:function(e,t){return Be(1+ps.dayOfYear(e),t,3)},L:function(e,t){return Be(e.getMilliseconds(),t,3)},m:function(e,t){return Be(e.getMonth()+1,t,2)},M:function(e,t){return Be(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return Be(e.getSeconds(),t,2)},U:function(e,t){return Be(ps.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Be(ps.mondayOfYear(e),t,2)},x:t(d),X:t(h),y:function(e,t){return Be(e.getFullYear()%100,t,2)},Y:function(e,t){return Be(e.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},O={a:r,A:i,b:a,B:o,c:s,d:et,e:et,H:nt,I:nt,j:tt,L:at,m:Je,M:rt,p:c,S:it,U:We,w:Xe,W:Ge,x:l,X:u,y:Ke,Y:Ve,Z:Ze,"%":st};return t}function Be(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function qe(e){return new RegExp("^(?:"+e.map(so.requote).join("|")+")","i")}function Ye(e){for(var t=new u,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Xe(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function We(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Ge(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Ve(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ke(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.y=Qe(+r[0]),n+r[0].length):-1}function Ze(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Qe(e){return e+(e>68?1900:2e3)}function Je(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function et(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function tt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function nt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rt(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function it(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function at(e,t,n){ys.lastIndex=0;var r=ys.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ot(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=_o(t)/60|0,i=_o(t)%60;return n+Be(r,"0",2)+Be(i,"0",2)}function st(e,t,n){bs.lastIndex=0;var r=bs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ut(){}function ct(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function ft(e,t){e&&Ss.hasOwnProperty(e.type)&&Ss[e.type](e,t)}function dt(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function ht(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)dt(e[n],t,1);t.polygonEnd()}function pt(){function e(e,t){e*=Bo,t=t*Bo/2+Uo/4;var n=e-r,o=n>=0?1:-1,s=o*n,l=Math.cos(t),u=Math.sin(t),c=a*u,f=i*l+c*Math.cos(s),d=c*o*Math.sin(s);ws.add(Math.atan2(d,f)),r=e,i=l,a=u}var t,n,r,i,a;As.point=function(o,s){As.point=e,r=(t=o)*Bo,i=Math.cos(s=(n=s)*Bo/2+Uo/4),a=Math.sin(s)},As.lineEnd=function(){e(t,n)}}function gt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function mt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _t(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Et(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function xt(e,t){return _o(e[0]-t[0])<Po&&_o(e[1]-t[1])<Po}function St(e,t){e*=Bo;var n=Math.cos(t*=Bo);Tt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Tt(e,t,n){++Cs,Os+=(e-Os)/Cs,Is+=(t-Is)/Cs,Ms+=(n-Ms)/Cs}function wt(){function e(e,i){e*=Bo;var a=Math.cos(i*=Bo),o=a*Math.cos(e),s=a*Math.sin(e),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*o-t*l)*u+(u=t*s-n*o)*u),t*o+n*s+r*l);ks+=u,Ns+=u*(t+(t=o)),Ds+=u*(n+(n=s)),Ls+=u*(r+(r=l)),Tt(t,n,r)}var t,n,r;Fs.point=function(i,a){i*=Bo;var o=Math.cos(a*=Bo);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),Fs.point=e,Tt(t,n,r)}}function At(){Fs.point=St}function Ct(){function e(e,t){e*=Bo;var n=Math.cos(t*=Bo),o=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),u=i*l-a*s,c=a*o-r*l,f=r*s-i*o,d=Math.sqrt(u*u+c*c+f*f),h=r*o+i*s+a*l,p=d&&-ee(h)/d,g=Math.atan2(d,h);$s+=p*u,Rs+=p*c,Ps+=p*f,ks+=g,Ns+=g*(r+(r=o)),Ds+=g*(i+(i=s)),Ls+=g*(a+(a=l)),Tt(r,i,a)}var t,n,r,i,a;Fs.point=function(o,s){t=o,n=s,Fs.point=e,o*=Bo;var l=Math.cos(s*=Bo);r=l*Math.cos(o),i=l*Math.sin(o),a=Math.sin(s),Tt(r,i,a)},Fs.lineEnd=function(){e(t,n),Fs.lineEnd=At,Fs.point=St}}function kt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Ot(){return!0}function It(e,t,n,r,i){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(xt(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var l=new Nt(n,e,null,(!0)),u=new Nt(n,null,l,(!1));l.o=u,a.push(l),o.push(u),l=new Nt(r,e,null,(!1)),u=new Nt(r,null,l,(!0)),l.o=u,a.push(l),o.push(u)}}),o.sort(t),Mt(a),Mt(o),a.length){for(var s=0,l=n,u=o.length;s<u;++s)o[s].e=l=!l;for(var c,f,d=a[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,u=c.length;s<u;++s)i.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){c=h.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function Mt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Nt(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Dt(e,t,n,r){return function(i,a){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function s(e,t){var n=i(e,t);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function u(){y.point=o,m.lineEnd()}function c(e,t){g.push([e,t]);var n=i(e,t);_.point(n[0],n[1])}function f(){_.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),_.lineEnd();var e,t=_.clean(),n=b.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(E||(a.polygonStart(),E=!0),a.lineStart();++o<r;)a.point((i=e[o])[0],i[1]);a.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Lt))}var h,p,g,m=t(a),v=i.invert(r[0],r[1]),y={point:o,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=d,h=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=l,y.lineEnd=u,h=so.merge(h);var e=jt(v,p);h.length?(E||(a.polygonStart(),E=!0),It(h,Rt,e,n,a)):e&&(E||(a.polygonStart(),E=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),E&&(a.polygonEnd(),E=!1),h=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=$t(),_=t(b),E=!1;return y}}function Lt(e){return e.length>1}function $t(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:E,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Rt(e,t){return((e=e.x)[0]<0?e[1]-zo-Po:zo-e[1])-((t=t.x)[0]<0?t[1]-zo-Po:zo-t[1])}function Pt(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Uo:-Uo,l=_o(a-n);_o(l-Uo)<Po?(e.point(n,r=(r+o)/2>0?zo:-zo),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&l>=Uo&&(_o(n-i)<Po&&(n-=i*Po),_o(a-s)<Po&&(a-=s*Po),r=Ft(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Ft(e,t,n,r){var i,a,o=Math.sin(e-n);return _o(o)>Po?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function Ut(e,t,n,r){var i;if(null==e)i=n*zo,r.point(-Uo,i),r.point(0,i),r.point(Uo,i),r.point(Uo,0),r.point(Uo,-i),r.point(0,-i),r.point(-Uo,-i),r.point(-Uo,0),r.point(-Uo,i);else if(_o(e[0]-t[0])>Po){var a=e[0]<t[0]?Uo:-Uo;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function jt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;ws.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],c=u.length;if(c)for(var f=u[0],d=f[0],h=f[1]/2+Uo/4,p=Math.sin(h),g=Math.cos(h),m=1;;){m===c&&(m=0),e=u[m];var v=e[0],y=e[1]/2+Uo/4,b=Math.sin(y),_=Math.cos(y),E=v-d,x=E>=0?1:-1,S=x*E,T=S>Uo,w=p*b;if(ws.add(Math.atan2(w*x*Math.sin(S),g*_+w*Math.cos(S))),a+=T?E+x*jo:E,T^d>=n^v>=n){var A=vt(gt(f),gt(e));_t(A);var C=vt(i,A);_t(C);var k=(T^E>=0?-1:1)*te(C[2]);(r>k||r===k&&(A[0]||A[1]))&&(o+=T^E>=0?1:-1)}if(!m++)break;d=v,p=b,g=_,f=e}}return(a<-Po||a<Po&&ws<-Po)^1&o}function Ht(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var h,p=[f,d],g=t(f,d),m=o?g?0:i(f,d):g?i(f+(f<0?Uo:-Uo),d):0;if(!n&&(u=l=g)&&e.lineStart(),g!==l&&(h=r(n,p),(xt(n,h)||xt(p,h))&&(p[0]+=Po,p[1]+=Po,g=t(p[0],p[1]))),g!==l)c=0,g?(e.lineStart(),h=r(p,n),e.point(h[0],h[1])):(h=r(n,p),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(s&&n&&o^g){var v;m&a||!(v=r(p,n,!0))||(c=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||n&&xt(n,p)||e.point(p[0],p[1]),n=p,l=g,a=m},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=gt(e),i=gt(t),o=[1,0,0],s=vt(r,i),l=mt(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var f=a*l/c,d=-a*u/c,h=vt(o,s),p=bt(o,f),g=bt(s,d);yt(p,g);var m=h,v=mt(p,m),y=mt(m,m),b=v*v-y*(mt(p,p)-1);if(!(b<0)){var _=Math.sqrt(b),E=bt(m,(-v-_)/y);if(yt(E,p),E=Et(E),!n)return E;var x,S=e[0],T=t[0],w=e[1],A=t[1];T<S&&(x=S,S=T,T=x);var C=T-S,k=_o(C-Uo)<Po,O=k||C<Po;if(!k&&A<w&&(x=w,w=A,A=x),O?k?w+A>0^E[1]<(_o(E[0]-S)<Po?w:A):w<=E[1]&&E[1]<=A:C>Uo^(S<=E[0]&&E[0]<=T)){var I=bt(m,(-v+_)/y);return yt(I,p),[E,Et(I)]}}}function i(t,n){var r=o?e:Uo-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var a=Math.cos(e),o=a>0,s=_o(a)>Po,l=gn(e,6*Bo);return Dt(t,n,l,o?[0,-e]:[-Uo,e-Uo])}function zt(e,t,n,r){return function(i){var a,o=i.a,s=i.b,l=o.x,u=o.y,c=s.x,f=s.y,d=0,h=1,p=c-l,g=f-u;if(a=e-l,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=n-l,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=t-u,g||!(a>0)){if(a/=g,g<0){if(a<d)return;a<h&&(h=a)}else if(g>0){if(a>h)return;a>d&&(d=a)}if(a=r-u,g||!(a<0)){if(a/=g,g<0){if(a>h)return;a>d&&(d=a)}else if(g>0){if(a<d)return;a<h&&(h=a)}return d>0&&(i.a={x:l+d*p,y:u+d*g}),h<1&&(i.b={x:l+h*p,y:u+h*g}),i}}}}}}function Bt(e,t,n,r){function i(r,i){return _o(r[0]-e)<Po?i>0?0:3:_o(r[0]-n)<Po?i>0?2:1:_o(r[1]-t)<Po?i>0?1:0:i>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=m.length,r=e[1],i=0;i<n;++i)for(var a,o=1,s=m[i],l=s.length,u=s[0];o<l;++o)a=s[o],u[1]<=r?a[1]>r&&J(u,a,e)>0&&++t:a[1]<=r&&J(u,a,e)<0&&--t,u=a;return 0!==t}function u(a,s,l,u){var c=0,f=0;if(null==a||(c=i(a,l))!==(f=i(s,l))||o(a,s)<0^l>0){do u.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+l+4)%4)!==f)}else u.point(s[0],s[1])}function c(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function f(e,t){c(e,t)&&s.point(e,t)}function d(){O.point=p,m&&m.push(v=[]),T=!0,S=!1,E=x=NaN}function h(){g&&(p(y,b),_&&S&&C.rejoin(),g.push(C.buffer())),O.point=f,S&&s.lineEnd()}function p(e,t){e=Math.max(-js,Math.min(js,e)),t=Math.max(-js,Math.min(js,t));var n=c(e,t);if(m&&v.push([e,t]),T)y=e,b=t,_=n,T=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&S)s.point(e,t);else{var r={a:{x:E,y:x},b:{x:e,y:t}};k(r)?(S||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),w=!1):n&&(s.lineStart(),s.point(e,t),w=!1)}E=e,x=t,S=n}var g,m,v,y,b,_,E,x,S,T,w,A=s,C=$t(),k=zt(e,t,n,r),O={point:f,lineStart:d,lineEnd:h,polygonStart:function(){s=C,g=[],m=[],w=!0},polygonEnd:function(){s=A,g=so.merge(g);var t=l([e,r]),n=w&&t,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&It(g,a,t,u,s),s.polygonEnd()),g=m=v=null}};return O}}function qt(e){var t=0,n=Uo/3,r=sn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Uo/180,n=e[1]*Uo/180):[t/Uo*180,n/Uo*180]},i}function Yt(e,t){function n(e,t){var n=Math.sqrt(a-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,te((a-(e*e+n*n)*i*i)/(2*i))]},n}function Xt(){function e(e,t){zs+=i*e-r*t,r=e,i=t}var t,n,r,i;Ws.point=function(a,o){Ws.point=e,t=r=a,n=i=o},Ws.lineEnd=function(){e(t,n)}}function Wt(e,t){e<Bs&&(Bs=e),e>Ys&&(Ys=e),t<qs&&(qs=t),t>Xs&&(Xs=t)}function Gt(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=n}function n(e,t){o.push("L",e,",",t)}function r(){s.point=e}function i(){o.push("Z")}var a=Vt(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return a=Vt(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function Vt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Kt(e,t){Os+=e,Is+=t,++Ms}function Zt(){function e(e,r){var i=e-t,a=r-n,o=Math.sqrt(i*i+a*a);Ns+=o*(t+e)/2,Ds+=o*(n+r)/2,Ls+=o,Kt(t=e,n=r)}var t,n;Vs.point=function(r,i){Vs.point=e,Kt(t=r,n=i)}}function Qt(){Vs.point=Kt}function Jt(){function e(e,t){var n=e-r,a=t-i,o=Math.sqrt(n*n+a*a);Ns+=o*(r+e)/2,Ds+=o*(i+t)/2,Ls+=o,o=i*e-r*t,$s+=o*(r+e),Rs+=o*(i+t),Ps+=3*o,Kt(r=e,i=t)}var t,n,r,i;Vs.point=function(a,o){Vs.point=e,Kt(t=r=a,n=i=o)},Vs.lineEnd=function(){e(t,n)}}function en(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,jo)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return o=e,s},result:E};return s}function tn(e){function t(e){return(s?r:n)(e)}function n(t){return an(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=NaN,T.point=a,t.lineStart()}function a(n,r){var a=gt([n,r]),o=e(n,r);i(b,_,y,E,x,S,b=o[0],_=o[1],y=n,E=a[0],x=a[1],S=a[2],s,t),t.point(b,_)}function o(){T.point=n,t.lineEnd()}function l(){r(),T.point=u,T.lineEnd=c}function u(e,t){a(f=e,d=t),h=b,p=_,g=E,m=x,v=S,T.point=a}function c(){i(b,_,y,E,x,S,h,p,f,g,m,v,s,t),T.lineEnd=o,o()}var f,d,h,p,g,m,v,y,b,_,E,x,S,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=l},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,s,l,u,c,f,d,h,p,g,m,v){var y=c-t,b=f-n,_=y*y+b*b;if(_>4*a&&m--){var E=s+h,x=l+p,S=u+g,T=Math.sqrt(E*E+x*x+S*S),w=Math.asin(S/=T),A=_o(_o(S)-1)<Po||_o(r-d)<Po?(r+d)/2:Math.atan2(x,E),C=e(A,w),k=C[0],O=C[1],I=k-t,M=O-n,N=b*I-y*M;(N*N/_>a||_o((y*I+b*M)/_-.5)>.3||s*h+l*p+u*g<o)&&(i(t,n,r,s,l,u,k,O,A,E/=T,x/=T,S,m,v),v.point(k,O),i(k,O,A,E,x,S,c,f,d,h,p,g,m,v))}}var a=.5,o=Math.cos(30*Bo),s=16;return t.precision=function(e){return arguments.length?(s=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function nn(e){var t=tn(function(t,n){return e([t*qo,n*qo])});return function(e){return ln(t(e))}}function rn(e){this.stream=e}function an(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function on(e){return sn(function(){return e})()}function sn(e){function t(e){return e=s(e[0]*Bo,e[1]*Bo),[e[0]*d+l,u-e[1]*d]}function n(e){return e=s.invert((e[0]-l)/d,(u-e[1])/d),e&&[e[0]*qo,e[1]*qo]}function r(){s=kt(o=fn(v,b,_),a);var e=a(g,m);return l=h-e[0]*d,u=p+e[1]*d,i()}function i(){return c&&(c.valid=!1,c=null),t}var a,o,s,l,u,c,f=tn(function(e,t){return e=a(e,t),[e[0]*d+l,u-e[1]*d]}),d=150,h=480,p=250,g=0,m=0,v=0,b=0,_=0,E=Us,x=y,S=null,T=null;return t.stream=function(e){return c&&(c.valid=!1),c=ln(E(o,f(x(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(E=null==e?(S=e,Us):Ht((S=+e)*Bo),i()):S},t.clipExtent=function(e){return arguments.length?(T=e,x=e?Bt(e[0][0],e[0][1],e[1][0],e[1][1]):y,i()):T},t.scale=function(e){return arguments.length?(d=+e,r()):d},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],r()):[h,p]},t.center=function(e){return arguments.length?(g=e[0]%360*Bo,m=e[1]%360*Bo,r()):[g*qo,m*qo]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Bo,b=e[1]%360*Bo,_=e.length>2?e[2]%360*Bo:0,r()):[v*qo,b*qo,_*qo]},so.rebind(t,f,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function ln(e){return an(e,function(t,n){e.point(t*Bo,n*Bo)})}function un(e,t){return[e,t]}function cn(e,t){return[e>Uo?e-jo:e<-Uo?e+jo:e,t]}function fn(e,t,n){return e?t||n?kt(hn(e),pn(t,n)):hn(e):t||n?pn(t,n):cn}function dn(e){return function(t,n){return t+=e,[t>Uo?t-jo:t<-Uo?t+jo:t,n]}}function hn(e){var t=dn(e);return t.invert=dn(-e),t}function pn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+s*i;return[Math.atan2(l*a-c*o,s*r-u*i),te(c*a+l*o)]}var r=Math.cos(e),i=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*a-l*o;return[Math.atan2(l*a+u*o,s*r+c*i),te(c*r-s*i)]},n}function gn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var l=o*t;null!=i?(i=mn(n,i),a=mn(n,a),(o>0?i<a:i>a)&&(i+=o*jo)):(i=e+o*jo,a=e-.5*l);for(var u,c=i;o>0?c>a:c<a;c-=l)s.point((u=Et([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function mn(e,t){var n=gt(t);n[0]-=e,_t(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Po)%(2*Math.PI)}function vn(e,t,n){var r=so.range(e,t-Po,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function yn(e,t,n){var r=so.range(e,t-Po,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function bn(e){return e.source}function _n(e){return e.target}function En(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),l=i*Math.cos(e),u=i*Math.sin(e),c=o*Math.cos(n),f=o*Math.sin(n),d=2*Math.asin(Math.sqrt(ae(r-t)+i*o*ae(n-e))),h=1/Math.sin(d),p=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,r=n*l+t*c,i=n*u+t*f,o=n*a+t*s;return[Math.atan2(i,r)*qo,Math.atan2(o,Math.sqrt(r*r+i*i))*qo]}:function(){return[e*qo,t*qo]};return p.distance=d,p}function xn(){function e(e,i){var a=Math.sin(i*=Bo),o=Math.cos(i),s=_o((e*=Bo)-t),l=Math.cos(s);Ks+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*l)*s),n*a+r*o*l),t=e,n=a,r=o}var t,n,r;Zs.point=function(i,a){t=i*Bo,n=Math.sin(a*=Bo),r=Math.cos(a),Zs.point=e},Zs.lineEnd=function(){Zs.point=Zs.lineEnd=E}}function Sn(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]},n}function Tn(e,t){function n(e,t){o>0?t<-zo+Po&&(t=-zo+Po):t>zo-Po&&(t=zo-Po);var n=o/Math.pow(i(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Uo/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,r=Q(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/r,1/a))-zo]},n):An}function wn(e,t){function n(e,t){var n=a-t;return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/i+e;return _o(i)<Po?un:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,a-Q(i)*Math.sqrt(e*e+n*n)]},n)}function An(e,t){return[e,Math.log(Math.tan(Uo/4+t/2))]}function Cn(e){var t,n=on(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Uo*r(),l=i();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function kn(e,t){return[Math.log(Math.tan(Uo/4+t/2)),-e]}function On(e){return e[0]}function In(e){return e[1]}function Mn(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&J(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Nn(e,t){return e[0]-t[0]||e[1]-t[1]}function Dn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ln(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,l=e[1],u=n[1],c=t[1]-l,f=r[1]-u,d=(s*(l-u)-f*(i-a))/(f*o-s*c);return[i+d*o,l+d*c]}function $n(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Rn(){rr(this),this.edge=this.site=this.circle=null}function Pn(e){var t=ul.pop()||new Rn;return t.site=e,t}function Fn(e){Gn(e),ol.remove(e),ul.push(e),rr(e)}function Un(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Fn(e);for(var l=a;l.circle&&_o(n-l.circle.x)<Po&&_o(r-l.circle.cy)<Po;)a=l.P,s.unshift(l),Fn(l),l=a;s.unshift(l),Gn(l);for(var u=o;u.circle&&_o(n-u.circle.x)<Po&&_o(r-u.circle.cy)<Po;)o=u.N,s.push(u),Fn(u),u=o;s.push(u),Gn(u);var c,f=s.length;for(c=1;c<f;++c)u=s[c],l=s[c-1],er(u.edge,l.site,u.site,i);l=s[0],u=s[f-1],u.edge=Qn(l.site,u.site,null,i),Wn(l),Wn(u)}function jn(e){for(var t,n,r,i,a=e.x,o=e.y,s=ol._;s;)if(r=Hn(s,o)-a,r>Po)s=s.L;else{if(i=a-zn(s,o),!(i>Po)){r>-Po?(t=s.P,n=s):i>-Po?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Pn(e);if(ol.insert(t,l),t||n){if(t===n)return Gn(t),n=Pn(t.site),ol.insert(l,n),l.edge=n.edge=Qn(t.site,l.site),Wn(t),void Wn(n);if(!n)return void(l.edge=Qn(t.site,l.site));Gn(t),Gn(n);var u=t.site,c=u.x,f=u.y,d=e.x-c,h=e.y-f,p=n.site,g=p.x-c,m=p.y-f,v=2*(d*m-h*g),y=d*d+h*h,b=g*g+m*m,_={x:(m*y-h*b)/v+c,y:(d*b-g*y)/v+f};er(n.edge,u,p,_),l.edge=Qn(u,e,null,_),n.edge=Qn(e,p,null,_),Wn(t),Wn(n)}}function Hn(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-(1/0);n=o.site;var s=n.x,l=n.y,u=l-t;if(!u)return s;var c=s-r,f=1/a-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-a/2)))/f+r:(r+s)/2}function zn(e,t){var n=e.N;if(n)return Hn(n,t);var r=e.site;return r.y===t?r.x:1/0}function Bn(e){this.site=e,this.edges=[]}function qn(e){for(var t,n,r,i,a,o,s,l,u,c,f=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],g=al,m=g.length;m--;)if(a=g[m],a&&a.prepare())for(s=a.edges,l=s.length,o=0;o<l;)c=s[o].end(),r=c.x,i=c.y,u=s[++o%l].start(),t=u.x,n=u.y,(_o(r-t)>Po||_o(i-n)>Po)&&(s.splice(o,0,new tr(Jn(a.site,c,_o(r-f)<Po&&p-i>Po?{x:f,y:_o(t-f)<Po?n:p}:_o(i-p)<Po&&d-r>Po?{x:_o(n-p)<Po?t:d,y:p}:_o(r-d)<Po&&i-h>Po?{x:d,y:_o(t-d)<Po?n:h}:_o(i-h)<Po&&r-f>Po?{x:_o(n-h)<Po?t:f,y:h}:null),a.site,null)),++l)}function Yn(e,t){return t.angle-e.angle}function Xn(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Wn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,u=r.y-s,c=a.x-o,f=a.y-s,d=2*(l*f-u*c);if(!(d>=-Fo)){var h=l*l+u*u,p=c*c+f*f,g=(f*h-u*p)/d,m=(l*p-c*h)/d,f=m+s,v=cl.pop()||new Xn;v.arc=e,v.site=i,v.x=g+o,v.y=f+Math.sqrt(g*g+m*m),v.cy=f,e.circle=v;for(var y=null,b=ll._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}ll.insert(y,v),y||(sl=v)}}}}function Gn(e){var t=e.circle;t&&(t.P||(sl=t.N),ll.remove(t),cl.push(t),rr(t),e.circle=null)}function Vn(e){for(var t,n=il,r=zt(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Kn(t,e)||!r(t)||_o(t.a.x-t.b.x)<Po&&_o(t.a.y-t.b.y)<Po)&&(t.a=t.b=null,n.splice(i,1))}function Kn(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,f=e.r,d=c.x,h=c.y,p=f.x,g=f.y,m=(d+p)/2,v=(h+g)/2;if(g===h){if(m<o||m>=s)return;if(d>p){if(a){if(a.y>=u)return}else a={x:m,y:l};n={x:m,y:u}}else{if(a){if(a.y<l)return}else a={x:m,y:u};n={x:m,y:l}}}else if(r=(d-p)/(g-h),i=v-r*m,r<-1||r>1)if(d>p){if(a){if(a.y>=u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(h<g){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function Zn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Qn(e,t,n,r){var i=new Zn(e,t);return il.push(i),n&&er(i,e,t,n),r&&er(i,t,e,r),al[e.i].edges.push(new tr(i,e,t)),al[t.i].edges.push(new tr(i,t,e)),i}function Jn(e,t,n){var r=new Zn(e,null);return r.a=t,r.b=n,il.push(r),r}function er(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function tr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ir(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ar(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function or(e){for(;e.L;)e=e.L;return e}function sr(e,t){var n,r,i,a=e.sort(lr).pop();for(il=[],al=new Array(e.length),ol=new nr,ll=new nr;;)if(i=sl,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(al[a.i]=new Bn(a),jn(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;Un(i.arc)}t&&(Vn(t),qn(t));var o={cells:al,edges:il};return ol=ll=il=al=null,o}function lr(e,t){return t.y-e.y||t.x-e.x}function ur(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function cr(e){return e.x}function fr(e){return e.y}function dr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hr(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),l=t.nodes;l[0]&&hr(e,l[0],n,r,o,s),l[1]&&hr(e,l[1],o,r,i,s),l[2]&&hr(e,l[2],n,s,o,a),l[3]&&hr(e,l[3],o,s,i,a)}}function pr(e,t,n,r,i,a,o){var s,l=1/0;return function u(e,c,f,d,h){if(!(c>a||f>o||d<r||h<i)){if(p=e.point){var p,g=t-e.x,m=n-e.y,v=g*g+m*m;if(v<l){var y=Math.sqrt(l=v);r=t-y,i=n-y,a=t+y,o=n+y,s=p}}for(var b=e.nodes,_=.5*(c+d),E=.5*(f+h),x=t>=_,S=n>=E,T=S<<1|x,w=T+4;T<w;++T)if(e=b[3&T])switch(3&T){case 0:u(e,c,f,_,E);break;case 1:u(e,_,f,d,E);break;case 2:u(e,c,E,_,h);break;case 3:u(e,_,E,d,h)}}}(e,r,i,a,o),s}function gr(e,t){e=so.rgb(e),t=so.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,o=t.g-r,s=t.b-i;return function(e){return"#"+_e(Math.round(n+a*e))+_e(Math.round(r+o*e))+_e(Math.round(i+s*e))}}function mr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=br(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function vr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function yr(e,t){var n,r,i,a=dl.lastIndex=hl.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=dl.exec(e))&&(r=hl.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:vr(n,r)})),a=hl.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function br(e,t){for(var n,r=so.interpolators.length;--r>=0&&!(n=so.interpolators[r](e,t)););return n}function _r(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(br(e[n],t[n]));for(;n<a;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}function Er(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function xr(e){return function(t){return 1-e(1-t)}}function Sr(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Tr(e){return e*e}function wr(e){return e*e*e}function Ar(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Cr(e){return function(t){return Math.pow(t,e)}}function kr(e){return 1-Math.cos(e*zo)}function Or(e){return Math.pow(2,10*(e-1))}function Ir(e){return 1-Math.sqrt(1-e*e)}function Mr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/jo*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*jo/t)}}function Nr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Dr(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Lr(e,t){e=so.hcl(e),t=so.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,o=t.c-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:a<-180&&(a+=360),function(e){return ce(n+a*e,r+o*e,i+s*e)+""}}function $r(e,t){e=so.hsl(e),t=so.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,o=t.s-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:a<-180&&(a+=360),function(e){return le(n+a*e,r+o*e,i+s*e)+""}}function Rr(e,t){e=so.lab(e),t=so.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,s=t.b-i;return function(e){return de(n+a*e,r+o*e,i+s*e)+""}}function Pr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Fr(e){var t=[e.a,e.b],n=[e.c,e.d],r=jr(t),i=Ur(t,n),a=jr(Hr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*qo,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*qo:0}function Ur(e,t){return e[0]*t[0]+e[1]*t[1]}function jr(e){var t=Math.sqrt(Ur(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Hr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function zr(e){return e.length?e.pop()+",":""}function Br(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:vr(e[0],t[0])},{i:i-2,x:vr(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function qr(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(zr(n)+"rotate(",null,")")-2,x:vr(e,t)})):t&&n.push(zr(n)+"rotate("+t+")")}function Yr(e,t,n,r){e!==t?r.push({i:n.push(zr(n)+"skewX(",null,")")-2,x:vr(e,t)}):t&&n.push(zr(n)+"skewX("+t+")")}function Xr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(zr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:vr(e[0],t[0])},{i:i-2,x:vr(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(zr(n)+"scale("+t+")")}function Wr(e,t){var n=[],r=[];return e=so.transform(e),t=so.transform(t),Br(e.translate,t.translate,n,r),qr(e.rotate,t.rotate,n,r),Yr(e.skew,t.skew,n,r),Xr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,a=r.length;++i<a;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Gr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Vr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Kr(e){for(var t=e.source,n=e.target,r=Qr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Zr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Qr(e,t){if(e===t)return e;for(var n=Zr(e),r=Zr(t),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function Jr(e){e.fixed|=2}function ei(e){e.fixed&=-7}function ti(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ni(e){e.fixed&=-5}function ri(e,t,n){var r=0,i=0;if(e.charge=0,
!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)a=o[l],null!=a&&(ri(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,i+=u*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ii(e,t){return so.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ci,e}function ai(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function oi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function si(e){return e.children}function li(e){return e.value}function ui(e,t){return t.value-e.value}function ci(e){return so.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function fi(e){return e.x}function di(e){return e.y}function hi(e,t,n){e.y0=t,e.y=n}function pi(e){return so.range(e.length)}function gi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function mi(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function vi(e){return e.reduce(yi,0)}function yi(e,t){return e+t[1]}function bi(e,t){return _i(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function _i(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function Ei(e){return[so.min(e),so.max(e)]}function xi(e,t){return e.value-t.value}function Si(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ti(e,t){e._pack_next=t,t._pack_prev=e}function wi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Ai(e){function t(e){c=Math.min(e.x-e.r,c),f=Math.max(e.x+e.r,f),d=Math.min(e.y-e.r,d),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(u=n.length)){var n,r,i,a,o,s,l,u,c=1/0,f=-(1/0),d=1/0,h=-(1/0);if(n.forEach(Ci),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(i=n[1],i.x=i.r,i.y=0,t(i),u>2))for(a=n[2],Ii(r,i,a),t(a),Si(r,a),r._pack_prev=a,Si(a,i),i=r._pack_next,o=3;o<u;o++){Ii(r,i,a=n[o]);var p=0,g=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(wi(s,a)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!wi(l,a);l=l._pack_prev,m++);p?(g<m||g==m&&i.r<r.r?Ti(r,i=s):Ti(r=l,i),o--):(Si(r,a),i=a,t(a))}var v=(c+f)/2,y=(d+h)/2,b=0;for(o=0;o<u;o++)a=n[o],a.x-=v,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,n.forEach(ki)}}function Ci(e){e._pack_next=e._pack_prev=e}function ki(e){delete e._pack_next,delete e._pack_prev}function Oi(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var a=-1,o=i.length;++a<o;)Oi(i[a],t,n,r)}function Ii(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o,r*=r;var l=.5+(r-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+l*i+u*a,n.y=e.y+l*a-u*i}else n.x=e.x+r,n.y=e.y}function Mi(e,t){return e.parent==t.parent?1:2}function Ni(e){var t=e.children;return t.length?t[0]:e.t}function Di(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Li(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function $i(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ri(e,t,n){return e.a.parent===t.parent?e.a:n}function Pi(e){return 1+so.max(e,function(e){return e.y})}function Fi(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ui(e){var t=e.children;return t&&t.length?Ui(t[0]):e}function ji(e){var t,n=e.children;return n&&(t=n.length)?ji(n[t-1]):e}function Hi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function zi(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Bi(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function qi(e){return e.rangeExtent?e.rangeExtent():Bi(e.range())}function Yi(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function Xi(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function Wi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Tl}function Gi(e,t,n,r){var i=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=s;)i.push(n(e[o-1],e[o])),a.push(r(t[o-1],t[o]));return function(t){var n=so.bisect(e,t,1,s)-1;return a[n](i[n](t))}}function Vi(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Gi:Yi,l=r?Vr:Gr;return o=i(e,t,l,n),s=i(t,e,l,br),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},a.range=function(e){return arguments.length?(t=e,i()):t},a.rangeRound=function(e){return a.range(e).interpolate(Pr)},a.clamp=function(e){return arguments.length?(r=e,i()):r},a.interpolate=function(e){return arguments.length?(n=e,i()):n},a.ticks=function(t){return Ji(e,t)},a.tickFormat=function(t,n){return ea(e,t,n)},a.nice=function(t){return Zi(e,t),i()},a.copy=function(){return Vi(e,t,n,r)},i()}function Ki(e,t){return so.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Zi(e,t){return Xi(e,Wi(Qi(e,t)[2])),Xi(e,Wi(Qi(e,t)[2])),e}function Qi(e,t){null==t&&(t=10);var n=Bi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ji(e,t){return so.range.apply(so,Qi(e,t))}function ea(e,t,n){var r=Qi(e,t);if(n){var i=ds.exec(n);if(i.shift(),"s"===i[8]){var a=so.formatPrefix(Math.max(_o(r[0]),_o(r[1])));return i[7]||(i[7]="."+ta(a.scale(r[2]))),i[8]="f",n=so.format(i.join("")),function(e){return n(a.scale(e))+a.symbol}}i[7]||(i[7]="."+na(i[8],r)),n=i.join("")}else n=",."+ta(r[2])+"f";return so.format(n)}function ta(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function na(e,t){var n=ta(t[2]);return e in wl?Math.abs(n-ta(Math.max(_o(t[0]),_o(t[1]))))+ +("e"!==e):n-2*("%"===e)}function ra(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Xi(r.map(i),n?Math:Cl);return e.domain(t),r=t.map(a),o},o.ticks=function(){var e=Bi(r),o=[],s=e[0],l=e[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),f=t%1?2:t;if(isFinite(c-u)){if(n){for(;u<c;u++)for(var d=1;d<f;d++)o.push(a(u)*d);o.push(a(u))}else for(o.push(a(u));u++<c;)for(var d=f-1;d>0;d--)o.push(a(u)*d);for(u=0;o[u]<s;u++);for(c=o.length;o[c-1]>l;c--);o=o.slice(u,c)}return o},o.tickFormat=function(e,n){if(!arguments.length)return Al;arguments.length<2?n=Al:"function"!=typeof n&&(n=so.format(n));var r=Math.max(1,t*e/o.ticks().length);return function(e){var o=e/a(Math.round(i(e)));return o*t<t-.5&&(o*=t),o<=r?n(e):""}},o.copy=function(){return ra(e.copy(),t,n,r)},Ki(o,e)}function ia(e,t,n){function r(t){return e(i(t))}var i=aa(t),a=aa(1/t);return r.invert=function(t){return a(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Ji(n,e)},r.tickFormat=function(e,t){return ea(n,e,t)},r.nice=function(e){return r.domain(Zi(n,e))},r.exponent=function(o){return arguments.length?(i=aa(t=o),a=aa(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return ia(e.copy(),t,n)},Ki(r,e)}function aa(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oa(e,t){function n(n){return a[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%a.length]}function r(t,n){return so.range(e.length).map(function(e){return t+n*e})}var i,a,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new u;for(var a,o=-1,s=r.length;++o<s;)i.has(a=r[o])||i.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,o=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return a=r(l+c*s/2,c),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return a=r(l+Math.round(c*s/2+(u-l-(e.length-1+s)*c)/2),c),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=(f-c)/(e.length-s+2*l);return a=r(c+d*l,d),u&&a.reverse(),o=d*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=Math.floor((f-c)/(e.length-s+2*l));return a=r(c+Math.round((f-c-(e.length-s)*d)/2),d),u&&a.reverse(),o=Math.round(d*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Bi(t.a[0])},n.copy=function(){return oa(e,t)},n.domain(e)}function sa(e,t){function a(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=so.quantile(e,n/r);return o}function o(e){if(!isNaN(e=+e))return t[so.bisect(s,e)]}var s;return o.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),a()):e},o.range=function(e){return arguments.length?(t=e,a()):t},o.quantiles=function(){return s},o.invertExtent=function(n){return n=t.indexOf(n),n<0?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},o.copy=function(){return sa(e,t)},a()}function la(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function i(){return a=n.length/(t-e),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/a+e,[t,t+1/a]},r.copy=function(){return la(e,t,n)},i()}function ua(e,t){function n(n){if(n<=n)return t[so.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ua(e,t)},n}function ca(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Ji(e,t)},t.tickFormat=function(t,n){return ea(e,t,n)},t.copy=function(){return ca(e)},t}function fa(){return 0}function da(e){return e.innerRadius}function ha(e){return e.outerRadius}function pa(e){return e.startAngle}function ga(e){return e.endAngle}function ma(e){return e&&e.padAngle}function va(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function ya(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,c=e[0]+l,f=e[1]+u,d=t[0]+l,h=t[1]+u,p=(c+d)/2,g=(f+h)/2,m=d-c,v=h-f,y=m*m+v*v,b=n-r,_=c*h-d*f,E=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-_*_)),x=(_*v-m*E)/y,S=(-_*m-v*E)/y,T=(_*v+m*E)/y,w=(-_*m+v*E)/y,A=x-p,C=S-g,k=T-p,O=w-g;return A*A+C*C>k*k+O*O&&(x=T,S=w),[[x-l,S-u],[x*n/b,S*n/b]]}function ba(e){function t(t){function o(){u.push("M",a(e(c),s))}for(var l,u=[],c=[],f=-1,d=t.length,h=Ae(n),p=Ae(r);++f<d;)i.call(this,l=t[f],f)?c.push([+h.call(this,l,f),+p.call(this,l,f)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(""):null}var n=On,r=In,i=Ot,a=_a,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Dl.get(e)||_a).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function _a(e){return e.length>1?e.join("L"):e+"Z"}function Ea(e){return e.join("L")+"Z"}function xa(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Sa(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ta(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function wa(e,t){return e.length<4?_a(e):e[1]+ka(e.slice(1,-1),Oa(e,t))}function Aa(e,t){return e.length<3?Ea(e):e[0]+ka((e.push(e[0]),e),Oa([e[e.length-2]].concat(e,[e[1]]),t))}function Ca(e,t){return e.length<3?_a(e):e[0]+ka(e,Oa(e,t))}function ka(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return _a(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<t.length;u++,l++)a=e[l],s=t[u],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[l];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Oa(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Ia(e){if(e.length<3)return _a(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",La(Rl,o),",",La(Rl,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),$a(l,o,s);return e.pop(),l.push("L",r),l.join("")}function Ma(e){if(e.length<4)return _a(e);for(var t,n=[],r=-1,i=e.length,a=[0],o=[0];++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);for(n.push(La(Rl,a)+","+La(Rl,o)),--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),$a(n,a,o);return n.join("")}function Na(e){for(var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);for(t=[La(Rl,o),",",La(Rl,s)],--r;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),$a(t,o,s);return t.join("")}function Da(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,u=-1;++u<=n;)r=e[u],i=u/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*l);return Ia(e)}function La(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function $a(e,t,n){e.push("C",La(Ll,t),",",La(Ll,n),",",La($l,t),",",La($l,n),",",La(Rl,t),",",La(Rl,n))}function Ra(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Pa(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=Ra(i,a);++t<n;)r[t]=(o+(o=Ra(i=a,a=e[t+1])))/2;return r[t]=o,r}function Fa(e){for(var t,n,r,i,a=[],o=Pa(e),s=-1,l=e.length-1;++s<l;)t=Ra(e[s],e[s+1]),_o(t)<Po?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function Ua(e){return e.length<3?_a(e):e[0]+ka(e,Fa(e))}function ja(e){for(var t,n,r,i=-1,a=e.length;++i<a;)t=e[i],n=t[0],r=t[1]-zo,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Ha(e){function t(t){function l(){g.push("M",s(e(v),f),c,u(e(m.reverse()),f),"Z")}for(var d,h,p,g=[],m=[],v=[],y=-1,b=t.length,_=Ae(n),E=Ae(i),x=n===r?function(){return h}:Ae(r),S=i===a?function(){return p}:Ae(a);++y<b;)o.call(this,d=t[y],y)?(m.push([h=+_.call(this,d,y),p=+E.call(this,d,y)]),v.push([+x.call(this,d,y),+S.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=On,r=On,i=0,a=In,o=Ot,s=_a,l=s.key,u=s,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=a=e,t):a},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Dl.get(e)||_a).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(f=e,t):f},t}function za(e){return e.radius}function Ba(e){return[e.x,e.y]}function qa(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-zo;return[n*Math.cos(r),n*Math.sin(r)]}}function Ya(){return 64}function Xa(){return"circle"}function Wa(e){var t=Math.sqrt(e/Uo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Ga(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Va(e,t,n){return wo(e,Bl),e.namespace=t,e.id=n,e}function Ka(e,t,n,r){var i=e.id,a=e.namespace;return B(e,"function"==typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function Za(e){return null==e&&(e=""),function(){this.textContent=e}}function Qa(e){return null==e?"__transition__":"__transition_"+e+"__"}function Ja(e,t,n,r,i){function a(e){var t=g.delay;return c.t=t+l,t<=e?o(e-t):void(c.c=o)}function o(n){var i=p.active,a=p[i];a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[i],a.event&&a.event.interrupt.call(e,e.__data__,a.index));for(var o in p)if(+o<r){var u=p[o];u.timer.c=null,u.timer.t=NaN,--p.count,delete p[o]}c.c=s,Me(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=r,g.event&&g.event.start.call(e,e.__data__,t),h=[],g.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&h.push(r)}),d=g.ease,f=g.duration}function s(i){for(var a=i/f,o=d(a),s=h.length;s>0;)h[--s].call(e,o);if(a>=1)return g.event&&g.event.end.call(e,e.__data__,t),--p.count?delete p[r]:delete e[n],1}var l,c,f,d,h,p=e[n]||(e[n]={active:0,count:0}),g=p[r];g||(l=i.time,c=Me(a,0,l),g=p[r]={tween:new u,time:l,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++p.count)}function eo(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function to(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function no(e){return e.toISOString()}function ro(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,a=so.bisect(Ql,i);return a==Ql.length?[t.year,Qi(e.map(function(e){return e/31536e6}),n)[2]]:a?t[i/Ql[a-1]<Ql[a]/i?a-1:a]:[tu,Qi(e,n)[2]]}return r.invert=function(t){return io(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(io)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,io(+n+1),t).length}var a=r.domain(),o=Bi(a),s=null==e?i(o,10):"number"==typeof e&&i(o,e);return s&&(e=s[0],t=s[1]),r.domain(Xi(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=io(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=io(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Bi(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],io(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ro(e.copy(),t,n)},Ki(r,e)}function io(e){return new Date(e)}function ao(e){return JSON.parse(e.responseText)}function oo(e){var t=co.createRange();return t.selectNode(co.body),t.createContextualFragment(e.responseText)}var so={version:"3.5.17"},lo=[].slice,uo=function(e){return lo.call(e)},co=this.document;if(co)try{uo(co.documentElement.childNodes)[0].nodeType}catch(fo){uo=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),co)try{co.createElement("DIV").style.setProperty("opacity",0,"")}catch(ho){var po=this.Element.prototype,go=po.setAttribute,mo=po.setAttributeNS,vo=this.CSSStyleDeclaration.prototype,yo=vo.setProperty;po.setAttribute=function(e,t){go.call(this,e,t+"")},po.setAttributeNS=function(e,t,n){mo.call(this,e,t,n+"")},vo.setProperty=function(e,t,n){yo.call(this,e,t+"",n)}}so.ascending=n,so.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},so.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},so.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},so.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},so.sum=function(e,t){var n,r=0,a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)i(n=+e[o])&&(r+=n);else for(;++o<a;)i(n=+t.call(e,e[o],o))&&(r+=n);return r},so.mean=function(e,t){var n,a=0,o=e.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)i(n=r(e[s]))?a+=n:--l;else for(;++s<o;)i(n=r(t.call(e,e[s],s)))?a+=n:--l;if(l)return a/l},so.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},so.median=function(e,t){var a,o=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)i(a=r(e[l]))&&o.push(a);else for(;++l<s;)i(a=r(t.call(e,e[l],l)))&&o.push(a);if(o.length)return so.quantile(o.sort(n),.5)},so.variance=function(e,t){var n,a,o=e.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<o;)i(n=r(e[u]))&&(a=n-s,s+=a/++c,l+=a*(n-s));else for(;++u<o;)i(n=r(t.call(e,e[u],u)))&&(a=n-s,s+=a/++c,l+=a*(n-s));if(c>1)return l/(c-1)},so.deviation=function(){var e=so.variance.apply(this,arguments);return e?Math.sqrt(e):e};var bo=a(n);so.bisectLeft=bo.left,so.bisect=so.bisectRight=bo.right,so.bisector=function(e){return a(1===e.length?function(t,r){return n(e(t),r)}:e)},so.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},so.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},so.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=[t=i,i=e[++n]];return a},so.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=so.min(e,o),r=new Array(n);++t<n;)for(var i,a=-1,s=r[t]=new Array(i);++a<i;)s[a]=e[a][t];return r},so.zip=function(){return so.transpose(arguments)},so.keys=function(e){var t=[];for(var n in e)t.push(n);return t},so.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},so.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},so.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var _o=Math.abs;so.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],a=s(_o(n)),o=-1;if(e*=a,t*=a,n*=a,n<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},so.map=function(e,t){var n=new u;if(e instanceof u)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var Eo="__proto__",xo="\0";l(u,{has:d,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:h,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:f(t),value:this._[t]});return e},size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,f(t),this._[t])}}),so.nest=function(){function e(t,o,s){if(s>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var l,c,f,d,h=-1,p=o.length,g=a[s++],m=new u;++h<p;)(d=m.get(l=g(c=o[h])))?d.push(c):m.set(l,[c]);return t?(c=t(),f=function(n,r){c.set(n,e(t,r,s))}):(c={},f=function(n,r){c[n]=e(t,r,s)}),m.forEach(f),c}function t(e,n){if(n>=a.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(so.map,n,0),0)},i.key=function(e){return a.push(e),i},i.sortKeys=function(e){return o[a.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},so.set=function(e){var t=new v;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},l(v,{has:d,add:function(e){return this._[c(e+="")]=!0,e},remove:h,values:p,size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,f(t))}}),so.behavior={},so.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=b(e,t,t[n]);return e};var So=["webkit","ms","moz","Moz","o","O"];so.dispatch=function(){for(var e=new x,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=S(e);return e},x.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},so.event=null,so.requote=function(e){return e.replace(To,"\\$&")};var To=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,wo={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Ao=function(e,t){return t.querySelector(e)},Co=function(e,t){return t.querySelectorAll(e)},ko=function(e,t){var n=e.matches||e[_(e,"matchesSelector")];return(ko=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(Ao=function(e,t){return Sizzle(e,t)[0]||null},Co=Sizzle,ko=Sizzle.matchesSelector),so.selection=function(){return so.select(co.documentElement)};var Oo=so.selection.prototype=[];Oo.select=function(e){var t,n,r,i,a=[];e=k(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return C(a)},Oo.selectAll=function(e){var t,n,r=[];e=O(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=uo(e.call(n,n.__data__,s,i))),t.parentNode=n);return C(r)};var Io="http://www.w3.org/1999/xhtml",Mo={svg:"http://www.w3.org/2000/svg",xhtml:Io,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};so.ns={prefix:Mo,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Mo.hasOwnProperty(n)?{space:Mo[n],local:e}:e}},Oo.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=so.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(I(t,e[t]));return this}return this.each(I(e,t))},Oo.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=D(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!N(e[i]).test(t))return!1;return!0}for(t in e)this.each(L(t,e[t]));return this}return this.each(L(e,t))},Oo.style=function(e,n,r){var i=arguments.length;if(i<3){if("string"!=typeof e){i<2&&(n="");for(r in e)this.each(R(r,e[r],n));return this}if(i<2){var a=this.node();return t(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(R(e,n,r))},Oo.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},Oo.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Oo.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Oo.append=function(e){return e=F(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Oo.insert=function(e,t){return e=F(e),t=k(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Oo.remove=function(){return this.each(U)},Oo.data=function(e,t){function n(e,n){var r,i,a,o=e.length,f=n.length,d=Math.min(o,f),h=new Array(f),p=new Array(f),g=new Array(o);if(t){var m,v=new u,y=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(v.has(m=t.call(i,i.__data__,r))?g[r]=i:v.set(m,i),y[r]=m);for(r=-1;++r<f;)(i=v.get(m=t.call(n,a=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=a):p[r]=j(a),v.set(m,!0);for(r=-1;++r<o;)r in y&&v.get(y[r])!==!0&&(g[r]=e[r])}else{for(r=-1;++r<d;)i=e[r],a=n[r],i?(i.__data__=a,h[r]=i):p[r]=j(a);for(;r<f;++r)p[r]=j(n[r]);for(;r<o;++r)g[r]=e[r]}p.update=h,p.parentNode=h.parentNode=g.parentNode=e.parentNode,s.push(p),l.push(h),c.push(g)}var r,i,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(e[a]=i.__data__);return e}var s=q([]),l=C([]),c=C([]);if("function"==typeof e)for(;++a<o;)n(r=this[a],e.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],e);return l.enter=function(){return s},l.exit=function(){return c},l},Oo.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Oo.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=H(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return C(i)},Oo.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Oo.sort=function(e){e=z.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Oo.each=function(e){return B(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Oo.call=function(e){var t=uo(arguments);return e.apply(t[0]=this,t),this},Oo.empty=function(){return!this.node()},Oo.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Oo.size=function(){var e=0;return B(this,function(){++e}),e};var No=[];so.selection.enter=q,so.selection.enter.prototype=No,No.append=Oo.append,No.empty=Oo.empty,No.node=Oo.node,No.call=Oo.call,No.size=Oo.size,No.select=function(e){for(var t,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(a=i[u])?(t.push(r[u]=n=e.call(i.parentNode,a.__data__,u,s)),n.__data__=a.__data__):t.push(null)}return C(o)},No.insert=function(e,t){return arguments.length<2&&(t=Y(this)),Oo.insert.call(this,e,t)},so.select=function(t){var n;return"string"==typeof t?(n=[Ao(t,co)],n.parentNode=co.documentElement):(n=[t],n.parentNode=e(t)),C([n])},so.selectAll=function(e){var t;return"string"==typeof e?(t=uo(Co(e,co)),t.parentNode=co.documentElement):(t=uo(e),t.parentNode=null),C([t])},Oo.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){r<2&&(t=!1);for(n in e)this.each(X(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(X(e,t,n))};var Do=so.map({mouseenter:"mouseover",mouseleave:"mouseout"});co&&Do.forEach(function(e){"on"+e in co&&Do.remove(e)});var Lo,$o=0;so.mouse=function(e){return K(e,w())};var Ro=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;so.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=w().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return K(e,r);
},so.behavior.drag=function(){function e(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function n(e,t,n,a,o){return function(){function s(){var e,n,r=t(d,g);r&&(e=r[0]-b[0],n=r[1]-b[1],p|=e|n,b=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:e,dy:n}))}function l(){t(d,g)&&(v.on(a+m,null).on(o+m,null),y(p),h({type:"dragend"}))}var u,c=this,f=so.event.target.correspondingElement||so.event.target,d=c.parentNode,h=r.of(c,arguments),p=0,g=e(),m=".drag"+(null==g?"":"-"+g),v=so.select(n(f)).on(a+m,s).on(o+m,l),y=V(f),b=t(d,g);i?(u=i.apply(c,arguments),u=[u.x-b[0],u.y-b[1]]):u=[0,0],h({type:"dragstart"})}}var r=A(e,"drag","dragstart","dragend"),i=null,a=n(E,so.mouse,t,"mousemove","mouseup"),o=n(Z,so.touch,y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},so.rebind(e,r,"on")},so.touches=function(e,t){return arguments.length<2&&(t=w().touches),t?uo(t).map(function(t){var n=K(e,t);return n.identifier=t.identifier,n}):[]};var Po=1e-6,Fo=Po*Po,Uo=Math.PI,jo=2*Uo,Ho=jo-Po,zo=Uo/2,Bo=Uo/180,qo=180/Uo,Yo=Math.SQRT2,Xo=2,Wo=4;so.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-i,f=l-a,d=c*c+f*f;if(d<Fo)r=Math.log(u/o)/Yo,n=function(e){return[i+e*c,a+e*f,o*Math.exp(Yo*e*r)]};else{var h=Math.sqrt(d),p=(u*u-o*o+Wo*d)/(2*o*Xo*h),g=(u*u-o*o-Wo*d)/(2*u*Xo*h),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/Yo,n=function(e){var t=e*r,n=re(m),s=o/(Xo*h)*(n*ie(Yo*t+m)-ne(m));return[i+s*c,a+s*f,o*n/re(Yo*t+m)]}}return n.duration=1e3*r,n},so.behavior.zoom=function(){function e(e){e.on(M,f).on(Vo+".zoom",h).on("dblclick.zoom",p).on(L,d)}function n(e){return[(e[0]-w.x)/w.k,(e[1]-w.y)/w.k]}function r(e){return[e[0]*w.k+w.x,e[1]*w.k+w.y]}function i(e){w.k=Math.max(k[0],Math.min(k[1],e))}function a(e,t){t=r(t),w.x+=e[0]-t[0],w.y+=e[1]-t[1]}function o(t,n,r,o){t.__chart__={x:w.x,y:w.y,k:w.k},i(Math.pow(2,o)),a(m=n,r),t=so.select(t),O>0&&(t=t.transition().duration(O)),t.call(e.event)}function s(){E&&E.domain(_.range().map(function(e){return(e-w.x)/w.k}).map(_.invert)),S&&S.domain(x.range().map(function(e){return(e-w.y)/w.k}).map(x.invert))}function l(e){I++||e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function c(e){--I||(e({type:"zoomend"}),m=null)}function f(){function e(){s=1,a(so.mouse(i),d),u(o)}function r(){f.on(N,null).on(D,null),h(s),c(o)}var i=this,o=$.of(i,arguments),s=0,f=so.select(t(i)).on(N,e).on(D,r),d=n(so.mouse(i)),h=V(i);zl.call(i),l(o)}function d(){function e(){var e=so.touches(p);return h=w.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=n(e))}),e}function t(){var t=so.event.target;so.select(t).on(_,r).on(E,s),x.push(t);for(var n=so.event.changedTouches,i=0,a=n.length;i<a;++i)m[n[i].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(u-b<500){var c=l[0];o(p,c,m[c.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1),T()}b=u}else if(l.length>1){var c=l[0],f=l[1],d=c[0]-f[0],h=c[1]-f[1];v=d*d+h*h}}function r(){var e,t,n,r,o=so.touches(p);zl.call(p);for(var s=0,l=o.length;s<l;++s,r=null)if(n=o[s],r=m[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,f=v&&Math.sqrt(c/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(f*h)}b=null,a(e,t),u(g)}function s(){if(so.event.touches.length){for(var t=so.event.changedTouches,n=0,r=t.length;n<r;++n)delete m[t[n].identifier];for(var i in m)return void e()}so.selectAll(x).on(y,null),S.on(M,f).on(L,d),A(),c(g)}var h,p=this,g=$.of(p,arguments),m={},v=0,y=".zoom-"+so.event.changedTouches[0].identifier,_="touchmove"+y,E="touchend"+y,x=[],S=so.select(p),A=V(p);t(),l(g),S.on(M,null).on(L,t)}function h(){var e=$.of(this,arguments);y?clearTimeout(y):(zl.call(this),g=n(m=v||so.mouse(this)),l(e)),y=setTimeout(function(){y=null,c(e)},50),T(),i(Math.pow(2,.002*Go())*w.k),a(m,g),u(e)}function p(){var e=so.mouse(this),t=Math.log(w.k)/Math.LN2;o(this,e,n(e),so.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var g,m,v,y,b,_,E,x,S,w={x:0,y:0,k:1},C=[960,500],k=Ko,O=250,I=0,M="mousedown.zoom",N="mousemove.zoom",D="mouseup.zoom",L="touchstart.zoom",$=A(e,"zoomstart","zoom","zoomend");return Vo||(Vo="onwheel"in co?(Go=function(){return-so.event.deltaY*(so.event.deltaMode?120:1)},"wheel"):"onmousewheel"in co?(Go=function(){return so.event.wheelDelta},"mousewheel"):(Go=function(){return-so.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=$.of(this,arguments),t=w;jl?so.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var n=C[0],r=C[1],i=m?m[0]:n/2,a=m?m[1]:r/2,o=so.interpolateZoom([(i-w.x)/w.k,(a-w.y)/w.k,n/w.k],[(i-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var r=o(t),s=n/r[2];this.__chart__=w={x:i-r[0]*s,y:a-r[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=w,l(e),u(e),c(e))})},e.translate=function(t){return arguments.length?(w={x:+t[0],y:+t[1],k:w.k},s(),e):[w.x,w.y]},e.scale=function(t){return arguments.length?(w={x:w.x,y:w.y,k:null},i(+t),s(),e):w.k},e.scaleExtent=function(t){return arguments.length?(k=null==t?Ko:[+t[0],+t[1]],e):k},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(C=t&&[+t[0],+t[1]],e):C},e.duration=function(t){return arguments.length?(O=+t,e):O},e.x=function(t){return arguments.length?(E=t,_=t.copy(),w={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(S=t,x=t.copy(),w={x:0,y:0,k:1},e):S},so.rebind(e,$,"on")};var Go,Vo,Ko=[0,1/0];so.color=oe,oe.prototype.toString=function(){return this.rgb()+""},so.hsl=se;var Zo=se.prototype=new oe;Zo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Zo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Zo.rgb=function(){return le(this.h,this.s,this.l)},so.hcl=ue;var Qo=ue.prototype=new oe;Qo.brighter=function(e){return new ue(this.h,this.c,Math.min(100,this.l+Jo*(arguments.length?e:1)))},Qo.darker=function(e){return new ue(this.h,this.c,Math.max(0,this.l-Jo*(arguments.length?e:1)))},Qo.rgb=function(){return ce(this.h,this.c,this.l).rgb()},so.lab=fe;var Jo=18,es=.95047,ts=1,ns=1.08883,rs=fe.prototype=new oe;rs.brighter=function(e){return new fe(Math.min(100,this.l+Jo*(arguments.length?e:1)),this.a,this.b)},rs.darker=function(e){return new fe(Math.max(0,this.l-Jo*(arguments.length?e:1)),this.a,this.b)},rs.rgb=function(){return de(this.l,this.a,this.b)},so.rgb=ve;var is=ve.prototype=new oe;is.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ve(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ve(i,i,i)},is.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ve(e*this.r,e*this.g,e*this.b)},is.hsl=function(){return xe(this.r,this.g,this.b)},is.toString=function(){return"#"+_e(this.r)+_e(this.g)+_e(this.b)};var as=so.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});as.forEach(function(e,t){as.set(e,ye(t))}),so.functor=Ae,so.xhr=Ce(y),so.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var o=ke(e,t,null==n?r:i(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=u)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<u;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,a={},o={},s=[],u=e.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new v,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},so.csv=so.dsv(",","text/csv"),so.tsv=so.dsv("\t","text/tab-separated-values");var os,ss,ls,us,cs=this[_(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};so.timer=function(){Me.apply(this,arguments)},so.timer.flush=function(){De(),Le()},so.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var fs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Re);so.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=so.round(e,$e(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),fs[8+n/3]};var ds=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,hs=so.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=so.round(e,$e(e,t))).toFixed(Math.max(0,Math.min(20,$e(e*(1+1e-15),t))))}}),ps=so.time={},gs=Date;Ue.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ms.setUTCDate.apply(this._,arguments)},setDay:function(){ms.setUTCDay.apply(this._,arguments)},setFullYear:function(){ms.setUTCFullYear.apply(this._,arguments)},setHours:function(){ms.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ms.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ms.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ms.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ms.setUTCSeconds.apply(this._,arguments)},setTime:function(){ms.setTime.apply(this._,arguments)}};var ms=Date.prototype;ps.year=je(function(e){return e=ps.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ps.years=ps.year.range,ps.years.utc=ps.year.utc.range,ps.day=je(function(e){var t=new gs(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ps.days=ps.day.range,ps.days.utc=ps.day.utc.range,ps.dayOfYear=function(e){var t=ps.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ps[e]=je(function(e){return(e=ps.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ps[e+"s"]=n.range,ps[e+"s"].utc=n.utc.range,ps[e+"OfYear"]=function(e){var n=ps.year(e).getDay();return Math.floor((ps.dayOfYear(e)+(n+t)%7)/7)}}),ps.week=ps.sunday,ps.weeks=ps.sunday.range,ps.weeks.utc=ps.sunday.utc.range,ps.weekOfYear=ps.sundayOfYear;var vs={"-":"",_:" ",0:"0"},ys=/^\s*\d+/,bs=/^%/;so.locale=function(e){return{numberFormat:Pe(e),timeFormat:ze(e)}};var _s=so.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});so.format=_s.numberFormat,so.geo={},ut.prototype={s:0,t:0,add:function(e){ct(e,this.t,Es),ct(Es.s,this.s,this),this.s?this.t+=Es.t:this.s=Es.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Es=new ut;so.geo.stream=function(e,t){e&&xs.hasOwnProperty(e.type)?xs[e.type](e,t):ft(e,t)};var xs={Feature:function(e,t){ft(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ft(n[r].geometry,t)}},Ss={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){dt(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)dt(n[r],t,0)},Polygon:function(e,t){ht(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ht(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ft(n[r],t)}};so.geo.area=function(e){return Ts=0,so.geo.stream(e,As),Ts};var Ts,ws=new ut,As={sphere:function(){Ts+=4*Uo},point:E,lineStart:E,lineEnd:E,polygonStart:function(){ws.reset(),As.lineStart=pt},polygonEnd:function(){var e=2*ws;Ts+=e<0?4*Uo+e:e,As.lineStart=As.lineEnd=As.point=E}};so.geo.bounds=function(){function e(e,t){b.push(_=[c=e,d=e]),t<f&&(f=t),t>h&&(h=t)}function t(t,n){var r=gt([t*Bo,n*Bo]);if(v){var i=vt(v,r),a=[i[1],-i[0],0],o=vt(a,i);_t(o),o=Et(o);var l=t-p,u=l>0?1:-1,g=o[0]*qo*u,m=_o(l)>180;if(m^(u*p<g&&g<u*t)){var y=o[1]*qo;y>h&&(h=y)}else if(g=(g+360)%360-180,m^(u*p<g&&g<u*t)){var y=-o[1]*qo;y<f&&(f=y)}else n<f&&(f=n),n>h&&(h=n);m?t<p?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t):d>=c?(t<c&&(c=t),t>d&&(d=t)):t>p?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t)}else e(t,n);v=r,p=t}function n(){E.point=t}function r(){_[0]=c,_[1]=d,E.point=e,v=null}function i(e,n){if(v){var r=e-p;y+=_o(r)>180?r+(r>0?360:-360):r}else g=e,m=n;As.point(e,n),t(e,n)}function a(){As.lineStart()}function o(){i(g,m),As.lineEnd(),_o(y)>Po&&(c=-(d=180)),_[0]=c,_[1]=d,v=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,d,h,p,g,m,v,y,b,_,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=a,E.lineEnd=o,y=0,As.polygonStart()},polygonEnd:function(){As.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,ws<0?(c=-(d=180),f=-(h=90)):y>Po?h=90:y<-Po&&(f=-90),_[0]=c,_[1]=d}};return function(e){h=d=-(c=f=1/0),b=[],so.geo.stream(e,E);var t=b.length;if(t){b.sort(l);for(var n,r=1,i=b[0],a=[i];r<t;++r)n=b[r],u(n[0],i)||u(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var o,n,p=-(1/0),t=a.length-1,r=0,i=a[t];r<=t;i=n,++r)n=a[r],(o=s(i[1],n[0]))>p&&(p=o,c=n[0],d=i[1])}return b=_=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[d,h]]}}(),so.geo.centroid=function(e){Cs=ks=Os=Is=Ms=Ns=Ds=Ls=$s=Rs=Ps=0,so.geo.stream(e,Fs);var t=$s,n=Rs,r=Ps,i=t*t+n*n+r*r;return i<Fo&&(t=Ns,n=Ds,r=Ls,ks<Po&&(t=Os,n=Is,r=Ms),i=t*t+n*n+r*r,i<Fo)?[NaN,NaN]:[Math.atan2(n,t)*qo,te(r/Math.sqrt(i))*qo]};var Cs,ks,Os,Is,Ms,Ns,Ds,Ls,$s,Rs,Ps,Fs={sphere:E,point:St,lineStart:wt,lineEnd:At,polygonStart:function(){Fs.lineStart=Ct},polygonEnd:function(){Fs.lineStart=wt}},Us=Dt(Ot,Pt,Ut,[-Uo,-Uo/2]),js=1e9;so.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),i=a(e),i.valid=!0,i},extent:function(s){return arguments.length?(a=Bt(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(so.geo.conicEqualArea=function(){return qt(Yt)}).raw=Yt,so.geo.albers=function(){return so.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},so.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(r(a,o),t)||i(a,o),t}var t,n,r,i,a=so.geo.albers(),o=so.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=so.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var u=a.scale(),c=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=o.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Po,f+.12*u+Po],[c-.214*u-Po,f+.234*u-Po]]).stream(l).point,i=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Po,f+.166*u+Po],[c-.115*u-Po,f+.234*u-Po]]).stream(l).point,e},e.scale(1070)};var Hs,zs,Bs,qs,Ys,Xs,Ws={point:E,lineStart:E,lineEnd:E,polygonStart:function(){zs=0,Ws.lineStart=Xt},polygonEnd:function(){Ws.lineStart=Ws.lineEnd=Ws.point=E,Hs+=_o(zs/2)}},Gs={point:Wt,lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E},Vs={point:Kt,lineStart:Zt,lineEnd:Qt,polygonStart:function(){Vs.lineStart=Jt},polygonEnd:function(){Vs.point=Kt,Vs.lineStart=Zt,Vs.lineEnd=Qt}};so.geo.path=function(){function e(e){return e&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(a)),so.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,r,i,a,o,s=4.5;return e.area=function(e){return Hs=0,so.geo.stream(e,i(Ws)),Hs},e.centroid=function(e){return Os=Is=Ms=Ns=Ds=Ls=$s=Rs=Ps=0,so.geo.stream(e,i(Vs)),Ps?[$s/Ps,Rs/Ps]:Ls?[Ns/Ls,Ds/Ls]:Ms?[Os/Ms,Is/Ms]:[NaN,NaN]},e.bounds=function(e){return Ys=Xs=-(Bs=qs=1/0),so.geo.stream(e,i(Gs)),[[Bs,qs],[Ys,Xs]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||nn(e):y,t()):n},e.context=function(e){return arguments.length?(a=null==(r=e)?new Gt:new en(e),"function"!=typeof s&&a.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(a.pointRadius(+t),+t),e):s},e.projection(so.geo.albersUsa()).context(null)},so.geo.transform=function(e){return{stream:function(t){var n=new rn(t);for(var r in e)n[r]=e[r];return n}}},rn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},so.geo.projection=on,so.geo.projectionMutator=sn,(so.geo.equirectangular=function(){return on(un)}).raw=un.invert=un,so.geo.rotation=function(e){function t(t){return t=e(t[0]*Bo,t[1]*Bo),t[0]*=qo,t[1]*=qo,t}return e=fn(e[0]%360*Bo,e[1]*Bo,e.length>2?e[2]*Bo:0),t.invert=function(t){return t=e.invert(t[0]*Bo,t[1]*Bo),t[0]*=qo,t[1]*=qo,t},t},cn.invert=un,so.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=fn(-e[0]*Bo,-e[1]*Bo,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=qo,e[1]*=qo}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=gn((t=+r)*Bo,i*Bo),e):t},e.precision=function(r){return arguments.length?(n=gn(t*Bo,(i=+r)*Bo),e):i},e.angle(90)},so.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Bo,i=e[1]*Bo,a=t[1]*Bo,o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},so.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return so.range(Math.ceil(a/m)*m,i,m).map(d).concat(so.range(Math.ceil(u/v)*v,l,v).map(h)).concat(so.range(Math.ceil(r/p)*p,n,p).filter(function(e){return _o(e%m)>Po}).map(c)).concat(so.range(Math.ceil(s/g)*g,o,g).filter(function(e){return _o(e%v)>Po}).map(f))}var n,r,i,a,o,s,l,u,c,f,d,h,p=10,g=p,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(l).slice(1),d(i).reverse().slice(1),h(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],u=+t[0][1],l=+t[1][1],a>i&&(t=a,a=i,i=t),u>l&&(t=u,u=l,l=t),e.precision(y)):[[a,u],[i,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(y)):[[r,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,c=vn(s,o,90),f=yn(r,n,y),d=vn(u,l,90),h=yn(a,i,y),e):y},e.majorExtent([[-180,-90+Po],[180,90-Po]]).minorExtent([[-180,-80-Po],[180,80+Po]])},so.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=bn,i=_n;return e.distance=function(){return so.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},so.geo.interpolate=function(e,t){return En(e[0]*Bo,e[1]*Bo,t[0]*Bo,t[1]*Bo)},so.geo.length=function(e){return Ks=0,so.geo.stream(e,Zs),Ks};var Ks,Zs={sphere:E,point:E,lineStart:xn,lineEnd:E,polygonStart:E,polygonEnd:E},Qs=Sn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(so.geo.azimuthalEqualArea=function(){return on(Qs)}).raw=Qs;var Js=Sn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},y);(so.geo.azimuthalEquidistant=function(){return on(Js)}).raw=Js,(so.geo.conicConformal=function(){return qt(Tn)}).raw=Tn,(so.geo.conicEquidistant=function(){return qt(wn)}).raw=wn;var el=Sn(function(e){return 1/e},Math.atan);(so.geo.gnomonic=function(){return on(el)}).raw=el,An.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-zo]},(so.geo.mercator=function(){return Cn(An)}).raw=An;var tl=Sn(function(){return 1},Math.asin);(so.geo.orthographic=function(){return on(tl)}).raw=tl;var nl=Sn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(so.geo.stereographic=function(){return on(nl)}).raw=nl,kn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-zo]},(so.geo.transverseMercator=function(){var e=Cn(kn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=kn,so.geom={},so.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Ae(n),a=Ae(r),o=e.length,s=[],l=[];for(t=0;t<o;t++)s.push([+i.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(Nn),t=0;t<o;t++)l.push([s[t][0],-s[t][1]]);var u=Mn(s),c=Mn(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],h=[];for(t=u.length-1;t>=0;--t)h.push(e[s[u[t]][2]]);for(t=+f;t<c.length-d;++t)h.push(e[s[c[t]][2]]);return h}var n=On,r=In;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},so.geom.polygon=function(e){return wo(e,rl),e};var rl=so.geom.polygon.prototype=[];rl.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},rl.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},rl.clip=function(e){for(var t,n,r,i,a,o,s=$n(e),l=-1,u=this.length-$n(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,i=this[l],a=t[(r=t.length-s)-1],n=-1;++n<r;)o=t[n],Dn(o,c,i)?(Dn(a,c,i)||e.push(Ln(a,o,c,i)),e.push(o)):Dn(a,c,i)&&e.push(Ln(a,o,c,i)),a=o;s&&e.push(e[0]),c=i}return e};var il,al,ol,sl,ll,ul=[],cl=[];Bn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Yn),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=or(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ir(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ar(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ar(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ir(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?or(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ar(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ar(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ar(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},so.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],a=s[1][0],o=s[1][1];return sr(n(e),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=a&&u.y>=i&&u.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Po)*Po,y:Math.round(o(e,t)/Po)*Po,i:t}})}var r=On,i=In,a=r,o=i,s=fl;return e?t(e):(t.links=function(e){return sr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return sr(n(e)).cells.forEach(function(n,r){for(var i,a,o=n.site,s=n.edges.sort(Yn),l=-1,u=s.length,c=s[u-1].edge,f=c.l===o?c.r:c.l;++l<u;)i=c,a=f,c=s[l].edge,f=c.l===o?c.r:c.l,r<a.i&&r<f.i&&ur(o,a,f)<0&&t.push([e[r],e[a.i],e[f.i]])}),t},t.x=function(e){return arguments.length?(a=Ae(r=e),t):r},t.y=function(e){return arguments.length?(o=Ae(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?fl:e,t):s===fl?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===fl?null:s&&s[1]},t)};var fl=[[-1e6,-1e6],[1e6,1e6]];so.geom.delaunay=function(e){return so.geom.voronoi().triangles(e)},so.geom.quadtree=function(e,t,n,r,i){function a(e){function a(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(_o(l-n)+_o(c-r)<.01)u(e,t,n,r,i,a,o,s);else{var f=e.point;e.x=e.y=e.point=null,u(e,f,l,c,i,a,o,s),u(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,i,a,o,s)}function u(e,t,n,r,i,o,s,l){var u=.5*(i+s),c=.5*(o+l),f=n>=u,d=r>=c,h=d<<1|f;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=dr()),f?i=u:s=u,d?o=c:l=c,a(e,t,n,r,i,o,s,l)}var c,f,d,h,p,g,m,v,y,b=Ae(s),_=Ae(l);if(null!=t)g=t,m=n,v=r,y=i;else if(v=y=-(g=m=1/0),f=[],d=[],p=e.length,o)for(h=0;h<p;++h)c=e[h],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),f.push(c.x),d.push(c.y);else for(h=0;h<p;++h){var E=+b(c=e[h],h),x=+_(c,h);E<g&&(g=E),x<m&&(m=x),E>v&&(v=E),x>y&&(y=x),f.push(E),d.push(x)}var S=v-g,T=y-m;S>T?y=m+S:v=g+T;var w=dr();if(w.add=function(e){
a(w,e,+b(e,++h),+_(e,h),g,m,v,y)},w.visit=function(e){hr(e,w,g,m,v,y)},w.find=function(e){return pr(w,e[0],e[1],g,m,v,y)},h=-1,null==t){for(;++h<p;)a(w,e[h],f[h],d[h],g,m,v,y);--h}else e.forEach(w.add);return f=d=e=c=null,w}var o,s=On,l=In;return(o=arguments.length)?(s=cr,l=fr,3===o&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):null==t?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):null==t?null:[r-t,i-n]},a)},so.interpolateRgb=gr,so.interpolateObject=mr,so.interpolateNumber=vr,so.interpolateString=yr;var dl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hl=new RegExp(dl.source,"g");so.interpolate=br,so.interpolators=[function(e,t){var n=typeof t;return("string"===n?as.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gr:yr:t instanceof oe?gr:Array.isArray(t)?_r:"object"===n&&isNaN(t)?mr:vr)(e,t)}],so.interpolateArray=_r;var pl=function(){return y},gl=so.map({linear:pl,poly:Cr,quad:function(){return Tr},cubic:function(){return wr},sin:function(){return kr},exp:function(){return Or},circle:function(){return Ir},elastic:Mr,back:Nr,bounce:function(){return Dr}}),ml=so.map({"in":y,out:xr,"in-out":Sr,"out-in":function(e){return Sr(xr(e))}});so.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=gl.get(n)||pl,r=ml.get(r)||y,Er(r(n.apply(null,lo.call(arguments,1))))},so.interpolateHcl=Lr,so.interpolateHsl=$r,so.interpolateLab=Rr,so.interpolateRound=Pr,so.transform=function(e){var t=co.createElementNS(so.ns.prefix.svg,"g");return(so.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Fr(n?n.matrix:vl)})(e)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var vl={a:1,b:0,c:0,d:1,e:0,f:0};so.interpolateTransform=Wr,so.layout={},so.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Kr(e[n]));return t}},so.layout.chord=function(){function e(){var e,u,f,d,h,p={},g=[],m=so.range(a),v=[];for(n=[],r=[],e=0,d=-1;++d<a;){for(u=0,h=-1;++h<a;)u+=i[d][h];g.push(u),v.push(so.range(a)),e+=u}for(o&&m.sort(function(e,t){return o(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(jo-c*a)/e,u=0,d=-1;++d<a;){for(f=u,h=-1;++h<a;){var y=m[d],b=v[y][h],_=i[y][b],E=u,x=u+=_*e;p[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:x,value:_}}r[y]={index:y,startAngle:f,endAngle:u,value:g[y]},u+=c}for(d=-1;++d<a;)for(h=d-1;++h<a;){var S=p[d+"-"+h],T=p[h+"-"+d];(S.value||T.value)&&n.push(S.value<T.value?{source:T,target:S}:{source:S,target:T})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,a,o,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(a=(i=e)&&i.length,n=r=null,u):i},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(o=e,n=r=null,u):o},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},so.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,l=a*a+o*o;if(s*s/v<l){if(l<g){var u=t.charge/l;e.px-=a*u,e.py-=o*u}return!0}if(t.point&&l&&l<g){var u=t.pointCharge/l;e.px-=a*u,e.py-=o*u}}return!t.charge}}function t(e){e.px=so.event.x,e.py=so.event.y,l.resume()}var n,r,i,a,o,s,l={},u=so.dispatch("start","tick","end"),c=[1,1],f=.9,d=yl,h=bl,p=-30,g=_l,m=.1,v=.64,b=[],_=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var t,r,l,d,h,g,v,y,E,x=b.length,S=_.length;for(r=0;r<S;++r)l=_[r],d=l.source,h=l.target,y=h.x-d.x,E=h.y-d.y,(g=y*y+E*E)&&(g=i*o[r]*((g=Math.sqrt(g))-a[r])/g,y*=g,E*=g,h.x-=y*(v=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=E*v,d.x+=y*(v=1-v),d.y+=E*v);if((v=i*m)&&(y=c[0]/2,E=c[1]/2,r=-1,v))for(;++r<x;)l=b[r],l.x+=(y-l.x)*v,l.y+=(E-l.y)*v;if(p)for(ri(t=so.geom.quadtree(b),i,s),r=-1;++r<x;)(l=b[r]).fixed||t.visit(e(l));for(r=-1;++r<x;)l=b[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);u.tick({type:"tick",alpha:i})},l.nodes=function(e){return arguments.length?(b=e,l):b},l.links=function(e){return arguments.length?(_=e,l):_},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,l):d},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,l):h},l.friction=function(e){return arguments.length?(f=+e,l):f},l.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,l):p},l.chargeDistance=function(e){return arguments.length?(g=e*e,l):Math.sqrt(g)},l.gravity=function(e){return arguments.length?(m=+e,l):m},l.theta=function(e){return arguments.length?(v=e*e,l):Math.sqrt(v)},l.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:i=0})):e>0&&(u.start({type:"start",alpha:i=e}),n=Me(l.tick)),l):i},l.start=function(){function e(e,r){if(!n){for(n=new Array(i),l=0;l<i;++l)n[l]=[];for(l=0;l<u;++l){var a=_[l];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[t],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][e]))return o;return Math.random()*r}var t,n,r,i=b.length,u=_.length,f=c[0],g=c[1];for(t=0;t<i;++t)(r=b[t]).index=t,r.weight=0;for(t=0;t<u;++t)r=_[t],"number"==typeof r.source&&(r.source=b[r.source]),"number"==typeof r.target&&(r.target=b[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<i;++t)r=b[t],isNaN(r.x)&&(r.x=e("x",f)),isNaN(r.y)&&(r.y=e("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof d)for(t=0;t<u;++t)a[t]=+d.call(this,_[t],t);else for(t=0;t<u;++t)a[t]=d;if(o=[],"function"==typeof h)for(t=0;t<u;++t)o[t]=+h.call(this,_[t],t);else for(t=0;t<u;++t)o[t]=h;if(s=[],"function"==typeof p)for(t=0;t<i;++t)s[t]=+p.call(this,b[t],t);else for(t=0;t<i;++t)s[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=so.behavior.drag().origin(y).on("dragstart.force",Jr).on("drag.force",t).on("dragend.force",ei)),arguments.length?void this.on("mouseover.force",ti).on("mouseout.force",ni).call(r):r},so.rebind(l,u,"on")};var yl=20,bl=1,_l=1/0;so.layout.hierarchy=function(){function e(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(u=n.call(e,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=u}else r&&(a.value=+r.call(e,a,a.depth)||0),delete a.children;return oi(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=ui,n=si,r=li;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ai(t,function(e){e.children&&(e.value=0)}),oi(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},so.layout.partition=function(){function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,l,u=-1;for(r=t.value?r/t.value:0;++u<o;)e(s=a[u],n,l=s.value*r,i),n+=l}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=so.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},ii(n,r)},so.layout.pie=function(){function e(o){var s,l=o.length,u=o.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/l,+("function"==typeof a?a.apply(this,arguments):a)),h=d*(f<0?-1:1),p=so.sum(u),g=p?(f-l*h)/p:0,m=so.range(l),v=[];return null!=n&&m.sort(n===El?function(e,t){return u[t]-u[e]}:function(e,t){return n(o[e],o[t])}),m.forEach(function(e){v[e]={data:o[e],value:s=u[e],startAngle:c,endAngle:c+=s*g+h,padAngle:d}}),v}var t=Number,n=El,r=0,i=jo,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var El={};so.layout.stack=function(){function e(s,l){if(!(d=s.length))return s;var u=s.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),f=n.call(e,c,l);u=so.permute(u,f),c=so.permute(c,f);var d,h,p,g,m=r.call(e,c,l),v=u[0].length;for(p=0;p<v;++p)for(i.call(e,u[0][p],g=m[p],c[0][p][1]),h=1;h<d;++h)i.call(e,u[h][p],g+=c[h-1][p][1],c[h][p][1]);return s}var t=y,n=pi,r=gi,i=hi,a=fi,o=di;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:xl.get(t)||pi,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Sl.get(t)||gi,e):r},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var xl=so.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(mi),a=e.map(vi),o=so.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,l=0,u=[],c=[];for(t=0;t<r;++t)n=o[t],s<l?(s+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return so.range(e.length).reverse()},"default":pi}),Sl=so.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,r,i,a,o,s,l,u,c=e.length,f=e[0],d=f.length,h=[];for(h[0]=l=u=0,n=1;n<d;++n){for(t=0,i=0;t<c;++t)i+=e[t][n][1];for(t=0,a=0,s=f[n][0]-f[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}h[n]=l-=i?a/i*s:0,l<u&&(u=l)}for(n=0;n<d;++n)h[n]-=u;return h},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:gi});so.layout.histogram=function(){function e(e,a){for(var o,s,l=[],u=e.map(n,this),c=r.call(this,u,a),f=i.call(this,c,u,a),a=-1,d=u.length,h=f.length-1,p=t?1:1/d;++a<h;)o=l[a]=[],o.dx=f[a+1]-(o.x=f[a]),o.y=0;if(h>0)for(a=-1;++a<d;)s=u[a],s>=c[0]&&s<=c[1]&&(o=l[so.bisect(f,s,1,h)-1],o.y+=p,o.push(e[a]));return l}var t=!0,n=Number,r=Ei,i=bi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Ae(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return _i(e,t)}:Ae(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},so.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),s=o[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,oi(s,function(e){e.r=+c(e.value)}),oi(s,Ai),r){var f=r*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;oi(s,function(e){e.r+=f}),oi(s,Ai),oi(s,function(e){e.r-=f})}return Oi(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var t,n=so.layout.hierarchy().sort(xi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},ii(e,n)},so.layout.tree=function(){function e(e,i){var c=o.call(this,e,i),f=c[0],d=t(f);if(oi(d,n),d.parent.m=-d.z,ai(d,r),u)ai(f,a);else{var h=f,p=f,g=f;ai(f,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>g.depth&&(g=e)});var m=s(h,p)/2-h.x,v=l[0]/(p.x+s(p,h)/2+m),y=l[1]/(g.depth||1);ai(f,function(e){e.x=(e.x+m)*v,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){$i(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,a=e,o=t,l=i.parent.children[0],u=i.m,c=a.m,f=o.m,d=l.m;o=Di(o),i=Ni(i),o&&i;)l=Ni(l),a=Di(a),a.a=e,r=o.z+f-i.z-u+s(o._,i._),r>0&&(Li(Ri(o,e,n),e,r),u+=r,c+=r),f+=o.m,u+=i.m,d+=l.m,c+=a.m;o&&!Di(a)&&(a.t=o,a.m+=f-c),i&&!Ni(l)&&(l.t=i,l.m+=u-d,n=e)}return n}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var o=so.layout.hierarchy().sort(null).value(null),s=Mi,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=null==(l=t)?a:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:a,e):u?l:null},ii(e,o)},so.layout.cluster=function(){function e(e,a){var o,s=t.call(this,e,a),l=s[0],u=0;oi(l,function(e){var t=e.children;t&&t.length?(e.x=Fi(t),e.y=Pi(t)):(e.x=o?u+=n(e,o):0,e.y=0,o=e)});var c=Ui(l),f=ji(l),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return oi(l,i?function(e){e.x=(e.x-l.x)*r[0],e.y=(l.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(h-d)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),s}var t=so.layout.hierarchy().sort(null).value(null),n=Mi,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},ii(e,t)},so.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function t(n){var a=n.children;if(a&&a.length){var o,s,l,u=f(n),c=[],d=a.slice(),p=1/0,g="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(o=d[l-1]),c.area+=o.area,"squarify"!==h||(s=r(c,g))<=p?(d.pop(),p=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var a,o=f(t),s=r.slice(),l=[];for(e(s,o.dx*o.dy/t.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(i(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<a&&(a=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*p/r,r/(t*a*p)):1/0}function i(e,t,n,r){var i,a=-1,o=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)i=e[a],i.x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)i=e[a],i.x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(r){var i=o||s(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=u[0],a.dy=u[1]):a.dx=a.dy=0,o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),d&&(o=i),i}var o,s=so.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=Hi,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(u=e,a):u},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Hi(t):zi(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return zi(t,e)}if(!arguments.length)return c;var r;return f=null==(c=e)?Hi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(d=e,o=null,a):d},a.ratio=function(e){return arguments.length?(p=e,a):p},a.mode=function(e){return arguments.length?(h=e+"",a):h},ii(a,s)},so.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=so.random.normal.apply(so,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=so.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},so.scale={};var Tl={floor:y,ceil:y};so.scale.linear=function(){return Vi([0,1],[0,1],br,!1)};var wl={s:1,g:1,p:1,r:1,e:1};so.scale.log=function(){return ra(so.scale.linear().domain([0,1]),10,!0,[1,10])};var Al=so.format(".0e"),Cl={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};so.scale.pow=function(){return ia(so.scale.linear(),1,[0,1])},so.scale.sqrt=function(){return so.scale.pow().exponent(.5)},so.scale.ordinal=function(){return oa([],{t:"range",a:[[]]})},so.scale.category10=function(){return so.scale.ordinal().range(kl)},so.scale.category20=function(){return so.scale.ordinal().range(Ol)},so.scale.category20b=function(){return so.scale.ordinal().range(Il)},so.scale.category20c=function(){return so.scale.ordinal().range(Ml)};var kl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(be),Ol=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(be),Il=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(be),Ml=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(be);so.scale.quantile=function(){return sa([],[])},so.scale.quantize=function(){return la(0,1,[0,1])},so.scale.threshold=function(){return ua([.5],[0,1])},so.scale.identity=function(){return ca([0,1])},so.svg={},so.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-zo,f=s.apply(this,arguments)-zo,d=Math.abs(f-c),h=c>f?0:1;if(u<e&&(p=u,u=e,e=p),d>=Ho)return t(u,h)+(e?t(e,1-h):"")+"Z";var p,g,m,v,y,b,_,E,x,S,T,w,A=0,C=0,k=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=a===Nl?Math.sqrt(e*e+u*u):+a.apply(this,arguments),h||(C*=-1),u&&(C=te(m/u*Math.sin(v))),e&&(A=te(m/e*Math.sin(v)))),u){y=u*Math.cos(c+C),b=u*Math.sin(c+C),_=u*Math.cos(f-C),E=u*Math.sin(f-C);var O=Math.abs(f-c-2*C)<=Uo?0:1;if(C&&va(y,b,_,E)===h^O){var I=(c+f)/2;y=u*Math.cos(I),b=u*Math.sin(I),_=E=null}}else y=b=0;if(e){x=e*Math.cos(f-A),S=e*Math.sin(f-A),T=e*Math.cos(c+A),w=e*Math.sin(c+A);var M=Math.abs(c-f+2*A)<=Uo?0:1;if(A&&va(x,S,T,w)===1-h^M){var N=(c+f)/2;x=e*Math.cos(N),S=e*Math.sin(N),T=w=null}}else x=S=0;if(d>Po&&(p=Math.min(Math.abs(u-e)/2,+i.apply(this,arguments)))>.001){g=e<u^h?0:1;var D=p,L=p;if(d<Uo){var $=null==T?[x,S]:null==_?[y,b]:Ln([y,b],[T,w],[_,E],[x,S]),R=y-$[0],P=b-$[1],F=_-$[0],U=E-$[1],j=1/Math.sin(Math.acos((R*F+P*U)/(Math.sqrt(R*R+P*P)*Math.sqrt(F*F+U*U)))/2),H=Math.sqrt($[0]*$[0]+$[1]*$[1]);L=Math.min(p,(e-H)/(j-1)),D=Math.min(p,(u-H)/(j+1))}if(null!=_){var z=ya(null==T?[x,S]:[T,w],[y,b],u,D,h),B=ya([_,E],[x,S],u,D,h);p===D?k.push("M",z[0],"A",D,",",D," 0 0,",g," ",z[1],"A",u,",",u," 0 ",1-h^va(z[1][0],z[1][1],B[1][0],B[1][1]),",",h," ",B[1],"A",D,",",D," 0 0,",g," ",B[0]):k.push("M",z[0],"A",D,",",D," 0 1,",g," ",B[0])}else k.push("M",y,",",b);if(null!=T){var q=ya([y,b],[T,w],e,-L,h),Y=ya([x,S],null==_?[y,b]:[_,E],e,-L,h);p===L?k.push("L",Y[0],"A",L,",",L," 0 0,",g," ",Y[1],"A",e,",",e," 0 ",h^va(Y[1][0],Y[1][1],q[1][0],q[1][1]),",",1-h," ",q[1],"A",L,",",L," 0 0,",g," ",q[0]):k.push("L",Y[0],"A",L,",",L," 0 0,",g," ",q[0])}else k.push("L",x,",",S)}else k.push("M",y,",",b),null!=_&&k.push("A",u,",",u," 0 ",O,",",h," ",_,",",E),k.push("L",x,",",S),null!=T&&k.push("A",e,",",e," 0 ",M,",",1-h," ",T,",",w);return k.push("Z"),k.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=da,r=ha,i=fa,a=Nl,o=pa,s=ga,l=ma;return e.innerRadius=function(t){return arguments.length?(n=Ae(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Ae(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Ae(t),e):i},e.padRadius=function(t){return arguments.length?(a=t==Nl?Nl:Ae(t),e):a},e.startAngle=function(t){return arguments.length?(o=Ae(t),e):o},e.endAngle=function(t){return arguments.length?(s=Ae(t),e):s},e.padAngle=function(t){return arguments.length?(l=Ae(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-zo;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Nl="auto";so.svg.line=function(){return ba(y)};var Dl=so.map({linear:_a,"linear-closed":Ea,step:xa,"step-before":Sa,"step-after":Ta,basis:Ia,"basis-open":Ma,"basis-closed":Na,bundle:Da,cardinal:Ca,"cardinal-open":wa,"cardinal-closed":Aa,monotone:Ua});Dl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Ll=[0,2/3,1/3,0],$l=[0,1/3,2/3,0],Rl=[0,1/6,2/3,1/6];so.svg.line.radial=function(){var e=ba(ja);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Sa.reverse=Ta,Ta.reverse=Sa,so.svg.area=function(){return Ha(y)},so.svg.area.radial=function(){var e=Ha(ja);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},so.svg.chord=function(){function e(e,s){var l=t(this,a,e,s),u=t(this,o,e,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),a=s.call(e,i,r),o=l.call(e,i,r)-zo,c=u.call(e,i,r)-zo;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Uo)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var a=bn,o=_n,s=za,l=pa,u=ga;return e.radius=function(t){return arguments.length?(s=Ae(t),e):s},e.source=function(t){return arguments.length?(a=Ae(t),e):a},e.target=function(t){return arguments.length?(o=Ae(t),e):o},e.startAngle=function(t){return arguments.length?(l=Ae(t),e):l},e.endAngle=function(t){return arguments.length?(u=Ae(t),e):u},e},so.svg.diagonal=function(){function e(e,i){var a=t.call(this,e,i),o=n.call(this,e,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=bn,n=_n,r=Ba;return e.source=function(n){return arguments.length?(t=Ae(n),e):t},e.target=function(t){return arguments.length?(n=Ae(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},so.svg.diagonal.radial=function(){var e=so.svg.diagonal(),t=Ba,n=e.projection;return e.projection=function(e){return arguments.length?n(qa(t=e)):t},e},so.svg.symbol=function(){function e(e,r){return(Pl.get(t.call(this,e,r))||Wa)(n.call(this,e,r))}var t=Xa,n=Ya;return e.type=function(n){return arguments.length?(t=Ae(n),e):t},e.size=function(t){return arguments.length?(n=Ae(t),e):n},e};var Pl=so.map({circle:Wa,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ul)),n=t*Ul;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Fl),n=t*Fl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Fl),n=t*Fl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});so.svg.symbolTypes=Pl.keys();var Fl=Math.sqrt(3),Ul=Math.tan(30*Bo);Oo.transition=function(e){for(var t,n,r=jl||++ql,i=Qa(e),a=[],o=Hl||{time:Date.now(),ease:Ar,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&Ja(n,c,i,r,o),t.push(n)}return Va(a,i,r)},Oo.interrupt=function(e){return this.each(null==e?zl:Ga(Qa(e)))};var jl,Hl,zl=Ga(Qa()),Bl=[],ql=0;Bl.call=Oo.call,Bl.empty=Oo.empty,Bl.node=Oo.node,Bl.size=Oo.size,so.transition=function(e,t){return e&&e.transition?jl?e.transition(t):e:so.selection().transition(e)},so.transition.prototype=Bl,Bl.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=k(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Ja(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return Va(o,a,i)},Bl.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,l=[];e=O(e);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,h=f.length;++d<h;)if(r=f[d]){a=r[s][o],n=e.call(r,r.__data__,d,u),l.push(t=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Ja(i,p,s,o,a),t.push(i)}return Va(l,s,o)},Bl.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=H(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]);for(var n=this[a],s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return Va(i,this.namespace,this.id)},Bl.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):B(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Bl.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Wr:br,s=so.ns.qualify(e);return Ka(this,"attr."+e,t,s.local?a:i)},Bl.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=so.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Bl.style=function(e,n,r){function i(){this.style.removeProperty(e)}function a(n){return null==n?i:(n+="",function(){var i,a=t(this).getComputedStyle(this,null).getPropertyValue(e);return a!==n&&(i=br(a,n),function(t){this.style.setProperty(e,i(t),r)})})}var o=arguments.length;if(o<3){if("string"!=typeof e){o<2&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return Ka(this,"style."+e,n,a)},Bl.styleTween=function(e,n,r){function i(i,a){var o=n.call(this,i,a,t(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},Bl.text=function(e){return Ka(this,"text",e,Za)},Bl.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Bl.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=so.ease.apply(so,arguments)),B(this,function(r){r[n][t].ease=e}))},Bl.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:B(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},Bl.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:B(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Bl.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Hl,a=jl;try{jl=n,B(this,function(t,i,a){Hl=t[r][n],e.call(t,t.__data__,i,a)})}finally{Hl=i,jl=a}}else B(this,function(i){var a=i[r][n];(a.event||(a.event=so.dispatch("start","end","interrupt"))).on(e,t)});return this},Bl.transition=function(){for(var e,t,n,r,i=this.id,a=++ql,o=this.namespace,s=[],l=0,u=this.length;l<u;l++){s.push(e=[]);for(var t=this[l],c=0,f=t.length;c<f;c++)(n=t[c])&&(r=n[o][i],Ja(n,c,o,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Va(s,o,a)},so.svg.axis=function(){function e(e){e.each(function(){var e,u=so.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),d=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,h=null==t?f.tickFormat?f.tickFormat.apply(f,s):y:t,p=u.selectAll(".tick").data(d,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Po),m=so.transition(p.exit()).style("opacity",Po).remove(),v=so.transition(p.order()).style("opacity",1),b=Math.max(i,0)+o,_=qi(f),E=u.selectAll(".domain").data([0]),x=(E.enter().append("path").attr("class","domain"),so.transition(E));g.append("line"),g.append("text");var S,T,w,A,C=g.select("line"),k=v.select("line"),O=p.select("text").text(h),I=g.select("text"),M=v.select("text"),N="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=eo,S="x",w="y",T="x2",A="y2",O.attr("dy",N<0?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+_[0]+","+N*a+"V0H"+_[1]+"V"+N*a)):(e=to,S="y",w="x",T="y2",A="x2",O.attr("dy",".32em").style("text-anchor",N<0?"end":"start"),x.attr("d","M"+N*a+","+_[0]+"H0V"+_[1]+"H"+N*a)),C.attr(A,N*i),I.attr(w,N*b),k.attr(T,0).attr(A,N*i),M.attr(S,0).attr(w,N*b),f.rangeBand){var D=f,L=D.rangeBand()/2;c=f=function(e){return D(e)+L}}else c.rangeBand?c=f:m.call(e,f,c);g.call(e,c,f),v.call(e,f,f)})}var t,n=so.scale.linear(),r=Yl,i=6,a=6,o=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Xl?t+"":Yl,e):r},e.ticks=function(){return arguments.length?(s=uo(arguments),e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,a=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Yl="bottom",Xl={top:1,right:1,bottom:1,left:1};so.svg.brush=function(){function e(t){t.each(function(){var t=so.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Wl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,f=so.transition(t),d=so.transition(o);
u&&(l=qi(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=qi(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+f[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",f[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function a(){function a(){32==so.event.keyCode&&(O||(b=null,M[0]-=f[1],M[1]-=d[1],O=2),T())}function g(){32==so.event.keyCode&&2==O&&(M[0]+=f[1],M[1]+=d[1],O=0,T())}function m(){var e=so.mouse(E),t=!1;_&&(e[0]+=_[0],e[1]+=_[1]),O||(so.event.altKey?(b||(b=[(f[0]+f[1])/2,(d[0]+d[1])/2]),M[0]=f[+(e[0]<b[0])],M[1]=d[+(e[1]<b[1])]):b=null),C&&v(e,u,0)&&(r(w),t=!0),k&&v(e,c,1)&&(i(w),t=!0),t&&(n(w),S({type:"brush",mode:O?"move":"resize"}))}function v(e,t,n){var r,i,a=qi(t),l=a[0],u=a[1],c=M[n],g=n?d:f,m=g[1]-g[0];if(O&&(l-=c,u-=m+c),r=(n?p:h)?Math.max(l,Math.min(u,e[n])):e[n],O?i=(r+=c)+m:(b&&(c=Math.max(l,Math.min(u,2*b[n]-r))),c<r?(i=r,r=c):i=c),g[0]!=r||g[1]!=i)return n?s=null:o=null,g[0]=r,g[1]=i,!0}function y(){m(),w.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),so.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),I(),S({type:"brushend"})}var b,_,E=this,x=so.select(so.event.target),S=l.of(E,arguments),w=so.select(E),A=x.datum(),C=!/^(n|s)$/.test(A)&&u,k=!/^(e|w)$/.test(A)&&c,O=x.classed("extent"),I=V(E),M=so.mouse(E),N=so.select(t(E)).on("keydown.brush",a).on("keyup.brush",g);if(so.event.changedTouches?N.on("touchmove.brush",m).on("touchend.brush",y):N.on("mousemove.brush",m).on("mouseup.brush",y),w.interrupt().selectAll("*").interrupt(),O)M[0]=f[0]-M[0],M[1]=d[0]-M[1];else if(A){var D=+/w$/.test(A),L=+/^n/.test(A);_=[f[1-D]-M[0],d[1-L]-M[1]],M[0]=f[D],M[1]=d[L]}else so.event.altKey&&(b=M.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),so.select("body").style("cursor",x.style("cursor")),S({type:"brushstart"}),m()}var o,s,l=A(e,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],d=[0,0],h=!0,p=!0,g=Gl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:f,y:d,i:o,j:s},n=this.__chart__||t;this.__chart__=t,jl?so.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,f=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=_r(f,t.x),r=_r(d,t.y);return o=s=null,function(i){f=t.x=n(i),d=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(u=t,g=Gl[!u<<1|!c],e):u},e.y=function(t){return arguments.length?(c=t,g=Gl[!u<<1|!c],e):c},e.clamp=function(t){return arguments.length?(u&&c?(h=!!t[0],p=!!t[1]):u?h=!!t:c&&(p=!!t),e):u&&c?[h,p]:u?h:c?p:null},e.extent=function(t){var n,r,i,a,l;return arguments.length?(u&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),o=[n,r],u.invert&&(n=u(n),r=u(r)),r<n&&(l=n,n=r,r=l),n==f[0]&&r==f[1]||(f=[n,r])),c&&(i=t[0],a=t[1],u&&(i=i[1],a=a[1]),s=[i,a],c.invert&&(i=c(i),a=c(a)),a<i&&(l=i,i=a,a=l),i==d[0]&&a==d[1]||(d=[i,a])),e):(u&&(o?(n=o[0],r=o[1]):(n=f[0],r=f[1],u.invert&&(n=u.invert(n),r=u.invert(r)),r<n&&(l=n,n=r,r=l))),c&&(s?(i=s[0],a=s[1]):(i=d[0],a=d[1],c.invert&&(i=c.invert(i),a=c.invert(a)),a<i&&(l=i,i=a,a=l))),u&&c?[[n,i],[r,a]]:u?[n,r]:c&&[i,a])},e.clear=function(){return e.empty()||(f=[0,0],d=[0,0],o=s=null),e},e.empty=function(){return!!u&&f[0]==f[1]||!!c&&d[0]==d[1]},so.rebind(e,l,"on")};var Wl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vl=ps.format=_s.timeFormat,Kl=Vl.utc,Zl=Kl("%Y-%m-%dT%H:%M:%S.%LZ");Vl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?no:Zl,no.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},no.toString=Zl.toString,ps.second=je(function(e){return new gs(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ps.seconds=ps.second.range,ps.seconds.utc=ps.second.utc.range,ps.minute=je(function(e){return new gs(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ps.minutes=ps.minute.range,ps.minutes.utc=ps.minute.utc.range,ps.hour=je(function(e){var t=e.getTimezoneOffset()/60;return new gs(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ps.hours=ps.hour.range,ps.hours.utc=ps.hour.utc.range,ps.month=je(function(e){return e=ps.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ps.months=ps.month.range,ps.months.utc=ps.month.utc.range;var Ql=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Jl=[[ps.second,1],[ps.second,5],[ps.second,15],[ps.second,30],[ps.minute,1],[ps.minute,5],[ps.minute,15],[ps.minute,30],[ps.hour,1],[ps.hour,3],[ps.hour,6],[ps.hour,12],[ps.day,1],[ps.day,2],[ps.week,1],[ps.month,1],[ps.month,3],[ps.year,1]],eu=Vl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Ot]]),tu={range:function(e,t,n){return so.range(Math.ceil(e/n)*n,+t,n).map(io)},floor:y,ceil:y};Jl.year=ps.year,ps.scale=function(){return ro(so.scale.linear(),Jl,eu)};var nu=Jl.map(function(e){return[e[0].utc,e[1]]}),ru=Kl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Ot]]);nu.year=ps.year.utc,ps.scale.utc=function(){return ro(so.scale.linear(),nu,ru)},so.text=Ce(function(e){return e.responseText}),so.json=function(e,t){return ke(e,"application/json",ao,t)},so.html=function(e,t){return ke(e,"text/html",oo,t)},so.xml=Ce(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=so,define(so)):"object"==typeof module&&module.exports?module.exports=so:this.d3=so}(),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.vg=e()}}(function(){var e;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){t.exports={version:"2.6.5",dataflow:e("vega-dataflow"),parse:e("./src/parse/"),scene:{Bounder:e("./src/scene/Bounder"),Builder:e("./src/scene/Builder"),Encoder:e("./src/scene/Encoder"),GroupBuilder:e("./src/scene/GroupBuilder"),visit:e("./src/scene/visit")},transforms:e("./src/transforms"),Transform:e("./src/transforms/Transform"),BatchTransform:e("./src/transforms/BatchTransform"),Parameter:e("./src/transforms/Parameter"),schema:e("./src/core/schema"),config:e("./src/core/config"),util:e("./src/util"),logging:e("vega-logging"),debug:e("vega-logging").debug}},{"./src/core/config":92,"./src/core/schema":93,"./src/parse/":98,"./src/scene/Bounder":110,"./src/scene/Builder":111,"./src/scene/Encoder":112,"./src/scene/GroupBuilder":113,"./src/scene/visit":118,"./src/transforms":146,"./src/transforms/BatchTransform":120,"./src/transforms/Parameter":136,"./src/transforms/Transform":141,"./src/util":149,"vega-dataflow":42,"vega-logging":49}],2:[function(e,t,n){},{}],3:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.d3_dsv={})}(this,function(e){"use strict";function t(e){return new a(e)}function n(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function r(e,t){var r=n(e);return function(n,i){return t(r(n),i,e)}}function i(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function a(e){function t(t){return t.map(a).join(e)}function a(e){return o.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var o=new RegExp('["'+e+"\n]"),s=e.charCodeAt(0);this.parse=function(e,t){var i,a,o=this.parseRows(e,function(e,o){return i?i(e,o-1):(a=e,void(i=t?r(e,t):n(e)))});return o.columns=a,o},this.parseRows=function(e,t){function n(){if(c>=u)return o;if(i)return i=!1,a;var t,n=c;if(34===e.charCodeAt(n)){for(var r=n;r++<u;)if(34===e.charCodeAt(r)){if(34!==e.charCodeAt(r+1))break;++r}return c=r+2,t=e.charCodeAt(r+1),13===t?(i=!0,10===e.charCodeAt(r+2)&&++c):10===t&&(i=!0),e.slice(n+1,r).replace(/""/g,'"')}for(;c<u;){var l=1;if(t=e.charCodeAt(c++),10===t)i=!0;else if(13===t)i=!0,10===e.charCodeAt(c)&&(++c,++l);else if(t!==s)continue;return e.slice(n,c-l)}return e.slice(n)}for(var r,i,a={},o={},l=[],u=e.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();t&&null==(d=t(d,f++))||l.push(d)}return l},this.format=function(t,n){return null==n&&(n=i(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")},this.formatRows=function(e){return e.map(t).join("\n")}}t.prototype=a.prototype;var o=t(","),s=t("\t"),l="0.1.14";e.version=l,e.dsv=t,e.csv=o,e.tsv=s})},{}],4:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e("d3-format",["exports"],i):i(t.d3_format={})}(this,function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:NaN}function r(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function i(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1],o=a-(p=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+t(e,Math.max(0,n+o-1))[0]}function a(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return a<0?"0."+new Array((-a)).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}function o(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,i=1,a=-1;i<r;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e}function s(e){return new l(e)}function l(e){if(!(t=m.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],l=!!t[7],u=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(l=!0,c="g"):g[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=l,this.precision=u,this.type=c}function u(e){return e}function c(e){function t(e){e=s(e);var t=e.fill,n=e.align,r=e.sign,i=e.symbol,u=e.zero,c=e.width,f=e.comma,d=e.precision,h=e.type,m="$"===i?o[0]:"#"===i&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",y="$"===i?o[1]:/[%p]/.test(h)?"%":"",b=g[h],_=!h||/[defgprs%]/.test(h);return d=null==d?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),function(e){var i=m,o=y;if("c"===h)o=b(e)+o,e="";else{e=+e;var s=(e<0||1/e<0)&&(e*=-1,!0);if(e=b(e,d),s){var g,E=-1,x=e.length;for(s=!1;++E<x;)if(g=e.charCodeAt(E),48<g&&g<58||"x"===h&&96<g&&g<103||"X"===h&&64<g&&g<71){s=!0;break}}if(i=(s?"("===r?r:"-":"-"===r||"("===r?"":r)+i,o=o+("s"===h?v[8+p/3]:"")+(s&&"("===r?")":""),_)for(var g,E=-1,x=e.length;++E<x;)if(g=e.charCodeAt(E),48>g||g>57){o=(46===g?l+e.slice(E+1):e.slice(E))+o,e=e.slice(0,E);break}}f&&!u&&(e=a(e,1/0));var S=i.length+e.length+o.length,T=S<c?new Array(c-S+1).join(t):"";switch(f&&u&&(e=a(T+e,T.length?c-o.length:1/0),T=""),n){case"<":return i+e+o+T;case"=":return i+T+e+o;case"^":return T.slice(0,S=T.length>>1)+i+e+o+T.slice(S)}return T+i+e+o}}function i(e,r){var i=t((e=s(e),e.type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),o=Math.pow(10,-a),l=v[8+a/3];return function(e){return i(o*e)+l}}var a=e.grouping&&e.thousands?r(e.grouping,e.thousands):u,o=e.currency,l=e.decimal;return{format:t,formatPrefix:i}}function f(e){return Math.max(0,-n(Math.abs(e)))}function d(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))}function h(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,n(t)-n(e))+1}var p,g={"":o,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return a(100*e,t)},r:a,s:i,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},m=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var v=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],y=c({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),b=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),_=c({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),E=c({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),x=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),S=c({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),T=c({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),w=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),A=c({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),C=c({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),k=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),O=c({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),I=c({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),M=c({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),N=c({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),D=c({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),L=c({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),$=c({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),R=c({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),P=c({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),F=c({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),U=c({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),j=c({decimal:".",thousands:",",grouping:[3],currency:["¥",""]}),H=y.format,z=y.formatPrefix,B="0.4.2";e.version=B,e.format=H,e.formatPrefix=z,e.locale=c,e.localeCaEs=b,e.localeCsCz=_,e.localeDeCh=E,e.localeDeDe=x,e.localeEnCa=S,e.localeEnGb=T,e.localeEnUs=y,e.localeEsEs=w,e.localeFiFi=A,e.localeFrCa=C,e.localeFrFr=k,e.localeHeIl=O,e.localeHuHu=I,e.localeItIt=M,e.localeJaJp=N,e.localeKoKr=D,e.localeMkMk=L,e.localeNlNl=$,e.localePlPl=R,e.localePtBr=P,e.localeRuRu=F,e.localeSvSe=U,e.localeZhCn=j,e.formatSpecifier=s,e.precisionFixed=f,e.precisionPrefix=d,e.precisionRound=h})},{}],5:[function(t,n,r){!function(i,a){"object"==typeof r&&"undefined"!=typeof n?a(r,t("d3-time")):"function"==typeof e&&e.amd?e("d3-time-format",["exports","d3-time"],a):a(i.d3_time_format={},i.d3_time)}(this,function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date((-1),e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){function t(e,t){return function(n){var r,i,a,o=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date((+n)));++s<u;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=ee[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function a(e,t){return function(n){var a=i(1900),s=o(a,e,n+="",0);if(s!=n.length)return null;if("p"in a&&(a.H=a.H%12+12*a.p),"W"in a||"U"in a){"w"in a||(a.w="W"in a?1:0);var l="Z"in a?r(i(a.y)).getUTCDay():t(i(a.y)).getDay();a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(l+5)%7:a.w+7*a.U-(l+6)%7}return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,r(a)):t(a)}}function o(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=Pe[i in ee?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(e,t,n){var r=we.exec(t.slice(n));return r?(e.p=Ae[r[0].toLowerCase()],n+r[0].length):-1}function J(e,t,n){var r=Oe.exec(t.slice(n));return r?(e.w=Ie[r[0].toLowerCase()],n+r[0].length):-1}function te(e,t,n){var r=Ce.exec(t.slice(n));return r?(e.w=ke[r[0].toLowerCase()],n+r[0].length):-1}function ne(e,t,n){var r=De.exec(t.slice(n));return r?(e.m=Le[r[0].toLowerCase()],n+r[0].length):-1}function re(e,t,n){var r=Me.exec(t.slice(n));return r?(e.m=Ne[r[0].toLowerCase()],n+r[0].length):-1}function ie(e,t,n){return o(e,ve,t,n)}function ae(e,t,n){return o(e,ye,t,n)}function oe(e,t,n){return o(e,be,t,n)}function se(e){return xe[e.getDay()]}function le(e){return Ee[e.getDay()]}function ue(e){return Te[e.getMonth()]}function ce(e){return Se[e.getMonth()]}function fe(e){return _e[+(e.getHours()>=12)]}function de(e){return xe[e.getUTCDay()]}function he(e){return Ee[e.getUTCDay()]}function pe(e){return Te[e.getUTCMonth()]}function ge(e){return Se[e.getUTCMonth()]}function me(e){return _e[+(e.getUTCHours()>=12)]}var ve=e.dateTime,ye=e.date,be=e.time,_e=e.periods,Ee=e.days,xe=e.shortDays,Se=e.months,Te=e.shortMonths,we=l(_e),Ae=u(_e),Ce=l(Ee),ke=u(Ee),Oe=l(xe),Ie=u(xe),Me=l(Se),Ne=u(Se),De=l(Te),Le=u(Te),$e={a:se,A:le,b:ue,B:ce,c:null,d:T,e:T,H:w,I:A,j:C,L:k,m:O,M:I,p:fe,S:M,U:N,w:D,W:L,x:null,X:null,y:$,Y:R,Z:P,"%":Q},Re={a:de,A:he,b:pe,B:ge,c:null,d:F,e:F,H:U,I:j,j:H,L:z,m:B,M:q,p:me,S:Y,U:X,w:W,W:G,x:null,X:null,y:V,Y:K,Z:Z,"%":Q},Pe={a:J,A:te,b:ne,B:re,c:ie,d:v,e:v,H:b,I:b,j:y,L:x,m:m,M:_,p:s,S:E,U:f,w:c,W:d,x:ae,X:oe,y:p,Y:h,Z:g,"%":S};return $e.x=t(ye,$e),$e.X=t(be,$e),$e.c=t(ve,$e),Re.x=t(ye,Re),Re.X=t(be,Re),Re.c=t(ve,Re),{format:function(e){var r=t(e+="",$e);return r.parse=a(e,n),r.toString=function(){return e},r},utcFormat:function(e){var n=t(e+="",Re);return n.parse=a(e,r),n.toString=function(){return e},n}}}function o(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function s(e){return e.replace(re,"\\$&")}function l(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function u(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function c(e,t,n){var r=te.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function f(e,t,n){var r=te.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function d(e,t,n){var r=te.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function h(e,t,n){var r=te.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function p(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function g(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function m(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function v(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function y(e,t,n){var r=te.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function b(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function E(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function x(e,t,n){var r=te.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function T(e,t){return o(e.getDate(),t,2)}function w(e,t){return o(e.getHours(),t,2)}function A(e,t){return o(e.getHours()%12||12,t,2)}function C(e,n){return o(1+t.day.count(t.year(e),e),n,3)}function k(e,t){return o(e.getMilliseconds(),t,3)}function O(e,t){return o(e.getMonth()+1,t,2)}function I(e,t){return o(e.getMinutes(),t,2)}function M(e,t){return o(e.getSeconds(),t,2)}function N(e,n){return o(t.sunday.count(t.year(e),e),n,2)}function D(e){return e.getDay()}function L(e,n){return o(t.monday.count(t.year(e),e),n,2)}function $(e,t){return o(e.getFullYear()%100,t,2)}function R(e,t){return o(e.getFullYear()%1e4,t,4)}function P(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function F(e,t){return o(e.getUTCDate(),t,2)}function U(e,t){return o(e.getUTCHours(),t,2)}function j(e,t){return o(e.getUTCHours()%12||12,t,2)}function H(e,n){return o(1+t.utcDay.count(t.utcYear(e),e),n,3)}function z(e,t){return o(e.getUTCMilliseconds(),t,3)}function B(e,t){return o(e.getUTCMonth()+1,t,2)}function q(e,t){return o(e.getUTCMinutes(),t,2)}function Y(e,t){return o(e.getUTCSeconds(),t,2)}function X(e,n){return o(t.utcSunday.count(t.utcYear(e),e),n,2)}function W(e){return e.getUTCDay()}function G(e,n){return o(t.utcMonday.count(t.utcYear(e),e),n,2)}function V(e,t){return o(e.getUTCFullYear()%100,t,2)}function K(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function Z(){return"+0000"}function Q(){return"%"}function J(e){return e.toISOString()}var ee={"-":"",_:" ",0:"0"},te=/^\s*\d+/,ne=/^%/,re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ie=a({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ae=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),oe=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),se=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),le=a({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ue=a({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ce=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),fe=a({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),de=a({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),he=a({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),pe=a({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),ge=a({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),me=a({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),ve=a({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),ye=a({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4���","5월","6월","7월","8월","9월","10월","11월","12월"]}),be=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),_e=a({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),Ee=a({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Pi��tek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),xe=a({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),Se=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),Te=a({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),we=a({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],
months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),Ae="%Y-%m-%dT%H:%M:%S.%LZ";J.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},J.toString=function(){return Ae};var Ce=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?J:ie.utcFormat(Ae),ke=ie.format,Oe=ie.utcFormat,Ie="0.2.1";e.version=Ie,e.format=ke,e.utcFormat=Oe,e.locale=a,e.localeCaEs=ae,e.localeDeCh=oe,e.localeDeDe=se,e.localeEnCa=le,e.localeEnGb=ue,e.localeEnUs=ie,e.localeEsEs=ce,e.localeFiFi=fe,e.localeFrCa=de,e.localeFrFr=he,e.localeHeIl=pe,e.localeHuHu=ge,e.localeItIt=me,e.localeJaJp=ve,e.localeKoKr=ye,e.localeMkMk=be,e.localeNlNl=_e,e.localePlPl=Ee,e.localePtBr=xe,e.localeRuRu=Se,e.localeSvSe=Te,e.localeZhCn=we,e.isoFormat=Ce})},{"d3-time":6}],6:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e("d3-time",["exports"],i):i(t.d3_time={})}(this,function(e){"use strict";function t(e,n,r,o){function s(t){return e(t=new Date((+t))),t}return s.floor=s,s.round=function(t){var r=new Date((+t)),i=new Date(t-1);return e(r),e(i),n(i,1),t-r<i-t?r:i},s.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},s.offset=function(e,t){return n(e=new Date((+e)),null==t?1:Math.floor(t)),e},s.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date((+r)),i=null==i?1:Math.floor(i),!(t<r&&i>0))return a;for(n(t,1),e(t),t<r&&a.push(new Date((+t)));n(t,i),e(t),t<r;)a.push(new Date((+t)));return a},s.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(s.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),Math.floor(r(i,a))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,a=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var s=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()}),l=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),u=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),c=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=n(0),d=n(1),h=n(2),p=n(3),g=n(4),m=n(5),v=n(6),y=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),b=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),_=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),E=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),x=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),S=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),T=r(0),w=r(1),A=r(2),C=r(3),k=r(4),O=r(5),I=r(6),M=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),N=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),D=o.range,L=s.range,$=l.range,R=u.range,P=c.range,F=f.range,U=d.range,j=h.range,H=p.range,z=g.range,B=m.range,q=v.range,Y=f.range,X=y.range,W=b.range,G=o,V=D,K=_.range,Z=E.range,Q=x.range,J=S.range,ee=T.range,te=w.range,ne=A.range,re=C.range,ie=k.range,ae=O.range,oe=I.range,se=T.range,le=M.range,ue=N.range,ce="0.1.1";e.version=ce,e.milliseconds=D,e.seconds=L,e.minutes=$,e.hours=R,e.days=P,e.sundays=F,e.mondays=U,e.tuesdays=j,e.wednesdays=H,e.thursdays=z,e.fridays=B,e.saturdays=q,e.weeks=Y,e.months=X,e.years=W,e.utcMillisecond=G,e.utcMilliseconds=V,e.utcSeconds=K,e.utcMinutes=Z,e.utcHours=Q,e.utcDays=J,e.utcSundays=ee,e.utcMondays=te,e.utcTuesdays=ne,e.utcWednesdays=re,e.utcThursdays=ie,e.utcFridays=ae,e.utcSaturdays=oe,e.utcWeeks=se,e.utcMonths=le,e.utcYears=ue,e.millisecond=o,e.second=s,e.minute=l,e.hour=u,e.day=c,e.sunday=f,e.monday=d,e.tuesday=h,e.wednesday=p,e.thursday=g,e.friday=m,e.saturday=v,e.week=f,e.month=y,e.year=b,e.utcSecond=_,e.utcMinute=E,e.utcHour=x,e.utcDay=S,e.utcSunday=T,e.utcMonday=w,e.utcTuesday=A,e.utcWednesday=C,e.utcThursday=k,e.utcFriday=O,e.utcSaturday=I,e.utcWeek=T,e.utcMonth=M,e.utcYear=N,e.interval=t})},{}],7:[function(e,t,n){t.exports={_args:[[{raw:"datalib@^1.7.1",scope:null,escapedName:"datalib",name:"datalib",rawSpec:"^1.7.1",spec:">=1.7.1 <2.0.0",type:"range"},"/Users/arvind/Research/vega2/vega3-2"]],_from:"datalib@>=1.7.1 <2.0.0",_id:"datalib@1.7.3",_inCache:!0,_installable:!0,_location:"/datalib",_nodeVersion:"0.12.7",_npmOperationalInternal:{host:"packages-16-east.internal.npmjs.com",tmp:"tmp/datalib-1.7.3.tgz_1476399375564_0.8775846140924841"},_npmUser:{name:"jheer",email:"jeffrey.heer@gmail.com"},_npmVersion:"2.12.1",_phantomChildren:{},_requested:{raw:"datalib@^1.7.1",scope:null,escapedName:"datalib",name:"datalib",rawSpec:"^1.7.1",spec:">=1.7.1 <2.0.0",type:"range"},_requiredBy:["/","/vega-dataflow","/vega-scenegraph"],_resolved:"https://registry.npmjs.org/datalib/-/datalib-1.7.3.tgz",_shasum:"4722715bb91f5a2411cf42bf984932cc403eba48",_shrinkwrap:null,_spec:"datalib@^1.7.1",_where:"/Users/arvind/Research/vega2/vega3-2",author:{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},browser:{buffer:!1,fs:!1,http:!1,request:!1,"sync-request":!1,url:!1},bugs:{url:"https://github.com/vega/datalib/issues"},contributors:[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],dependencies:{"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",request:"^2.67.0","sync-request":"^2.1.0",topojson:"^1.6.19"},description:"JavaScript utilites for loading, summarizing and working with data.",devDependencies:{browserify:"^12.0.1",chai:"^3.4.1",istanbul:"latest",jshint:"^2.9.1-rc1",mocha:"^2.3.4","uglify-js":"^2.6.1"},directories:{},dist:{shasum:"4722715bb91f5a2411cf42bf984932cc403eba48",tarball:"https://registry.npmjs.org/datalib/-/datalib-1.7.3.tgz"},gitHead:"0087f0a1e9e9f819bffb309fa10b4ac3c9292486",homepage:"https://github.com/vega/datalib#readme",keywords:["data","table","statistics","parse","csv","tsv","json","utility"],license:"BSD-3-Clause",main:"src/index.js",maintainers:[{name:"jheer",email:"jeffrey.heer@gmail.com"}],name:"datalib",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/vega/datalib.git"},scripts:{build:"browserify src/index.js -d -s dl -o datalib.js",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/"},version:"1.7.3"}},{}],8:[function(e,t,n){var r=e("./util"),i=e("./time"),a=i.utc,o=t.exports;o.$year=r.$func("year",i.year.unit),o.$month=r.$func("month",i.months.unit),o.$date=r.$func("date",i.dates.unit),o.$day=r.$func("day",i.weekdays.unit),o.$hour=r.$func("hour",i.hours.unit),o.$minute=r.$func("minute",i.minutes.unit),o.$second=r.$func("second",i.seconds.unit),o.$utcYear=r.$func("utcYear",a.year.unit),o.$utcMonth=r.$func("utcMonth",a.months.unit),o.$utcDate=r.$func("utcDate",a.dates.unit),o.$utcDay=r.$func("utcDay",a.weekdays.unit),o.$utcHour=r.$func("utcHour",a.hours.unit),o.$utcMinute=r.$func("utcMinute",a.minutes.unit),o.$utcSecond=r.$func("utcSecond",a.seconds.unit)},{"./time":30,"./util":31}],9:[function(e,t,n){function r(){this._cells={},this._aggr=[],this._stream=!1}function i(e){if(a.isArray(e))return e;if(null==e)return[];var t,n,r=[];for(t in e)n=a.array(e[t]),r.push({name:t,ops:n});return r}var a=e("../util"),o=e("./measures"),s=e("./collector"),l=r.Flags={ADD_CELL:1,MOD_CELL:2},u=r.prototype;u.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},u.key=function(e){return null==e?this._key:(this._key=a.$(e),this)},u.groupby=function(e){return this._dims=a.array(e).map(function(e,t){if(e=a.isString(e)?{name:e,get:a.$(e)}:a.isFunction(e)?{name:a.name(e)||e.name||"_"+t,get:e}:e.name&&a.isFunction(e.get)?e:null,null==e)throw"Invalid groupby argument: "+e;return e}),this.clear()},u.summarize=function(e){e=i(e),this._count=!0;var t,n,r,s,l,u,c,f=this._aggr=[];for(r=0;r<e.length;++r){for(s=0,t=[],n=e[r];s<n.ops.length;++s)l=n.ops[s],"count"!==l&&(this._count=!1),u=n.as&&n.as[s]||l+("*"===n.name?"":"_"+n.name),t.push(o[l](u));c=n.get&&a.$(n.get)||("*"===n.name?a.identity:a.$(n.name)),f.push({name:n.name,measures:o.create(t,this._stream,c,this._assign)})}return this.clear()},u.count=function(){return this.summarize({"*":"count"})},u._assign=function(e,t,n){e[t]=n},u.clear=function(){return this._cells={},this},u._cellkey=function(e){var t,n=this._dims,r=n.length,i=String(n[0].get(e));for(t=1;t<r;++t)i+="|"+n[t].get(e);return i},u._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))},u._newcell=function(e,t){var n,r={num:0,tuple:this._newtuple(e,t),flag:l.ADD_CELL,aggs:{}},i=this._aggr;for(n=0;n<i.length;++n)r.aggs[i[n].name]=new i[n].measures(r,r.tuple);return r.collect&&(r.data=new s(this._key)),r},u._newtuple=function(e){var t,n,r=this._dims,i={};for(t=0,n=r.length;t<n;++t)i[r[t].name]=r[t].get(e);return this._ingest(i)},u._ingest=a.identity,u._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=l.MOD_CELL,this._on_add&&this._on_add(e,n)},u._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=l.MOD_CELL,this._on_rem&&this._on_rem(e,n)},u._mod=function(e,t){var n,r=this._cell(t),i=this._cell(e),o=this._aggr;for(r!==i?(r.num-=1,i.num+=1,r.collect&&r.data.rem(t),i.collect&&i.data.add(e)):r.collect&&!a.isObject(e)&&(r.data.rem(t),r.data.add(e)),n=0;n<o.length;++n)r.aggs[o[n].name].rem(t),i.aggs[o[n].name].add(e);r.flag|=l.MOD_CELL,i.flag|=l.MOD_CELL,this._on_mod&&this._on_mod(e,t,r,i)},u._markMod=function(e){var t=this._cell(e);t.flag|=l.MOD_CELL},u.result=function(){var e,t,n,r=[],i=this._aggr;for(n in this._cells){if(e=this._cells[n],e.num>0){for(e.collect&&e.data.values(),t=0;t<i.length;++t)e.aggs[i[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},u.changes=function(e){var t,n,r,i,a=e||{add:[],rem:[],mod:[]},o=this._aggr;for(i in this._cells){for(t=this._cells[i],n=t.flag,t.collect&&t.data.values(),r=0;r<o.length;++r)t.aggs[o[r].name].set();t.num<=0?(a.rem.push(t.tuple),delete this._cells[i],this._on_drop&&this._on_drop(t)):(this._on_keep&&this._on_keep(t),n&l.ADD_CELL?a.add.push(t.tuple):n&l.MOD_CELL&&a.mod.push(t.tuple)),t.flag=0}return this._rems=!1,a},u.execute=function(e){return this.clear().insert(e).result()},u.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},u.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},u._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}},t.exports=r},{"../util":31,"./collector":10,"./measures":12}],10:[function(e,t,n){function r(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}var i=e("../util"),a=e("../stats"),o="__dl_rem__",s=r.prototype;s.add=function(e){this._add.push(e)},s.rem=function(e){this._rem.push(e)},s.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r,s=this._add,l=this._rem,u=this._key,c=Array(s.length-l.length);if(i.isObject(l[0]))if(u)for(r=i.toMap(l,u),e=0,t=0,n=s.length;e<n;++e)r.hasOwnProperty(u(s[e]))||(c[t++]=s[e]);else{for(e=0,n=l.length;e<n;++e)l[e][o]=1;for(e=0,t=0,n=s.length;e<n;++e)s[e][o]||(c[t++]=s[e]);for(e=0,n=l.length;e<n;++e)delete l[e][o]}else for(r=a.count.map(l),e=0,t=0,n=s.length;e<n;++e)r[s[e]]>0?r[s[e]]-=1:c[t++]=s[e];return this._rem=[],this._add=c},s.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=a.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},s.argmin=function(e){return this.extent(e)[0]},s.argmax=function(e){return this.extent(e)[1]},s.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):+(1/0)},s.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-(1/0)},s.quartile=function(e){return this._get===e&&this._q||(this._q=a.quartile(this.values(),e),this._get=e),this._q},s.q1=function(e){return this.quartile(e)[0]},s.q2=function(e){return this.quartile(e)[1]},s.q3=function(e){return this.quartile(e)[2]},t.exports=r},{"../stats":28,"../util":31}],11:[function(e,t,n){var r=e("../util"),i=e("./aggregator");t.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(r.array(t))},[]);return(new i).groupby(e).summarize({"*":"values"})}},{"../util":31,"./aggregator":9}],12:[function(e,t,n){function r(e){return function(t){var n=o.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function i(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=s[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{}));return o.vals(r).sort(function(e,t){return e.idx-t.idx})}function a(t,n,r,a){var s=i(t,n),l="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",u="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",c="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",f="var t = this.tuple; var cell = this.cell;";return s.forEach(function(e){e.idx<0?(l=e.init+l,u=e.add+u,c=e.rem+c):(l+=e.init,u+=e.add,c+=e.rem)}),t.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){f+="this.assign(t,'"+e.out+"',"+e.set+");"}),f+="return t;",l=Function("cell","t",l),l.prototype.assign=a,l.prototype.add=Function("t","var v = this.get(t);"+u),l.prototype.rem=Function("t","var v = this.get(t);"+c),l.prototype.set=Function(f),l.prototype.get=r,l.prototype.distinct=e("../stats").count.distinct,l.prototype.isValid=o.isValid,l.fields=t.map(o.$("out")),l}var o=e("../util"),s={values:r({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:r({name:"count",set:"cell.num"}),missing:r({name:"missing",set:"this.missing"}),valid:r({name:"valid",set:"this.valid"}),sum:r({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:r({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:r({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:r({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:r({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:r({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:r({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:r({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:r({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:r({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:r({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:r({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:r({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:r({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:r({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:r({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:r({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};s.create=a,t.exports=s},{"../stats":28,"../util":31}],13:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,s,l,u,c,f=e.maxbins||15,d=e.base||10,h=Math.log(d),p=e.div||[5,2],g=e.min,m=e.max,v=m-g;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,v/f,0,e.steps.length))];else{for(n=Math.ceil(Math.log(f)/h),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(v)/h)-n));Math.ceil(v/t)>f;)t*=d;for(u=0;u<p.length;++u)l=t/p[u],l>=r&&v/l<=f&&(t=l)}return l=Math.log(t),s=l>=0?0:~~(-l/h)+1,c=Math.pow(d,-s-1),g=Math.min(g,Math.floor(g/t+c)*t),m=Math.ceil(m/t)*t,{start:g,stop:m,step:t,unit:{precision:s},value:a,index:o}}function i(e,t,n,r){for(;n<r;){var i=n+r>>>1;u.cmp(e[i],t)<0?n=i+1:r=i}return n}function a(e){return this.step*Math.floor(e/this.step+f)}function o(e){return Math.floor((e-this.start)/this.step+f)}function s(e){return this.unit.date(a.call(this,e))}function l(e){return o.call(this,this.unit.unit(e))}var u=e("../util"),c=e("../time"),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?c.utc:c,n=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,u=+i-+n,f=e.unit?t[e.unit]:t.find(u,o,a),d=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:a,minstep:f.minstep,steps:f.step});return d.unit=f,d.index=l,e.raw||(d.value=s),d},t.exports=r},{"../time":30,"../util":31}],14:[function(e,t,n){function r(e,t,n){n=o(e,t,n);var r=a(n);return r?d.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor):n.accessor||d.identity}function i(e,t,n){n=o(e,t,n);var r=a(n);return r?s(e,n.accessor,r):l(e,n.accessor,n&&n.sort)}function a(e){var t=e.type,n=null;return(null==t||p[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?u.date(e):u(e)),n}function o(){var e=arguments,t=0,n=d.isArray(e[t])?e[t++]:null,r=d.isFunction(e[t])||d.isString(e[t])?d.$(e[t++]):null,i=d.extend({},e[t]);if(n&&(i.type=i.type||f(n,r),p[i.type])){var a=h.extent(n,r);i=d.extend({min:a[0],max:a[1]},i)}return r&&(i.accessor=r),i}function s(e,t,n){for(var r,i,a=c.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}}),o=0;o<e.length;++o)if(r=t?t(e[o]):e[o],d.isValid(r)){if(i=n.index(r),i<0||i>=a.length||!isFinite(i))continue;a[i].count+=1}return a.bins=n,a}function l(e,t,n){var r=h.unique(e,t),i=h.count.map(e,t);return r.map(function(e){return{value:e,count:i[e]}}).sort(d.comparator(n?"-count":"+value"))}var u=e("./bins"),c=e("../generate"),f=e("../import/type"),d=e("../util"),h=e("../stats"),p={integer:1,number:1,date:1};t.exports={$bin:r,histogram:i}},{"../generate":17,"../import/type":26,"../stats":28,"../util":31,"./bins":13}],15:[function(e,t,n){function r(e,t){t=s.extend({separator:" ",minwidth:8,maxwidth:15},t);var n=t.fields||s.keys(e[0]),r=l.all(e);if(t.start||t.limit){var i=t.start||0,a=t.limit?i+t.limit:e.length;e=e.slice(i,a)}var o=n.map(function(n){var i=f[r[n]]||"",a=c("{{"+n+i+"}}"),o=u.max(e,function(e){return a(e).length});return o=Math.max(Math.min(n.length,t.minwidth),o),t.maxwidth>0?Math.min(o,t.maxwidth):o}),h=n.map(function(e,t){return s.truncate(s.pad(e,o[t],"center"),o[t])}).join(t.separator),p=c(n.map(function(e,t){return"{{"+e+(f[r[e]]||"")+("|pad:"+o[t]+","+(d[r[e]]||"right"))+("|truncate:"+o[t])+"}}"}).join(t.separator));return h+"\n"+e.map(p).join("\n")}function i(e){e=e?e.__summary__?e:u.summary(e):this;var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push("-- "+e[t].field+" --"),"string"===e[t].type||e[t].distinct<10?r.push(o(e[t])):r.push(a(e[t])),r.push("");return r.join("\n")}function a(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function o(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,r=s.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(r).join("\n")}var s=e("./util"),l=e("./import/type"),u=e("./stats"),c=e("./template");t.exports={table:r,summary:i};var f={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},d={number:"left",integer:"left"}},{"./import/type":26,"./stats":28,"./template":29,"./util":31}],16:[function(e,t,n){function r(e){return e.length>4&&"locale"+(e[0].toUpperCase()+e[1].toLowerCase()+e[3].toUpperCase()+e[4].toLowerCase())}function i(e){var t=E.isString(e)?T[r(e)]:T.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);w=t}function a(e){var t=E.isString(e)?S[r(e)]:S.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);A=t,v=y=b=_=null}function o(e,t){e.length||(e=[0]),null==t&&(t=10);var n=e[0],r=e[e.length-1];r<n&&(o=r,r=n,n=o);var i=r-n||(t=1,n||r||1),a=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=i/t/a;return o>=k?a*=10:o>=O?a*=5:o>=I&&(a*=2),[Math.ceil(n/a)*a,Math.floor(r/a)*a+a/2,a]}function s(e,t){return function(n){var r=e(n),i=r.indexOf(t);if(i<0)return r;for(var a=l(r,i),o=a<r.length?r.slice(a):"";--a>i;)if("0"!==r[a]){++a;break}return r.slice(0,a)+o}}function l(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}function u(e){var t=w.format(".1f")(1)[1];switch(null==e&&(e=","),e=T.formatSpecifier(e),null==e.precision&&(e.precision=12),e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return s(w.format(e),t)}function c(e,t,n){var r=o(e,t);switch(null==n&&(n=",f"),n=T.formatSpecifier(n),n.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=T.precisionPrefix(r[2],i)),w.formatPrefix(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=T.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=T.precisionFixed(r[2])-2*("%"===n.type))}return w.format(n)}function f(){var e=A.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),l=e("%Y");return function(e){var u=+e;return(x.second(e)<u?t:x.minute(e)<u?n:x.hour(e)<u?r:x.day(e)<u?i:x.month(e)<u?x.week(e)<u?a:o:x.year(e)<u?s:l)(e)}}function d(){var e=A.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),l=e("%Y");return function(e){var u=+e;return(x.utcSecond(e)<u?t:x.utcMinute(e)<u?n:x.utcHour(e)<u?r:x.utcDay(e)<u?i:x.utcMonth(e)<u?x.utcWeek(e)<u?a:o:x.utcYear(e)<u?s:l)(e)}}function h(e,t){var n=t?y||(y=A.format("%b")):v||(v=A.format("%B"));return C.setMonth(e),n(C)}function p(e,t){var n=t?_||(_=A.format("%a")):b||(b=A.format("%A"));return C.setMonth(0),C.setDate(2+e),n(C)}function g(e){return Math.floor(e.getMonth()/3)+1}function m(e){return Math.floor(e.getUTCMonth()/3)+1}var v,y,b,_,E=e("./util"),x=e("d3-time"),S=e("d3-time-format"),T=e("d3-format"),w=T,A=S,C=new Date(2e3,0,1);t.exports={numberLocale:i,number:function(e){return w.format(e)},numberPrefix:function(e,t){return w.formatPrefix(e,t)},timeLocale:a,time:function(e){return A.format(e)},utc:function(e){return A.utcFormat(e)},locale:function(e){i(e),a(e)},auto:{number:u,linear:c,time:function(){return f()},utc:function(){return d()}},month:h,day:p,quarter:g,utcQuarter:m};var k=Math.sqrt(50),O=Math.sqrt(10),I=Math.sqrt(2)},{"./util":31,"d3-format":4,"d3-time":6,"d3-time-format":5}],17:[function(e,t,n){var r=e("./util"),i=t.exports;i.repeat=function(e,t){var n,r=Array(t);for(n=0;n<t;++n)r[n]=e;return r},i.zeros=function(e){return i.repeat(0,e)},i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(n<0)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},i.random={},i.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,r=function(){return e+n*Math.random()};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r>=e&&r<=t?1/n:0},r.cdf=function(r){return r<e?0:r>t?1:(r-e)/n},r.icdf=function(t){return t>=0&&t<=1?e+t*n:NaN},r},i.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,r=function(){return e+Math.floor(n*Math.random())};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r===Math.floor(r)&&r>=e&&r<t?1/n:0},r.cdf=function(r){var i=Math.floor(r);return i<e?0:i>=t?1:(i-e+1)/n},r.icdf=function(t){return t>=0&&t<=1?e-1+Math.floor(t*n):NaN},r},i.random.normal=function(e,t){e=e||0,t=t||1;var n,r=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,r=a*a+o*o;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(n){var r=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*r},r.cdf=function(n){var r,i=(n-e)/t,a=Math.abs(i);if(a>37)r=0;else{var o,s=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,r=s*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,r/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,r=s/o/2.506628274631)}return i>0?1-r:r},r.icdf=function(n){if(n<=0||n>=1)return NaN;var r=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,o=Math.log(1-r*r)/i,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+t*Math.SQRT2*s},r},i.random.bootstrap=function(e,t){var n=e.filter(r.isValid),a=n.length,o=t?i.random.normal(0,t):null,s=function(){return n[~~(Math.random()*a)]+(o?o():0)};return s.samples=function(e){return i.zeros(e).map(s)},s}},{"./util":31}],18:[function(e,t,n){function r(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return a.dsv(t.delimiter).parse(e)}var i=e("../../util"),a=e("d3-dsv");r.delimiter=function(e){var t={delimiter:e};return function(e,n){return r(e,n?i.extend(n,t):t)}},t.exports=r},{"../../util":31,"d3-dsv":3}],19:[function(e,t,n){var r=e("./dsv");t.exports={json:e("./json"),topojson:e("./topojson"),treejson:e("./treejson"),dsv:r,csv:r.delimiter(","),tsv:r.delimiter("\t")}},{"./dsv":18,"./json":20,"./topojson":21,"./treejson":22}],20:[function(e,t,n){var r=e("../../util");t.exports=function(e,t){var n=r.isObject(e)&&!r.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(n=r.accessor(t.property)(n)),n}},{"../../util":31}],21:[function(e,t,n){var r=e("./json"),i=function(e,t){var n=i.topojson;if(null==n)throw Error("TopoJSON library not loaded.");var a,o=r(e,t);if(t&&t.feature){if(a=o.objects[t.feature])return n.feature(o,a).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(a=o.objects[t.mesh])return[n.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};i.topojson=e("topojson"),t.exports=i},{"./json":20,topojson:32}],22:[function(e,t,n){function r(e,t){function n(e,t){e[i]=t,a.push(e);var o=e[r];if(o)for(var s=0;s<o.length;++s)n(o[s],e)}var r=t&&t.children||"children",i=t&&t.parent||"parent",a=[];return n(e,null),a.root=e,a}var i=e("./json");t.exports=function(e,t){return r(i(e,t),t)}},{"./json":20}],23:[function(e,t,n){function r(t){var n=t.url;if(!n&&t.file)return h+t.file;if(t.baseURL&&!d.test(n)&&(c(n,"/")||"/"===t.baseURL[t.baseURL.length-1]||(n="/"+n),n=t.baseURL+n),!i.useXHR&&c(n,"//")&&(n=(t.defaultProtocol||"http")+":"+n),t.domainWhiteList){var r,a;if(i.useXHR){var o=document.createElement("a");o.href=n,""===o.host&&(o.href=o.href),r=o.hostname.toLowerCase(),a=window.location.hostname}else{var s=e("url").parse(n);r=s.hostname,a=null}if(a!==r){var l=t.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&"."===r[t-1]&&r.lastIndexOf(e)===t});if(!l)throw"URL is not whitelisted: "+n}}return n}function i(e,t){return i.loader(e,t)}function a(e,t){var n,r=t||function(e){throw e};try{n=i.sanitizeUrl(e)}catch(a){return void r(a)}return n?i.useXHR?i.xhr(n,e,t):c(n,h)?i.file(n.slice(h.length),e,t):n.indexOf("://")<0?i.file(n,e,t):i.http(n,e,t):void r("Invalid URL: "+e.url)}function o(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function s(e,t,n){function r(){var e=s.status;!e&&o(s)||e>=200&&e<300||304===e?n(null,s.responseText):n(s,null)}var a=!!n,s=new XMLHttpRequest;if("undefined"==typeof XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(e)||(s=new XDomainRequest),a&&("onload"in s?s.onload=s.onerror=r:s.onreadystatechange=function(){s.readyState>3&&r()}),s.open("GET",e,a),s.setRequestHeader){var l=f.extend({},i.headers,t.headers);for(var u in l)s.setRequestHeader(u,l[u])}if(s.send(),!a&&o(s))return s.responseText}function l(t,n,r){var i=e("fs");return r?void i.readFile(t,r):i.readFileSync(t,"utf8")}function u(t,n,r){var a=f.extend({},i.headers,n.headers),o={url:t,encoding:null,gzip:!0,headers:a};return r?void e("request")(o,function(e,t,n){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",r(e,null)):r(null,n)}):e("sync-request")("GET",t,o).getBody()}function c(e,t){return null!=e&&0===e.lastIndexOf(t,0)}var f=e("../util"),d=/^([A-Za-z]+:)?\/\//,h="file://";
i.loader=a,i.sanitizeUrl=r,i.xhr=s,i.file=l,i.http=u,i.useXHR="undefined"!=typeof XMLHttpRequest,i.headers={},t.exports=i},{"../util":31,fs:2,request:2,"sync-request":2,url:2}],24:[function(e,t,n){function r(e,t){var n=t&&t.type||"json";return e=s[n](e,t),t&&t.parse&&i(e,t.parse),e}function i(e,t){var n,r,i,s,u,c,f=e.length;for(t="auto"===t?o.inferAll(e):a.duplicate(t),n=a.keys(t),r=n.map(function(e){var n=t[e];if(n&&0===n.indexOf("date:")){var r=n.split(/:(.+)?/,2),i=r[1];if(!("'"===i[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1]))throw Error("Format pattern must be quoted: "+i);return i=i.slice(1,-1),i=l(i),function(e){return i.parse(e)}}if(!o.parsers[n])throw Error("Illegal format pattern: "+e+":"+n);return o.parsers[n]}),s=0,c=n.length;s<f;++s)for(i=e[s],u=0;u<c;++u)i[n[u]]=r[u](i[n[u]]);o.annotation(e,t)}var a=e("../util"),o=e("./type"),s=e("./formats"),l=e("../format").time;r.formats=s,t.exports=r},{"../format":16,"../util":31,"./formats":19,"./type":26}],25:[function(e,t,n){var r=e("../util"),i=e("./load"),a=e("./read");t.exports=r.keys(a.formats).reduce(function(e,t){return e[t]=function(e,n,o){r.isString(e)&&(e={url:e}),2===arguments.length&&r.isFunction(n)&&(o=n,n=void 0),n=r.extend({parse:"auto"},n),n.type=t;var s=i(e,o?function(e,t){if(e)return void o(e,null);try{t=a(t,n),o(null,t)}catch(r){o(r,null)}}:void 0);if(!o)return a(s,n)},e},{})},{"../util":31,"./load":23,"./read":24}],26:[function(e,t,n){function r(e,t){return t?void(e[f]=t):e&&e[f]||null}function i(e){return c.keys(e)}function a(e){return"["+e+"]"}function o(e,t){e=c.array(e),t=c.$(t);var n,r,i;if(e[f]&&(n=t(e[f]),c.isString(n)))return n;for(r=0,i=e.length;!c.isValid(n)&&r<i;++r)n=t?t(e[r]):e[r];return c.isDate(n)?"date":c.isNumber(n)?"number":c.isBoolean(n)?"boolean":c.isString(n)?"string":null}function s(e,t){if(e.length){var n=t?c.identity:(t=i(e[0]),a);return t.reduce(function(t,r){return t[r]=o(e,n(r)),t},{})}}function l(e,t){e=c.array(e),t=c.$(t);var n,r,i,a=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(i=t?t(e[n]):e[n],r=0;r<a.length;++r)c.isValid(i)&&!h[a[r]](i)&&(a.splice(r,1),r-=1);if(0===a.length)return"string"}return a[0]}function u(e,t){var n=t?c.identity:(t=i(e[0]),a);return t.reduce(function(t,r){return t[r]=l(e,n(r)),t},{})}var c=e("../util"),f="__types__",d={"boolean":c["boolean"],integer:c.number,number:c.number,date:c.date,string:function(e){return null==e||""===e?null:e+""}},h={"boolean":function(e){return"true"===e||"false"===e||c.isBoolean(e)},integer:function(e){return h.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!c.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};o.annotation=r,o.all=s,o.infer=l,o.inferAll=u,o.parsers=d,t.exports=o},{"../util":31}],27:[function(e,t,n){var r=e("./util"),i={version:e("../package.json").version,load:e("./import/load"),read:e("./import/read"),type:e("./import/type"),Aggregator:e("./aggregate/aggregator"),groupby:e("./aggregate/groupby"),bins:e("./bins/bins"),$bin:e("./bins/histogram").$bin,histogram:e("./bins/histogram").histogram,format:e("./format"),template:e("./template"),time:e("./time")};r.extend(i,r),r.extend(i,e("./accessor")),r.extend(i,e("./generate")),r.extend(i,e("./stats")),r.extend(i,e("./import/readers")),r.extend(i.format,e("./format-tables")),i.print={table:i.format.table,summary:i.format.summary},t.exports=i},{"../package.json":7,"./accessor":8,"./aggregate/aggregator":9,"./aggregate/groupby":11,"./bins/bins":13,"./bins/histogram":14,"./format":16,"./format-tables":15,"./generate":17,"./import/load":23,"./import/read":24,"./import/readers":25,"./import/type":26,"./stats":28,"./template":29,"./time":30,"./util":31}],28:[function(e,t,n){function r(e,t,n){var r=e&&e.nullh||0,i=l.random.normal(0,1),a=u.mean(t,n),o=u.stdev(t,n)/Math.sqrt(u.count.valid(t,n));if(0===o)return a-r===0?1:0;var s=(a-r)/o;return 2*i.cdf(-Math.abs(s))}function i(e,t,n,r){var i,a=r?t.map(o.$(n)):t,s=r?t.map(o.$(r)):n,l=u.count(a),c=u.count(s),f=Array();if(l!==c)throw Error("Array lengths must match.");for(i=0;i<l;++i)o.isValid(a[i])&&o.isValid(s[i])&&f.push(a[i]-s[i]);return u.z.test(f,e&&e.nullh||0)}function a(e,t,n,r){var i=r?t.map(o.$(n)):t,a=r?t.map(o.$(r)):n,s=u.count.valid(i),c=u.count.valid(a),f=l.random.normal(0,1),d=u.mean(i)-u.mean(a)-(e&&e.nullh||0),h=Math.sqrt(u.variance(i)/s+u.variance(a)/c);if(0===h)return 0===d?1:0;var p=d/h;return 2*f.cdf(-Math.abs(p))}var o=e("./util"),s=e("./import/type"),l=e("./generate"),u=t.exports;u.unique=function(e,t,n){t=o.$(t),n=n||[];var r,i,a,s={};for(i=0,a=e.length;i<a;++i)r=t?t(e[i]):e[i],r in s||(s[r]=1,n.push(r));return n},u.count=function(e){return e&&e.length||0},u.count.valid=function(e,t){t=o.$(t);var n,r,i,a=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],o.isValid(n)&&(a+=1);return a},u.count.missing=function(e,t){t=o.$(t);var n,r,i,a=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],null==n&&(a+=1);return a},u.count.distinct=function(e,t){t=o.$(t);var n,r,i,a={},s=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],n in a||(a[n]=1,s+=1);return s},u.count.map=function(e,t){t=o.$(t);var n,r,i,a={};for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],a[n]=n in a?a[n]+1:1;return a},u.median=function(e,t){return t&&(e=e.map(o.$(t))),e=e.filter(o.isValid).sort(o.cmp),u.quantile(e,.5)},u.quartile=function(e,t){t&&(e=e.map(o.$(t))),e=e.filter(o.isValid).sort(o.cmp);var n=u.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},u.quantile=function(e,t,n){void 0===n&&(n=t,t=o.identity),t=o.$(t);var r=(e.length-1)*n+1,i=Math.floor(r),a=+t(e[i-1]),s=r-i;return s?a+s*(t(e[i])-a):a},u.sum=function(e,t){t=o.$(t);for(var n,r=0,i=0,a=e.length;i<a;++i)n=t?t(e[i]):e[i],o.isValid(n)&&(r+=n);return r},u.mean=function(e,t){t=o.$(t);var n,r,i,a,s,l=0;for(r=0,a=0,i=e.length;r<i;++r)s=t?t(e[r]):e[r],o.isValid(s)&&(n=s-l,l+=n/++a);return l},u.mean.geometric=function(e,t){t=o.$(t);var n,r,i,a,s=1;for(a=0,n=0,r=e.length;a<r;++a)if(i=t?t(e[a]):e[a],o.isValid(i)){if(i<=0)throw Error("Geometric mean only defined for positive values.");s*=i,++n}return s=n>0?Math.pow(s,1/n):0},u.mean.harmonic=function(e,t){t=o.$(t);var n,r,i,a,s=0;for(a=0,n=0,r=e.length;a<r;++a)i=t?t(e[a]):e[a],o.isValid(i)&&(s+=1/i,++n);return n/s},u.variance=function(e,t){if(t=o.$(t),!o.isArray(e)||e.length<2)return 0;var n,r,i,a,s=0,l=0;for(r=0,i=0;r<e.length;++r)a=t?t(e[r]):e[r],o.isValid(a)&&(n=a-s,s+=n/++i,l+=n*(a-s));return l/=i-1},u.stdev=function(e,t){return Math.sqrt(u.variance(e,t))},u.modeskew=function(e,t){var n=u.mean(e,t),r=u.median(e,t),i=u.stdev(e,t);return 0===i?0:(n-r)/i},u.min=function(e,t){return u.extent(e,t)[0]},u.max=function(e,t){return u.extent(e,t)[1]},u.extent=function(e,t){t=o.$(t);var n,r,i,a,s=e.length;for(a=0;a<s;++a)if(i=t?t(e[a]):e[a],o.isValid(i)){n=r=i;break}for(;a<s;++a)i=t?t(e[a]):e[a],o.isValid(i)&&(i<n&&(n=i),i>r&&(r=i));return[n,r]},u.extent.index=function(e,t){t=o.$(t);var n,r,i,a,s=-1,l=-1,u=e.length;for(a=0;a<u;++a)if(i=t?t(e[a]):e[a],o.isValid(i)){n=r=i,s=l=a;break}for(;a<u;++a)i=t?t(e[a]):e[a],o.isValid(i)&&(i<n&&(n=i,s=a),i>r&&(r=i,l=a));return[s,l]},u.dot=function(e,t,n){var r,i,a=0;if(n)for(t=o.$(t),n=o.$(n),r=0;r<e.length;++r)i=t(e[r])*n(e[r]),i===i&&(a+=i);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(r=0;r<e.length;++r)i=e[r]*t[r],i===i&&(a+=i)}return a},u.dist=function(e,t,n,r){var i,a,s=o.isFunction(n)||o.isString(n),l=e,u=s?e:t,c=s?r:n,f=2===c||null==c,d=e.length,h=0;for(s&&(t=o.$(t),n=o.$(n)),a=0;a<d;++a)i=s?t(l[a])-n(u[a]):l[a]-u[a],h+=f?i*i:Math.pow(Math.abs(i),c);return f?Math.sqrt(h):Math.pow(h,1/c)},u.cohensd=function(e,t,n){var r=n?e.map(o.$(t)):e,i=n?e.map(o.$(n)):t,a=u.mean(r),s=u.mean(i),l=u.count.valid(r),c=u.count.valid(i);if(l+c-2<=0)return 0;var f=u.variance(r),d=u.variance(i),h=Math.sqrt(((l-1)*f+(c-1)*d)/(l+c-2));return 0===h?0:(a-s)/h},u.covariance=function(e,t,n){var r,i,a,s,l,c=n?e.map(o.$(t)):e,f=n?e.map(o.$(n)):t,d=c.length,h=u.mean(c),p=u.mean(f),g=0,m=0;if(d!==f.length)throw Error("Input lengths must match.");for(r=0;r<d;++r)if(i=c[r],s=o.isValid(i),a=f[r],l=o.isValid(a),s&&l)g+=(i-h)*(a-p),++m;else if(s||l)throw Error("Valid values must align.");return g/(m-1)},u.rank=function(e,t){t=o.$(t)||o.identity;var n,r,i,a=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(o.comparator("val")),s=e.length,l=Array(s),u=-1,c={};for(n=0;n<s;++n){if(r=a[n].val,u<0&&c===r)u=n-1;else if(u>-1&&c!==r){for(i=1+(n-1+u)/2;u<n;++u)l[a[u].idx]=i;u=-1}l[a[n].idx]=n+1,c=r}if(u>-1)for(i=1+(s-1+u)/2;u<s;++u)l[a[u].idx]=i;return l},u.cor=function(e,t,n){var r=n;n=r?e.map(o.$(n)):t,t=r?e.map(o.$(t)):e;var i=u.dot(t,n),a=u.mean(t),s=u.mean(n),l=u.stdev(t),c=u.stdev(n),f=e.length;return(i-f*a*s)/((f-1)*l*c)},u.cor.rank=function(e,t,n){var r,i,a,o=n?u.rank(e,t):u.rank(e),s=n?u.rank(e,n):u.rank(t),l=e.length;for(r=0,i=0;r<l;++r)a=o[r]-s[r],i+=a*a;return 1-6*i/(l*(l*l-1))},u.cor.dist=function(e,t,n){var r,i,a,s,l=n?e.map(o.$(t)):e,c=n?e.map(o.$(n)):t,f=u.dist.mat(l),d=u.dist.mat(c),h=f.length;for(r=0,i=0,a=0,s=0;r<h;++r)i+=f[r]*f[r],a+=d[r]*d[r],s+=f[r]*d[r];return Math.sqrt(s/Math.sqrt(i*a))},u.linearRegression=function(e,t,n){var r,i,a=n?e.map(o.$(t)):e,s=n?e.map(o.$(n)):t,l=a.length,c=u.covariance(a,s),f=u.stdev(a),d=u.stdev(s),h=c/(f*f),p=u.mean(s)-h*u.mean(a),g={slope:h,intercept:p,R:c/(f*d),rss:0};for(i=0;i<l;++i)o.isValid(a[i])&&o.isValid(s[i])&&(r=h*a[i]+p-s[i],g.rss+=r*r);return g},u.bootstrap={},u.bootstrap.ci=function(e,t,n,r,i){var a,s,c,f,d,h,p;for(o.isFunction(t)||o.isString(t)?(a=e.map(o.$(t)),s=n,c=r,f=i):(a=e,s=t,c=n,f=r),s=s?+s:1e3,c=c||.05,d=l.random.bootstrap(a,f),p=0,h=Array(s);p<s;++p)h[p]=u.mean(d.samples(a.length));return h.sort(o.numcmp),[u.quantile(h,c/2),u.quantile(h,1-c/2)]},u.z={},u.z.ci=function(e,t,n){var r=e,i=t;(o.isFunction(t)||o.isString(t))&&(r=e.map(o.$(t)),i=n),i=i||.05;var a=.05===i?1.96:l.random.normal(0,1).icdf(1-i/2),s=u.mean(r),c=u.stdev(r)/Math.sqrt(u.count.valid(r));return[s-a*c,s+a*c]},u.z.test=function(e,t,n,s){return o.isFunction(n)||o.isString(n)?(s&&s.paired?i:a)(s,e,t,n):o.isArray(t)?(n&&n.paired?i:a)(n,e,t):o.isFunction(t)||o.isString(t)?r(n,e,t):r(t,e)},u.dist.mat=function(e){var t,n,r,i=e.length,a=i*i,o=Array(a),s=l.zeros(i),u=0;for(n=0;n<i;++n)for(o[n*i+n]=0,r=n+1;r<i;++r)o[n*i+r]=t=Math.abs(e[n]-e[r]),o[r*i+n]=t,s[n]+=t,s[r]+=t;for(n=0;n<i;++n)u+=s[n],s[n]/=i;for(u/=a,n=0;n<i;++n)for(r=n;r<i;++r)o[n*i+r]+=u-s[n]-s[r],o[r*i+n]=o[n*i+r];return o},u.entropy=function(e,t){t=o.$(t);var n,r,i=0,a=0,s=e.length;for(n=0;n<s;++n)i+=t?t(e[n]):e[n];if(0===i)return 0;for(n=0;n<s;++n)r=(t?t(e[n]):e[n])/i,r&&(a+=r*Math.log(r));return-a/Math.LN2},u.mutual=function(e,t,n,r){var i,a,s,l=r?e.map(o.$(t)):e,u=r?e.map(o.$(n)):t,c=r?e.map(o.$(r)):n,f={},d={},h=c.length,p=0,g=0,m=0;for(s=0;s<h;++s)f[l[s]]=0,d[u[s]]=0;for(s=0;s<h;++s)f[l[s]]+=c[s],d[u[s]]+=c[s],p+=c[s];for(a=1/(p*Math.LN2),s=0;s<h;++s)0!==c[s]&&(i=p*c[s]/(f[l[s]]*d[u[s]]),g+=c[s]*a*Math.log(i),m+=c[s]*a*Math.log(c[s]/p));return[g,1+g/m]},u.mutual.info=function(e,t,n,r){return u.mutual(e,t,n,r)[0]},u.mutual.dist=function(e,t,n,r){return u.mutual(e,t,n,r)[1]},u.profile=function(e,t){var n,r,i,a,l,c=0,f=0,d=0,h=0,p=null,g=null,m=0,v=[],y={};for(i=0;i<e.length;++i)a=t?t(e[i]):e[i],y[a]=a in y?y[a]+1:(h+=1,1),null==a?++d:o.isValid(a)&&(l="string"==typeof a?a.length:a,(null===p||l<p)&&(p=l),(null===g||l>g)&&(g=l),n=l-c,c+=n/++f,m+=n*(l-c),v.push(l));return m/=f-1,r=Math.sqrt(m),v.sort(o.cmp),{type:s(e,t),unique:y,count:e.length,valid:f,missing:d,distinct:h,min:p,max:g,mean:c,stdev:r,median:a=u.quantile(v,.5),q1:u.quantile(v,.25),q3:u.quantile(v,.75),modeskew:0===r?0:(c-a)/r}},u.summary=function(e,t){t=t||o.keys(e[0]);var n=t.map(function(t){var n=u.profile(e,o.$(t));return n.field=t,n});return n.__summary__=!0,n}},{"./generate":17,"./import/type":26,"./util":31}],29:[function(e,t,n){function r(e){var t=i(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(f)}function i(e,t,n){t=t||"obj";var r=0,i="'",s=d;return e.replace(s,function(s,l,u){return i+=e.slice(r,u).replace(m,o),r=u+s.length,l&&(i+="'\n+((__t=("+a(l,t,n)+"))==null?'':__t)+\n'"),s}),i+"'"}function a(e,t,n){function i(e){return e=e||"",f?(f=!1,d="String("+d+")"+e):d+=e,d}function a(){return"(typeof "+d+'==="number"?new Date('+d+"):"+d+")"}function o(e){var t=_[0];if(!("'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]))throw Error("Format pattern must be quoted: "+t);t=t.slice(1,-1),v=s(t,e),f=!1;var n="number"===e?d:a();d="this.formats["+v+"]("+n+")"}var l=e.match(h),c=l.shift().trim(),f=!0;n&&(n[c]=1);for(var d=r.property(t,c),g=0;g<l.length;++g){var m,v,y,b=l[g],_=null;switch((m=b.indexOf(":"))>0&&(b=b.slice(0,m),_=l[g].slice(m+1).match(p).map(function(e){return e.trim()})),b=b.trim()){case"length":i(".length");break;case"lower":i(".toLowerCase()");break;case"upper":i(".toUpperCase()");break;case"lower-locale":i(".toLocaleLowerCase()");break;case"upper-locale":i(".toLocaleUpperCase()");break;case"trim":i(".trim()");break;case"left":v=u.number(_[0]),i(".slice(0,"+v+")");break;case"right":v=u.number(_[0]),i(".slice(-"+v+")");break;case"mid":v=u.number(_[0]),y=v+u.number(_[1]),i(".slice(+"+v+","+y+")");break;case"slice":v=u.number(_[0]),i(".slice("+v+(_.length>1?","+u.number(_[1]):"")+")");break;case"truncate":v=u.number(_[0]),y=_[1],y="left"!==y&&"middle"!==y&&"center"!==y?"right":y,d="this.truncate("+i()+","+v+",'"+y+"')";break;case"pad":v=u.number(_[0]),y=_[1],y="left"!==y&&"middle"!==y&&"center"!==y?"right":y,d="this.pad("+i()+","+v+",'"+y+"')";break;case"number":o("number");break;case"time":o("time");break;case"time-utc":o("utc");break;case"month":d="this.month("+d+")";break;case"month-abbrev":d="this.month("+d+",true)";break;case"day":d="this.day("+d+")";break;case"day-abbrev":d="this.day("+d+",true)";break;case"quarter":d="this.quarter("+d+")";break;case"quarter-utc":d="this.utcQuarter("+d+")";break;default:throw Error("Unrecognized template filter: "+b)}}return d}function o(e){return"\\"+g[e]}function s(e,t){var n=t+":"+e;if(null==f.format_map[n]){var r=c[t](e),i=f.formats.length;return f.formats.push(r),f.format_map[n]=i,i}return f.format_map[n]}function l(e,t){return f.formats[s(e,t)]}var u=e("./util"),c=e("./format"),f={formats:[],format_map:{},truncate:u.truncate,pad:u.pad,day:c.day,month:c.month,quarter:c.quarter,utcQuarter:c.utcQuarter};r.source=i,r.context=f,r.format=l,t.exports=r,r.clearFormatCache=function(){f.formats=[],f.format_map={}},r.property=function(e,t){var n=u.field(t).map(u.str).join("][");return e+"["+n+"]"};var d=/\{\{(.+?)\}\}|$/g,h=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,p=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,g={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},m=/\\|'|\r|\n|\u2028|\u2029/g},{"./format":16,"./util":31}],30:[function(e,t,n){function r(e){return u.setTime(+e),u}function i(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,t,n,r,a,o){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,a,o)}function o(e,t,n,r){var i,a,o,s=p[0];for(i=1,a=p.length;i<a;++i)if(s=p[i],t>s[0]){if(o=t/s[0],o>r)return e[p[i-1][1]];if(o>=n)return e[s[1]]}return e[p[a-1][1]]}function s(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return o(e,t,n,r)},r}var l=e("d3-time"),u=new Date,c=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),d=[a("second",l.second,c),a("minute",l.minute,c),a("hour",l.hour,c),a("day",l.day,c,[1,7]),a("month",l.month,c,[1,3,6]),a("year",l.year,c),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],h=[a("second",l.utcSecond,f),a("minute",l.utcMinute,f),a("hour",l.utcHour,f),a("day",l.utcDay,f,[1,7]),a("month",l.utcMonth,f,[1,3,6]),a("year",l.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],p=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=s(d),t.exports.utc=s(h)},{"d3-time":6}],31:[function(e,t,n){(function(e){function n(e,t){var n,r="";for(n=0;n<e;++n)r+=t;return r}function r(e,t,n){var r=0,i=e.split(l);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,r<=t}).reverse():i.filter(function(e){return r+=e.length,r<=t}),e.length?e.join("").trim():i[0].slice(0,t)}var i=t.exports,a="__name__";i.namedfunc=function(e,t){return t[a]=e,t},i.name=function(e){return null==e?null:e[a]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.toMap=function(e,t){return(t=i.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},i.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;r<t;++r)n+="|"+String(e[r]);return n};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof e&&e.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"!==e&&!!e},i.date=function(e,t){var n=t?t:Date;return null==e||""===e?null:n.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var s=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(s).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var t;return i.isString(e)&&(t=i.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},i.$func=function(e,t){return function(n){n=i.$(n)||i.identity;var r=e+(i.name(n)?"_"+i.name(n):"");return i.namedfunc(r,function(e){return t(n(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,t){e=i.$(e);var n=i.isArray(t)?i.toMap(t):t;return function(t){return!!n[e(t)]}},i.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),i.accessor(e)}),function(n,r){var a,o,s,l;for(a=0,o=e.length;a<o;++a)if(s=e[a],l=i.cmp(s(n),s(r)))return l*t[a];return 0}},i.cmp=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},i.numcmp=function(e,t){return e-t},i.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return a<o?-1:a>o?1:r[n(e)]-r[n(i)]}),e},i.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},i.pad=function(e,t,r,i){i=i||" ";var a=t-e.length;if(a<=0)return e;switch(r){case"left":return n(a,i)+e;case"middle":case"center":return n(Math.floor(a/2),i)+e+n(Math.ceil(a/2),i);default:return e+n(a,i)}},i.truncate=function(e,t,n,i,a){var o=e.length;if(o<=t)return e;a=void 0!==a?String(a):"…";var s=Math.max(0,t-a.length);switch(n){case"left":return a+(i?r(e,s,1):e.slice(o-s));case"middle":case"center":var l=Math.ceil(s/2),u=Math.floor(s/2);return(i?r(e,l):e.slice(0,l))+a+(i?r(e,u,1):e.slice(o-u));default:return(i?r(e,s):e.slice(0,s))+a}};var l=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:2}],32:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.topojson=t.topojson||{})}(this,function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0),e[0]=(n+=e[0])*i+o,e[1]=(r+=e[1])*a+s}}function r(e){if(!e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0);var l=Math.round((e[0]-o)/i),u=Math.round((e[1]-s)/a);e[0]=l-n,e[1]=u-r,n=l,r=u}}function i(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function a(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function o(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return s(e,t)})}:s(e,t)}function s(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:l(e,t)};return null==t.id&&delete n.id,n}function l(e,t){function r(e,t){t.length&&t.pop();for(var n,r=f[e<0?~e:e],a=0,o=r.length;a<o;++a)t.push(n=r[a].slice()),c(n,a);e<0&&i(t,o)}function a(e){return e=e.slice(),c(e,0),e}function o(e){for(var t=[],n=0,i=e.length;n<i;++n)r(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function s(e){for(var t=o(e);t.length<4;)t.push(t[0].slice());return t}function l(e){return e.map(s)}function u(e){var t=e.type;return"GeometryCollection"===t?{type:t,geometries:e.geometries.map(u)}:t in d?{type:t,coordinates:d[t](e)}:null}var c=n(e.transform),f=e.arcs,d={Point:function(e){return a(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(a)},LineString:function(e){return o(e.arcs)},MultiLineString:function(e){return e.arcs.map(o)},Polygon:function(e){return l(e.arcs)},MultiPolygon:function(e){return e.arcs.map(l)}};return u(t)}function u(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),s.push(r)}}var i={},a={},o={},s=[],l=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++l],t[l]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),s=i[0],l=i[1];if(t=o[s])if(delete o[t.end],t.push(e),t.end=l,r=a[l]){delete a[r.start];var u=r===t?t:t.concat(r);a[u.start=t.start]=o[u.end=r.end]=u}else a[t.start]=o[t.end]=t;else if(t=a[l])if(delete a[t.start],t.unshift(e),t.start=s,r=o[s]){delete o[r.end];var c=r===t?t:r.concat(t);a[c.start=r.start]=o[c.end=t.end]=c}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=s]=o[t.end=l]=t}),r(o,a),r(a,o),t.forEach(function(e){i[e<0?~e:e]||s.push([e])}),s}function c(e){return l(e,f.apply(this,arguments))}function f(e,t,n){function r(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){"GeometryCollection"===e.type?e.geometries.forEach(o):e.type in f&&(l=e,f[e.type](e.arcs))}var s=[];if(arguments.length>1){var l,c=[],f={LineString:i,MultiLineString:a,Polygon:a,MultiPolygon:function(e){e.forEach(a)}};o(t),c.forEach(arguments.length<3?function(e){s.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&s.push(e[0].i)})}else for(var d=0,h=e.arcs.length;d<h;++d)s.push(d);return{type:"MultiLineString",arcs:u(e,s)}}function d(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function h(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return a/2}function p(e){return l(e,g.apply(this,arguments))}function g(e,t){function n(e){e.forEach(function(t){t.forEach(function(t){(i[t=t<0?~t:t]||(i[t]=[])).push(e)})}),a.push(e)}function r(t){return Math.abs(h(l(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}var i={},a=[],o=[];return t.forEach(function(e){"Polygon"===e.type?n(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(n)}),a.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,o.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),a.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:o.map(function(t){var n,a=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].length<2&&a.push(e)})})}),a=u(e,a),(n=a.length)>1)for(var o,s,l=1,c=r(a[0]);l<n;++l)(o=r(a[l]))>c&&(s=a[0],a[0]=a[l],a[l]=s,c=o);return a})}}function m(e){function t(e,t){e.forEach(function(e){e<0&&(e=~e);var n=i[e];n?n.push(t):i[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in s&&s[e.type](e.arcs,t)}var i={},o=e.map(function(){return[]}),s={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var l in i)for(var u=i[l],c=u.length,f=0;f<c;++f)for(var d=f+1;d<c;++d){var h,p=u[f],g=u[d];(h=o[p])[l=a(h,g)]!==g&&h.splice(l,0,g),(h=o[g])[l=a(h,p)]!==p&&h.splice(l,0,p)}return o}function v(e,t){return e[1][2]-t[1][2]}function y(){function e(e,t){for(;t>0;){var n=(t+1>>1)-1,i=r[n];if(v(e,i)>=0)break;r[i._=t]=i,r[e._=t=n]=e}}function t(e,t){for(;;){var n=t+1<<1,a=n-1,o=t,s=r[o];if(a<i&&v(r[a],s)<0&&(s=r[o=a]),n<i&&v(r[n],s)<0&&(s=r[o=n]),o===t)break;r[s._=t]=s,r[e._=t=o]=e}}var n={},r=[],i=0;return n.push=function(t){return e(r[t._=i]=t,i++),i},n.pop=function(){if(!(i<=0)){var e,n=r[0];return--i>0&&(e=r[i],t(r[e._=0]=e,0)),n}},n.remove=function(n){var a,o=n._;if(r[o]===n)return o!==--i&&(a=r[i],(v(a,n)<0?e:t)(r[a._=o]=a,o)),o},n}function b(e,t){function i(e){s.remove(e),e[1][2]=t(e),s.push(e)}var a=n(e.transform),o=r(e.transform),s=y();return t||(t=d),e.arcs.forEach(function(e){var n,r,l,u,c=[],f=0;for(r=0,l=e.length;r<l;++r)u=e[r],a(e[r]=[u[0],u[1],1/0],r);for(r=1,l=e.length-1;r<l;++r)n=e.slice(r-1,r+2),n[1][2]=t(n),c.push(n),s.push(n);for(r=0,l=c.length;r<l;++r)n=c[r],n.previous=c[r-1],n.next=c[r+1];for(;n=s.pop();){var d=n.previous,h=n.next;n[1][2]<f?n[1][2]=f:f=n[1][2],d&&(d.next=h,d[2]=n[2],i(d)),h&&(h.previous=d,h[0]=n[0],i(h))}e.forEach(o)}),e}var _="1.6.27";e.version=_,e.mesh=c,e.meshArcs=f,e.merge=p,e.mergeArcs=g,e.feature=o,e.neighbors=m,e.presimplify=b,Object.defineProperty(e,"__esModule",{value:!0})})},{}],33:[function(e,t,n){function r(e,t){var n={};return i(e,n),n.add=[],n.mod=[],n.rem=[],n.reflow=t,n}function i(e,t){t.stamp=e?e.stamp:0,t.sort=e?e.sort:null,t.facet=e?e.facet:null,t.trans=e?e.trans:null,t.dirty=e?e.dirty:[],t.request=e?e.request:null;for(var n,r=0,i=a.length;r<i;++r)t[n=a[r]]=e?e[n]:{}}var a=e("./Dependencies").ALL;t.exports={create:r,copy:i}},{"./Dependencies":36}],34:[function(e,t,n){function r(e){o.init.call(this,e),this._data=[],this.router(!0).collector(!0)}var i=e("vega-logging"),a=e("./Tuple"),o=e("./Node").prototype,s=e("./ChangeSet"),l=r.prototype=Object.create(o);l.constructor=r,l.data=function(){return this._data},l.evaluate=function(e){i.debug(e,["collecting"]);var t=s.create(e);return e.rem.length&&(this._data=a.idFilter(this._data,e.rem),t.rem=e.rem.slice(0)),e.add.length&&(this._data=this._data.concat(e.add),t.add=e.add.slice(0)),e.mod.length&&(t.mod=e.mod.slice(0)),e.sort&&this._data.sort(e.sort),e.reflow&&(t.mod=t.mod.concat(a.idFilter(this._data,t.add,t.mod,t.rem)),t.reflow=!1),t},t.exports=r},{"./ChangeSet":33,"./Node":39,"./Tuple":41,"vega-logging":49}],35:[function(e,t,n){function r(e,t,n){this._graph=e,this._name=t,this._data=[],this._source=null,this._facet=n,this._input=u.create(),this._output=null,this._indexes={},this._indexFields=[],this._inputNode=null,this._outputNode=null,this._pipeline=null,this._collector=null,this._mutates=!1}function i(e){var t=new d(e._graph).router(!0).collector(!0);return t.data=function(){return e._data},t.evaluate=function(t){l.debug(t,["input",e._name]);var n,r=e._input,i=u.create(t);for(n in r.fields)i.fields[n]=1;return r.rem.length&&(e._data=f.idFilter(e._data,r.rem)),r.add.length&&(e._data=e._data.concat(r.add)),r.sort&&e._data.sort(r.sort),t.reflow&&(r.mod=r.mod.concat(f.idFilter(e._data,r.add,r.mod,r.rem))),e._input=u.create(),i.add=r.add,i.mod=r.mod,i.rem=r.rem,i.facet=e._facet,i},t}function a(e){function t(t){var n,r,i,a,o,l,u=e._indexFields;for(n=0;n<u.length;++n){for(a=u[n],o=e._indexes[a],i=s.$(a),r=0;r<t.add.length;++r)l=i(t.add[r]),f.prev_init(t.add[r]),o[l]=(o[l]||0)+1;for(r=0;r<t.rem.length;++r)l=i(t.rem[r]),o[l]=(o[l]||0)-1;for(r=0;r<t.mod.length;++r)l=i(t.mod[r]._prev),o[l]=(o[l]||0)-1,l=i(t.mod[r]),o[l]=(o[l]||0)+1}}var n=new d(e._graph).router(!0).reflows(!0).collector(!0);return n.data=function(){return e._collector?e._collector.data():e._data},n.evaluate=function(n){l.debug(n,["output",e._name]),t(n);var r=u.create(n,!0);return e._facet&&(e._facet.values=e.values(),n.facet=null),e._output=n,r.data[e._name]=1,r},n}function o(e){var t=new d(e._graph).router(!0);return t.evaluate=function(t){if(e.mutates()){var n=e._srcMap||(e._srcMap={}),r=u.create(t);return r.add=t.add.map(function(e){return n[e._id]=f.derive(e)}),r.mod=t.mod.map(function(e){return f.rederive(e,n[e._id])}),r.rem=t.rem.map(function(e){var t=n[e._id];return n[e._id]=null,t}),e._input=r}return e._input=t},t}var s=e("datalib"),l=e("vega-logging"),u=e("./ChangeSet"),c=e("./Collector"),f=e("./Tuple"),d=e("./Node"),h=r.prototype;h.name=function(e){return arguments.length?(this._name=e,this):this._name},h.source=function(e){return arguments.length?this._source=this._graph.data(e):this._source},h.insert=function(e){return this._input.add=this._input.add.concat(e.map(f.ingest)),this},h.remove=function(e){var t=this._data.filter(e);return this._input.rem=this._input.rem.concat(t),this},h.update=function(e,t,n){var r=this._input.mod,i=f.idMap(r);return this._input.fields[t]=1,this._data.filter(e).forEach(function(e){var a=e[t],o=n(e);a!==o&&(f.set(e,t,o),1!==i[e._id]&&(r.push(e),i[e._id]=1))}),this},h.values=function(e){return arguments.length?(this._input.rem=this._data.slice(),e&&this.insert(e),this):this._collector.data()},h.mutates=function(e){return arguments.length?(this._mutates=this._mutates||e,
this):this._mutates},h.last=function(){return this._output},h.fire=function(e){return e&&(this._input=e),this._graph.propagate(this._input,this._pipeline[0]),this},h.pipeline=function(e){if(!arguments.length)return this._pipeline;var t,n=this._graph;return e.unshift(this._inputNode=i(this)),t=n.preprocess(e),t.router&&e.push(t.collector=new c(n)),e.push(this._outputNode=a(this)),this._collector=t.collector,this._mutates=!!t.mutates,n.connect(this._pipeline=e),this},h.synchronize=function(){return this._graph.synchronize(this._pipeline),this},h.getIndex=function(e){var t,n,r,i,a=this.values(),o=this._indexes,l=this._indexFields,u=s.$(e);if(!o[e])for(o[e]=t={},l.push(e),n=0,r=a.length;n<r;++n)i=u(a[n]),t[i]=(t[i]||0)+1,f.prev_init(a[n]);return o[e]},h.listener=function(){return o(this).addListener(this._inputNode)},h.addListener=function(e){return e instanceof r?this._collector.addListener(e.listener()):this._outputNode.addListener(e),this},h.removeListener=function(e){this._outputNode.removeListener(e)},h.listeners=function(e){return(e?this._collector:this._outputNode).listeners()},t.exports=r},{"./ChangeSet":33,"./Collector":34,"./Node":39,"./Tuple":41,datalib:27,"vega-logging":49}],36:[function(e,t,n){var r=t.exports={ALL:["data","fields","scales","signals"]};r.ALL.forEach(function(e){r[e.toUpperCase()]=e})},{}],37:[function(e,t,n){function r(){}var i=e("datalib"),a=e("vega-logging"),o=e("./Heap"),s=e("./ChangeSet"),l=e("./DataSource"),u=e("./Collector"),c=e("./Tuple"),f=e("./Signal"),d=e("./Dependencies"),h=r.prototype;h.init=function(){this._stamp=0,this._rank=0,this._data={},this._signals={},this._requestedIndexes={},this.doNotPropagate={}},h.rank=function(){return++this._rank},h.values=function(e,t,n){var r,a,o=e===d.SIGNALS?this._signals:this._data,s=void 0!==t?t:i.keys(o);if(Array.isArray(s)){for(r=n||{},a=0;a<s.length;++a)r[s[a]]=o[s[a]].values();return r}return o[s].values()},h.dataValues=function(e){return this.values(d.DATA,e)},h.signalValues=function(e){return this.values(d.SIGNALS,e)},h.data=function(e,t,n){var r=this._data;if(arguments.length)return 1===arguments.length?r[e]:r[e]=new l(this,e,n).pipeline(t);var i,a=[];for(i in r)a.push(r[i]);return a},h.signal=function(e,t){if(1===arguments.length){var n=this;return Array.isArray(e)?e.map(function(e){return n._signals[e]}):this._signals[e]}return this._signals[e]=new f(this,e,t)},h.signalRef=function(e){Array.isArray(e)||(e=i.field(e));var t=this.signal(e[0]).value();if(e.length>1)for(var n=1,r=e.length;n<r;++n)t=t[e[n]];return t},h.requestIndex=function(e,t){var n=this._requestedIndexes,r=n[e]||(n[e]={});return r[t]=!0,this},h.buildIndexes=function(){var e,t,n,r,a,o,s,l,u=this._requestedIndexes,c=i.keys(u);for(e=0,t=c.length;e<t;++e){if(o=this.data(a=c[e]),!o)throw Error("Data source "+i.str(a)+" does not exist.");for(s=i.keys(u[a]),n=0,r=s.length;n<r;++n)null!==(l=s[n])&&(o.getIndex(l),u[a][l]=null)}return this},h.propagate=function(e,t,n,r){var i,a,l,u,c,d,h,p,g={},m=new o(function(e,t){return e._qrank-t._qrank});if(e.stamp)throw Error("Pulse already has a non-zero stamp.");for(e.stamp=n||++this._stamp,g[t._id]=e,m.push(t.qrank(!0));m.size()>0;)if(t=m.peek(),p=t instanceof f,e=g[t._id],t.rank()!==t.qrank())m.replace(t.qrank(!0));else if(m.pop(),g[t._id]=null,i=t._listeners,(!p||p&&!r)&&(e=this.evaluate(e,t)),e!==this.doNotPropagate)for(!e.reflow&&t.reflows()&&(e=s.create(e,!0)),d=0,h=i.length;d<h;++d)if(a=i[d],void 0!==(l=g[a._id])){if(null===l)throw Error("Already propagated to node.");if(l===e)continue;if(u=e.add.length||e.mod.length||e.rem.length,c=l.add.length||l.mod.length||l.rem.length,u&&c)throw Error("Multiple changeset pulses to same node");g[a._id]=u?e:l,g[a._id].reflow=e.reflow||l.reflow}else m.push(a.qrank(!0)),g[a._id]=e;return this.done(e)},h.done=function(e){a.debug(e,["bookkeeping"]);for(var t in e.data)this.data(t).synchronize();return this},h.preprocess=function(e){for(var t,n,r,i,a=this,o=0,s=0;s<e.length;++s)t=e[s],t.batch()&&!t._collector&&(n||!r?(t=new u(a),e.splice(s,0,t),n=!1):t._collector=r),(i=t.collector())&&(r=t),n=n||t.router()&&!i,o=o||t.mutates(),t.produces()&&(e.splice(s+1,0,new u(a)),n=!1);return{router:n,collector:r,mutates:o}},h.connect=function(e){var t,n,r,a,o,s,l,u,c,f;for(o=0,s=e.length;o<s;++o){for(n=e[o],n.collector()&&(t=n),r=n.dependency(d.DATA),l=0,u=r.length;l<u;++l){if(!(c=this.data(f=r[l])))throw new Error("Unknown data source "+i.str(f));c.addListener(t)}for(a=n.dependency(d.SIGNALS),l=0,u=a.length;l<u;++l){if(!(c=this.signal(f=a[l])))throw new Error("Unknown signal "+i.str(f));c.addListener(t)}o>0&&e[o-1].addListener(n)}return e},h.disconnect=function(e){var t,n,r,i,a,o,s,l;for(a=0,o=e.length;a<o;++a){for(n=e[a],n.collector()&&(t=n),r=n.dependency(d.DATA),s=0,l=r.length;s<l;++s)this.data(r[s]).removeListener(t);for(i=n.dependency(d.SIGNALS),s=0,l=i.length;s<l;++s)this.signal(i[s]).removeListener(t);n.disconnect()}return e},h.synchronize=function(e){var t,n,r,i,a,o,s,l,u={};for(r=0,i=e.length;r<i;++r)if(t=e[r],t.collector())for(a=0,n=t.data(),o=n.length;a<o;++a)l=(s=n[a])._id,u[l]||(c.prev_update(s),u[l]=1);return this},h.reevaluate=function(e,t){var n=e.reflow&&t.last()>=e.stamp,r=t.router()||e.add.length||e.rem.length;return r||!n||t.reevaluate(e)},h.evaluate=function(e,t){return this.reevaluate(e,t)?(e=t.evaluate(e),t.last(e.stamp),e):e},t.exports=r},{"./ChangeSet":33,"./Collector":34,"./DataSource":35,"./Dependencies":36,"./Heap":38,"./Signal":40,"./Tuple":41,datalib:27,"vega-logging":49}],38:[function(e,t,n){function r(e){this.cmp=e,this.nodes=[]}function i(e,t,n,r){var i,a,o;for(i=e[n];n>t&&(o=n-1>>1,a=e[o],r(i,a)<0);)e[n]=a,n=o;return e[n]=i}function a(e,t,n){for(var r,a=t,o=e.length,s=e[t],l=2*t+1;l<o;)r=l+1,r<o&&n(e[l],e[r])>=0&&(l=r),e[t]=e[l],t=l,l=2*t+1;return e[t]=s,i(e,a,t,n)}var o=r.prototype;o.size=function(){return this.nodes.length},o.clear=function(){return this.nodes=[],this},o.peek=function(){return this.nodes[0]},o.push=function(e){var t=this.nodes;return t.push(e),i(t,0,t.length-1,this.cmp)},o.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,a(t,0,this.cmp)):e=n,e},o.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,a(t,0,this.cmp),n},o.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,a(t,0,this.cmp)),e},t.exports=r},{}],39:[function(e,t,n){function r(e){e&&this.init(e)}var i=e("./Dependencies").ALL,a=0,o=r.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32},s=r.prototype;s.init=function(e){this._id=++a,this._graph=e,this._rank=e.rank(),this._qrank=null,this._stamp=0,this._listeners=[],this._listeners._ids={},this._deps={};for(var t=0,n=i.length;t<n;++t)this._deps[i[t]]=[];return this._flags=0,this},s.rank=function(){return this._rank},s.rerank=function(){for(var e,t=this._graph,n=[this];n.length;)e=n.shift(),e._rank=t.rank(),n.unshift.apply(n,e.listeners());return this},s.qrank=function(){return arguments.length?(this._qrank=this._rank,this):this._qrank},s.last=function(e){return arguments.length?(this._stamp=e,this):this._stamp},s._setf=function(e,t){return t?this._flags|=e:this._flags&=~e,this},s.router=function(e){return arguments.length?this._setf(o.Router,e):this._flags&o.Router},s.collector=function(e){return arguments.length?this._setf(o.Collector,e):this._flags&o.Collector},s.produces=function(e){return arguments.length?this._setf(o.Produces,e):this._flags&o.Produces},s.mutates=function(e){return arguments.length?this._setf(o.Mutates,e):this._flags&o.Mutates},s.reflows=function(e){return arguments.length?this._setf(o.Reflows,e):this._flags&o.Reflows},s.batch=function(e){return arguments.length?this._setf(o.Batch,e):this._flags&o.Batch},s.dependency=function(e,t){var n=this._deps[e],r=n._names||(n._names={});if(1===arguments.length)return n;if(null===t)n.splice(0,n.length),n._names={};else if(Array.isArray(t))for(var i,a=0,o=t.length;a<o;++a)i=t[a],r[i]||(n.push(i),r[i]=1);else{if(r[t])return this;n.push(t),r[t]=1}return this},s.listeners=function(){return this._listeners},s.addListener=function(e){if(!(e instanceof r))throw Error("Listener is not a Node");return this._listeners._ids[e._id]?this:(this._listeners.push(e),this._listeners._ids[e._id]=1,this._rank>e._rank&&e.rerank(),this)},s.removeListener=function(e){if(!this._listeners._ids[e._id])return!1;var t=this._listeners.indexOf(e),n=t>=0;return n&&(this._listeners.splice(t,1),this._listeners._ids[e._id]=null),n},s.disconnect=function(){this._listeners=[],this._listeners._ids={}},s.evaluate=function(e){return e},s.reevaluate=function(e){var t,n,r,a,o,s;for(r=0,a=i.length;r<a;++r)for(t=i[r],n=this._deps[t],o=0,s=n.length;o<s;++o)if(e[t][n[o]])return!0;return!1},r.reset=function(){a=0},t.exports=r},{"./Dependencies":36}],40:[function(e,t,n){function r(e,t,n){return o.init.call(this,e),this._name=t,this._value=n,this._verbose=!1,this._handlers=[],this}var i=e("./ChangeSet"),a=e("./Node"),o=a.prototype,s=r.prototype=Object.create(o);s.constructor=r,s.name=function(){return this._name},s.value=function(e){return arguments.length?(this._value=e,this):this._value},s.values=s.value,s.verbose=function(e){return arguments.length?(this._verbose=!!e,this):this._verbose},s.evaluate=function(e){return e.signals[this._name]?e:this._graph.doNotPropagate},s.fire=function(e){e||(e=i.create(null,!0)),e.signals[this._name]=1,this._graph.propagate(e,this)},s.on=function(e){var t=this,n=new a(this._graph);return n.evaluate=function(n){return e(t.name(),t.value()),n},this._handlers.push({handler:e,node:n}),this.addListener(n)},s.off=function(e){var t,n,r=this._handlers;for(t=r.length;--t>=0;)e&&r[t].handler!==e||(n=r.splice(t,1)[0],this.removeListener(n.node));return this},t.exports=r},{"./ChangeSet":33,"./Node":39}],41:[function(e,t,n){function r(e){return e=e===Object(e)?e:{data:e},e._id=++o,e._prev&&(e._prev=null),e}function i(e,t){t=t||{};for(var n=0,r=e.length;n<r;++n)t[e[n]._id]=1;return t}function a(e,t){t=t||{};for(var n in e)"_prev"!==n&&"_id"!==n&&(t[n]=e[n]);return t}var o=0;t.exports={ingest:r,idMap:i,derive:function(e){return r(a(e))},rederive:function(e,t){return a(e,t)},set:function(e,t,n){return e[t]===n?0:(e[t]=n,1)},prev:function(e){return e._prev||e},prev_init:function(e){e._prev||(e._prev={_id:e._id})},prev_update:function(e){var t,n,r=e._prev;if(r)for(t in e)"_prev"!==t&&"_id"!==t&&(r[t]=(n=e[t])instanceof Object&&n._prev?n._prev:n)},reset:function(){o=0},idFilter:function(e){for(var t={},n=arguments.length;--n>0;)i(arguments[n],t);return e.filter(function(e){return!t[e._id]})}}},{}],42:[function(e,t,n){t.exports={ChangeSet:e("./ChangeSet"),Collector:e("./Collector"),DataSource:e("./DataSource"),Dependencies:e("./Dependencies"),Graph:e("./Graph"),Node:e("./Node"),Signal:e("./Signal"),Tuple:e("./Tuple"),debug:e("vega-logging").debug}},{"./ChangeSet":33,"./Collector":34,"./DataSource":35,"./Dependencies":36,"./Graph":37,"./Node":39,"./Signal":40,"./Tuple":41,"vega-logging":49}],43:[function(e,t,n){t.exports=function(){"use strict";function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,n,r,i){this.message=e,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function n(e){function n(t){var n,r,i=pt[t];if(i)return i;for(n=t-1;!pt[n];)n--;for(i=pt[n],i={line:i.line,column:i.column,seenCR:i.seenCR};n<t;)r=e.charAt(n),"\n"===r?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return pt[t]=i,i}function r(e,t){var r=n(e),i=n(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}}}function i(e){dt<gt||(dt>gt&&(gt=dt,mt=[]),mt.push(e))}function a(e,n,r,i){function a(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r,i,a,o=new Array(e.length);for(a=0;a<e.length;a++)o[a]=e[a].description;return r=e.length>1?o.slice(0,-1).join(", ")+" or "+o[e.length-1]:o[0],i=t?'"'+n(t)+'"':"end of input","Expected "+r+" but "+i+" found."}return null!==n&&a(n),new t(null!==e?e:o(n,r),n,r,i)}function o(){var e;return e=s()}function s(){var t,n,r,a,o,u;return t=dt,n=l(),n!==_?(r=v(),r!==_?(44===e.charCodeAt(dt)?(a=S,dt++):(a=_,0===vt&&i(T)),a!==_?(o=v(),o!==_?(u=s(),u!==_?(ht=t,n=w(n,u),t=n):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_),t===_&&(t=dt,n=l(),n!==_&&(ht=t,n=A(n)),t=n),t}function l(){var t,n,r,a,o,s,c,f,d,h,p,g,m,y;return t=dt,91===e.charCodeAt(dt)?(n=C,dt++):(n=_,0===vt&&i(k)),n!==_?(r=v(),r!==_?(a=u(),a!==_?(o=v(),o!==_?(44===e.charCodeAt(dt)?(s=S,dt++):(s=_,0===vt&&i(T)),s!==_?(c=v(),c!==_?(f=u(),f!==_?(d=v(),d!==_?(93===e.charCodeAt(dt)?(h=O,dt++):(h=_,0===vt&&i(I)),h!==_?(p=v(),p!==_?(62===e.charCodeAt(dt)?(g=M,dt++):(g=_,0===vt&&i(N)),g!==_?(m=v(),m!==_?(y=l(),y!==_?(ht=t,n=D(a,f,y),t=n):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_),t===_&&(t=u()),t}function u(){var e,t,n,r;if(e=dt,t=c(),t!==_){if(n=[],r=h(),r!==_)for(;r!==_;)n.push(r),r=h();else n=_;n!==_?(ht=e,t=L(t,n),e=t):(dt=e,e=_)}else dt=e,e=_;return e===_&&(e=dt,t=c(),t!==_&&(ht=e,t=$(t)),e=t),e}function c(){var t,n,r,a,o;return t=dt,40===e.charCodeAt(dt)?(n=R,dt++):(n=_,0===vt&&i(P)),n!==_?(r=s(),r!==_?(41===e.charCodeAt(dt)?(a=F,dt++):(a=_,0===vt&&i(U)),a!==_?(ht=t,n=j(r),t=n):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_),t===_&&(t=dt,64===e.charCodeAt(dt)?(n=H,dt++):(n=_,0===vt&&i(z)),n!==_?(r=p(),r!==_?(58===e.charCodeAt(dt)?(a=B,dt++):(a=_,0===vt&&i(q)),a!==_?(o=d(),o!==_?(ht=t,n=Y(r,o),t=n):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_),t===_&&(t=dt,n=f(),n!==_?(58===e.charCodeAt(dt)?(r=B,dt++):(r=_,0===vt&&i(q)),r!==_?(a=d(),a!==_?(ht=t,n=X(n,a),t=n):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_),t===_&&(t=dt,n=g(),n!==_?(58===e.charCodeAt(dt)?(r=B,dt++):(r=_,0===vt&&i(q)),r!==_?(a=d(),a!==_?(ht=t,n=W(n,a),t=n):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_),t===_&&(t=dt,n=d(),n!==_&&(ht=t,n=G(n)),t=n,t===_&&(t=dt,n=p(),n!==_&&(ht=t,n=V(n)),t=n))))),t}function f(){var t;return e.substr(dt,4)===K?(t=K,dt+=4):(t=_,0===vt&&i(Z)),t===_&&(e.substr(dt,6)===Q?(t=Q,dt+=6):(t=_,0===vt&&i(J)),t===_&&(e.substr(dt,4)===ee?(t=ee,dt+=4):(t=_,0===vt&&i(te)),t===_&&(e.substr(dt,3)===ne?(t=ne,dt+=3):(t=_,0===vt&&i(re)),t===_&&(e.substr(dt,4)===ie?(t=ie,dt+=4):(t=_,0===vt&&i(ae)),t===_&&(e.substr(dt,4)===oe?(t=oe,dt+=4):(t=_,0===vt&&i(se)),t===_&&(e.substr(dt,4)===le?(t=le,dt+=4):(t=_,0===vt&&i(ue)),t===_&&(e.substr(dt,5)===ce?(t=ce,dt+=5):(t=_,0===vt&&i(fe)),t===_&&(e.substr(dt,4)===de?(t=de,dt+=4):(t=_,0===vt&&i(he)),t===_&&(e.substr(dt,5)===pe?(t=pe,dt+=5):(t=_,0===vt&&i(ge))))))))))),t}function d(){var t;return e.substr(dt,9)===me?(t=me,dt+=9):(t=_,0===vt&&i(ve)),t===_&&(e.substr(dt,7)===ye?(t=ye,dt+=7):(t=_,0===vt&&i(be)),t===_&&(e.substr(dt,5)===_e?(t=_e,dt+=5):(t=_,0===vt&&i(Ee)),t===_&&(e.substr(dt,8)===xe?(t=xe,dt+=8):(t=_,0===vt&&i(Se)),t===_&&(e.substr(dt,5)===Te?(t=Te,dt+=5):(t=_,0===vt&&i(we)),t===_&&(e.substr(dt,7)===Ae?(t=Ae,dt+=7):(t=_,0===vt&&i(Ce)),t===_&&(e.substr(dt,8)===ke?(t=ke,dt+=8):(t=_,0===vt&&i(Oe)),t===_&&(e.substr(dt,5)===Ie?(t=Ie,dt+=5):(t=_,0===vt&&i(Me)),t===_&&(e.substr(dt,10)===Ne?(t=Ne,dt+=10):(t=_,0===vt&&i(De)),t===_&&(e.substr(dt,9)===Le?(t=Le,dt+=9):(t=_,0===vt&&i($e)),t===_&&(e.substr(dt,8)===Re?(t=Re,dt+=8):(t=_,0===vt&&i(Pe)),t===_&&(e.substr(dt,9)===Fe?(t=Fe,dt+=9):(t=_,0===vt&&i(Ue)),t===_&&(e.substr(dt,10)===je?(t=je,dt+=10):(t=_,0===vt&&i(He)),t===_&&(e.substr(dt,10)===ze?(t=ze,dt+=10):(t=_,0===vt&&i(Be)),t===_&&(e.substr(dt,9)===qe?(t=qe,dt+=9):(t=_,0===vt&&i(Ye)),t===_&&(e.substr(dt,8)===Xe?(t=Xe,dt+=8):(t=_,0===vt&&i(We)),t===_&&(e.substr(dt,9)===Ge?(t=Ge,dt+=9):(t=_,0===vt&&i(Ve)),t===_&&(e.substr(dt,8)===Ke?(t=Ke,dt+=8):(t=_,0===vt&&i(Ze)),t===_&&(e.substr(dt,9)===Qe?(t=Qe,dt+=9):(t=_,0===vt&&i(Je)))))))))))))))))))),t}function h(){var t,n,r,a;return t=dt,91===e.charCodeAt(dt)?(n=C,dt++):(n=_,0===vt&&i(k)),n!==_?(r=m(),r!==_?(93===e.charCodeAt(dt)?(a=O,dt++):(a=_,0===vt&&i(I)),a!==_?(ht=t,n=et(r),t=n):(dt=t,t=_)):(dt=t,t=_)):(dt=t,t=_),t}function p(){var t,n,r;if(t=dt,n=[],tt.test(e.charAt(dt))?(r=e.charAt(dt),dt++):(r=_,0===vt&&i(nt)),r!==_)for(;r!==_;)n.push(r),tt.test(e.charAt(dt))?(r=e.charAt(dt),dt++):(r=_,0===vt&&i(nt));else n=_;return n!==_&&(ht=t,n=rt(n)),t=n}function g(){var t,n,r;if(t=dt,n=[],it.test(e.charAt(dt))?(r=e.charAt(dt),dt++):(r=_,0===vt&&i(at)),r!==_)for(;r!==_;)n.push(r),it.test(e.charAt(dt))?(r=e.charAt(dt),dt++):(r=_,0===vt&&i(at));else n=_;return n!==_&&(ht=t,n=ot(n)),t=n}function m(){var t,n,r;if(t=dt,n=[],st.test(e.charAt(dt))?(r=e.charAt(dt),dt++):(r=_,0===vt&&i(lt)),r!==_)for(;r!==_;)n.push(r),st.test(e.charAt(dt))?(r=e.charAt(dt),dt++):(r=_,0===vt&&i(lt));else n=_;return n!==_&&(ht=t,n=ut(n)),t=n}function v(){var t,n;for(t=[],ct.test(e.charAt(dt))?(n=e.charAt(dt),dt++):(n=_,0===vt&&i(ft));n!==_;)t.push(n),ct.test(e.charAt(dt))?(n=e.charAt(dt),dt++):(n=_,0===vt&&i(ft));return t}var y,b=arguments.length>1?arguments[1]:{},_={},E={start:o},x=o,S=",",T={type:"literal",value:",",description:'","'},w=function(e,t){return[e].concat(t)},A=function(e){return[e]},C="[",k={type:"literal",value:"[",description:'"["'},O="]",I={type:"literal",value:"]",description:'"]"'},M=">",N={type:"literal",value:">",description:'">"'},D=function(e,t,n){return{start:e,middle:n,end:t,str:"["+e.str+", "+t.str+"] > "+n.str}},L=function(e,t){return e.filters=t,e.str+=t.map(function(e){return"["+e+"]"}).join(""),e},$=function(e){return e},R="(",P={type:"literal",value:"(",description:'"("'},F=")",U={type:"literal",value:")",description:'")"'},j=function(e){return{stream:e,str:"("+e.map(function(e){return e.str}).join(", ")+")"}},H="@",z={type:"literal",value:"@",description:'"@"'},B=":",q={type:"literal",value:":",description:'":"'},Y=function(e,t){return{event:t,name:e,str:"@"+e+":"+t}},X=function(e,t){return{event:t,mark:e,str:e+":"+t}},W=function(e,t){return{event:t,target:e,str:e+":"+t}},G=function(e){return{event:e,str:e}},V=function(e){return{signal:e,str:e}},K="rect",Z={type:"literal",value:"rect",description:'"rect"'},Q="symbol",J={type:"literal",value:"symbol",description:'"symbol"'},ee="path",te={type:"literal",value:"path",description:'"path"'},ne="arc",re={type:"literal",value:"arc",description:'"arc"'},ie="area",ae={type:"literal",value:"area",description:'"area"'},oe="line",se={type:"literal",value:"line",description:'"line"'},le="rule",ue={type:"literal",value:"rule",description:'"rule"'},ce="image",fe={type:"literal",value:"image",description:'"image"'},de="text",he={type:"literal",value:"text",description:'"text"'},pe="group",ge={type:"literal",value:"group",description:'"group"'},me="mousedown",ve={type:"literal",value:"mousedown",description:'"mousedown"'},ye="mouseup",be={type:"literal",value:"mouseup",description:'"mouseup"'},_e="click",Ee={type:"literal",value:"click",description:'"click"'},xe="dblclick",Se={type:"literal",value:"dblclick",description:'"dblclick"'},Te="wheel",we={type:"literal",value:"wheel",description:'"wheel"'},Ae="keydown",Ce={type:"literal",value:"keydown",description:'"keydown"'},ke="keypress",Oe={type:"literal",value:"keypress",description:'"keypress"'},Ie="keyup",Me={type:"literal",value:"keyup",description:'"keyup"'},Ne="mousewheel",De={type:"literal",value:"mousewheel",description:'"mousewheel"'},Le="mousemove",$e={type:"literal",value:"mousemove",description:'"mousemove"'},Re="mouseout",Pe={type:"literal",value:"mouseout",description:'"mouseout"'},Fe="mouseover",Ue={type:"literal",value:"mouseover",description:'"mouseover"'},je="mouseenter",He={type:"literal",value:"mouseenter",description:'"mouseenter"'},ze="touchstart",Be={type:"literal",value:"touchstart",description:'"touchstart"'},qe="touchmove",Ye={type:"literal",value:"touchmove",description:'"touchmove"'},Xe="touchend",We={type:"literal",value:"touchend",description:'"touchend"'},Ge="dragenter",Ve={type:"literal",value:"dragenter",description:'"dragenter"'},Ke="dragover",Ze={type:"literal",value:"dragover",description:'"dragover"'},Qe="dragleave",Je={type:"literal",value:"dragleave",description:'"dragleave"'},et=function(e){return e},tt=/^[a-zA-Z0-9_\-]/,nt={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},rt=function(e){return e.join("")},it=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,at={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},ot=function(e){return e.join("")},st=/^['"a-zA-Z0-9_().><=! \t-&|~]/,lt={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},ut=function(e){return e.join("")},ct=/^[ \t\r\n]/,ft={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},dt=0,ht=0,pt=[{line:1,column:1,seenCR:!1}],gt=0,mt=[],vt=0;if("startRule"in b){if(!(b.startRule in E))throw new Error("Can't start parsing from rule \""+b.startRule+'".');x=E[b.startRule]}if(y=x(),y!==_&&dt===e.length)return y;throw y!==_&&dt<e.length&&i({type:"end",description:"end of input"}),a(null,mt,gt<e.length?e.charAt(gt):null,gt<e.length?r(gt,gt+1):r(gt,gt))}return e(t,Error),{SyntaxError:t,parse:n}}()},{}],44:[function(e,t,n){function r(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t]]=1;return r}function i(e){var t,n=[];for(t in e)n.push(t);return n}t.exports=function(t){function n(e){var t={code:a(e),globals:i(p),fields:i(g),dataSources:i(m),defs:l};return p={},g={},m={},t}function a(e){if("string"==typeof e)return e;var t=y[e.type];if(null==t)throw new Error("Unsupported type: "+e.type);return t(e)}t=t||{};var o=t.constants||e("./constants"),s=(t.functions||e("./functions"))(a),l=t.functionDefs?t.functionDefs(a):{},u=t.idWhiteList?r(t.idWhiteList):null,c=t.idBlackList?r(t.idBlackList):null,f=0,d=t.fieldVar||"datum",h=t.globalVar||"signals",p={},g={},m={},v="function"==typeof h?h:function(e){return h+'["'+e+'"]'},y={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;if(f>0)return t;if(o.hasOwnProperty(t))return o[t];if(u)return u.hasOwnProperty(t)?t:(p[t]=1,v(t));if(c&&c.hasOwnProperty(t))throw new Error("Illegal identifier: "+t);return t},Program:function(e){return e.body.map(a).join("\n")},MemberExpression:function(e){var t=!e.computed,n=a(e.object);t&&(f+=1);var r=a(e.property);return n===d&&(g[r]=1),t&&(f-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if("Identifier"!==e.callee.type)throw new Error("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=s.hasOwnProperty(t)&&s[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n,p,g,m):r+"("+n.map(a).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(a).join(",")+"]"},BinaryExpression:function(e){return"("+a(e.left)+e.operator+a(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+a(e.argument)+")"},ConditionalExpression:function(e){return"("+a(e.test)+"?"+a(e.consequent)+":"+a(e.alternate)+")"},LogicalExpression:function(e){return"("+a(e.left)+e.operator+a(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(a).join(",")+"}"},Property:function(e){f+=1;var t=a(e.key);return f-=1,t+":"+a(e.value)},ExpressionStatement:function(e){return a(e.expression)}};return n.functions=s,n.functionDefs=l,n.constants=o,n}},{"./constants":45,"./functions":46}],45:[function(e,t,n){t.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],46:[function(e,t,n){t.exports=function(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),slice:n("slice",i),substring:n("substring",i),replace:n("replace",i),regexp:a,test:n("test",a),"if":function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var n=t.map(e);return n[0]+"?"+n[1]+":"+n[2]}}}},{}],47:[function(e,t,n){var r=e("./parser"),i=e("./codegen"),a=t.exports={parse:function(e,t){return r.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var n=i(t),r=e.length,o=function(t){var i=n(a.parse(t));e[r]='"use strict"; return ('+i.code+");";var o=Function.apply(null,e);return i.fn=e.length>8?function(){return o.apply(i,arguments)}:function(e,t,n,r,a,s,l){return o.call(i,e,t,n,r,a,s,l)},i};return o.codegen=n,o},functions:e("./functions"),constants:e("./constants")}},{"./codegen":44,"./constants":45,"./functions":46,"./parser":48}],48:[function(e,t,n){/*
  The following expression parser is based on Esprima (http://esprima.org/).
  Original header comment and license for Esprima is included here:

  Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
  Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
t.exports=function(){"use strict";function e(e,t){if(!e)throw new Error("ASSERT: "+t)}function t(e){return e>=48&&e<=57}function n(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function a(e){return 10===e||13===e||8232===e||8233===e}function o(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Te.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function s(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&Te.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function l(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function u(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function c(e){if(Ae&&u(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function f(){var e,t;for(t=0===Ce;Ce<Ie;)if(e=we.charCodeAt(Ce),i(e))++Ce;else{if(!a(e))break;++Ce,13===e&&10===we.charCodeAt(Ce)&&++Ce,++ke,Oe=Ce,t=!0}}function d(e){var t,r,i,a=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(Ce<Ie&&n(we[Ce])))return"";i=we[Ce++],a=16*a+"0123456789abcdef".indexOf(i.toLowerCase())}return String.fromCharCode(a)}function h(){var e,t,r,i;for(e=we[Ce],t=0,"}"===e&&U({},Se.UnexpectedToken,"ILLEGAL");Ce<Ie&&(e=we[Ce++],n(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&U({},Se.UnexpectedToken,"ILLEGAL"),t<=65535?String.fromCharCode(t):(r=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(r,i))}function p(){var e,t;for(e=we.charCodeAt(Ce++),t=String.fromCharCode(e),92===e&&(117!==we.charCodeAt(Ce)&&U({},Se.UnexpectedToken,"ILLEGAL"),++Ce,e=d("u"),e&&"\\"!==e&&o(e.charCodeAt(0))||U({},Se.UnexpectedToken,"ILLEGAL"),t=e);Ce<Ie&&(e=we.charCodeAt(Ce),s(e));)++Ce,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==we.charCodeAt(Ce)&&U({},Se.UnexpectedToken,"ILLEGAL"),++Ce,e=d("u"),e&&"\\"!==e&&s(e.charCodeAt(0))||U({},Se.UnexpectedToken,"ILLEGAL"),t+=e);return t}function g(){var e,t;for(e=Ce++;Ce<Ie;){if(t=we.charCodeAt(Ce),92===t)return Ce=e,p();if(!s(t))break;++Ce}return we.slice(e,Ce)}function m(){var e,t,n;return e=Ce,t=92===we.charCodeAt(Ce)?p():g(),n=1===t.length?be.Identifier:c(t)?be.Keyword:"null"===t?be.NullLiteral:"true"===t||"false"===t?be.BooleanLiteral:be.Identifier,{type:n,value:t,lineNumber:ke,lineStart:Oe,start:e,end:Ce}}function v(){var e,t,n,r,i=Ce,a=we.charCodeAt(Ce),o=we[Ce];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ce,De.tokenize&&(40===a?De.openParenToken=De.tokens.length:123===a&&(De.openCurlyToken=De.tokens.length)),{type:be.Punctuator,value:String.fromCharCode(a),lineNumber:ke,lineStart:Oe,start:i,end:Ce};default:if(e=we.charCodeAt(Ce+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ce+=2,{type:be.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(e),lineNumber:ke,lineStart:Oe,start:i,end:Ce};case 33:case 61:return Ce+=2,61===we.charCodeAt(Ce)&&++Ce,{type:be.Punctuator,value:we.slice(i,Ce),lineNumber:ke,lineStart:Oe,start:i,end:Ce}}}return r=we.substr(Ce,4),">>>="===r?(Ce+=4,{type:be.Punctuator,value:r,lineNumber:ke,lineStart:Oe,start:i,end:Ce}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(Ce+=3,{type:be.Punctuator,value:n,lineNumber:ke,lineStart:Oe,start:i,end:Ce}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(Ce+=2,{type:be.Punctuator,value:t,lineNumber:ke,lineStart:Oe,start:i,end:Ce}):"<>=!+-*%&|^/".indexOf(o)>=0?(++Ce,{type:be.Punctuator,value:o,lineNumber:ke,lineStart:Oe,start:i,end:Ce}):void U({},Se.UnexpectedToken,"ILLEGAL")))}function y(e){for(var t="";Ce<Ie&&n(we[Ce]);)t+=we[Ce++];return 0===t.length&&U({},Se.UnexpectedToken,"ILLEGAL"),o(we.charCodeAt(Ce))&&U({},Se.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:ke,lineStart:Oe,start:e,end:Ce}}function b(e){for(var n="0"+we[Ce++];Ce<Ie&&r(we[Ce]);)n+=we[Ce++];return(o(we.charCodeAt(Ce))||t(we.charCodeAt(Ce)))&&U({},Se.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:ke,lineStart:Oe,start:e,end:Ce}}function _(){var n,i,a;if(a=we[Ce],e(t(a.charCodeAt(0))||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),i=Ce,n="","."!==a){if(n=we[Ce++],a=we[Ce],"0"===n){if("x"===a||"X"===a)return++Ce,y(i);if(r(a))return b(i);a&&t(a.charCodeAt(0))&&U({},Se.UnexpectedToken,"ILLEGAL")}for(;t(we.charCodeAt(Ce));)n+=we[Ce++];a=we[Ce]}if("."===a){for(n+=we[Ce++];t(we.charCodeAt(Ce));)n+=we[Ce++];a=we[Ce]}if("e"===a||"E"===a)if(n+=we[Ce++],a=we[Ce],"+"!==a&&"-"!==a||(n+=we[Ce++]),t(we.charCodeAt(Ce)))for(;t(we.charCodeAt(Ce));)n+=we[Ce++];else U({},Se.UnexpectedToken,"ILLEGAL");return o(we.charCodeAt(Ce))&&U({},Se.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseFloat(n),lineNumber:ke,lineStart:Oe,start:i,end:Ce}}function E(){var t,n,i,o,s,l,u,c,f="",p=!1;for(u=ke,c=Oe,t=we[Ce],e("'"===t||'"'===t,"String literal must starts with a quote"),n=Ce,++Ce;Ce<Ie;){if(i=we[Ce++],i===t){t="";break}if("\\"===i)if(i=we[Ce++],i&&a(i.charCodeAt(0)))++ke,"\r"===i&&"\n"===we[Ce]&&++Ce,Oe=Ce;else switch(i){case"u":case"x":"{"===we[Ce]?(++Ce,f+=h()):(l=Ce,s=d(i),s?f+=s:(Ce=l,f+=i));break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="\t";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="\x0B";break;default:r(i)?(o="01234567".indexOf(i),0!==o&&(p=!0),Ce<Ie&&r(we[Ce])&&(p=!0,o=8*o+"01234567".indexOf(we[Ce++]),"0123".indexOf(i)>=0&&Ce<Ie&&r(we[Ce])&&(o=8*o+"01234567".indexOf(we[Ce++]))),f+=String.fromCharCode(o)):f+=i}else{if(a(i.charCodeAt(0)))break;f+=i}}return""!==t&&U({},Se.UnexpectedToken,"ILLEGAL"),{type:be.StringLiteral,value:f,octal:p,startLineNumber:u,startLineStart:c,lineNumber:ke,lineStart:Oe,start:n,end:Ce}}function x(e,t){var n,r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void U({},Se.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{n=new RegExp(r)}catch(i){U({},Se.InvalidRegExp)}try{return new RegExp(e,t)}catch(a){return null}}function S(){var t,n,r,i,o;for(t=we[Ce],e("/"===t,"Regular expression literal must start with a slash"),n=we[Ce++],r=!1,i=!1;Ce<Ie;)if(t=we[Ce++],n+=t,"\\"===t)t=we[Ce++],a(t.charCodeAt(0))&&U({},Se.UnterminatedRegExp),n+=t;else if(a(t.charCodeAt(0)))U({},Se.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){i=!0;break}"["===t&&(r=!0)}return i||U({},Se.UnterminatedRegExp),o=n.substr(1,n.length-2),{value:o,literal:n}}function T(){var e,t,n,r;for(t="",n="";Ce<Ie&&(e=we[Ce],s(e.charCodeAt(0)));)if(++Ce,"\\"===e&&Ce<Ie)if(e=we[Ce],"u"===e){if(++Ce,r=Ce,e=d("u"))for(n+=e,t+="\\u";r<Ce;++r)t+=we[r];else Ce=r,n+="u",t+="\\u";j({},Se.UnexpectedToken,"ILLEGAL")}else t+="\\",j({},Se.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function w(){var e,t,n,r;return Me=null,f(),e=Ce,t=S(),n=T(),r=x(t.value,n.value),De.tokenize?{type:be.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:ke,lineStart:Oe,start:e,end:Ce}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ce}}function A(){var e,t,n,r;return f(),e=Ce,t={start:{line:ke,column:Ce-Oe}},n=w(),t.end={line:ke,column:Ce-Oe},De.tokenize||(De.tokens.length>0&&(r=De.tokens[De.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||De.tokens.pop())),De.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,Ce],loc:t})),n}function C(e){return e.type===be.Identifier||e.type===be.Keyword||e.type===be.BooleanLiteral||e.type===be.NullLiteral}function k(){var e,t;if(e=De.tokens[De.tokens.length-1],!e)return A();if("Punctuator"===e.type){if("]"===e.value)return v();if(")"===e.value)return t=De.tokens[De.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?v():A();if("}"===e.value){if(De.tokens[De.openCurlyToken-3]&&"Keyword"===De.tokens[De.openCurlyToken-3].type){if(t=De.tokens[De.openCurlyToken-4],!t)return v()}else{if(!De.tokens[De.openCurlyToken-4]||"Keyword"!==De.tokens[De.openCurlyToken-4].type)return v();if(t=De.tokens[De.openCurlyToken-5],!t)return A()}return v()}return A()}return"Keyword"===e.type&&"this"!==e.value?A():v()}function O(){var e;return f(),Ce>=Ie?{type:be.EOF,lineNumber:ke,lineStart:Oe,start:Ce,end:Ce}:(e=we.charCodeAt(Ce),o(e)?m():40===e||41===e||59===e?v():39===e||34===e?E():46===e?t(we.charCodeAt(Ce+1))?_():v():t(e)?_():De.tokenize&&47===e?k():v())}function I(){var e,t,n,r;return f(),e={start:{line:ke,column:Ce-Oe}},t=O(),e.end={line:ke,column:Ce-Oe},t.type!==be.EOF&&(n=we.slice(t.start,t.end),r={type:_e[t.type],value:n,range:[t.start,t.end],loc:e},t.regex&&(r.regex={pattern:t.regex.pattern,flags:t.regex.flags}),De.tokens.push(r)),t}function M(){var e;return e=Me,Ce=e.end,ke=e.lineNumber,Oe=e.lineStart,Me="undefined"!=typeof De.tokens?I():O(),Ce=e.end,ke=e.lineNumber,Oe=e.lineStart,e}function N(){var e,t,n;e=Ce,t=ke,n=Oe,Me="undefined"!=typeof De.tokens?I():O(),Ce=e,ke=t,Oe=n}function D(){this.line=ke,this.column=Ce-Oe}function L(){this.start=new D,this.end=null}function $(e){e.type===be.StringLiteral?this.start={line:e.startLineNumber,column:e.start-e.startLineStart}:this.start={line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function R(){Ce=Me.start,Me.type===be.StringLiteral?(ke=Me.startLineNumber,Oe=Me.startLineStart):(ke=Me.lineNumber,Oe=Me.lineStart),De.range&&(this.range=[Ce,0]),De.loc&&(this.loc=new L)}function P(e){De.range&&(this.range=[e.start,0]),De.loc&&(this.loc=new $(e))}function F(){var e,t,n,r;return e=Ce,t=ke,n=Oe,f(),r=ke!==t,Ce=e,ke=t,Oe=n,r}function U(t,n){var r,i=Array.prototype.slice.call(arguments,2),a=n.replace(/%(\d)/g,function(t,n){return e(n<i.length,"Message reference must be in range"),i[n]});throw"number"==typeof t.lineNumber?(r=new Error("Line "+t.lineNumber+": "+a),r.index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-Oe+1):(r=new Error("Line "+ke+": "+a),r.index=Ce,r.lineNumber=ke,r.column=Ce-Oe+1),r.description=a,r}function j(){try{U.apply(null,arguments)}catch(e){if(!De.errors)throw e;De.errors.push(e)}}function H(e){if(e.type===be.EOF&&U(e,Se.UnexpectedEOS),e.type===be.NumericLiteral&&U(e,Se.UnexpectedNumber),e.type===be.StringLiteral&&U(e,Se.UnexpectedString),e.type===be.Identifier&&U(e,Se.UnexpectedIdentifier),e.type===be.Keyword){if(l(e.value))U(e,Se.UnexpectedReserved);else if(Ae&&u(e.value))return void j(e,Se.StrictReservedWord);U(e,Se.UnexpectedToken,e.value)}U(e,Se.UnexpectedToken,e.value)}function z(e){var t=M();t.type===be.Punctuator&&t.value===e||H(t)}function B(e){if(De.errors){var t=Me;t.type!==be.Punctuator&&t.value!==e?j(t,Se.UnexpectedToken,t.value):M()}else z(e)}function q(e){return Me.type===be.Punctuator&&Me.value===e}function Y(e){return Me.type===be.Keyword&&Me.value===e}function X(){var e;return 59===we.charCodeAt(Ce)||q(";")?void M():(e=ke,f(),void(ke===e&&(Me.type===be.EOF||q("}")||H(Me))))}function W(){var e=[],t=new R;for(z("[");!q("]");)q(",")?(M(),e.push(null)):(e.push(ue()),q("]")||z(","));return M(),t.finishArrayExpression(e)}function G(){var e,t=new R;return e=M(),e.type===be.StringLiteral||e.type===be.NumericLiteral?(Ae&&e.octal&&j(e,Se.StrictOctalLiteral),t.finishLiteral(e)):t.finishIdentifier(e.value)}function V(){var e,t,n,r,i=new R;return e=Me,e.type===be.Identifier?(n=G(),z(":"),r=ue(),i.finishProperty("init",n,r)):e.type!==be.EOF&&e.type!==be.Punctuator?(t=G(),z(":"),r=ue(),i.finishProperty("init",t,r)):void H(e)}function K(){var e,t,n,r,i=[],a={},o=String,s=new R;for(z("{");!q("}");)e=V(),t=e.key.type===Ee.Identifier?e.key.name:o(e.key.value),r="init"===e.kind?xe.Data:"get"===e.kind?xe.Get:xe.Set,n="$"+t,Object.prototype.hasOwnProperty.call(a,n)?(a[n]===xe.Data?Ae&&r===xe.Data?j({},Se.StrictDuplicateProperty):r!==xe.Data&&j({},Se.AccessorDataProperty):r===xe.Data?j({},Se.AccessorDataProperty):a[n]&r&&j({},Se.AccessorGetSet),a[n]|=r):a[n]=r,i.push(e),q("}")||B(",");return z("}"),s.finishObjectExpression(i)}function Z(){var e;return z("("),++Ne.parenthesisCount,e=ce(),z(")"),e}function Q(){var e,t,n,r;if(q("("))return Z();if(q("["))return W();if(q("{"))return K();if(e=Me.type,r=new R,e===be.Identifier||Le[Me.value])n=r.finishIdentifier(M().value);else if(e===be.StringLiteral||e===be.NumericLiteral)Ae&&Me.octal&&j(Me,Se.StrictOctalLiteral),n=r.finishLiteral(M());else{if(e===be.Keyword)throw new Error("Disabled.");e===be.BooleanLiteral?(t=M(),t.value="true"===t.value,n=r.finishLiteral(t)):e===be.NullLiteral?(t=M(),t.value=null,n=r.finishLiteral(t)):q("/")||q("/=")?(n="undefined"!=typeof De.tokens?r.finishLiteral(A()):r.finishLiteral(w()),N()):H(M())}return n}function J(){var e=[];if(z("("),!q(")"))for(;Ce<Ie&&(e.push(ue()),!q(")"));)B(",");return z(")"),e}function ee(){var e,t=new R;return e=M(),C(e)||H(e),t.finishIdentifier(e.value)}function te(){return z("."),ee()}function ne(){var e;return z("["),e=ce(),z("]"),e}function re(){var e,t,n,r,i=Ne.allowIn;for(r=Me,Ne.allowIn=!0,e=Q();;)if(q("."))n=te(),e=new P(r).finishMemberExpression(".",e,n);else if(q("("))t=J(),e=new P(r).finishCallExpression(e,t);else{if(!q("["))break;n=ne(),e=new P(r).finishMemberExpression("[",e,n)}return Ne.allowIn=i,e}function ie(){var e=re();if(Me.type===be.Punctuator&&(q("++")||q("--"))&&!F())throw new Error("Disabled.");return e}function ae(){var e,t,n;if(Me.type!==be.Punctuator&&Me.type!==be.Keyword)t=ie();else{if(q("++")||q("--"))throw new Error("Disabled.");if(q("+")||q("-")||q("~")||q("!"))n=Me,e=M(),t=ae(),t=new P(n).finishUnaryExpression(e.value,t);else{if(Y("delete")||Y("void")||Y("typeof"))throw new Error("Disabled.");t=ie()}}return t}function oe(e,t){var n=0;if(e.type!==be.Punctuator&&e.type!==be.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function se(){var e,t,n,r,i,a,o,s,l,u;if(e=Me,l=ae(),r=Me,i=oe(r,Ne.allowIn),0===i)return l;for(r.prec=i,M(),t=[e,Me],o=ae(),a=[l,r,o];(i=oe(Me,Ne.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,l=a.pop(),t.pop(),n=new P(t[t.length-1]).finishBinaryExpression(s,l,o),a.push(n);r=M(),r.prec=i,a.push(r),t.push(Me),n=ae(),a.push(n)}for(u=a.length-1,n=a[u],t.pop();u>1;)n=new P(t.pop()).finishBinaryExpression(a[u-1].value,a[u-2],n),u-=2;return n}function le(){var e,t,n,r,i;return i=Me,e=se(),q("?")&&(M(),t=Ne.allowIn,Ne.allowIn=!0,n=ue(),Ne.allowIn=t,z(":"),r=ue(),e=new P(i).finishConditionalExpression(e,n,r)),e}function ue(){var e,t,n,r;return e=Ne.parenthesisCount,r=Me,t=Me,n=le()}function ce(){var e=ue();if(q(","))throw new Error("Disabled.");return e}function fe(e){var t=ce();return X(),e.finishExpressionStatement(t)}function de(){var e,t,n=Me.type;if(n===be.EOF&&H(Me),n===be.Punctuator&&"{"===Me.value)throw new Error("Disabled.");if(t=new R,n===be.Punctuator)switch(Me.value){case";":throw new Error("Disabled.");case"(":return fe(t)}else if(n===be.Keyword)throw new Error("Disabled.");return e=ce(),X(),t.finishExpressionStatement(e)}function he(){if(Me.type===be.Keyword)switch(Me.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return de()}if(Me.type!==be.EOF)return de()}function pe(){for(var e,t,n,r,i=[];Ce<Ie&&(t=Me,t.type===be.StringLiteral)&&(e=he(),i.push(e),e.expression.type===Ee.Literal);)n=we.slice(t.start+1,t.end-1),"use strict"===n?(Ae=!0,r&&j(r,Se.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;Ce<Ie&&(e=he(),"undefined"!=typeof e);)i.push(e);return i}function ge(){var e,t;return f(),N(),t=new R,Ae=!0,e=pe(),t.finishProgram(e)}function me(){var e,t,n,r=[];for(e=0;e<De.tokens.length;++e)t=De.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),De.range&&(n.range=t.range),De.loc&&(n.loc=t.loc),r.push(n);De.tokens=r}function ve(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),we=e,Ce=0,ke=we.length>0?1:0,Oe=0,Ie=we.length,Me=null,Ne={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},De={},t=t||{},t.tokens=!0,De.tokens=[],De.tokenize=!0,De.openParenToken=-1,De.openCurlyToken=-1,De.range="boolean"==typeof t.range&&t.range,De.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.tolerant&&t.tolerant&&(De.errors=[]);try{if(N(),Me.type===be.EOF)return De.tokens;for(M();Me.type!==be.EOF;)try{M()}catch(i){if(De.errors){De.errors.push(i);break}throw i}me(),r=De.tokens,"undefined"!=typeof De.errors&&(r.errors=De.errors)}catch(a){throw a}finally{De={}}return r}function ye(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),we=e,Ce=0,ke=we.length>0?1:0,Oe=0,Ie=we.length,Me=null,Ne={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},De={},"undefined"!=typeof t&&(De.range="boolean"==typeof t.range&&t.range,De.loc="boolean"==typeof t.loc&&t.loc,De.loc&&null!==t.source&&void 0!==t.source&&(De.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(De.tokens=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(De.errors=[]));try{n=ge(),"undefined"!=typeof De.tokens&&(me(),n.tokens=De.tokens),"undefined"!=typeof De.errors&&(n.errors=De.errors)}catch(i){throw i}finally{De={}}return n}var be,_e,Ee,xe,Se,Te,we,Ae,Ce,ke,Oe,Ie,Me,Ne,De;be={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},_e={},_e[be.BooleanLiteral]="Boolean",_e[be.EOF]="<end>",_e[be.Identifier]="Identifier",_e[be.Keyword]="Keyword",_e[be.NullLiteral]="Null",_e[be.NumericLiteral]="Numeric",_e[be.Punctuator]="Punctuator",_e[be.StringLiteral]="String",_e[be.RegularExpression]="RegularExpression",Ee={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},xe={Data:1,Get:2,Set:4},Se={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},Te={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},P.prototype=R.prototype={finish:function(){De.range&&(this.range[1]=Ce),De.loc&&(this.loc.end=new D,De.source&&(this.loc.source=De.source))},finishArrayExpression:function(e){return this.type=Ee.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=Ee.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?Ee.LogicalExpression:Ee.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishCallExpression:function(e,t){return this.type=Ee.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=Ee.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishExpressionStatement:function(e){return this.type=Ee.ExpressionStatement,this.expression=e,this.finish(),this},finishIdentifier:function(e){return this.type=Ee.Identifier,this.name=e,this.finish(),this},finishLiteral:function(e){return this.type=Ee.Literal,this.value=e.value,this.raw=we.slice(e.start,e.end),e.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=Ee.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishObjectExpression:function(e){return this.type=Ee.ObjectExpression,this.properties=e,this.finish(),this},finishProgram:function(e){return this.type=Ee.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,n){return this.type=Ee.Property,this.key=t,this.value=n,this.kind=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type=Ee.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this}};var Le={"if":1,"this":1};return{tokenize:ve,parse:ye}}()},{}],49:[function(e,t,n){function r(e){console.log("[Vega Log]",e)}function i(e){console.error("[Vega Err]",e)}function a(e,t){if(a.enable){var n=Function.prototype.bind.call(console.log,console),r={prevTime:Date.now()-o,stamp:e.stamp};e.add&&(r.add=e.add.length,r.mod=e.mod.length,r.rem=e.rem.length,r.reflow=!!e.reflow),n.apply(console,(t.push(JSON.stringify(r)),t)),o=Date.now()}}var o=Date.now();t.exports={log:r,error:i,debug:(a.enable=!1,a)}},{}],50:[function(e,t,n){t.exports={path:e("./path"),render:e("./render"),Item:e("./util/Item"),bound:e("./util/bound"),Bounds:e("./util/Bounds"),canvas:e("./util/canvas"),Gradient:e("./util/Gradient"),toJSON:e("./util/scene").toJSON,fromJSON:e("./util/scene").fromJSON}},{"./path":52,"./render":72,"./util/Bounds":78,"./util/Gradient":80,"./util/Item":82,"./util/bound":83,"./util/canvas":84,"./util/scene":86}],51:[function(e,t,n){function r(e,t,n,r,i,o,l,u,c){var f=s.call(arguments);if(a[f])return a[f];var d=l*(Math.PI/180),h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),r=Math.abs(r);var g=p*(u-e)*.5+h*(c-t)*.5,m=p*(c-t)*.5-h*(u-e)*.5,v=g*g/(n*n)+m*m/(r*r);v>1&&(v=Math.sqrt(v),n*=v,r*=v);var y=p/n,b=h/n,_=-h/r,E=p/r,x=y*u+b*c,S=_*u+E*c,T=y*e+b*t,w=_*e+E*t,A=(T-x)*(T-x)+(w-S)*(w-S),C=1/A-.25;C<0&&(C=0);var k=Math.sqrt(C);o==i&&(k=-k);var O=.5*(x+T)-k*(w-S),I=.5*(S+w)+k*(T-x),M=Math.atan2(S-I,x-O),N=Math.atan2(w-I,T-O),D=N-M;D<0&&1===o?D+=2*Math.PI:D>0&&0===o&&(D-=2*Math.PI);for(var L=Math.ceil(Math.abs(D/(.5*Math.PI+.001))),$=[],R=0;R<L;++R){var P=M+R*D/L,F=M+(R+1)*D/L;$[R]=[O,I,P,F,n,r,h,p]}return a[f]=$}function i(e){var t=s.call(e);if(o[t])return o[t];var n=e[0],r=e[1],i=e[2],a=e[3],l=e[4],u=e[5],c=e[6],f=e[7],d=f*l,h=-c*u,p=c*l,g=f*u,m=Math.cos(i),v=Math.sin(i),y=Math.cos(a),b=Math.sin(a),_=.5*(a-i),E=Math.sin(.5*_),x=8/3*E*E/Math.sin(_),S=n+m-x*v,T=r+v+x*m,w=n+y,A=r+b,C=w+x*b,k=A-x*y;return o[t]=[d*S+h*T,p*S+g*T,d*C+h*k,p*C+g*k,d*w+h*A,p*w+g*A]}var a={},o={},s=[].join;t.exports={segments:r,bezier:i,cache:{segments:a,bezier:o}}},{}],52:[function(e,t,n){t.exports={parse:e("./parse"),render:e("./render")}},{"./parse":53,"./render":54}],53:[function(e,t,n){var r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];t.exports=function(e){var t,n,a,o,s,l,u,c,f,d,h,p=[];for(t=e.slice().replace(i[0],"###$1").split(i[1]).slice(1),c=0,d=t.length;c<d;++c){for(n=t[c],a=n.slice(1).trim().replace(i[2],"$1###$2").split(i[3]),l=n.charAt(0),o=[l],f=0,h=a.length;f<h;++f)(s=+a[f])===s&&o.push(s);if(u=r[l.toLowerCase()],o.length-1>u)for(f=1,h=o.length;f<h;f+=u)p.push([l].concat(o.slice(f,f+u)));else p.push(o)}return p}},{}],54:[function(e,t,n){function r(e,t,n,r){for(var a=i.segments(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),o=0;o<a.length;++o){var s=i.bezier(a[o]);e.bezierCurveTo.apply(e,s)}}var i=e("./arc");t.exports=function(e,t,n,i){var a,o,s,l,u,c=null,f=0,d=0,h=0,p=0;null==n&&(n=0),null==i&&(i=0),e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],a[0]){case"l":f+=a[1],d+=a[2],e.lineTo(f+n,d+i);break;case"L":f=a[1],d=a[2],e.lineTo(f+n,d+i);break;case"h":f+=a[1],e.lineTo(f+n,d+i);break;case"H":f=a[1],e.lineTo(f+n,d+i);break;case"v":d+=a[1],e.lineTo(f+n,d+i);break;case"V":d=a[1],e.lineTo(f+n,d+i);break;case"m":f+=a[1],d+=a[2],e.moveTo(f+n,d+i);break;case"M":f=a[1],d=a[2],e.moveTo(f+n,d+i);break;case"c":o=f+a[5],s=d+a[6],h=f+a[3],p=d+a[4],e.bezierCurveTo(f+a[1]+n,d+a[2]+i,h+n,p+i,o+n,s+i),f=o,d=s;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+i,h+n,p+i,f+n,d+i);break;case"s":o=f+a[3],s=d+a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+i,f+a[1]+n,d+a[2]+i,o+n,s+i),h=f+a[1],p=d+a[2],f=o,d=s;break;case"S":o=a[3],s=a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+i,a[1]+n,a[2]+i,o+n,s+i),f=o,d=s,h=a[1],p=a[2];break;case"q":o=f+a[3],s=d+a[4],h=f+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+i,o+n,s+i),f=o,d=s;break;case"Q":o=a[3],s=a[4],e.quadraticCurveTo(a[1]+n,a[2]+i,o+n,s+i),f=o,d=s,h=a[1],p=a[2];break;case"t":o=f+a[1],s=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-l,p=2*d-u):"q"===c[0]&&(h=2*f-h,p=2*d-p),l=h,u=p,e.quadraticCurveTo(h+n,p+i,o+n,s+i),f=o,d=s,h=f+a[1],p=d+a[2];break;case"T":o=a[1],s=a[2],h=2*f-h,p=2*d-p,e.quadraticCurveTo(h+n,p+i,o+n,s+i),f=o,d=s;break;case"a":r(e,f+n,d+i,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+i]),f+=a[6],d+=a[7];break;case"A":r(e,f+n,d+i,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+i]),f=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}}},{"./arc":51}],55:[function(e,t,n){function r(){this._active=null,this._handlers={}}var i=r.prototype;i.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.padding(t)},i.element=function(){return this._el},i.padding=function(e){return this._padding=e||{top:0,left:0,bottom:0,right:0},this},i.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},i.on=function(){},i.off=function(){},i.handlers=function(){var e,t=this._handlers,n=[];for(e in t)n.push.apply(n,t[e]);return n},i.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},t.exports=r},{}],56:[function(e,t,n){function r(){this._el=null,this._bgcolor=null}var i=r.prototype;i.initialize=function(e,t,n,r){return this._el=e,this.resize(t,n,r)},i.element=function(){return this._el},i.scene=function(){return this._el&&this._el.firstChild},i.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},i.resize=function(e,t,n){return this._width=e,this._height=t,this._padding=n||{top:0,left:0,bottom:0,right:0},this},i.render=function(){return this},t.exports=r},{}],57:[function(e,t,n){function r(){s.call(this),this._down=null,this._touch=null,this._first=!0}function i(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function a(e){return function(t){this.fire(e,t),this._active=null}}var o=e("../../util/dom"),s=e("../Handler"),l=e("./marks"),u=s.prototype,c=r.prototype=Object.create(u);c.constructor=r,c.initialize=function(e,t,n){var r=this._canvas=o.find(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){c[e]?c[e].call(i,t):i.fire(e,t)})})}return u.initialize.call(this,e,t,n)},c.canvas=function(){return this._canvas},c.context=function(){return this._canvas.getContext("2d")},c.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],c.DOMMouseScroll=function(e){
this.fire("mousewheel",e)},c.mousemove=i("mousemove","mouseover","mouseout"),c.dragover=i("dragover","dragenter","dragleave"),c.mouseout=a("mouseout"),c.dragleave=a("dragleave"),c.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},c.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},c.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},c.touchmove=function(e){this.fire("touchmove",e,!0)},c.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},c.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(o)for(t.vegaType=e,r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},c.on=function(e,t){var n=this.eventName(e),r=this._handlers;return(r[n]||(r[n]=[])).push({type:e,handler:t}),this},c.off=function(e,t){var n,r=this.eventName(e),i=this._handlers[r];if(i){for(n=i.length;--n>=0;)i[n].type===e&&(t&&i[n].handler!==t||i.splice(n,1));return this}},c.pickEvent=function(e){var t,n,r=this._canvas.getBoundingClientRect(),i=this._padding;return this.pick(this._scene,t=e.clientX-r.left,n=e.clientY-r.top,t-i.left,n-i.top)},c.pick=function(e,t,n,r,i){var a=this.context(),o=l[e.marktype];return o.pick.call(this,a,e,t,n,r,i)},t.exports=r},{"../../util/dom":85,"../Handler":55,"./marks":64}],58:[function(e,t,n){function r(e){c.call(this),this._loader=new l(e)}function i(e,t){if(!t)return null;var n,r,i,o,l,u=new s;for(n=0,r=t.length;n<r;++n)i=t[n],o=i.mark,l=o.group,i=f[o.marktype].nested?o:i,u.union(a(i.bounds,l)),i["bounds:prev"]&&u.union(a(i["bounds:prev"],l));return u.round(),e.beginPath(),e.rect(u.x1,u.y1,u.width(),u.height()),e.clip(),u}function a(e,t){if(null==t)return e;for(var n=e.clone();null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}var o=e("../../util/dom"),s=e("../../util/Bounds"),l=e("../../util/ImageLoader"),u=e("../../util/canvas"),c=e("../Renderer"),f=e("./marks");r.RETINA=!0;var d=c.prototype,h=r.prototype=Object.create(d);h.constructor=r,h.initialize=function(e,t,n,r){return this._canvas=u.instance(t,n),e&&(o.clear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),d.initialize.call(this,e,t,n,r)},h.resize=function(e,t,n){return d.resize.call(this,e,t,n),u.resize(this._canvas,this._width,this._height,this._padding,r.RETINA),this},h.canvas=function(){return this._canvas},h.context=function(){return this._canvas?this._canvas.getContext("2d"):null},h.pendingImages=function(){return this._loader.pending()},h.render=function(e,t){var n,r=this.context(),a=this._padding,o=this._width+a.left+a.right,s=this._height+a.top+a.bottom;return this._scene=e,r.save(),n=i(r,t),this.clear(-a.left,-a.top,o,s),this.draw(r,e,n),r.restore(),this._scene=null,this},h.draw=function(e,t,n){var r=f[t.marktype];r.draw.call(this,e,t,n)},h.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))},h.loadImage=function(e){var t=this,n=this._scene;return this._loader.loadImage(e,function(){t.renderAsync(n)})},h.renderAsync=function(e){var t=this;t._async_id&&clearTimeout(t._async_id),t._async_id=setTimeout(function(){t.render(e),delete t._async_id},10)},t.exports=r},{"../../util/Bounds":78,"../../util/ImageLoader":81,"../../util/canvas":84,"../../util/dom":85,"../Renderer":56,"./marks":64}],59:[function(e,t,n){t.exports={Handler:e("./CanvasHandler"),Renderer:e("./CanvasRenderer")}},{"./CanvasHandler":57,"./CanvasRenderer":58}],60:[function(e,t,n){function r(e,t){var n=t.x||0,r=t.y||0,i=t.innerRadius||0,o=t.outerRadius||0,s=(t.startAngle||0)-a,l=(t.endAngle||0)-a;e.beginPath(),0===i?e.moveTo(n,r):e.arc(n,r,i,s,l,0),e.arc(n,r,o,l,s,1),e.closePath()}var i=e("./util"),a=Math.PI/2;t.exports={draw:i.drawAll(r),pick:i.pickPath(r)}},{"./util":71}],61:[function(e,t,n){function r(e,t){var n=t[0],r=n.pathCache||(n.pathCache=o(l(t)));s(e,r)}function i(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),u(e,o,n,r)?o[0]:null)}var a=e("./util"),o=e("../../../path/parse"),s=e("../../../path/render"),l=e("../../../util/svg").path.area,u=a.testPath(r);t.exports={draw:a.drawOne(r),pick:i,nested:!0}},{"../../../path/parse":53,"../../../path/render":54,"../../../util/svg":87,"./util":71}],62:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length){var r,i,s,l,u,c,f,d,h,p,g,m,v,y=t.items,b=this;for(p=0,g=y.length;p<g;++p){for(r=y[p],s=r.axisItems||o,i=r.items||o,l=r.legendItems||o,u=r.x||0,c=r.y||0,f=r.width||0,d=r.height||0,(r.stroke||r.fill)&&(h=null==r.opacity?1:r.opacity,h>0&&(r.fill&&a.fill(e,r,h)&&e.fillRect(u,c,f,d),r.stroke&&a.stroke(e,r,h)&&e.strokeRect(u,c,f,d))),e.save(),e.translate(u,c),r.clip&&(e.beginPath(),e.rect(0,0,f,d),e.clip()),n&&n.translate(-u,-c),m=0,v=s.length;m<v;++m)"back"===s[m].layer&&b.draw(e,s[m],n);for(m=0,v=i.length;m<v;++m)b.draw(e,i[m],n);for(m=0,v=s.length;m<v;++m)"back"!==s[m].layer&&b.draw(e,s[m],n);for(m=0,v=l.length;m<v;++m)b.draw(e,l[m],n);n&&n.translate(u,c),e.restore()}}}function i(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a))return null;var s,l,u,c,f,d,h,p,g,m,v,y=t.items||o;for(g=y.length;--g>=0;)if(l=y[g],v=l.bounds,!v||v.contains(i,a)){for(u=l.axisItems||o,c=l.items||o,f=l.legendItems||o,h=l.x||0,p=l.y||0,e.save(),e.translate(h,p),h=i-h,p=a-p,m=f.length;--m>=0;)if(s=f[m],s.interactive!==!1&&(d=this.pick(s,n,r,h,p)))return e.restore(),d;for(m=u.length;--m>=0;)if(s=u[m],s.interactive!==!1&&"back"!==s.layer&&(d=this.pick(s,n,r,h,p)))return e.restore(),d;for(m=c.length;--m>=0;)if(s=c[m],s.interactive!==!1&&(d=this.pick(s,n,r,h,p)))return e.restore(),d;for(m=u.length;--m>=0;)if(s=u[m],s.interative!==!1&&"back"===s.layer&&(d=this.pick(s,n,r,h,p)))return e.restore(),d;if(e.restore(),t.interactive!==!1&&(l.fill||l.stroke)&&h>=0&&h<=l.width&&p>=0&&p<=l.height)return l}return null}var a=e("./util"),o=[];t.exports={draw:r,pick:i}},{"./util":71}],63:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i=this,a=t.items,o=0,s=a.length;o<s;++o)if(r=a[o],!n||n.intersects(r.bounds)){r.image&&r.image.url===r.url||(r.image=i.loadImage(r.url),r.image.url=r.url);var l,u=r.x||0,c=r.y||0,f=r.width||r.image&&r.image.width||0,d=r.height||r.image&&r.image.height||0;u-="center"===r.align?f/2:"right"===r.align?f:0,c-="middle"===r.baseline?d/2:"bottom"===r.baseline?d:0,r.image.loaded&&(e.globalAlpha=null!=(l=r.opacity)?l:1,e.drawImage(r.image,u,c,f,d))}}var i=e("./util");t.exports={draw:r,pick:i.pick()}},{"./util":71}],64:[function(e,t,n){t.exports={arc:e("./arc"),area:e("./area"),group:e("./group"),image:e("./image"),line:e("./line"),path:e("./path"),rect:e("./rect"),rule:e("./rule"),symbol:e("./symbol"),text:e("./text")}},{"./arc":60,"./area":61,"./group":62,"./image":63,"./line":65,"./path":66,"./rect":67,"./rule":68,"./symbol":69,"./text":70}],65:[function(e,t,n){function r(e,t){var n=t[0],r=n.pathCache||(n.pathCache=o(l(t)));s(e,r)}function i(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),u(e,o,n,r)?o[0]:null)}var a=e("./util"),o=e("../../../path/parse"),s=e("../../../path/render"),l=e("../../../util/svg").path.line,u=a.testPath(r,!1);t.exports={draw:a.drawOne(r),pick:i,nested:!0}},{"../../../path/parse":53,"../../../path/render":54,"../../../util/svg":87,"./util":71}],66:[function(e,t,n){function r(e,t){if(null==t.path)return!0;var n=t.pathCache||(t.pathCache=a(t.path));o(e,n,t.x,t.y)}var i=e("./util"),a=e("../../../path/parse"),o=e("../../../path/render");t.exports={draw:i.drawAll(r),pick:i.pickPath(r)}},{"../../../path/parse":53,"../../../path/render":54,"./util":71}],67:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,a,o,s,l,u,c=t.items,f=0,d=c.length;f<d;++f)r=c[f],n&&!n.intersects(r.bounds)||(a=null==r.opacity?1:r.opacity,0!==a&&(o=r.x||0,s=r.y||0,l=r.width||0,u=r.height||0,r.fill&&i.fill(e,r,a)&&e.fillRect(o,s,l,u),r.stroke&&i.stroke(e,r,a)&&e.strokeRect(o,s,l,u)))}var i=e("./util");t.exports={draw:r,pick:i.pick()}},{"./util":71}],68:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i,a,s,l,u,c=t.items,f=0,d=c.length;f<d;++f)r=c[f],n&&!n.intersects(r.bounds)||(i=null==r.opacity?1:r.opacity,0!==i&&(a=r.x||0,s=r.y||0,l=null!=r.x2?r.x2:a,u=null!=r.y2?r.y2:s,r.stroke&&o.stroke(e,r,i)&&(e.beginPath(),e.moveTo(a,s),e.lineTo(l,u),e.stroke())))}function i(e,t){var n=t.x||0,r=t.y||0,i=null!=t.x2?t.x2:n,a=null!=t.y2?t.y2:r,o=t.strokeWidth,s=t.strokeCap;e.lineWidth=null!=o?o:1,e.lineCap=null!=s?s:"butt",e.beginPath(),e.moveTo(n,r),e.lineTo(i,a)}function a(e,t,n,r){return!!e.isPointInStroke&&(i(e,t),e.isPointInStroke(n,r))}var o=e("./util");t.exports={draw:r,pick:o.pick(a)}},{"./util":71}],69:[function(e,t,n){function r(e,t){var n,r,a,c,f=null!=t.size?t.size:100,d=t.x,h=t.y;if(e.beginPath(),null==t.shape||"circle"===t.shape)return n=Math.sqrt(f/Math.PI),e.arc(d,h,n,0,2*Math.PI,0),void e.closePath();switch(t.shape){case"cross":n=Math.sqrt(f/5)/2,r=3*n,e.moveTo(d-r,h-n),e.lineTo(d-n,h-n),e.lineTo(d-n,h-r),e.lineTo(d+n,h-r),e.lineTo(d+n,h-n),e.lineTo(d+r,h-n),e.lineTo(d+r,h+n),e.lineTo(d+n,h+n),e.lineTo(d+n,h+r),e.lineTo(d-n,h+r),e.lineTo(d-n,h+n),e.lineTo(d-r,h+n);break;case"diamond":c=Math.sqrt(f/(2*u)),a=c*u,e.moveTo(d,h-c),e.lineTo(d+a,h),e.lineTo(d,h+c),e.lineTo(d-a,h);break;case"square":r=Math.sqrt(f),n=r/2,e.rect(d-n,h-n,r,r);break;case"triangle-down":a=Math.sqrt(f/l),c=a*l/2,e.moveTo(d,h+c),e.lineTo(d+a,h-c),e.lineTo(d-a,h-c);break;case"triangle-up":a=Math.sqrt(f/l),c=a*l/2,e.moveTo(d,h-c),e.lineTo(d+a,h+c),e.lineTo(d-a,h+c);break;default:var p=i(o(t.shape),f);s(e,p,d,h)}e.closePath()}function i(e,t){var n,r,i,a,o,s=Math.sqrt(t);for(n=0,r=e.length;n<r;++n)for(o=e[n],i=1,a=o.length;i<a;++i)o[i]*=s;return e}var a=e("./util"),o=e("../../../path/parse"),s=e("../../../path/render"),l=Math.sqrt(3),u=Math.tan(30*Math.PI/180);t.exports={draw:a.drawAll(r),pick:a.pickPath(r)}},{"../../../path/parse":53,"../../../path/render":54,"./util":71}],70:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i,a,o,u,c,f,d=t.items,h=0,p=d.length;h<p;++h)r=d[h],n&&!n.intersects(r.bounds)||(f=s.value(r.text),f&&(i=null==r.opacity?1:r.opacity,0!==i&&(e.font=s.font(r),e.textAlign=r.align||"left",a=r.x||0,o=r.y||0,(u=r.radius)&&(c=(r.theta||0)-Math.PI/2,a+=u*Math.cos(c),o+=u*Math.sin(c)),r.angle&&(e.save(),e.translate(a,o),e.rotate(r.angle*Math.PI/180),a=o=0),a+=r.dx||0,o+=(r.dy||0)+s.offset(r),r.fill&&l.fill(e,r,i)&&e.fillText(f,a,o),r.stroke&&l.stroke(e,r,i)&&e.strokeText(f,a,o),r.angle&&e.restore())))}function i(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=o(t,u,!0),l=-t.angle*Math.PI/180,c=Math.cos(l),f=Math.sin(l),d=t.x,h=t.y,p=c*i-f*a+(d-d*c+h*f),g=f*i+c*a+(h-d*f-h*c);return s.contains(p,g)}var a=e("../../../util/Bounds"),o=e("../../../util/bound").text,s=e("../../../util/text"),l=e("./util"),u=new a;t.exports={draw:r,pick:l.pick(i)}},{"../../../util/Bounds":78,"../../../util/bound":83,"../../../util/text":88,"./util":71}],71:[function(e,t,n){function r(e,t,n,r){if(!e(t,r)){var i=null==n.opacity?1:n.opacity;0!==i&&(n.fill&&c(t,n,i)&&t.fill(),n.stroke&&f(t,n,i)&&t.stroke())}}function i(e,t,n,i){var a,o,s;for(a=0,o=n.items.length;a<o;++a)s=n.items[a],i&&!i.intersects(s.bounds)||r(e,t,s,s)}function a(e){return function(t,n,r){i(e,t,n,r)}}function o(e){return function(t,n,i){n.items.length&&(i&&!i.intersects(n.bounds)||r(e,t,n.items[0],n.items))}}function s(e){return e||(e=p),function(t,n,r,i,a,o){if(!n.items.length)return null;var s,l,u;for(null!=t.pixelratio&&1!==t.pixelratio&&(r*=t.pixelratio,i*=t.pixelratio),u=n.items.length;--u>=0;)if(s=n.items[u],l=s.bounds,(!l||l.contains(a,o))&&l&&e(t,s,r,i,a,o))return s;return null}}function l(e,t){return function(n,r,i,a){var o,s,l=Array.isArray(r)?r[0]:r,u=null==t?l.fill:t,c=l.stroke&&n.isPointInStroke;return c&&(o=l.strokeWidth,s=l.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(u&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function u(e){return s(l(e))}function c(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,n>0&&(e.globalAlpha=n,e.fillStyle=d(e,t,t.fill),!0)}function f(e,t,n){var r,i=null!=(i=t.strokeWidth)?i:1;return!(i<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity,n>0&&(e.globalAlpha=n,e.strokeStyle=d(e,t,t.stroke),e.lineWidth=i,e.lineCap=null!=(r=t.strokeCap)?r:"butt",e.vgLineDash(t.strokeDash||null),e.vgLineDashOffset(t.strokeDashOffset||0),!0))}function d(e,t,n){return n.id?h(e,n,t.bounds):n}function h(e,t,n){var r,i,a=n.width(),o=n.height(),s=n.x1+t.x1*a,l=n.y1+t.y1*o,u=n.x1+t.x2*a,c=n.y1+t.y2*o,f=e.createLinearGradient(s,l,u,c),d=t.stops;for(r=0,i=d.length;r<i;++r)f.addColorStop(d[r].offset,d[r].color);return f}var p=function(){return!0};t.exports={drawOne:o,drawAll:a,pick:s,pickPath:u,testPath:l,stroke:f,fill:c,color:d,gradient:h}},{}],72:[function(e,t,n){t.exports={canvas:e("./canvas"),svg:e("./svg")}},{"./canvas":59,"./svg":76}],73:[function(e,t,n){function r(){a.call(this)}var i=e("../../util/dom"),a=e("../Handler"),o=a.prototype,s=r.prototype=Object.create(o);s.constructor=r,s.initialize=function(e,t,n){return this._svg=i.find(e,"svg"),o.initialize.call(this,e,t,n)},s.svg=function(){return this._svg},s.listener=function(e){var t=this;return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,e.call(t._obj,n,i)}},s.on=function(e,t){var n=this.eventName(e),r=this._svg,i=this._handlers,a={type:e,handler:t,listener:this.listener(t)};return(i[n]||(i[n]=[])).push(a),r.addEventListener(n,a.listener),this},s.off=function(e,t){var n,r=this.eventName(e),i=this._svg,a=this._handlers[r];if(a){for(n=a.length;--n>=0;)(a[n].type===e&&!t||a[n].handler===t)&&(i.removeEventListener(r,a[n].listener),a.splice(n,1));return this}},t.exports=r},{"../../util/dom":85,"../Handler":55}],74:[function(e,t,n){function r(e){f.call(this),this._loader=new c(e),this._dirtyID=0}function i(e,t,n){var r,i,a;for(e=h.child(e,n,"linearGradient",g),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)a=h.child(e,r,"stop",g),a.setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);h.clear(e,r)}function a(e,t,n){var r;e=h.child(e,n,"clipPath",g),e.setAttribute("id",t.id),r=h.child(e,0,"rect",g),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)}function o(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function s(e,t,n,r,i){var a=h.child(e,r,t.tag,g,null,i);if(a.__data__=n,a.__values__={fill:"default"},"g"===t.tag){var o=h.child(a,0,"rect",g,"background");o.__data__=n}return n._svg=a}function l(e,t,n){t!==_[e]&&(null!=t?n?b.setAttributeNS(n,e,t):b.setAttribute(e,t):n?b.removeAttributeNS(n,e):b.removeAttribute(e),_[e]=t)}function u(){return"undefined"!=typeof window?window.location.href:""}var c=e("../../util/ImageLoader"),f=e("../Renderer"),d=e("../../util/text"),h=e("../../util/dom"),p=e("../../util/svg"),g=p.metadata.xmlns,m=e("./marks"),v=f.prototype,y=r.prototype=Object.create(v);y.constructor=r,y.initialize=function(e,t,n,r){return e&&(this._svg=h.child(e,0,"svg",g,"marks"),h.clear(e,1),this._root=h.child(this._svg,0,"g",g),h.clear(this._svg,1)),this._defs={clip_id:1,gradient:{},clipping:{}},this.background(this._bgcolor),v.initialize.call(this,e,t,n,r)},y.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),v.background.apply(this,arguments)},y.resize=function(e,t,n){if(v.resize.call(this,e,t,n),this._svg){var r=this._width,i=this._height,a=this._padding;this._svg.setAttribute("width",r+a.left+a.right),this._svg.setAttribute("height",i+a.top+a.bottom),this._root.setAttribute("transform","translate("+a.left+","+a.top+")")}return this},y.svg=function(){if(!this._svg)return null;var e={"class":"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var t in p.metadata)e[t]=p.metadata[t];return h.openTag("svg",e)+this._svg.innerHTML+h.closeTag("svg")},y.imageURL=function(e){return this._loader.imageURL(e)},y.render=function(e,t){return this._dirtyCheck(t)&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e,-1),h.clear(this._root,1)),this.updateDefs(),this},y.draw=function(e,t,n){this.drawMark(e,t,n,m[t.marktype])},y.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,o=0;for(e in n.gradient)r||(r=n.el=h.child(t,0,"defs",g)),i(r,n.gradient[e],o++);for(e in n.clipping)r||(r=n.el=h.child(t,0,"defs",g)),a(r,n.clipping[e],o++);r&&(0===o?(t.removeChild(r),n.el=null):h.clear(r,o))},y._resetDefs=function(){var e=this._defs;e.clip_id=1,e.gradient={},e.clipping={}},y.isDirty=function(e){return this._dirtyAll||e.dirty===this._dirtyID},y._dirtyCheck=function(e){if(this._dirtyAll=!0,!e)return!0;var t,n,r,i,a,s,l,u=++this._dirtyID;for(a=0,s=e.length;a<s;++a)t=e[a],n=t.mark,n.marktype!==r&&(r=n.marktype,i=m[r]),"exit"!==t.status?(t=i.nest?n.items[0]:t,t._update!==u&&(t._svg?this._update(i,t._svg,t):(this._dirtyAll=!1,o(t,u)),t._update=u)):t._svg&&(i.nest&&t.mark.items.length?(this._update(i,t._svg,t.mark.items[0]),l=t.mark.items[0],l._svg=t._svg,l._update=u):h.remove(t._svg),t._svg=null);return!this._dirtyAll},y.drawMark=function(e,t,n,r){if(this.isDirty(t)){var i,a,o,l,u,c,f=r.nest?t.items&&t.items.length?[t.items[0]]:[]:t.items||[],d=t.interactive===!1?"none":null,p="g"===r.tag,m=h.cssClass(t);for(i=h.child(e,n+1,"g",g,m),i.setAttribute("class",m),t._svg=i,!p&&d&&i.style.setProperty("pointer-events",d),a=0,o=f.length;a<o;++a)this.isDirty(u=f[a])&&(c=!(this._dirtyAll||u._svg),l=s(i,r,u,a,c),this._update(r,l,u),p&&(c&&(this._dirtyAll=!0),this._recurse(l,u),c&&(this._dirtyAll=!1)));return h.clear(i,a),i}},y._recurse=function(e,t){var n,r,i=t.items||[],a=t.legendItems||[],o=t.axisItems||[],s=0;for(n=0,r=o.length;n<r;++n)"back"===o[n].layer&&this.drawMark(e,o[n],s++,m.group);for(n=0,r=i.length;n<r;++n)this.draw(e,i[n],s++);for(n=0,r=o.length;n<r;++n)"back"!==o[n].layer&&this.drawMark(e,o[n],s++,m.group);for(n=0,r=a.length;n<r;++n)this.drawMark(e,a[n],s++,m.group);h.clear(e,1+s)};var b=null,_=null,E={group:function(e,t,n){b=t.childNodes[0],_=t.__values__,e.background(l,n,this);var r=n.mark.interactive===!1?"none":null;r!==_.events&&(b.style.setProperty("pointer-events",r),_.events=r)},text:function(e,t,n){var r=d.value(n.text);r!==_.text&&(t.textContent=r,_.text=r),r=d.font(n),r!==_.font&&(t.style.setProperty("font",r),_.font=r)}};y._update=function(e,t,n){b=t,_=t.__values__,e.attr(l,n,this);var r=E[e.type];r&&r(e,t,n),this.style(b,n)},y.style=function(e,t){if(null!=t){var n,r,i,a,o;for(n=0,r=p.styleProperties.length;n<r;++n)i=p.styleProperties[n],o=t[i],o!==_[i]&&(a=p.styles[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+u()+"#"+o.id+")"),e.style.setProperty(a,o+"")),_[i]=o)}},t.exports=r},{"../../util/ImageLoader":81,"../../util/dom":85,"../../util/svg":87,"../../util/text":88,"../Renderer":56,"./marks":77}],75:[function(e,t,n){function r(e){s.call(this),this._loader=new l(e),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={clip_id:1,gradient:{},clipping:{}}}function i(e,t,n,r){v[r||e]=t}function a(e,t,n,r){if(null==e)return"";var i,a,o,s,l,f="";for("bgrect"===n&&t.interactive===!1&&(f+="pointer-events: none;"),"text"===n&&(f+="font: "+c.font(e)+";"),i=0,a=u.styleProperties.length;i<a;++i)o=u.styleProperties[i],s=u.styles[o],l=e[o],null==l?"fill"===s&&(f+=(f.length?" ":"")+"fill: none;"):(l.id&&(r.gradient[l.id]=l,l="url(#"+l.id+")"),f+=(f.length?" ":"")+s+": "+l+";");return f?'style="'+f+'"':null}function o(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var s=e("../Renderer"),l=e("../../util/ImageLoader"),u=e("../../util/svg"),c=e("../../util/text"),f=e("../../util/dom"),d=f.openTag,h=f.closeTag,p=e("./marks"),g=s.prototype,m=r.prototype=Object.create(g);m.constructor=r,m.resize=function(e,t,n){g.resize.call(this,e,t,n);var r=this._padding,i=this._text,a={"class":"marks",width:this._width+r.left+r.right,height:this._height+r.top+r.bottom};for(var o in u.metadata)a[o]=u.metadata[o];return i.head=d("svg",a),i.root=d("g",{transform:"translate("+r.left+","+r.top+")"}),i.foot=h("g")+h("svg"),this},m.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot},m.render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},m.reset=function(){return this._defs.clip_id=0,this},m.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(n=i.gradient[t],r=n.stops,a+=d("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=d("stop",{offset:r[e].offset,"stop-color":r[e].color})+h("stop");a+=h("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=d("clipPath",{id:t}),a+=d("rect",{x:0,y:0,width:n.width,height:n.height})+h("rect"),a+=h("clipPath");return a.length>0?d("defs")+a+h("defs"):""},m.imageURL=function(e){return this._loader.imageURL(e)};var v;m.attributes=function(e,t){return v={},e(i,t,this),v},m.mark=function(e){var t,n,r,i=p[e.marktype],s=i.tag,l=i.attr,u=i.nest||!1,g=u?e.items&&e.items.length?[e.items[0]]:[]:e.items||[],m=this._defs,v="";for("g"!==s&&e.interactive===!1&&(t='style="pointer-events: none;"'),v+=d("g",{"class":f.cssClass(e)},t),n=0;n<g.length;++n)r=g[n],t="g"!==s?a(r,e,s,m):null,v+=d(s,this.attributes(l,r),t),"text"===s?v+=o(c.value(r.text)):"g"===s&&(v+=d("rect",this.attributes(i.background,r),a(r,e,"bgrect",m))+h("rect"),v+=this.markGroup(r)),v+=h(s);return v+h("g")},m.markGroup=function(e){var t,n,r="",i=e.axisItems||[],a=e.items||[],o=e.legendItems||[];for(t=0,n=i.length;t<n;++t)"back"===i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=a.length;t<n;++t)r+=this.mark(a[t]);for(t=0,n=i.length;t<n;++t)"back"!==i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=o.length;t<n;++t)r+=this.mark(o[t]);return r},t.exports=r},{"../../util/ImageLoader":81,"../../util/dom":85,"../../util/svg":87,"../../util/text":88,"../Renderer":56,"./marks":77}],76:[function(e,t,n){t.exports={Handler:e("./SVGHandler"),Renderer:e("./SVGRenderer"),string:{Renderer:e("./SVGStringRenderer")}}},{"./SVGHandler":73,"./SVGRenderer":74,"./SVGStringRenderer":75}],77:[function(e,t,n){function r(e){return i(e.x||0,e.y||0)}function i(e,t){return"translate("+e+","+t+")"}var a=e("../../util/text"),o=e("../../util/svg"),s=o.symbolTypes,l=o.textAlign,u=o.path;t.exports={arc:{tag:"path",type:"arc",attr:function(e,t){e("transform",r(t)),e("d",u.arc(t))}},area:{tag:"path",type:"area",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",u.area(n))}},group:{tag:"g",type:"group",attr:function(e,t,n){var i,a,o=null;e("transform",r(t)),t.clip&&(i=n._defs,o=t.clip_id||(t.clip_id="clip"+i.clip_id++),a=i.clipping[o]||(i.clipping[o]={id:o}),a.width=t.width||0,a.height=t.height||0),e("clip-path",o?"url(#"+o+")":null)},background:function(e,t){e("class","background"),e("width",t.width||0),e("height",t.height||0)}},image:{tag:"image",type:"image",attr:function(e,t,n){var r=t.x||0,a=t.y||0,o=t.width||0,s=t.height||0,l=n.imageURL(t.url);r-="center"===t.align?o/2:"right"===t.align?o:0,a-="middle"===t.baseline?s/2:"bottom"===t.baseline?s:0,e("href",l,"http://www.w3.org/1999/xlink","xlink:href"),e("transform",i(r,a)),e("width",o),e("height",s)}},line:{tag:"path",type:"line",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",u.line(n))}},path:{tag:"path",type:"path",attr:function(e,t){e("transform",r(t)),e("d",t.path)}},rect:{tag:"rect",type:"rect",nest:!1,attr:function(e,t){e("transform",r(t)),e("width",t.width||0),e("height",t.height||0)}},rule:{tag:"line",type:"rule",attr:function(e,t){e("transform",r(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(e,t){var n=!t.shape||s[t.shape]?u.symbol(t):u.resize(t.shape,t.size);e("transform",r(t)),e("d",n)}},text:{tag:"text",type:"text",nest:!1,attr:function(e,t){var n,r=t.dx||0,o=(t.dy||0)+a.offset(t),s=t.x||0,u=t.y||0,c=t.angle||0,f=t.radius||0;f&&(n=(t.theta||0)-Math.PI/2,s+=f*Math.cos(n),u+=f*Math.sin(n)),e("text-anchor",l[t.align]||"start"),c?(n=i(s,u)+" rotate("+c+")",(r||o)&&(n+=" "+i(r,o))):n=i(s+r,u+o),e("transform",n)}}}},{"../../util/svg":87,"../../util/text":88}],78:[function(e,t,n){function r(e){this.clear(),e&&this.union(e)}var i=r.prototype;i.clone=function(){return new r(this)},i.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},i.set=function(e,t,n,r){return this.x1=e,this.y1=t,this.x2=n,this.y2=r,this},i.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},i.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},i.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},i.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},i.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,s=this.x1,l=this.x2,u=this.y1,c=this.y2;return this.clear().add(r*s-i*u+a,i*s+r*u+o).add(r*s-i*c+a,i*s+r*c+o).add(r*l-i*u+a,i*l+r*u+o).add(r*l-i*c+a,i*l+r*c+o)},i.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},i.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},i.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},i.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},i.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},i.width=function(){return this.x2-this.x1},i.height=function(){return this.y2-this.y1},t.exports=r},{}],79:[function(e,t,n){t.exports=function(e){function t(){}function n(t,n){e.add(t,n)}return{bounds:function(t){return arguments.length?(e=t,this):e},beginPath:t,closePath:t,moveTo:n,lineTo:n,quadraticCurveTo:function(t,n,r,i){e.add(t,n),e.add(r,i)},bezierCurveTo:function(t,n,r,i,a,o){e.add(t,n),e.add(r,i),e.add(a,o)}}}},{}],80:[function(e,t,n){function r(e){this.id="gradient_"+i++,this.type=e||"linear",this.stops=[],this.x1=0,this.x2=1,this.y1=0,this.y2=0}var i=0,a=r.prototype;a.stop=function(e,t){return this.stops.push({offset:e,color:t}),this},t.exports=r},{}],81:[function(e,t,n){(function(n){function r(e){this._pending=0,this._config=e||r.Config}function i(e,t){var n=o.sanitizeUrl(this.params(e));if(!n)return t&&t(e,null),null;var r=this,i=new Image;return r._pending+=1,i.onload=function(){r._pending-=1,i.loaded=!0,t&&t(null,i)},i.src=n,i}function a(e,t){var r=this,i=new("undefined"!=typeof window?window.canvas:"undefined"!=typeof n?n.canvas:null).Image;return r._pending+=1,o(this.params(e),function(e,n){return r._pending-=1,e?(t&&t(e,null),null):(i.src=n,i.loaded=!0,void(t&&t(null,i)))}),i}var o=e("datalib/src/import/load");r.Config=null;var s=r.prototype;s.pending=function(){return this._pending},s.params=function(e){var t,n={url:e};for(t in this._config)n[t]=this._config[t];return n},s.imageURL=function(e){return o.sanitizeUrl(this.params(e))},s.loadImage=function(e,t){return o.useXHR?i.call(this,e,t):a.call(this,e,t)},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"datalib/src/import/load":23}],82:[function(e,t,n){function r(e){this.mark=e}var i=r.prototype;i.hasPropertySet=function(e){var t=this.mark.def.properties;return t&&null!=t[e]},i.cousin=function(e,t){if(0===e)return this;e=e||-1;var n=this.mark,r=n.group,i=null==t?n.items.indexOf(this):t,a=r.items.indexOf(n)+e;return r.items[a].items[i]},i.sibling=function(e){if(0===e)return this;e=e||-1;var t=this.mark,n=t.items.indexOf(this)+e;return t.items[n]},i.remove=function(){var e=this,t=e.mark.items,n=t.indexOf(e);return n>=0&&(n===t.length-1?t.pop():t.splice(n,1)),e},i.touch=function(){this.pathCache&&(this.pathCache=null)},t.exports=r},{}],83:[function(e,t,n){function r(){return M||(M=_.instance(1,1).getContext("2d"))}function i(e,t){return e.stroke&&0!==e.opacity&&0!==e.stokeOpacity&&t.expand(null!=e.strokeWidth?e.strokeWidth:1),t}function a(e,t,n,r,a){return null==t?n.set(0,0,0,0):(w(N.bounds(n),t,r,a),i(e,n)),n}function o(e,t){var n=e.path?e.pathCache||(e.pathCache=T(e.path)):null;return a(e,n,t,e.x,e.y)}function s(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=T(A(n)));return a(r,i,t)}function l(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=T(C(n)));return a(r,i,t)}function u(e,t){var n,r;return i(e,t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0))}function c(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return n-="center"===e.align?i/2:"right"===e.align?i:0,r-="middle"===e.baseline?a/2:"bottom"===e.baseline?a:0,t.set(n,r,n+i,r+a)}function f(e,t){var n,r;return i(e,t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r))}function d(e,t){var n,r,a,o,s,l,u,c,f,d=e.x||0,h=e.y||0,p=e.innerRadius||0,g=e.outerRadius||0,m=(e.startAngle||0)-k,v=(e.endAngle||0)-k,y=1/0,b=-(1/0),_=1/0,E=-(1/0),x=[m,v],S=m-m%k;for(r=0;r<4&&S<v;++r,S+=k)x.push(S);for(r=0,a=x.length;r<a;++r)n=x[r],o=Math.cos(n),l=p*o,c=g*o,s=Math.sin(n),u=p*s,f=g*s,y=Math.min(y,l,c),b=Math.max(b,l,c),_=Math.min(_,u,f),E=Math.max(E,u,f);return i(e,t.set(d+y,h+_,d+b,h+E))}function h(e,t){var n,r,a,o,s=null!=e.size?e.size:100,l=e.x||0,u=e.y||0;switch(e.shape){case"cross":r=3*Math.sqrt(s/5)/2,t.set(l-r,u-r,l+r,u+r);break;case"diamond":o=Math.sqrt(s/(2*I)),a=o*I,t.set(l-a,u-o,l+a,u+o);break;case"square":r=Math.sqrt(s),n=r/2,t.set(l-n,u-n,l+n,u+n);break;case"triangle-down":a=Math.sqrt(s/O),o=a*O/2,t.set(l-a,u-o,l+a,u+o);break;case"triangle-up":a=Math.sqrt(s/O),o=a*O/2,t.set(l-a,u-o,l+a,u+o);break;default:n=Math.sqrt(s/Math.PI),t.set(l-n,u-n,l+n,u+n)}return i(e,t)}function p(e,t,n){var i,a,o=r(),s=x.size(e),l=e.align,u=e.radius||0,c=e.x||0,f=e.y||0,d=e.dx||0,h=(e.dy||0)+x.offset(e)-Math.round(.8*s);return u&&(a=(e.theta||0)-Math.PI/2,c+=u*Math.cos(a),f+=u*Math.sin(a)),o.font=x.font(e),i=o.measureText(x.value(e.text)).width,"center"===l?d-=i/2:"right"===l&&(d-=i),t.set(d+=c,h+=f,d+i,h+s),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,c,f),t.expand(n?0:1)}function g(e,t,n){var r,a,o=e.axisItems||[],s=e.items||[],l=e.legendItems||[];if(!e.clip){for(r=0,a=o.length;r<a;++r)t.union(o[r].bounds);for(r=0,a=s.length;r<a;++r)s[r].bounds&&t.union(s[r].bounds);if(n)for(r=0,a=l.length;r<a;++r)t.union(l[r].bounds)}return(e.clip||e.width||e.height)&&i(e,t.add(0,0).add(e.width||0,e.height||0)),t.translate(e.x||0,e.y||0)}function m(e,t,n){var r=e.mark.marktype;t=t||D[r],t.nest&&(e=e.mark);var i=e.bounds,a=e["bounds:prev"]||(e["bounds:prev"]=new b);return i?(a.clear().union(i),i.clear()):e.bounds=new b,t(e,e.bounds,n),i||a.clear().union(e.bounds),e.bounds}function v(e,t,n){var r,i,a,o,s=e.marktype,l=D[s],u=e.items,c=u&&u.length;if(l.nest)return a=c?u[0]:(L.mark=e,L),o=m(a,l,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new b,c)for(r=0,i=u.length;r<i;++r)t.union(m(u[r],l,n));return e.bounds=t}var y=e("./BoundsContext"),b=e("./Bounds"),_=e("./canvas"),E=e("./svg"),x=e("./text"),S=e("../path"),T=S.parse,w=S.render,A=E.path.area,C=E.path.line,k=Math.PI/2,O=Math.sqrt(3),I=Math.tan(30*Math.PI/180),M=null,N=y(),D={group:g,symbol:h,image:c,rect:u,rule:f,arc:d,text:p,path:o,area:s,line:l};D.area.nest=!0,D.line.nest=!0;var L={mark:null};t.exports={
mark:v,item:m,text:p,group:g}},{"../path":52,"./Bounds":78,"./BoundsContext":79,"./canvas":84,"./svg":87,"./text":88}],84:[function(e,t,n){(function(e){function n(t,n){t=t||1,n=n||1;var r;if("undefined"!=typeof document&&document.createElement)r=document.createElement("canvas"),r.width=t,r.height=n;else{var i="undefined"!=typeof window?window.canvas:"undefined"!=typeof e?e.canvas:null;if(!i.prototype)return null;r=new i(t,n)}return a(r)}function r(e,t,n,r,a){var o=this._ctx=e.getContext("2d"),s=1;return e.width=t+r.left+r.right,e.height=n+r.top+r.bottom,a&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&(o.pixelratio=s=i(e)||1),o.setTransform(s,0,0,s,s*r.left,s*r.top),e}function i(e){var t=e.getContext("2d"),n=window&&window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=n/r;if(n!==r){var a=e.width,o=e.height;e.width=a*i,e.height=o*i,e.style.width=a+"px",e.style.height=o+"px"}return i}function a(e){var t=e.getContext("2d");if(!t.vgLineDash){var n=function(){},r=[];return t.setLineDash?(t.vgLineDash=function(e){this.setLineDash(e||r)},t.vgLineDashOffset=function(e){this.lineDashOffset=e}):void 0!==t.webkitLineDash?(t.vgLineDash=function(e){this.webkitLineDash=e||r},t.vgLineDashOffset=function(e){this.webkitLineDashOffset=e}):void 0!==t.mozDash?(t.vgLineDash=function(e){this.mozDash=e},t.vgLineDashOffset=n):(t.vgLineDash=n,t.vgLineDashOffset=n),e}}t.exports={instance:n,resize:r,lineDash:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],85:[function(e,t,n){function r(e,t,n){return n?e.createElementNS(n,t):e.createElement(t)}function i(e){if(e){var t=e.parentNode;t&&(t.removeChild(e),t.childNodes&&t.childNodes.length||i(t))}}t.exports={find:function(e,t){t=t.toLowerCase();for(var n=0,r=e.childNodes.length;n<r;++n)if(e.childNodes[n].tagName.toLowerCase()===t)return e.childNodes[n]},child:function(e,t,n,i,a,o){var s,l;return s=l=e.childNodes[t],(!s||o||s.tagName.toLowerCase()!==n.toLowerCase()||a&&s.getAttribute("class")!=a)&&(s=r(e.ownerDocument,n,i),e.insertBefore(s,l||null),a&&s.setAttribute("class",a)),s},clear:function(e,t){for(var n=e.childNodes.length;n>t;)e.removeChild(e.childNodes[--n]);return e},remove:i,cssClass:function(e){return"mark-"+e.marktype+(e.name?" "+e.name:"")},openTag:function(e,t,n){var r,i,a="<"+e;if(t)for(r in t)i=t[r],null!=i&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"},closeTag:function(e){return"</"+e+">"}}},{}],86:[function(e,t,n){function r(e,t){return JSON.stringify(e,l,t)}function i(e){var t="string"==typeof e?JSON.parse(e):e;return a(t)}function a(e){var t,n,r,i,l,u=e.marktype;for(r=0,i=s.length;r<i;++r)if(l=e[s[r]])for(t=0,n=l.length;t<n;++t)l[t][u?"mark":"group"]=e,u&&"group"!==u||a(l[t]);return u&&o.mark(e),e}var o=e("../util/bound"),s=["items","axisItems","legendItems"],l=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];t.exports={toJSON:r,fromJSON:i}},{"../util/bound":83}],87:[function(e,t,n){(function(n){function r(e){return e.x||0}function i(e){return e.y||0}function a(e){return(e.x||0)+(e.width||0)}function o(e){return(e.y||0)+(e.height||0)}function s(e){return null==e.size?100:e.size}function l(e){return e.shape||"circle"}var u=e("datalib"),c=("undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null).svg,f=e("../path/parse"),d=c.area().x(r).y1(i).y0(o),h=c.area().y(i).x1(r).x0(a),p=c.line().x(r).y(i);t.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:c.arc(),symbol:c.symbol().type(l).size(s),area:function(e){var t=e[0];return("horizontal"===t.orient?h:d).interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},line:function(e){var t=e[0];return p.interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},resize:function(e,t){var n,r,i,a,o,s,l,u=f(e),c="";for(t=Math.sqrt(t),a=0,o=u.length;a<o;++a)for(n=u[a],s=0,l=n.length;s<l&&"Z"!==n[s];++s)(r=+n[s])===r&&(i=e.indexOf(r),c+=e.substring(0,i)+r*t,e=e.substring(i+(r+"").length));return c+"Z"}},symbolTypes:u.toMap(c.symbolTypes),textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../path/parse":53,datalib:27}],88:[function(e,t,n){function r(e){return null!=e.fontSize?e.fontSize:11}t.exports={size:r,value:function(e){return null!=e?String(e):""},font:function(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/\"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+r(e)+"px "+(n||"sans-serif")},offset:function(e){var t=e.baseline,n=r(e);return Math.round("top"===t?.93*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}}},{}],89:[function(e,t,n){function r(e,t,n){s.call(this,e,t,n),this._type="canvas",this._renderers={canvas:a,svg:o}}var i=e("vega-scenegraph").render,a=i.canvas,o=i.svg.string,s=e("./View"),l=r.prototype=new s;l.renderer=function(e){return e&&(this._type=e),s.prototype.renderer.apply(this,arguments)},l.canvas=function(){return"canvas"===this._type?this._renderer.canvas():null},l.canvasAsync=function(e){function t(){0===n.pendingImages()?(r.render(),e(r.canvas())):setTimeout(t,10)}var n=this._renderer,r=this;return"canvas"!==this._type?null:void(n.pendingImages()>0?t():e(this.canvas()))},l.svg=function(){return"svg"===this._type?this._renderer.svg():null},l.initialize=function(){var e=this._width,t=this._height,n=this._bgcolor,r=this._padding,i=this.model().config();return this._viewport&&(e=this._viewport[0]-(r?r.left+r.right:0),t=this._viewport[1]-(r?r.top+r.bottom:0)),this._renderer=(this._renderer||new this._io.Renderer(i.load)).initialize(null,e,t,r).background(n),this._repaint=!0,this},t.exports=r},{"./View":91,"vega-scenegraph":50}],90:[function(e,t,n){function r(e){this._defs={},this._predicates={},this._scene=null,this._groups=null,this._node=null,this._builder=null,this._reset={axes:!1,legends:!1},this.config(e),this.expr=d(this),l.init.call(this)}function i(e){var t=this,n={};return a.isArray(e)?(e.forEach(function(e){n[e]=t._predicates[e]}),n):this._predicates[e]}var a=e("datalib"),o=e("vega-dataflow"),s=o.ChangeSet,l=o.Graph.prototype,u=o.Node,c=e("../scene/GroupBuilder"),f=e("../scene/visit"),d=e("../parse/expr"),h=e("./config"),p=r.prototype=Object.create(l);p.constructor=r,p.defs=function(e){return arguments.length?(this._defs=e,this):this._defs},p.config=function(e){if(!arguments.length)return this._config;this._config=Object.create(h);for(var t in e){var n=e[t],r=this._config[t];a.isObject(n)&&a.isObject(r)?this._config[t]=a.extend({},r,n):this._config[t]=n}return this},p.width=function(e){return this._defs&&(this._defs.width=e),this._defs&&this._defs.marks&&(this._defs.marks.width=e),this._scene&&(this._scene.items[0].width=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},p.height=function(e){return this._defs&&(this._defs.height=e),this._defs&&this._defs.marks&&(this._defs.marks.height=e),this._scene&&(this._scene.items[0].height=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},p.node=function(){return this._node||(this._node=new u(this))},p.data=function(){var e=l.data.apply(this,arguments);return arguments.length>1&&this.node().addListener(e.pipeline()[0]),e},p.predicate=function(e,t){return 1===arguments.length?i.call(this,e):this._predicates[e]=t},p.predicates=function(){return this._predicates},p.scene=function(e){if(!arguments.length)return this._scene;this._builder&&(this.node().removeListener(this._builder),this._builder._groupBuilder.disconnect());var t=this,n=this._builder=new u(this);return n.evaluate=function(r){if(n._groupBuilder)return r;var i=n._groupBuilder=new c(t,t._defs.marks,t._scene={}),a=i.pipeline();return t._groups={},this.addListener(i.connect()),a[a.length-1].addListener(e),r},this.addListener(n),this},p.group=function(e,t){var n=this._groups;return 1===arguments.length?n[e]:(n[e]=t,this)},p.reset=function(){return this._scene&&this._reset.axes&&(f(this._scene,function(e){e.axes&&e.axes.forEach(function(e){e.reset()})}),this._reset.axes=!1),this._scene&&this._reset.legends&&(f(this._scene,function(e){e.legends&&e.legends.forEach(function(e){e.reset()})}),this._reset.legends=!1),this},p.addListener=function(e){this.node().addListener(e)},p.removeListener=function(e){this.node().removeListener(e)},p.fire=function(e){e||(e=s.create()),this.propagate(e,this.node())},t.exports=r},{"../parse/expr":97,"../scene/GroupBuilder":113,"../scene/visit":118,"./config":92,datalib:27,"vega-dataflow":42}],91:[function(e,t,n){(function(n){function r(e,t,n){this._el=null,this._model=null,this._width=this.__width=t||500,this._height=this.__height=n||300,this._bgcolor=null,this._cursor=!0,this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._viewport=null,this._renderer=null,this._handler=null,this._streamer=null,this._skipSignals=!1,this._changeset=null,this._repaint=!0,this._renderers=d,this._io=null,this._api={}}function i(e){var t=this,n=this._model.data(e);if(!n)return p.error('Data source "'+e+'" is not defined.');var r=n.pipeline()[0],i=this._streamer,a={};return this._api[e]?this._api[e]:(a.insert=function(o){return n.insert(u.duplicate(o)),i.addListener(r),t._changeset.data[e]=1,a},a.update=function(){return i.addListener(r),t._changeset.data[e]=1,n.update.apply(n,arguments),a},a.remove=function(){return i.addListener(r),t._changeset.data[e]=1,n.remove.apply(n,arguments),a},a.values=function(){return n.values()},this._api[e]=a)}function a(e,t){var n=this._changeset,r=this._model.signal(e);return r?(this._streamer.addListener(r.value(t)),n.signals[e]=1,void(n.reflow=!0)):p.error('Signal "'+e+'" is not defined.')}function o(){var e,t,n=this.model().scene(),r=n.items[0].legendItems,i=0,a=r.length;if(this._strict){for(e=h.mark(n,null,!1);i<a;++i)t=r[i].bounds,e.add(t.x1,0).add(t.x2,0);return e}return n.bounds}function s(){var e=this;return e._renderNode=new c.Node(e._model).router(!0),e._renderNode.evaluate=function(t){p.debug(t,["rendering"]);var n=e._model.scene(),r=e._handler;return r&&r.scene&&r.scene(n),t.trans?t.trans.start(function(t){e._renderer.render(n,t)}):e._repaint?e._renderer.render(n):t.dirty.length&&e._renderer.render(n,t.dirty),t.dirty.length&&(t.dirty.forEach(function(e){e._dirty=!1}),n.items[0]._dirty=!1),e._repaint=e._skipSignals=!1,t},e._model.scene(e._renderNode),!0}var l="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,u=e("datalib"),c=e("vega-dataflow"),f=e("vega-scenegraph"),d=f.render,h=f.bound,p=e("vega-logging"),g=c.Dependencies,m=e("../parse/streams"),v=e("../scene/Encoder"),y=e("../scene/Transition"),b=r.prototype;b.model=function(e){return arguments.length?(this._model!==e&&(this._model=e,this._streamer=new c.Node(e),this._streamer._rank=-1,this._changeset=c.ChangeSet.create(),this._handler&&this._handler.model(e)),this):this._model},b.data=function(e){var t=this;return arguments.length?u.isString(e)?i.call(t,e):(u.isObject(e)&&u.keys(e).forEach(function(n){var r=i.call(t,n);e[n](r)}),this):t._model.values()};var _=u.toMap(["width","height","padding"]);b.signal=function(e,t,n){var r,i,o=this._model;if(!arguments.length)return o.values(g.SIGNALS);if(1===arguments.length&&u.isString(e))return o.values(g.SIGNALS,e);u.isObject(e)?(i=e,n=t):(i={},i[e]=t);for(r in i)_[r]?this[r](i[r]):a.call(this,r,i[r]);return this._skipSignals=n,this},b.width=function(e){return arguments.length?(this.__width!==e&&(this._width=this.__width=e,this.model().width(e),this.initialize(),this._strict&&(this._autopad=1),a.call(this,"width",e)),this):this.__width},b.height=function(e){return arguments.length?(this.__height!==e&&(this._height=this.__height=e,this.model().height(e),this.initialize(),this._strict&&(this._autopad=1),a.call(this,"height",e)),this):this.__height},b.background=function(e){return arguments.length?(this._bgcolor!==e&&(this._bgcolor=e,this.initialize()),this):this._bgcolor},b.padding=function(e){return arguments.length?(this._padding!==e&&(u.isString(e)?(this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._strict="strict"===e):(this._autopad=0,this._padding=e,this._strict=!1),this._renderer&&this._renderer.resize(this._width,this._height,this._padding),this._handler&&this._handler.padding(this._padding),a.call(this,"padding",this._padding)),this._repaint=!0,this):this._padding},b.autopad=function(e){if(this._autopad<1)return this;this._autopad=0;var t=o.call(this),n=this._padding,r=this.model().config(),i=r.autopadInset,s=t.x1<0?Math.ceil(-t.x1)+i:0,l=t.y1<0?Math.ceil(-t.y1)+i:0,u=t.x2>this._width?Math.ceil(+t.x2-this._width)+i:0;return t=t.y2>this._height?Math.ceil(+t.y2-this._height)+i:0,n={left:s,top:l,right:u,bottom:t},this._strict?(this._autopad=0,this._padding=n,this._width=Math.max(0,this.__width-(s+u)),this._height=Math.max(0,this.__height-(l+t)),this._model.width(this._width).height(this._height).reset(),a.call(this,"width",this._width),a.call(this,"height",this._height),a.call(this,"padding",n),this.initialize().update({props:"enter"}).update({props:"update"})):this.padding(n).update(e),this},b.viewport=function(e){return arguments.length?(this._viewport!==e&&(this._viewport=e,this.initialize()),this):this._viewport},b.renderer=function(e){if(!arguments.length)return this._renderer;if(this._renderers[e])e=this._renderers[e];else{if(u.isString(e))throw new Error("Unknown renderer: "+e);if(!e)throw new Error("No renderer specified")}return this._io!==e&&(this._io=e,this._renderer=null,this.initialize(),this._build&&this.render()),this},b.initialize=function(e){var t,n=this,r=n._width,i=n._height,a=n._padding,o=n._bgcolor,s=this.model().config();return arguments.length&&null!==e||(e=this._el?this._el.parentNode:null)?(l.select(e).select("div.vega").remove(),this._el=e=l.select(e).append("div").attr("class","vega").style("position","relative").node(),n._viewport&&l.select(e).style("width",(n._viewport[0]||r)+"px").style("height",(n._viewport[1]||i)+"px").style("overflow","auto"),d.canvas.Renderer.RETINA=s.render.retina,n._renderer=(n._renderer||new this._io.Renderer(s.load)).initialize(e,r,i,a).background(o),t=n._handler,n._handler=(new this._io.Handler).initialize(e,a,n),t?t.handlers().forEach(function(e){n._handler.on(e.type,e.handler)}):n._detach=m(this),this._repaint=!0,this):this},b.destroy=function(){this._detach&&this._detach()},b.update=function(e){e=e||{};var t=this,n=this._model,r=this._streamer,i=this._changeset,a=e.duration?new y(e.duration,e.ease):null;if(a&&(i.trans=a),void 0!==e.props){if(u.keys(i.data).length>0)throw Error("New data values are not reflected in the visualization. Please call view.update() before updating a specified property set.");i.reflow=!0,i.request=e.props}var o=t._build;return t._build=t._build||s.call(this),e.items&&o?(v.update(n,e.trans,e.props,e.items,i.dirty),t._renderNode.evaluate(i)):r.listeners().length&&o?(this._repaint&&r.addListener(n.node()),n.propagate(i,r,null,this._skipSignals),r.disconnect()):n.fire(i),t._changeset=c.ChangeSet.create(),t.autopad(e)},b.toImageURL=function(e){var t,n=this;switch(e||"png"){case"canvas":case"png":t=d.canvas.Renderer;break;case"svg":t=d.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+e)}var r=d.canvas.Renderer.RETINA;d.canvas.Renderer.RETINA=!1;var i=new t(n._model.config.load).initialize(null,n._width,n._height,n._padding).background(n._bgcolor).render(n._model.scene());if(d.canvas.Renderer.RETINA=r,"svg"===e){var a=new Blob([i.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(a)}return i.canvas().toDataURL("image/png")},b.render=function(e){return this._renderer.render(this._model.scene(),e),this},b.on=function(){return this._handler.on.apply(this._handler,arguments),this},b.onSignal=function(e,t){var n=this._model.signal(e);return n?n.on(t):p.error('Signal "'+e+'" is not defined.'),this},b.off=function(){return this._handler.off.apply(this._handler,arguments),this},b.offSignal=function(e,t){var n=this._model.signal(e);return n?n.off(t):p.error('Signal "'+e+'" is not defined.'),this},r.factory=function(t){var n=e("./HeadlessView");return function(e){e=e||{};var i=t.defs(),a=(e.el?new r:new n).model(t).renderer(e.renderer||"canvas").width(i.width).height(i.height).background(i.background).padding(i.padding).viewport(i.viewport).initialize(e.el);return e.data&&a.data(e.data),e.el&&(e.hover!==!1&&a.on("mouseover",function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"hover",items:t})}).on("mouseout",function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"update",items:t})}),e.cursor!==!1&&a.onSignal("cursor",function(e,t){var n=l.select("body");u.isString(t)?(a._cursor="default"===t,n.style("cursor",t)):u.isObject(t)&&a._cursor&&n.style("cursor",t["default"])})),a}},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../parse/streams":108,"../scene/Encoder":112,"../scene/Transition":115,"./HeadlessView":89,datalib:27,"vega-dataflow":42,"vega-logging":49,"vega-scenegraph":50}],92:[function(e,t,n){(function(e){var n="undefined"!=typeof window?window.d3:"undefined"!=typeof e?e.d3:null,r={};r.load={baseURL:"",domainWhiteList:!1},r.autopadInset=5,r.scale={time:n.time.scale,utc:n.time.scale.utc},r.render={retina:!0},r.scene={fill:void 0,fillOpacity:void 0,stroke:void 0,strokeOpacity:void 0,strokeWidth:void 0,strokeDash:void 0,strokeDashOffset:void 0},r.axis={layer:"back",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1e4,titleOffsetAutoMargin:4},r.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"},r.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]},r.range={category10:n.scale.category10().range(),category20:n.scale.category20().range(),category20b:n.scale.category20b().range(),category20c:n.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],93:[function(e,t,n){function r(e,t,n){var r=e.schema;r&&(r.refs&&i.extend(n.refs,r.refs),r.defs&&i.extend(n.defs,r.defs))}var i=e("datalib"),a=e("../parse"),o=e("../scene/Scale"),s=e("./config");t.exports=function(e){var t=null;return e=e||{},e.url?t=i.json(i.extend({url:e.url},s.load)):(t={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"},i.keys(a).forEach(function(n){r(a[n],e,t)}),r(o,e,t)),e.properties&&i.keys(e.properties).forEach(function(n){t.defs.propset.properties[n]={$ref:"#/refs/"+e.properties[n]+"Value"}}),e.propertySets&&i.keys(e.propertySets).forEach(function(e){t.defs.mark.properties.properties.properties[e]={$ref:"#/defs/propset"}}),t}},{"../parse":98,"../scene/Scale":114,"./config":92,datalib:27}],94:[function(e,t,n){function r(e,t,n,r){var o=a(e);(t||[]).forEach(function(t,a){n[a]=n[a]||s(e,o[t.type]),i(o[t.type],t,a,n[a],r)})}function i(e,t,n,r,i){var a;void 0!==t.scale&&r.scale(a=i.scale(t.scale));var s=e.grid;o.isObject(s)&&(e.grid=void 0!==s[a.type]?s[a.type]:s["default"]),r.orient(l(t,e,"orient",u[t.type])),r.offset(l(t,e,"offset",0)),r.layer(l(t,e,"layer","front")),r.grid(l(t,e,"grid",!1)),r.title(t.title||null),r.titleOffset(l(t,e,"titleOffset")),r.tickValues(t.values||null),r.tickFormat(t.format||null),r.tickFormatType(t.formatType||null),r.tickSubdivide(t.subdivide||0),r.tickPadding(l(t,e,"tickPadding",e.padding));var c=l(t,e,"tickSize"),f=[c,c,c];f[0]=l(t,e,"tickSizeMajor",f[0]),f[1]=l(t,e,"tickSizeMinor",f[1]),f[2]=l(t,e,"tickSizeEnd",f[2]),f.length&&r.tickSize.apply(r,f),r.tickCount(l(t,e,"ticks"));var d=t.properties;d&&d.ticks?(r.majorTickProperties(d.majorTicks?o.extend({},d.ticks,d.majorTicks):d.ticks),r.minorTickProperties(d.minorTicks?o.extend({},d.ticks,d.minorTicks):d.ticks)):(r.majorTickProperties(d&&d.majorTicks||{}),r.minorTickProperties(d&&d.minorTicks||{})),r.tickLabelProperties(d&&d.labels||{}),r.titleProperties(d&&d.title||{}),r.gridLineProperties(d&&d.grid||{}),r.domainProperties(d&&d.axis||{})}function a(e){var t=e.config(),n=t.axis;return{x:o.extend(o.duplicate(n),t.axis_x),y:o.extend(o.duplicate(n),t.axis_y)}}var o=e("datalib"),s=e("../scene/axis"),l=e("../util/theme-val"),u={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};t.exports=r},{"../scene/axis":116,"../util/theme-val":150,datalib:27}],95:[function(e,t,n){(function(e){function n(e){return null==e?null:r.rgb(e)+""}var r="undefined"!=typeof window?window.d3:"undefined"!=typeof e?e.d3:null;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(e,t,n){function r(e,t,n){function o(e,t){a.error("PARSE DATA FAILED: "+t.name+" "+e),u=-1,n(e)}function s(t){return function(r,a){if(r)o(r,t);else if(u>0)try{e.data(t.name).values(i.read(a,t.format)),0===--u&&n()}catch(s){o(s,t)}}}var l=e.config(),u=0;return(t||[]).forEach(function(t){t.url&&(u+=1,i.load(i.extend({url:t.url},l.load),s(t)));try{r.datasource(e,t)}catch(n){o(n,t)}}),0===u&&setTimeout(n,1),t}var i=e("datalib"),a=e("vega-logging"),o=e("./transforms"),s=e("./modify");r.datasource=function(e,t){var n=(t.transform||[]).map(function(t){return o(e,t)}),r=(t.modify||[]).map(function(n){return s(e,n,t)}),a=e.data(t.name,r.concat(n));return t.values?a.values(i.read(t.values,t.format)):t.source&&(a.source(t.source).addListener(a),e.removeListener(a.pipeline()[0])),a},t.exports=r},{"./modify":102,"./transforms":109,datalib:27,"vega-logging":49}],97:[function(e,t,n){function r(e){return function(t){t=t.map(e);var n=t.length;if(n<1||n>2)throw Error("open takes exactly 1 or 2 arguments.");return"this.defs.open(this.model, "+t[0]+(n>1?","+t[1]:"")+")"}}function i(e,t,n){if("undefined"==typeof window||!window||!window.open)throw Error("Open function can only be invoked in a browser.");var r=p.extend({type:"open",url:t,name:n},e.config().load),i=p.load.sanitizeUrl(r);if(!i)throw Error("Invalid URL: "+r.url);window.open(i,n)}function a(e,t){return function(n){n=n.map(e);var r=n.length;if(r<2||r>3)throw Error("scale takes exactly 2 or 3 arguments.");return"this.defs.scale(this.model, "+t+", "+n[0]+","+n[1]+(r>2?","+n[2]:"")+")"}}function o(e,t,n,r,i){if(i&&i.scale||(i=i&&i.mark?i.mark.group:e.scene().items[0]),e.group(i._id)!==i)throw Error('Scope for scale "'+n+'" is not a valid group item.');var a=i.scale(n);return a?t?a.invert(r):a(r):r}function s(e,t,n,r){var i=t,a=n;return t>n&&(i=n,a=t),r?i<e&&a>e:i<=e&&a>=e}function l(e){return function(t,n,r,i){var a;if(3!==t.length)throw Error("indata takes 3 arguments.");if("Literal"!==t[0].type)throw Error("Data source name must be a literal for indata.");return a=t[0].value,i[a]=1,"Literal"===t[2].type&&l.model.requestIndex(a,t[2].value),t=t.map(e),"this.defs.indata(this.model,"+t[0]+","+t[1]+","+t[2]+")"}}function u(e,t,n,r){var i=e.data(t),a=i.getIndex(r);return a[n]>0}function c(e,t){return g.format(e,"number")(t)}function f(e,t){return g.format(e,"time")(t)}function d(e,t){return g.format(e,"utc")(t)}function h(e){return function(t){l.model=e;var n=y(t);return n.model=e,n.sig=e?e._signals:{},n}}var p=e("datalib"),g=p.template,m=e("vega-expression"),v=["datum","parent","event","signals"],y=m.compiler(v,{idWhiteList:v,fieldVar:v[0],globalVar:function(e){return"this.sig["+p.str(e)+"]._value"},functions:function(e){var t=m.functions(e);return t.eventItem="event.vg.getItem",t.eventGroup="event.vg.getGroup",t.eventX="event.vg.getX",t.eventY="event.vg.getY",t.open=r(e),t.scale=a(e,!1),t.iscale=a(e,!0),t.inrange="this.defs.inrange",t.indata=l(e),t.format="this.defs.format",t.timeFormat="this.defs.timeFormat",t.utcFormat="this.defs.utcFormat",t},functionDefs:function(){return{scale:o,inrange:s,indata:u,format:c,timeFormat:f,utcFormat:d,open:i}}});h.scale=o,h.codegen=y.codegen,t.exports=h},{datalib:27,"vega-expression":47}],98:[function(e,t,n){t.exports={axes:e("./axes"),background:e("./background"),data:e("./data"),events:e("vega-event-selector"),expr:e("./expr"),legends:e("./legends"),mark:e("./mark"),marks:e("./marks"),modify:e("./modify"),padding:e("./padding"),predicates:e("./predicates"),properties:e("./properties"),signals:e("./signals"),spec:e("./spec"),streams:e("./streams"),transforms:e("./transforms")}},{"./axes":94,"./background":95,"./data":96,"./expr":97,"./legends":99,"./mark":100,"./marks":101,"./modify":102,"./padding":103,"./predicates":104,"./properties":105,"./signals":106,"./spec":107,"./streams":108,"./transforms":109,"vega-event-selector":43}],99:[function(e,t,n){function r(e,t,n,r){(t||[]).forEach(function(t,o){n[o]=n[o]||a(e),i(t,o,n[o],r)})}function i(e,t,n,r){n.size(e.size?r.scale(e.size):null),n.shape(e.shape?r.scale(e.shape):null),n.fill(e.fill?r.scale(e.fill):null),n.stroke(e.stroke?r.scale(e.stroke):null),n.opacity(e.opacity?r.scale(e.opacity):null),e.orient&&n.orient(e.orient),null!=e.offset&&n.offset(e.offset),n.title(e.title||null),n.values(e.values||null),n.format(void 0!==e.format?e.format:null),n.formatType(e.formatType||null);var i=e.properties;n.titleProperties(i&&i.title||{}),n.labelProperties(i&&i.labels||{}),n.legendProperties(i&&i.legend||{}),n.symbolProperties(i&&i.symbols||{}),n.gradientProperties(i&&i.gradient||{})}var a=e("../scene/legend");t.exports=r},{"../scene/legend":117}],100:[function(e,t,n){function r(e,t,n){var o=t.properties||n&&(t.properties={}),s=o.enter||n&&(o.enter={}),l=t.marks,u=e.config().marks||{};if(n){"symbol"===t.type&&!s.size&&u.symbolSize&&(s.size={value:u.symbolSize});var c={arc:"fill",area:"fill",rect:"fill",symbol:"fill",text:"fill",line:"stroke",path:"stroke",rule:"stroke"},f=c[t.type];!s[f]&&u.color&&(s[f]={value:u.color})}return i.keys(o).forEach(function(n){o[n]=a(e,t.type,o[n])}),t.delay&&(t.delay=a(e,t.type,{delay:t.delay})),l&&(t.marks=l.map(function(t){return r(e,t,!0)})),t}var i=e("datalib"),a=e("./properties");t.exports=r},{"./properties":105,datalib:27}],101:[function(e,t,n){function r(e,t,n,r){return{type:"group",width:n,height:r,properties:i(t.scene||{},e),scales:t.scales||[],axes:t.axes||[],legends:t.legends||[],marks:(t.marks||[]).map(function(t){return a(e,t,!0)})}}function i(e,t){var n,r,i,a,l,u=t.config().scene,c={};for(n=0,r=i=s.length;n<r;++n)a=s[n],void 0!==(l=e[a])?c[a]=l.signal?l:{value:l}:u[a]?c[a]={value:u[a]}:--i;return i?{update:o(t,"group",c)}:{}}var a=e("./mark"),o=e("./properties"),s=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];t.exports=r},{"./mark":100,"./properties":105}],102:[function(e,t,n){function r(e,t,n,r){var i,a,o,s,l=!0,u=e.length;for(i=n.length-1;i>=0;--i){for(a=0;a<u;++a)if(o=e[a],s=t&&o(t)||t,o(n[i])!==s){l=!1;break}l&&r.push.apply(r,n.splice(i,1)),l=!0}}function i(e,t,n){var r=c.ingest(t);e.add.push(r),n._data.push(r)}function a(e,t,n){var a=t.signal?o.field(t.signal):null,l=a?a[0]:null,p=t.predicate?e.predicate(t.predicate.name||t.predicate):null,g=t.test?e.expr(t.test):null,m=null===p&&null===g,v=t.type===d.CLEAR,y=o.array(t.field||"data"),b=y.map(o.accessor),_=y.map(o.mutator),E=new u(e).router(v);return E.evaluate=function(u){var E,x;if(null!==p&&(E=e.values(f.DATA,p.data||h),x=e.values(f.SIGNALS,p.signals||h),m=p.call(p,{},E,x,e._predicates)),null!==g&&(x=e.values(f.SIGNALS,g.globals||h),m=g.fn()),s.debug(u,[t.type+"ing",m]),!m||!v&&!u.signals[l])return u;var S,T=a?e.signalRef(t.signal):null,w=e.data(n.name),A=null,C=[],k=[],O=0;return o.isObject(T)?(S=T,t.field||(y=o.keys(S),b=y.map(o.accessor),_=y.map(o.mutator))):(S={},_.forEach(function(e){e(S,T)})),t.type===d.INSERT?i(u,S,w):t.type===d.REMOVE?(r(b,T,u.mod,u.rem),r(b,T,u.add,k),r(b,T,w._data,k)):t.type===d.UPSERT?(u.mod.forEach(function(e){var t=b.every(function(t){return t(e)===t(S)});t&&(o.extend(e,S),O+=1)}),0===O&&i(u,S,w)):t.type===d.TOGGLE?(r(b,T,u.mod,k),u.rem.push.apply(u.rem,k),r(b,T,u.add,C),C.length||k.length?w._data=w._data.filter(function(e){return k.indexOf(e)<0&&C.indexOf(e)<0}):(u.add.push(A=c.ingest(S)),w._data.push(A))):t.type===d.CLEAR&&(u.rem.push.apply(u.rem,u.mod.splice(0)),u.add.splice(0),w._data.splice(0)),y.forEach(function(e){u.fields[e]=1}),u},l&&E.dependency(f.SIGNALS,l),p&&(E.dependency(f.DATA,p.data),E.dependency(f.SIGNALS,p.signals)),g&&(E.dependency(f.SIGNALS,g.globals),E.dependency(f.DATA,g.dataSources)),E}var o=e("datalib"),s=e("vega-logging"),l=e("vega-dataflow"),u=l.Node,c=l.Tuple,f=l.Dependencies,d={INSERT:"insert",REMOVE:"remove",UPSERT:"upsert",TOGGLE:"toggle",CLEAR:"clear"},h=[];t.exports=a},{datalib:27,"vega-dataflow":42,"vega-logging":49}],103:[function(e,t,n){function r(e){return null==e?"auto":i.isObject(e)?e:i.isNumber(e)?{top:e,left:e,right:e,bottom:e}:"strict"===e?e:"auto"}var i=e("datalib");t.exports=r},{datalib:27}],104:[function(e,t,n){function r(e,t){return(t||[]).forEach(function(t){var n=f[t.type](e,t),r=Function("args","db","signals","predicates",n.code);r.root=function(){return e.scene().items[0]},r.nullScale=d,r.isFunction=c.isFunction,r.signals=n.signals,r.data=n.data,e.predicate(t.name,r)}),t}function i(e,t){var n=c.field(e),r="signals["+n.map(c.str).join("][")+"]";return t[n[0]]=1,r}function a(e,t){function n(e){s[e]=1}function r(e){l[e]=1}var a=[],o=[],s={},l={};return c.array(t).forEach(function(t,l){var u="o"+l,f="";if(void 0!==t.value)f=c.str(t.value);else if(t.arg)f="args["+c.str(t.arg)+"]";else if(t.signal)f=i(t.signal,s);else if(t.predicate){var d=t.predicate,h=d&&(d.name||d),p=e.predicate(h),g="predicates["+c.str(h)+"]";p.signals.forEach(n),p.data.forEach(r),c.isObject(d)&&c.keys(d).forEach(function(e){if("name"!==e){var t=d[e];f+="args["+c.str(e)+"] = ",t.signal?f+=i(t.signal,s):t.arg&&(f+="args["+c.str(t.arg)+"]"),f+=", "}}),f+=g+".call("+g+", args, db, signals, predicates)"}a.push(u),o.push(u+"=("+f+")")}),{code:"var "+a.join(", ")+";\n"+o.join(";\n")+";\n",signals:c.keys(s),data:c.keys(l)}}function o(e,t){var n=a(e,t.operands);return"="===t.type&&(t.type="=="),n.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\no1 = o1 instanceof Date ? o1.getTime() : o1;\n",{code:n.code+"return "+["o0","o1"].join(t.type)+";",signals:n.signals,data:n.data}}function s(e,t){for(var n=a(e,t.operands),r=[],i=0,o=t.operands.length;r.push("o"+i++)<o;);return"and"===t.type?t.type="&&":"or"===t.type&&(t.type="||"),{code:n.code+"return "+r.join(t.type)+";",
signals:n.signals,data:n.data}}function l(e,t){var n=[t.item],r="";t.range&&n.push.apply(n,t.range),t.scale&&(r=u(t.scale,n));var i=a(e,n);if(r=i.code+r+"\n  var ordSet = null;\n",t.data){var o=c.field(t.field).map(c.str);r+="var where = function(d) { return d["+o.join("][")+"] == o0 };\n",r+="return db["+c.str(t.data)+"].filter(where).length > 0;"}else t.range&&(t.scale&&(r+="if (scale.length == 2) {\n  ordSet = scale(o1, o2);\n} else {\n  o1 = scale(o1);\no2 = scale(o2);\n}"),r+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;");return{code:r,signals:i.signals,data:i.data.concat(t.data?[t.data]:[])}}function u(e,t){var n="var scale = ",r=t.length;return c.isString(e)?(t.push({value:e}),n+="this.root().scale(o"+r+")"):e.arg?(t.push(e),n+="o"+r):e.name&&(t.push(c.isString(e.name)?{value:e.name}:e.name),n+="(this.isFunction(o"+r+") ? o"+r+" : ",e.scope?(t.push(e.scope),n+="((o"+(r+1)+".scale || this.root().scale)(o"+r+") || this.nullScale)"):n+="this.root().scale(o"+r+")",n+=")"),e.invert===!0&&(n+=".invert"),n+";\n"}var c=e("datalib"),f={"=":o,"==":o,"!=":o,">":o,">=":o,"<":o,"<=":o,and:s,"&&":s,or:s,"||":s,"in":l},d=function(){return 0};d.invert=d,t.exports=r},{datalib:27}],105:[function(e,t,n){(function(n){function r(e,t,n){function r(e){if(null!=v[e]){var t,n,r=h.array(v[e]);for(t=0,n=r.length;t<n;++t)S[e][r[t]]=1}}function i(e){var t=(e.parent?"parent_":"group_")+e.level;S._nRefs[t]=e}var u,c,f,v,y=e.config(),b="",_=h.keys(n),E=[],x={},S={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:!1};for(b+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\ntmpl.datum  = item.datum;\ntmpl.group  = group;\ntmpl.parent = group.datum;\n",o(e,y,n),u=0,c=_.length;u<c;++u)v=n[f=_[u]],b+=u>0?"\n  ":"  ",v.rule?(v=s(e,f,v.rule,E),b+="\n  "+v.code):h.isArray(v)?(v=s(e,f,v,E),b+="\n  "+v.code):(v=l(y,f,v),b+="d += set(o, "+h.str(f)+", "+v.val+");"),x[f]=!0,m.forEach(r),S.reflow=S.reflow||v.reflow,v.nested.length&&v.nested.forEach(i);h.keys(S._nRefs).forEach(function(e){S.nested.push(S._nRefs[e])}),S.nested.sort(function(e,t){return e=e.level,t=t.level,e<t?-1:e>t?1:e>=t?0:NaN}),x.x2&&(x.x?(b+="\n  if (o.x > o.x2) { \n    t = o.x;\n    d += set(o, 'x', o.x2);\n    d += set(o, 'x2', t); \n  };",b+="\n  d += set(o, 'width', (o.x2 - o.x));"):b+=x.width?"\n  d += set(o, 'x', (o.x2 - o.width));":"\n  d += set(o, 'x', o.x2);"),x.xc&&(b+=x.width?"\n  d += set(o, 'x', (o.xc - o.width/2));":"\n  d += set(o, 'x', o.xc);"),x.y2&&(x.y?(b+="\n  if (o.y > o.y2) { \n    t = o.y;\n    d += set(o, 'y', o.y2);\n    d += set(o, 'y2', t);\n  };",b+="\n  d += set(o, 'height', (o.y2 - o.y));"):b+=x.height?"\n  d += set(o, 'y', (o.y2 - o.height));":"\n  d += set(o, 'y', o.y2);"),x.yc&&(b+=x.height?"\n  d += set(o, 'y', (o.yc - o.height/2));":"\n  d += set(o, 'y', o.yc);"),a(t,x)&&(b+="\n  d += (item.touch(), 1);"),b+="\n  if (trans) trans.interpolate(item, o);",b+="\n  return d > 0;";try{var T=Function("item","group","trans","db","signals","predicates",b);return T.tpl=g,T.exprs=E,T.util=h,T.d3=d,h.extend(T,h.template.context),{encode:T,signals:h.keys(S.signals),scales:h.keys(S.scales),data:h.keys(S.data),fields:h.keys(S.fields),nested:S.nested,reflow:S.reflow}}catch(w){p.error(w),p.log(b)}}function i(e,t){return h.isObject(e)||(e={reflow:!1,nested:[]},m.forEach(function(t){e[t]=[]})),h.isObject(t)&&(e.reflow=e.reflow||t.reflow,e.nested.push.apply(e.nested,t.nested),m.forEach(function(n){e[n].push.apply(e[n],t[n])})),e}function a(e,t){return t.path||("area"===e||"line"===e)&&(t.x||t.x2||t.width||t.y||t.y2||t.height||t.tension||t.interpolate)}function o(e,t,n){var r,i,a=n.shape,o=0;if(a&&(r=a.value)){for(t.shape&&t.shape[r]&&(r=t.shape[r]),a="";null!==(i=v.exec(r));)a+=r.substring(o,i.index),a+=e.expr(i[1]).fn(),o=v.lastIndex;n.shape.value=a+r.substring(o)}}function s(e,t,n,r){var a=e.config(),o=i(),s=[],u="";return(n||[]).forEach(function(c,f){var d=l(a,t,c);if(i(o,d),c.test){var p=e.expr(c.test);o.signals.push.apply(o.signals,p.globals),o.data.push.apply(o.data,p.dataSources),u+="if (exprs["+r.length+"](item.datum, item.mark.group.datum, null)) {\n    d += set(o, "+h.str(t)+", "+d.val+");",u+=n[f+1]?"\n  } else ":"  }",r.push(p.fn)}else{var g=c.predicate,m=g&&(g.name||g),v=e.predicate(m),y="predicates["+h.str(m)+"]",b=[],_=t+"_arg"+f;h.isObject(g)&&h.keys(g).forEach(function(e){if("name"!==e){var t=l(a,f,g[e],!0);b.push(h.str(e)+": "+t.val),i(o,t)}}),m?(o.signals.push.apply(o.signals,v.signals),o.data.push.apply(o.data,v.data),s.push(_+" = {\n    "+b.join(",\n    ")+"\n  }"),u+="if ("+y+".call("+y+","+_+", db, signals, predicates)) {\n    d += set(o, "+h.str(t)+", "+d.val+");",u+=n[f+1]?"\n  } else ":"  }"):u+="{\n    d += set(o, "+h.str(t)+", "+d.val+");\n  }\n"}}),s.length&&(u="var "+s.join(",\n      ")+";\n  "+u),o.code=u,o}function l(e,t,n,r){if(null==n)return null;if("fill"===t||"stroke"===t){if(n.c)return u(e,"hcl",n.h,n.c,n.l);if(n.h||n.s)return u(e,"hsl",n.h,n.s,n.l);if(n.l||n.a)return u(e,"lab",n.l,n.a,n.b);if(n.r||n.g||n.b)return u(e,"rgb",n.r,n.g,n.b)}var a=null,o=null,s=i(),l=null,d=null,p=null,g={};return void 0!==n.template&&(a=h.template.source(n.template,"tmpl",g),h.keys(g).forEach(function(e){var t=h.field(e),n=t.shift();"parent"===n||"group"===n?s.nested.push({parent:"parent"===n,group:"group"===n,level:1}):"datum"===n?s.fields.push(t[0]):s.signals.push(n)})),void 0!==n.value&&(a=h.str(n.value)),void 0!==n.signal&&(l=h.field(n.signal),a="signals["+l.map(h.str).join("][")+"]",s.signals.push(l.shift())),void 0!==n.field&&(n.field=h.isString(n.field)?{datum:n.field}:n.field,d=c(n.field),a=d.val,i(s,d)),void 0!==n.scale&&(p=f(n.scale),o=p.val,i(s,p),s.scales.push(n.scale.name||n.scale),null!==a||n.band||n.mult||n.offset||!r?a=o+(n.band?".rangeBand()":"("+(null!==a?a:"item.datum.data")+")"):r&&(a=o)),a="("+(n.mult?h.number(n.mult)+" * ":"")+a+")"+(n.offset?" + "+h.number(n.offset):""),s.val=a,s}function u(e,t,n,r,a){var o=n?l(e,"",n):e.color[t][0],s=r?l(e,"",r):e.color[t][1],u=a?l(e,"",a):e.color[t][2],c=i();[o,s,u].forEach(function(e){h.isArray||i(c,e)});var f="(this.d3."+t+"("+[o.val,s.val,u.val].join(",")+') + "")';return c.val=f,c}function c(e){if(h.isString(e))return{val:h.field(e).map(h.str).join("][")};var t=e.level||1,n=(e.group||e.parent)&&t,r=n?Array(t).join("group.mark."):"",a=c(e.datum||e.group||e.parent||e.signal),o=a.val,s=i(null,a);return e.datum?(o="item.datum["+o+"]",s.fields.push(e.datum)):e.group?(o=r+"group["+o+"]",s.nested.push({level:t,group:!0})):e.parent?(o=r+"group.datum["+o+"]",s.nested.push({level:t,parent:!0})):e.signal&&(o="signals["+o+"]",s.signals.push(h.field(e.signal)[0]),s.reflow=!0),s.val=o,s}function f(e){var t=null,n=null,r=i();return t=h.isString(e)?h.str(e):e.name?h.isString(e.name)?h.str(e.name):(n=c(e.name)).val:(n=c(e)).val,t="(item.mark._scaleRefs["+t+"] = 1, group.scale("+t+"))",e.invert&&(t+=".invert"),n&&n.nested.forEach(function(e){e.scale=!0}),n?(n.val=t,n):(r.val=t,r)}var d="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,h=e("datalib"),p=e("vega-logging"),g=e("vega-dataflow").Tuple,m=["signals","scales","data","fields"],v=/{{(.*?)}}/g;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{datalib:27,"vega-dataflow":42,"vega-logging":49}],106:[function(e,t,n){function r(e,t){return(t||[]).forEach(function(t){if(l.indexOf(t.name)!==-1)throw Error('Signal name "'+t.name+'" is a reserved keyword ('+l.join(", ")+").");var n=e.signal(t.name,t.init).verbose(t.verbose);t.init&&t.init.expr&&(t.init.expr=e.expr(t.init.expr),n.value(i(e,t.init))),t.expr&&(t.expr=e.expr(t.expr),n.evaluate=function(r){var a=i(e,t),o=r.signals;return(a!==n.value()||n.verbose())&&(n.value(a),o[t.name]=1),o[t.name]?r:e.doNotPropagate},n.dependency(s,t.expr.globals),t.expr.globals.forEach(function(t){e.signal(t).addListener(n)}))}),t}function i(e,t){var n=t.expr,i=n.fn();return t.scale?r.scale(e,t,i):i}var a=e("datalib"),o=e("./expr"),s=e("vega-dataflow").Dependencies.SIGNALS,l=["datum","event","signals","width","height","padding"].concat(a.keys(o.codegen.functions));r.scale=function(e,t,n,r,i){var s,l=t.scale,u=l.name||l.signal||l,c=l.scope;return c&&(c.signal?c=e.signalRef(c.signal):a.isString(c)&&(s=l._expr=l._expr||e.expr(c),c=s.fn(r,i))),o.scale(e,l.invert,u,n,c)},t.exports=r},{"./expr":97,datalib:27,"vega-dataflow":42}],107:[function(e,t,n){function r(t){function n(t){try{t=i.duplicate(t);var n=e("./"),a=o(t,c,"width",500),s=o(t,c,"height",500),l=n.padding(o(t,c,"padding")),f=o(t,c,"background");p.signal("width",a),p.signal("height",s),p.signal("padding",l),r(t),p.defs({width:a,height:s,padding:l,viewport:t.viewport||null,background:n.background(f),signals:n.signals(p,t.signals),predicates:n.predicates(p,t.predicates),marks:n.marks(p,t,a,s),data:n.data(p,t.data,u)})}catch(d){u(d)}}function r(e){var t,n=e.signals||(e.signals=[]);n.some(function(e){return"cursor"===e.name&&(t=e,!0)}),t||n.push(t={name:"cursor",streams:[]}),t.init=t.init||{},t.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}function u(e){var t;e?a.error(e):t=g(p.buildIndexes()),h&&(h.length>1?h(e,t):e||h(t),h=null)}var c,f=arguments.length,d=2,h=arguments[f-1],p=new s,g=l.factory;if(f>d&&i.isFunction(arguments[f-d])&&(g=arguments[f-d],++d),f>d&&i.isObject(arguments[f-d])&&p.config(arguments[f-d]),c=p.config(),i.isObject(t))n(t);else if(i.isString(t)){var m=i.extend({url:t},c.load);i.json(m,function(e,t){e?u("SPECIFICATION LOAD FAILED: "+e):n(t)})}else u("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}var i=e("datalib"),a=e("vega-logging"),o=e("../util/theme-val"),s=e("../core/Model"),l=e("../core/View");t.exports=r},{"../core/Model":90,"../core/View":91,"../util/theme-val":150,"./":98,datalib:27,"vega-logging":49}],108:[function(e,t,n){(function(n){function r(e){function t(t,n){var r,a,o,s=i.mouse((i.event=t,e.renderer().scene())),l=e.padding(),u={};if(n)for(r=n.mark,a="group"===r.marktype?n:r.group,o=n;null!=o;o=o.mark.group)o.mark.def.name&&(u[o.mark.def.name]=o);u.root=e.model().scene().items[0],t.vg=Object.create(f),t.vg.group=a,t.vg.item=n||{},t.vg.name=u,t.vg.x=s[0]-l.left,t.vg.y=s[1]-l.top}function n(e,t,n,r,i){function a(e){return!e.fn(n,r,i)}var s,u,c,f,d=e.handlers[t],h=e.nodes[t],p=o.ChangeSet.create(null,!0),m=!1;for(u=0,c=d.length;u<c;++u)f=d[u],m=f.filters.some(a),m||(s=f.exp.fn(n,r,i),f.spec.scale&&(s=l.scale(g,f.spec,s,n,i)),(s!==f.signal.value()||f.signal.verbose())&&(f.signal.value(s),p.signals[f.signal.name()]=1));g.propagate(p,h)}function r(e,t,n,i){t.forEach(function(t){t.event?d(e,t,n,i):t.signal?h(e,t,n,i):t.start?p(e,t,n,i):t.stream&&(t.filters&&t.stream.forEach(function(e){e.filters=a.array(e.filters).concat(t.filters)}),r(e,t.stream,n,i))})}function d(e,t,n,r){var i=t.event,s=t.name,l=t.mark,u=t.target,c=a.array(t.filters),f=u?E:_,d=u?u+":"+i:i,h=f.nodes[d]||(f.nodes[d]=new o.Node(g)),p=f.handlers[d]||(f.handlers[d]=[]);s?c.push('!!event.vg.name["'+s+'"]'):l&&c.push("event.vg.item.mark && event.vg.item.mark.marktype==="+a.str(l)),p.push({signal:e,exp:n,spec:r,filters:c.map(function(e){return g.expr(e)})}),h.addListener(e)}function h(e,t,n,r){var i=e.name(),a=g.signal(i+c,null);a.evaluate=function(a){if(!a.signals[t.signal])return g.doNotPropagate;var o=n.fn();return r.scale&&(o=l.scale(g,r,o)),(o!==e.value()||e.verbose())&&(e.value(o),a.signals[i]=1,a.reflow=!0),a},a.dependency(o.Dependencies.SIGNALS,t.signal),a.addListener(e),g.signal(t.signal).addListener(a)}function p(e,t,n,i){var a=e.name(),o=a+u,s=t.middle,l=s.filters||(s.filters=[]),c=g.signal(o)||g.signal(o,!1);r(c,[t.start],m,{}),r(c,[t.end],v,{}),l.push(c.name()),r(e,[t.middle],n,i)}var g=e.model(),m=g.expr("true"),v=g.expr("false"),y=g.defs().signals,b={handlers:{},nodes:{}},_=a.duplicate(b),E=a.duplicate(b);return a.array(y).forEach(function(e){var t=g.signal(e.name);e.expr||a.array(e.streams).forEach(function(e){var n=s.parse(e.type),i=g.expr(e.expr);r(t,n,i,e)})}),a.keys(_.handlers).forEach(function(r){e.on(r,function(e,i){e.preventDefault(),t(e,i),n(_,r,i&&i.datum||{},i&&i.mark&&i.mark.group&&i.mark.group.datum||{},e)})}),a.keys(E.handlers).forEach(function(e){function r(r){t(r),n(E,e,i.select(this).datum(),this.parentNode&&i.select(this.parentNode).datum(),r)}if("undefined"!=typeof window){for(var a=E.handlers[e],o=e.split(":"),s="window"===o[0]?[window]:window.document.querySelectorAll(o[0]),l=0;l<s.length;++l)s[l].addEventListener(o[1],r);a.elements=s,a.listener=r}}),E.detach=function(){a.keys(E.handlers).forEach(function(e){for(var t=E.handlers[e],n=e.split(":"),r=a.array(t.elements),i=0;i<r.length;++i)r[i].removeEventListener(n[1],t.listener)})},E.detach}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow"),s=e("vega-event-selector"),l=e("./signals"),u="_vgGATEKEEPER",c="_vgEVALUATOR",f={getItem:function(){return this.item},getGroup:function(e){var t=e?this.name[e]:this.group,n=t&&t.mark,r=n&&(n.interactive||void 0===n.interactive);return r?t:{}},getXY:function(e){var t={x:this.x,y:this.y};for("string"==typeof e&&(e=this.name[e]);e;e=e.mark&&e.mark.group)t.x-=e.x||0,t.y-=e.y||0;return t},getX:function(e){return this.getXY(e).x},getY:function(e){return this.getXY(e).y}};t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./signals":106,datalib:27,"vega-dataflow":42,"vega-event-selector":43}],109:[function(e,t,n){function r(e,t){var n,r=a[t.type];if(!r)throw new Error('"'+t.type+'" is not a valid transformation');return n=new r(e),t.output&&n.output(t.output),i.keys(t).forEach(function(e){"type"!==e&&"output"!==e&&n.param(e,t[e])}),n}var i=e("datalib"),a=e("../transforms/index");t.exports=r},{"../transforms/index":146,datalib:27}],110:[function(e,t,n){function r(e,t){return this._mark=t,s.prototype.init.call(this,e).router(!0).reflows(!0).mutates(!0)}var i=e("datalib"),a=e("vega-dataflow"),o=e("vega-scenegraph"),s=a.Node,l=e("vega-logging"),u=o.bound,c=o.Bounds,f=e("./Encoder"),d=r.prototype=new s;d.evaluate=function(e){l.debug(e,["bounds",this._mark.marktype]);var t,n,r,o,s,d,h=this._mark,p=h.marktype,g="group"===p,m=h.items,v=i.array(h.def.legends).length>0,y=h.bounds,b=!y||e.rem.length;if("line"===p||"area"===p)u.mark(h,null,g&&!v);else if(e.add.forEach(function(e){u.item(e),b=b||y&&!y.encloses(e.bounds)}),e.mod.forEach(function(e){b=b||y&&y.alignsWith(e.bounds),u.item(e)}),b)for(y=h.bounds&&h.bounds.clear()||(h.bounds=new c),t=0,n=m.length;t<n;++t)y.union(m[t].bounds);if(g&&v){for(t=0,n=m.length;t<n;++t)for(s=m[t],s._legendPositions=null,r=0,o=s.legendItems.length;r<o;++r)d=s.legendItems[r],f.update(this._graph,e.trans,"legendPosition",d.items,e.dirty),u.mark(d,null,!1);u.mark(h,null,!0)}return a.ChangeSet.create(e,!0)},t.exports=r},{"./Encoder":112,datalib:27,"vega-dataflow":42,"vega-logging":49,"vega-scenegraph":50}],111:[function(e,t,n){function r(){return arguments.length?this.init.apply(this,arguments):this}function i(){var e,t,n,r,i,a,o,s=this._def.from,l=s.mark;if(l)r=this.sibling(l),e=r._isSuper?r:r._bounder,t=["vg",this._parent_id,l,e.listeners(!0).length].join("_"),n={name:t,transform:s.transform,modify:s.modify};else{if(e=this._graph.data(this._from),!e)throw Error('Data source "'+this._from+'" is not defined.');t=["vg",this._from,this._def.type,e.listeners(!0).length].join("_"),n={name:t,source:this._from,transform:s.transform,modify:s.modify}}this._from=t,this._ds=b.datasource(this._graph,n),l?(o=new d(this._graph).addListener(this._ds.listener()),o.evaluate=function(e){var t=g.create(e),n=r._output;return t.add=n.add,t.mod=n.mod,t.rem=n.rem,t},e.addListener(o)):(i=this._ds.source().last(),a=g.create(i),a.add=i.add,a.mod=i.mod,a.rem=i.rem,a.stamp=null,this._graph.propagate(a,this._ds.listener(),i.stamp))}function a(){var e=p.ingest(new c(this._mark));return this._def.width&&p.set(e,"width",this._def.width),this._def.height&&p.set(e,"height",this._def.height),e}function o(e,t,n,r,i){var o,l,u,c,f,d,h,g=s(this._def.key||(r?"_id":null)),m=this._mark.items||[],v=r?e.rem:m,y=p.idMap(!r||i?n:e.mod),b=[];for(o=0,u=v.length;o<u;++o)c=v[o]===m[o]?m[o]:g?this._map[g(v[o])]:v[o],c.status=_.EXIT;for(o=0,u=n.length;o<u;++o)f=n[o],c=g?this._map[l=g(f)]:m[o],d=!c&&(c=a.call(this),!0),c.status=d?_.ENTER:_.UPDATE,h=!d&&c.datum!==f,c.datum=f,g&&(p.set(c,"key",l),this._map[l]=c),d?t.add.push(c):(h||y[f._id])&&t.mod.push(c),b.push(c);for(o=0,u=v.length;o<u;++o)c=v[o]===m[o]?m[o]:g?this._map[l=g(v[o])]:v[o],c.status===_.EXIT&&(c._dirty=!0,e.dirty.push(c),b.push(c),t.rem.push(c),g&&(this._map[l]=null));return this._mark.items=b,t}function s(e){if(null==e)return null;var t=l.array(e).map(l.accessor);return function(e){for(var n="",r=0,i=t.length;r<i;++r)r>0&&(n+="|"),n+=String(t[r](e));return n}}var l=e("datalib"),u=e("vega-logging"),c=e("vega-scenegraph").Item,f=e("vega-dataflow"),d=f.Node,h=f.Dependencies,p=f.Tuple,g=f.ChangeSet,m={},v=e("./Encoder"),y=e("./Bounder"),b=e("../parse/data"),_=r.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"},E=1,x=2,S=r.prototype=new d;S.init=function(e,t,n,r,a,o){return d.prototype.init.call(this,e).router(!0).collector(!0),this._def=t,this._mark=n,this._from=(t.from?t.from.data:null)||o,this._ds=l.isString(this._from)?e.data(this._from):null,this._map={},this._status=null,n.def=t,n.marktype=t.type,n.interactive=t.interactive!==!1,n.items=[],l.isValid(t.name)&&(n.name=t.name),this._parent=r,this._parent_id=a,t.from&&(t.from.mark||t.from.transform||t.from.modify)&&i.call(this),this._isSuper="group"!==this._def.type,this._encoder=new v(this._graph,this._mark,this),this._bounder=new y(this._graph,this._mark),this._output=null,this._ds&&this._encoder.dependency(h.DATA,this._from),this.dependency(h.DATA,this._encoder.dependency(h.DATA)),this.dependency(h.SCALES,this._encoder.dependency(h.SCALES)),this.dependency(h.SIGNALS,this._encoder.dependency(h.SIGNALS)),this},S.ds=function(){return this._ds},S.parent=function(){return this._parent},S.encoder=function(){return this._encoder},S.pipeline=function(){return[this]},S.connect=function(){var e=this;return this._graph.connect(this.pipeline()),this._encoder._scales.forEach(function(t){(t=e._parent.scale(t))&&t.addListener(e)}),this._parent&&(this._isSuper?this.addListener(this._parent._collector):this._bounder.addListener(this._parent._collector)),this._status=E,this},S.disconnect=function(){function e(e){for(var n,r=0,i=e.length;r<i;++r)(n=t._parent.scale(e[r]))&&n.removeListener(t)}var t=this;return this._listeners.length?(d.prototype.disconnect.call(this),this._graph.disconnect(this.pipeline()),e(this._encoder._scales),e(l.keys(this._mark._scaleRefs)),this._status=x,this):this},S.sibling=function(e){return this._parent.child(e,this._parent_id)},S.evaluate=function(e){u.debug(e,["building",this._from||this._def.from,this._def.type]);var t,n,r,i,a=this,s=this._mark.def,c=s.properties||{},f=c.update||{},d=g.create(e);if(this._ds){if(r=d.data[i=this._ds.name()],d.data[i]=null,t=this._encoder.reevaluate(d),d.data[i]=r,n=this._ds.last(),!n)throw Error("Builder evaluated before backing DataSource.");n.stamp>this._stamp?o.call(this,n,d,this._ds.values(),!0,t):t&&(d.mod=this._mark.items.slice())}else r=l.isFunction(this._def.from)?this._def.from():[m],o.call(this,e,d,r);return this._output=d=this._graph.evaluate(d,this._encoder),f.nested&&f.nested.length&&this._status===E&&l.keys(this._mark._scaleRefs).forEach(function(e){var t=a._parent.scale(e);t&&(t.addListener(a),a.dependency(h.SCALES,e),a._encoder.dependency(h.SCALES,e))}),this._isSuper&&(d.mod=d.mod.filter(function(e){return e._dirty}),d=this._graph.evaluate(d,this._bounder)),d},t.exports=r},{"../parse/data":96,"./Bounder":110,"./Encoder":112,datalib:27,"vega-dataflow":42,"vega-logging":49,"vega-scenegraph":50}],112:[function(e,t,n){function r(e,t,n){var r=t.def.properties||{},i=r.enter,a=r.update,o=r.exit;c.prototype.init.call(this,e),this._mark=t,this._builder=n;var s=this._scales=[];return i&&s.push.apply(s,i.scales),a&&(this.dependency(f.DATA,a.data),this.dependency(f.SIGNALS,a.signals),this.dependency(f.FIELDS,a.fields),this.dependency(f.SCALES,a.scales),s.push.apply(s,a.scales)),o&&s.push.apply(s,o.scales),this.mutates(!0)}function i(e,t,n,r){var i,a,o,s=n.add.length;return(i=r.enter)&&(a=i[e]).length&&s&&(o=t.values(e,a,o=o||{})),(i=r.exit)&&(a=i[e]).length&&n.rem.length&&(o=t.values(e,a,o=o||{})),(i=r.update)&&(a=i[e]).length&&(s||n.mod.length)&&(o=t.values(e,a,o=o||{})),o||h}function a(e,t,n,r,i,a,o){var s=e.encode,l=t._dirty,u=s.call(s,t,t.mark.group||t,n,r,i,a);t._dirty=u||l,u&&!l&&o.push(t)}function o(){for(var e,t,n,r=this._mark.def.properties.update.nested,i=this._builder,a=0,o=0,s=r.length;o<s;++o)if(e=r[o],!e.scale){for(;a<e.level;++a)i=i.parent(),t=i.ds();if(n=(e.group?i.encoder():t.last())._stamp,n>this._stamp)return!0}return!1}var s=e("datalib"),l=e("vega-logging"),u=e("vega-dataflow"),c=u.Node,f=u.Dependencies,d=e("vega-scenegraph").bound,h={},p=r.prototype=new c;p.evaluate=function(t){l.debug(t,["encoding",this._mark.def.type]);var n,r,o,s,u=this._graph,c=this._mark.def.properties||{},d=this._mark.items,p=c.enter,g=c.update,m=c.exit,v=t.dirty,y=u.predicates(),b=t.request,_=this._mark.group,E=_&&(_.mark.axis||_.mark.legend),x=h,S=h;if(b&&!E){if((s=c[b])&&t.mod.length)for(x=s.data?u.values(f.DATA,s.data):null,S=s.signals?u.values(f.SIGNALS,s.signals):null,n=0,r=t.mod.length;n<r;++n)o=t.mod[n],a.call(this,s,o,t.trans,x,S,y,v);return t}for(x=i(f.DATA,u,t,c),S=i(f.SIGNALS,u,t,c),n=0,r=t.rem.length;n<r;++n)o=t.rem[n],m&&a.call(this,m,o,t.trans,x,S,y,v),t.trans&&!m?t.trans.interpolate(o,h):t.trans||d.pop();var T=e("./Builder").STATUS.UPDATE;for(n=0,r=t.add.length;n<r;++n)o=t.add[n],p&&a.call(this,p,o,t.trans,x,S,y,v),g&&a.call(this,g,o,t.trans,x,S,y,v),o.status=T;if(g)for(n=0,r=t.mod.length;n<r;++n)o=t.mod[n],a.call(this,g,o,t.trans,x,S,y,v);return t},p.reevaluate=function(e){var t=this._mark.def,n=t.properties||{},r=s.isFunction(t.from)||t.orient||e.request||c.prototype.reevaluate.call(this,e);return r||!!n.update&&o.call(this)},r.update=function(e,t,n,r,i){r=s.array(r);var o,l,u,c,h,p=e.predicates(),g=e.values(f.DATA),m=e.values(f.SIGNALS);for(o=0,l=r.length;o<l;++o)u=r[o],c=u.mark.def.properties,h=c&&c[n],h&&(a.call(null,h,u,t,g,m,p,i),d.item(u))},t.exports=r},{"./Builder":111,datalib:27,"vega-dataflow":42,"vega-logging":49,"vega-scenegraph":50}],113:[function(e,t,n){function r(){return this._children={},this._scaler=null,this._recursor=null,this._scales={},this.scale=a.bind(this),arguments.length?this.init.apply(this,arguments):this}function i(e){function t(e){e.type!=E.MARK||e.inline||void 0===m._graph.data(e.from)||m._recursor.removeListener(e.builder)}function n(t){var n=t.scale();e.scales[n.scaleName]&&t.reset().def()}function r(t){var n=t.size()||t.shape()||t.fill()||t.stroke()||t.opacity();e.scales[n.scaleName]&&t.reset().def()}function i(e){m._recursor.removeListener(e.builder),e.builder.disconnect()}var a,o,f,d,h,p,g,m=this,v=c.array(this._def.marks).length>0,y=c.array(this._def.axes).length>0,b=c.array(this._def.legends).length>0,_=!1;for(a=0,d=e.add.length;a<d;++a)h=e.add[a],v&&s.call(this,e,h),y&&l.call(this,e,h),b&&u.call(this,e,h);for(a=e.add.length-1;a>=0;--a)for(h=e.add[a],o=this._children[h._id].length-1;o>=0;--o)f=this._children[h._id][o],f.builder.connect(),p=f.builder.pipeline(),g=f.builder._def,_=g.type!==E.GROUP,_=_&&void 0!==this._graph.data(f.from),_=_&&1===p[p.length-1].listeners().length,_=_&&g.from&&!g.from.mark,f.inline=_,_?this._graph.evaluate(e,f.builder):this._recursor.addListener(f.builder);for(a=0,d=e.mod.length;a<d;++a)h=e.mod[a],v&&m._children[h._id].forEach(t),y&&h.axes.forEach(n),b&&h.legends.forEach(r);for(a=0,d=e.rem.length;a<d;++a)h=e.rem[a],m._children[h._id].forEach(i),delete m._children[h._id];return e}function a(e,t){var n=this,r=null;if(2===arguments.length)return n._scales[e]=t,t;for(;null==r&&(r=n._scales[e],n=n.mark?n.mark.group:n._parent););return r}function o(e,t){m.debug(e,["building group",t._id]),t._scales=t._scales||{},t.scale=a.bind(t),t.items=t.items||[],this._children[t._id]=this._children[t._id]||[],t.axes=t.axes||[],t.axisItems=t.axisItems||[],t.legends=t.legends||[],t.legendItems=t.legendItems||[],this._graph.group(t._id,t)}function s(e,t){m.debug(e,["building children marks #"+t._id]);var n,i,a,o,s,l,u=this._def.marks;for(o=0,s=u.length;o<s;++o)n=u[o],i=n.from||{},a=t.datum._facetID,t.items[o]={group:t,_scaleRefs:{}},l=n.type===E.GROUP?new r:new v,l.init(this._graph,n,t.items[o],this,t._id,a),this._children[t._id].push({builder:l,from:i.data||(i.mark?"vg_"+t._id+"_"+i.mark:a),type:E.MARK})}function l(e,t){var n=t.axes,i=t.axisItems,a=this;b(this._graph,this._def.axes,n,t),n.forEach(function(e,n){var o=a._def.axes[n].scale,s=e.def(),l=null;i[n]={group:t,axis:e,layer:s.layer},l=s.type===E.GROUP?new r:new v,l.init(a._graph,s,i[n],a).dependency(h.SCALES,o),a._children[t._id].push({builder:l,type:E.AXIS,scale:o})})}function u(e,t){var n=t.legends,i=t.legendItems,a=this;_(this._graph,this._def.legends,n,t),n.forEach(function(e,n){var o=e.size()||e.shape()||e.fill()||e.stroke()||e.opacity(),s=e.def(),l=null;i[n]={group:t,legend:e},l=s.type===E.GROUP?new r:new v,l.init(a._graph,s,i[n],a).dependency(h.SCALES,o),a._children[t._id].push({builder:l,type:E.LEGEND,scale:o})})}var c=e("datalib"),f=e("vega-dataflow"),d=f.Node,h=f.Dependencies,p=f.Tuple,g=f.Collector,m=e("vega-logging"),v=e("./Builder"),y=e("./Scale"),b=e("../parse/axes"),_=e("../parse/legends"),E=r.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"},x=r.prototype=new v;x.init=function(e,t){var n,r=this;this._scaler=new d(e),(t.scales||[]).forEach(function(t){t=r.scale(n=t.name,new y(e,t,r)),r.scale(n+":prev",t),r._scaler.addListener(t)}),this._recursor=new d(e),this._recursor.evaluate=i.bind(this);var a=(t.axes||[]).reduce(function(e,t){return e[t.scale]=1,e},{});return a=(t.legends||[]).reduce(function(e,t){return e[t.size||t.shape||t.fill||t.stroke||t.opacity]=1,e},a),this._recursor.dependency(h.SCALES,c.keys(a)),this._collector=new g(e),v.prototype.init.apply(this,arguments)},x.evaluate=function(){var e=v.prototype.evaluate.apply(this,arguments),t=this._graph,n=this,r=this._scales,i=this._mark.items;if(e.mod.length<i.length){var a=c.keys(r).some(function(t){return r[t].reevaluate(e)});!a&&this._def.axes&&(a=this._def.axes.reduce(function(t,n){return t||e.scales[n.scale]},!1)),!a&&this._def.legends&&(a=this._def.legends.reduce(function(t,n){return t||e.scales[n.size||n.shape||n.fill||n.stroke]},!1)),a&&(e.mod=e.mod.concat(p.idFilter(i,e.mod,e.add,e.rem)))}return e.add.forEach(function(t){o.call(n,e,t)}),e.rem.forEach(function(e){t.group(e._id,null)}),e},x.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]},x.disconnect=function(){var e=this;return c.keys(e._children).forEach(function(t){e._children[t].forEach(function(t){e._recursor.removeListener(t.builder),t.builder.disconnect()})}),e._children={},v.prototype.disconnect.call(this)},x.child=function(e,t){for(var n,r=this._children[t],i=0,a=r.length;i<a&&(n=r[i],n.type!=E.MARK||n.builder._def.name!=e);++i);return n.builder},t.exports=r},{"../parse/axes":94,"../parse/legends":99,"./Builder":111,"./Scale":114,datalib:27,"vega-dataflow":42,"vega-logging":49}],114:[function(e,t,n){(function(n){function r(e,t,n){return this._def=t,this._parent=n,this._updated=!1,S.prototype.init.call(this,e).reflows(!0)}function i(e){var t=this._def.name,n=t+":prev",r=a.call(this,e.scale(t)),i=r.type===C.ORDINAL?o:l,s=y.call(this,e);return i.call(this,r,s,e),e.scale(t,r),e.scale(n,e.scale(n)||r),r}function a(e){var t=this._graph.config(),n=this._def.type||C.LINEAR;if(!e||n!==e.type){var r=t.scale[n]||b.scale[n];if(!r)throw Error("Unrecognized scale type: "+n);(e=r()).type=e.type||n,e.scaleName=this._def.name,e._prev={}}return e}function o(e,t,n){var r,i,a=this._def,o=e._prev,l=!1,u=m.call(this,a.padding)||0,c=null==a.outerPadding?u:m.call(this,a.outerPadding),f=a.points&&m.call(this,a.points),d=m.call(this,a.round)||null==a.round,h=!0;if(_.isObject(a.range)&&!_.isArray(a.range)&&(l=!0,t=g.call(this,k.RANGE,a.range,e,n)),r=g.call(this,k.DOMAIN,a.domain,e,n),r&&!_.equal(o.domain,r)&&(e.domain(r),o.domain=r,this._updated=!0),!_.equal(o.range,t)){if(a.bandSize){var p,v=m.call(this,a.bandSize),y=r.length,b=a.points?u*v:u*v*(y-1)+2*c;t[0]>t[1]?(p=t[1]||0,t=[p+(v*y+b),p]):(p=t[0]||0,t=[p,p+(v*y+b)]),a.reverse&&(t=t.reverse())}i="string"==typeof t[0],i||t.length>2||1===t.length||l?(e.range(t),h=!1):f&&d?e.rangeRoundPoints(t,u):f?e.rangePoints(t,u):d?e.rangeRoundBands(t,u,c):e.rangeBands(t,u,c),o.range=t,this._updated=!0}!e.invert&&h&&s(e)}function s(e){e.invert=function(t,n){var r=e.range(),i=r[0]<r[1],a=i?M:N;if(1===arguments.length){if(!_.isNumber(t))throw Error("Ordinal scale inversion is only supported for numeric input ("+t+").");return e.domain()[a(r,t)]}if(2===arguments.length){if(!_.isNumber(t)||!_.isNumber(n))throw Error("Extents to ordinal invert are not numbers ("+t+", "+n+").");var o,s=e.domain(),l=a(r,t),u=a(r,n),c=r.length-1;return u<l&&(o=l,l=u,u=l),l<0&&(l=0),u>c&&(u=c),(i?_.range(l,u+1):_.range(u,l-1,-1)).map(function(e){return s[e]})}}}function l(e,t,n){var r,i,a=this._def,o=e._prev,s=m.call(this,a.round),l=m.call(this,a.exponent),u=m.call(this,a.clamp),c=m.call(this,a.nice);r=a.type===C.QUANTILE?g.call(this,k.DOMAIN,a.domain,e,n):v.call(this,e,n),r&&!_.equal(o.domain,r)&&(e.domain(r),o.domain=r,this._updated=!0),"height"===m.call(this,a.range)&&(t=t.reverse()),t&&!_.equal(o.range,t)&&(e[s&&e.rangeRound?"rangeRound":"range"](t),o.range=t,this._updated=!0),l&&a.type===C.POWER&&e.exponent(l),u&&e.clamp(!0),c&&(a.type===C.TIME?(i=b.time[c],i||x.error("Unrecognized interval: "+i),e.nice(i)):e.nice())}function u(e){return e.type===C.ORDINAL||e.type===C.QUANTILE}function c(e){return e.fields||_.array(e)}function f(e){return e.some(function(e){return!e.data||e.data&&_.array(e.field).some(function(e){return e.parent})})}function d(e,t){return _.array(e.field).map(function(e){return e.parent?_.accessor(e.parent)(t.datum):e})}function h(e,t){var n=c(e);return 1==n.length&&1==_.array(n[0].field).length?w.TYPES.TUPLE:u(t)&&_.isObject(e.sort)?w.TYPES.MULTI:w.TYPES.VALUE}function p(e,t,n,r){var i=c(t),a=f(i),o=h(t,n),s=u(n),l=t.sort,p="_"+e,g=d(i[0],r);if(n[p]||this[p])return n[p]||this[p];var m,v,y=new w(this._graph).type(o);return a?n[p]=y:this[p]=y,s?o===w.TYPES.VALUE?(m=[{name:k.GROUPBY,get:_.identity}],v={"*":k.COUNT}):o===w.TYPES.TUPLE?(m=[{name:k.GROUPBY,get:_.$(g[0])}],v=_.isObject(l)?[{field:k.VALUE,get:_.$(l.field),ops:[l.op]}]:{"*":k.COUNT}):(m=k.GROUPBY,v=[{field:k.VALUE,ops:[l.op]}]):(m=[],v=[{field:k.VALUE,get:o==w.TYPES.TUPLE?_.$(g[0]):_.identity,ops:[k.MIN,k.MAX],as:[k.MIN,k.MAX]}]),y.param("groupby",m).param("summarize",v),y._lastUpdate=-1,y}function g(e,t,n,r){function i(e){S.dependency(T.SIGNALS,e)}if(null==t)return[];if(_.isArray(t))return t.map(m.bind(this));var a,o,s,l,g,v,y,b,E,x,S=this,A=this._graph,C=c(t),O=f(C),I=h(t,n),M=p.apply(this,arguments),N=t.sort,D=u(n);if(O||!O&&M._lastUpdate<this._stamp){for(a=0,o=C.length;a<o;++a)if(g=C[a],E=g.data||r.datum._facetID,b=A.data(E).last(),!(b.stamp<=this._stamp)){for(v=d(g,r),s=0,l=v.length;s<l;++s)y=v[s],I===w.TYPES.VALUE?M.accessors(null,y):I===w.TYPES.MULTI&&M.accessors(y,g.sort||N.field),M.evaluate(b);this.dependency(T.DATA,E),M.dependency(T.SIGNALS).forEach(i)}M._lastUpdate=this._stamp,b=M.aggr().result(),D?(_.isObject(N)?(x=N.op+"_"+k.VALUE,x=_.comparator(x)):N===!0&&(x=_.comparator(k.GROUPBY)),x&&(b=b.sort(x)),M._values=b.map(function(e){return e[k.GROUPBY]})):(b=b[0],M._values=_.isValid(b)?[b[k.MIN],b[k.MAX]]:[])}return M._values}function m(e){if(!e||!e.signal)return e;var t,n=e.signal;return this.dependency(T.SIGNALS,(t=_.field(n))[0]),
this._graph.signalRef(t)}function v(e,t){var n,r,i=this._def,a=[null,null];return void 0!==i.domain&&(a=_.isObject(i.domain)?g.call(this,k.DOMAIN,i.domain,e,t):a),r=a.length-1,void 0!==i.domainMin&&(_.isObject(i.domainMin)?i.domainMin.signal?a[0]=_.isValid(n=m.call(this,i.domainMin))?n:a[0]:a[0]=g.call(this,k.DOMAIN+k.MIN,i.domainMin,e,t)[0]:a[0]=i.domainMin),void 0!==i.domainMax&&(_.isObject(i.domainMax)?i.domainMax.signal?a[r]=_.isValid(n=m.call(this,i.domainMax))?n:a[r]:a[r]=g.call(this,k.DOMAIN+k.MAX,i.domainMax,e,t)[1]:a[r]=i.domainMax),i.type===C.LOG||i.type===C.TIME||i.type===C.TIME_UTC||!i.zero&&void 0!==i.zero||(a[0]=Math.min(0,a[0]),a[r]=Math.max(0,a[r])),a}function y(e){var t=this._def,n=this._graph.config(),r=m.call(this,t.range),i=[null,null];if(void 0!==r)if("string"==typeof r)if(A[r])i=[0,e[r]];else{if(!n.range[r])return x.error("Unrecogized range: "+r),i;i=n.range[r]}else if(_.isArray(r))i=_.duplicate(r).map(m.bind(this));else{if(_.isObject(r))return null;i=[0,r]}if(void 0!==t.rangeMin&&(i[0]=t.rangeMin.signal?m.call(this,t.rangeMin):t.rangeMin),void 0!==t.rangeMax&&(i[i.length-1]=t.rangeMax.signal?m.call(this,t.rangeMax):t.rangeMax),void 0!==t.reverse){var a=m.call(this,t.reverse);_.isObject(a)&&(a=_.accessor(a.field)(e.datum)),a&&(i=i.reverse())}var o=i[0],s=i[i.length-1];return(null===o&&null!==s||null!==o&&null===s)&&x.error('Range is underspecified. Please ensure either the "range" property or both "rangeMin" and "rangeMax" are specified.'),i}var b="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,_=e("datalib"),E=e("vega-dataflow"),x=e("vega-logging"),S=E.Node,T=E.Dependencies,w=e("../transforms/Aggregate"),A={width:1,height:1},C={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"},k={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"},O=r.prototype=new S;O.evaluate=function(e){var t=this,n=function(e){i.call(t,e)};return this._updated=!1,e.add.forEach(n),e.mod.forEach(n),this._updated&&(e.scales[this._def.name]=1,x.debug(e,["scale",this._def.name])),E.ChangeSet.create(e,!0)},O.dependency=function(e,t){if(2==arguments.length){var n=e===T.DATA?"data":"signal";t=_.array(t);for(var r=0,i=t.length;r<i;++r)this._graph[n](t[r]).addListener(this._parent)}return S.prototype.dependency.call(this,e,t)};var I=b.bisector(_.numcmp).right,M=function(e,t){return I(e,t)-1},N=b.bisector(function(e,t){return-1*_.numcmp(e,t)}).left;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transforms/Aggregate":119,datalib:27,"vega-dataflow":42,"vega-logging":49}],115:[function(e,t,n){(function(n){function r(e,t){this.duration=e||500,this.ease=t&&a.ease(t)||a.ease("cubic-in-out"),this.updates={next:null}}function i(e){for(var t,n,r,i,a,s,u=this.updates,c=u,f=c.next,d=this.duration,h=!0;null!=f;c=f,f=c.next)if(t=f.item,n=t.delay||0,r=(e-n)/d,r<0)h=!1;else{for(r>1&&(r=1),i=f.ease(r),a=0,s=f.length;a<s;++a)t[f[a].property]=f[a](i);t.touch(),o.item(t),1===r?(f.remove&&(t.status=l.EXIT,t.remove()),c.next=f.next,f=c):h=!1}return this.callback(),h}var a="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,o=e("vega-scenegraph").bound,s=e("vega-dataflow").Tuple,l=e("./Builder").STATUS,u=r.prototype,c={text:1,url:1};u.interpolate=function(e,t){var n,r,i,o,u=null;for(n in t)r=e[n],i=t[n],r!==i&&(c[n]||void 0===r?s.set(e,n,i):"number"!=typeof r||isFinite(r)?(o=a.interpolate(r,i),o.property=n,(u||(u=[])).push(o)):s.set(e,n,i));return null===u&&e.status===l.EXIT&&(u=[]),null!=u&&(u.item=e,u.ease=e.mark.ease||this.ease,u.next=this.updates.next,this.updates.next=u),this},u.start=function(e){for(var t=this,n=t.updates,r=n.next;null!=r;n=r,r=n.next)r.item.status===l.EXIT&&(r.item.status=l.UPDATE,r.remove=!0);t.callback=e,a.timer(function(e){return i.call(t,e)})},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Builder":111,"vega-dataflow":42,"vega-scenegraph":50}],116:[function(e,t,n){function r(e,t){function n(){O.type=null}function r(e){return{data:e}}function a(e){var t=P||(w.ticks?w.ticks(H):w.domain()),n=i(w,t,j).map(r);return t=t.map(function(t){return t=r(t),t.label=e(t.data),t}),[t,n]}function S(e){var n=e.orient,r=e.marks[5].properties.update,i=r.encode,a=t.titleOffsetAutoMin,o=t.titleOffsetAutoMax,s=t.titleOffsetAutoMargin;r.encode=function(e,t,r,l,u,c){var f=i.call(i,e,t,r,l,u,c),d="bottom"===n||"top"===n?"y":"x";if(null!=X[d])return f;_.clear().union(t.items[3].bounds).union(t.items[4].bounds);var h=r?{}:e,p="left"===n||"right"===n?"width":"height",g="top"===n||"left"===n?-1:1,m=~~(_[p]()+e.fontSize/2+s);return v.set(h,d,g*Math.min(Math.max(a,m),o)),r&&r.interpolate(e,h),!0}}function T(n){var r,i,a;n.type===E?(r={scale:n.scaleName,offset:.5+n.rangeBand()/2},i=r):(r={scale:n.scaleName,offset:.5},i={scale:n.scaleName+":prev",offset:.5}),a=o(n),m.extend(G.gridLines,d(t)),m.extend(G.majorTicks,d(t)),m.extend(G.minorTicks,d(t)),m.extend(G.tickLabels,h(t)),m.extend(G.domain,g(t)),m.extend(G.title,p(t)),G.gridLines.properties.enter.stroke={value:t.gridColor},G.gridLines.properties.enter.strokeOpacity={value:t.gridOpacity},G.gridLines.properties.enter.strokeWidth={value:t.gridWidth},G.gridLines.properties.enter.strokeDash={value:t.gridDash},l(A,G.gridLines,i,r,1/0,n,t,C),l(A,G.majorTicks,i,r,D,n,t),l(A,G.minorTicks,i,r,L,n,t),s(A,G.tickLabels,i,r,D,R),c(A,G.domain,a,$),u(A,G.title,a,+k||-1),m.extend(G.gridLines.properties.update,z),m.extend(G.majorTicks.properties.update,q),m.extend(G.minorTicks.properties.update,Y),m.extend(G.tickLabels.properties.update,B),m.extend(G.domain.properties.update,W),m.extend(G.title.properties.update,X);var v=[G.gridLines,G.majorTicks,G.minorTicks,G.tickLabels,G.domain,G.title];m.extend(O,{type:"group",interactive:!1,properties:{enter:{encode:f,scales:[n.scaleName],signals:[],data:[]},update:{encode:f,scales:[n.scaleName],signals:[],data:[]}}}),O.marks=v.map(function(t){return y(e,t)})}var w,A=t.orient,C=0,k=t.titleOffset,O={},I="front",M=!1,N=null,D=t.tickSize,L=t.tickSize,$=t.tickSize,R=t.tickPadding||t.padding,P=null,F=null,U=null,j=0,H=t.ticks,z={},B={},q={},Y={},X={},W={},G={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}},V={};return V.def=function(){O.type||T(w);var e=b.getTickFormat(w,H,U,F),t=a(e),n=N?[N].map(r):[];return O.marks[0].from=function(){return M?t[0]:[]},O.marks[1].from=function(){return t[0]},O.marks[2].from=function(){return t[1]},O.marks[3].from=O.marks[1].from,O.marks[4].from=function(){return[1]},O.marks[5].from=function(){return n},O.offset=C,O.orient=A,O.layer=I,"auto"===k&&S(O),O},V.scale=function(e){return arguments.length?(w!==e&&(w=e,n()),V):w},V.orient=function(e){return arguments.length?(A!==e&&(A=e in x?e+"":t.orient,n()),V):A},V.title=function(e){return arguments.length?(N!==e&&(N=e,n()),V):N},V.tickCount=function(e){return arguments.length?(H=e,V):H},V.tickValues=function(e){return arguments.length?(P=e,V):P},V.tickFormat=function(e){return arguments.length?(F!==e&&(F=e,n()),V):F},V.tickFormatType=function(e){return arguments.length?(U!==e&&(U=e,n()),V):U},V.tickSize=function(e,t){if(!arguments.length)return D;var r=arguments.length-1,i=+e,a=r>1?+t:D,o=r>0?+arguments[r]:D;return D===i&&L===a&&$===o||n(),D=i,L=a,$=o,V},V.tickSubdivide=function(e){return arguments.length?(j=+e,V):j},V.offset=function(e){return arguments.length?(C=m.isObject(e)?e:+e,V):C},V.tickPadding=function(e){return arguments.length?(R!==+e&&(R=+e,n()),V):R},V.titleOffset=function(e){return arguments.length?(k!==e&&(k=e,n()),V):k},V.layer=function(e){return arguments.length?(I!==e&&(I=e,n()),V):I},V.grid=function(e){return arguments.length?(M!==e&&(M=e,n()),V):M},V.gridLineProperties=function(e){return arguments.length?(z!==e&&(z=e),V):z},V.majorTickProperties=function(e){return arguments.length?(q!==e&&(q=e),V):q},V.minorTickProperties=function(e){return arguments.length?(Y!==e&&(Y=e),V):Y},V.tickLabelProperties=function(e){return arguments.length?(B!==e&&(B=e),V):B},V.titleProperties=function(e){return arguments.length?(X!==e&&(X=e),V):X},V.domainProperties=function(e){return arguments.length?(W!==e&&(W=e),V):W},V.reset=function(){return n(),V},V}function i(e,t,n){var r=[];if(n&&t.length>1){for(var i,o,s=a(e.domain()),l=-1,u=t.length,c=(t[1]-t[0])/++n;++l<u;)for(i=n;--i>0;)(o=+t[l]-i*c)>=s[0]&&r.push(o);for(--l,i=0;++i<n&&(o=+t[l]+i*c)<s[1];)r.push(o)}return r}function a(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function o(e){return e.rangeExtent?e.rangeExtent():a(e.range())}function s(e,t,n,r,i,a){i=Math.max(i,0)+a,"left"!==e&&"top"!==e||(i*=-1),"top"===e||"bottom"===e?(m.extend(t.properties.enter,{x:n,y:{value:i}}),m.extend(t.properties.update,{x:r,y:{value:i},align:{value:"center"},baseline:{value:T[e]}})):(m.extend(t.properties.enter,{x:{value:i},y:n}),m.extend(t.properties.update,{x:{value:i},y:r,align:{value:S[e]},baseline:{value:"middle"}}))}function l(e,t,n,r,i,a,o,s){var l="left"===e||"top"===e?-1:1;if(i=i===1/0?"top"===e||"bottom"===e?{field:{group:"height",level:2},mult:-l,offset:s*-l}:{field:{group:"width",level:2},mult:-l,offset:s*-l}:{value:l*i,offset:s},"between"===o.tickPlacement&&a.type===E){var u=a.range(),c=.5+(a.rangeBand()||(u[1]-u[0])/2);r=n=m.duplicate(r),r.offset=n.offset=c}"top"===e||"bottom"===e?(m.extend(t.properties.enter,{x:n,y:{value:0},y2:i}),m.extend(t.properties.update,{x:r,y:{value:0},y2:i}),m.extend(t.properties.exit,{x:r})):(m.extend(t.properties.enter,{x:{value:0},x2:i,y:n}),m.extend(t.properties.update,{x:{value:0},x2:i,y:r}),m.extend(t.properties.exit,{y:r}))}function u(e,t,n,r){var i=t.properties.update,a=~~((n[0]+n[1])/2),o="top"===e||"left"===e?-1:1;"bottom"===e||"top"===e?(i.x={value:a},i.angle={value:0},r>=0&&(i.y={value:o*r})):(i.y={value:a},i.angle={value:"left"===e?-90:90},r>=0&&(i.x={value:o*r}))}function c(e,t,n,r){var i;"top"!==e&&"left"!==e||(r=-1*r),i="bottom"===e||"top"===e?"M"+n[0]+","+r+"V0H"+n[1]+"V"+r:"M"+r+","+n[0]+"H0V"+n[1]+"H"+r,t.properties.update.path={value:i}}function f(e,t,n){var r=n?{}:e,i=e.mark.def.offset,a=e.mark.def.orient,o=t.width,s=t.height;if(m.isArray(i)){var l=i[0],u=i[1];switch(a){case"left":v.set(r,"x",-l),v.set(r,"y",u);break;case"right":v.set(r,"x",o+l),v.set(r,"y",u);break;case"bottom":v.set(r,"x",l),v.set(r,"y",s+u);break;case"top":v.set(r,"x",l),v.set(r,"y",-u);break;default:v.set(r,"x",l),v.set(r,"y",u)}}else switch(m.isObject(i)&&(i=-t.scale(i.scale)(i.value)),a){case"left":v.set(r,"x",-i),v.set(r,"y",0);break;case"right":v.set(r,"x",o+i),v.set(r,"y",0);break;case"bottom":v.set(r,"x",0),v.set(r,"y",s+i);break;case"top":v.set(r,"x",0),v.set(r,"y",-i);break;default:v.set(r,"x",0),v.set(r,"y",0)}return n&&n.interpolate(e,r),!0}function d(e){return{type:"rule",interactive:!1,key:"data",properties:{enter:{stroke:{value:e.tickColor},strokeWidth:{value:e.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function h(e){return{type:"text",interactive:!0,key:"data",properties:{enter:{fill:{value:e.tickLabelColor},font:{value:e.tickLabelFont},fontSize:{value:e.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function p(e){return{type:"text",interactive:!0,properties:{enter:{font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},fill:{value:e.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}function g(e){return{type:"path",interactive:!1,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:e.axisColor},strokeWidth:{value:e.axisWidth}},update:{}}}}var m=e("datalib"),v=e("vega-dataflow").Tuple,y=e("../parse/mark"),b=e("../util"),_=new(e("vega-scenegraph").Bounds),E="ordinal",x={top:1,right:1,bottom:1,left:1},S={bottom:"center",top:"center",left:"right",right:"left"},T={bottom:"top",top:"bottom",left:"middle",right:"middle"};t.exports=r},{"../parse/mark":100,"../util":149,datalib:27,"vega-dataflow":42,"vega-scenegraph":50}],117:[function(e,t,n){(function(n){function r(e){function t(){q.type=null}function n(e,t){return{data:e,index:t}}function r(e){return"ordinal"===e||"quantize"===e||"quantile"===e||"threshold"===e}function y(e){var t,r,i,a=b(x,S,T,w,A),o=(null==k?e.ticks?e.ticks.apply(e,R):e.domain():k).map(n),s=m.getTickFormat(e,o.length,I,O),l=5,u=f.range(o.length);x?(r=o.map(function(e){return Math.sqrt(x(e.data))}),i=f.max(r),r=r.reduce(function(e,t,n,r){return n>0&&(e[n]=e[n-1]+r[n-1]/2+l),e[n]+=t/2,e},[0]).map(Math.round)):(i=Math.round(Math.sqrt(N.symbolSize)),r=C||(t=H.fontSize)&&t.value+l||N.labelFontSize+l,r=u.map(function(e,t){return Math.round(i/2+t*r)}));var c,h=$;M&&(c=j.fontSize,h+=5+(c&&c.value||N.titleFontSize));for(var p=0,g=r.length;p<g;++p)r[p]+=h;a.scales=a.scales||[{}],d.extend(a.scales[0],{name:"legend",type:"ordinal",points:!0,domain:u,range:r});var v=(M?[M]:[]).map(n);return o.forEach(function(e){e.label=s(e.data),e.offset=i}),a.marks[0].from=function(){return v},a.marks[1].from=function(){return o},a.marks[2].from=a.marks[1].from,a}function b(t,n,r,u,c){var f=d.extend(z.titles,o(N)),h=d.extend(z.symbols,s(N)),m=d.extend(z.labels,l(N));return a(h,t,n,r,u,c),d.extend(f.properties.update,j),d.extend(h.properties.update,F),d.extend(m.properties.update,H),f.properties.enter.x.value+=$,f.properties.enter.y.value+=$,m.properties.enter.x.offset+=$+1,h.properties.enter.x.offset=$+1,m.properties.update.x.offset+=$+1,h.properties.update.x.offset=$+1,d.extend(q,{type:"group",interactive:!1,properties:{enter:p(e,"group",P),legendPosition:{encode:i.bind(null,N),signals:[],scales:[],data:[],fields:[]}}}),q.marks=[f,h,m].map(function(t){return g(e,t)}),q}function _(e){var t=E(e),r=e.domain(),i=(null==k?r:k).map(n),a=U.width&&U.width.value||N.gradientWidth,o=m.getTickFormat(e,i.length,I,O);t.scales=t.scales||[{}];var s=d.extend(t.scales[0],{name:"legend",type:e.type,round:!0,zero:!1,domain:[r[0],r[r.length-1]],range:[$,a+$]});"pow"===e.type&&(s.exponent=e.exponent());var l=(M?[M]:[]).map(n);return i.forEach(function(e,t){e.label=o(e.data),e.align=t==i.length-1?"right":0===t?"left":"center"}),t.marks[0].from=function(){return l},t.marks[1].from=function(){return[1]},t.marks[2].from=function(){return i},t}function E(t){var n=d.extend(z.titles,o(N)),r=d.extend(z.gradient,u(N)),a=d.extend(z.labels,c(N)),s=new h,l=t.domain(),f=l[0],m=l[l.length-1],v=t.copy().domain([f,m]).range([0,1]),y="linear"!==t.type&&t.ticks?t.ticks.call(t,15):l;f!==y[0]&&y.unshift(f),m!==y[y.length-1]&&y.push(m);for(var b=0,_=y.length;b<_;++b)s.stop(v(y[b]),t(y[b]));r.properties.enter.fill={value:s},d.extend(n.properties.update,j),d.extend(r.properties.update,U),d.extend(a.properties.update,H);var E=r.properties,x=U.height,S=x&&x.value||E.enter.height.value;if(a.properties.enter.y.value=S,a.properties.update.y.value=S,M){var T=n.properties,w=j.fontSize,A=4+(w&&w.value||T.enter.fontSize.value);r.properties.enter.y.value+=A,a.properties.enter.y.value+=A,r.properties.update.y.value+=A,a.properties.update.y.value+=A}return n.properties.enter.x.value+=$,n.properties.enter.y.value+=$,r.properties.enter.x.value+=$,r.properties.enter.y.value+=$,a.properties.enter.y.value+=$,r.properties.update.x.value+=$,r.properties.update.y.value+=$,a.properties.update.y.value+=$,d.extend(q,{type:"group",interactive:!1,properties:{enter:p(e,"group",P),legendPosition:{encode:i.bind(null,N),signals:[],scales:[],data:[],fields:[]}}}),q.marks=[n,r,a].map(function(t){return g(e,t)}),q}var x=null,S=null,T=null,w=null,A=null,C=null,k=null,O=null,I=null,M=null,N=e.config().legend,D=N.orient,L=N.offset,$=N.padding,R=[5],P={},F={},U={},j={},H={},z={titles:{},symbols:{},labels:{},gradient:{}},B={},q={};return B.def=function(){var e=x||S||T||w||A;return q.type||(q=e!==T&&e!==w||r(e.type)?y(e):_(e)),q.orient=D,q.offset=L,q.padding=$,q.margin=N.margin,q},B.size=function(e){return arguments.length?(x!==e&&(x=e,t()),B):x},B.shape=function(e){return arguments.length?(S!==e&&(S=e,t()),B):S},B.fill=function(e){return arguments.length?(T!==e&&(T=e,t()),B):T},B.stroke=function(e){return arguments.length?(w!==e&&(w=e,t()),B):w},B.opacity=function(e){return arguments.length?(A!==e&&(A=e,t()),B):A},B.title=function(e){return arguments.length?(M!==e&&(M=e,t()),B):M},B.format=function(e){return arguments.length?(O!==e&&(O=e,t()),B):O},B.formatType=function(e){return arguments.length?(I!==e&&(I=e,t()),B):I},B.spacing=function(e){return arguments.length?(C!==+e&&(C=+e,t()),B):C},B.orient=function(e){return arguments.length?(D=e in v?e+"":N.orient,B):D},B.offset=function(e){return arguments.length?(L=+e,B):L},B.values=function(e){return arguments.length?(k=e,B):k},B.legendProperties=function(e){return arguments.length?(P=e,B):P},B.symbolProperties=function(e){return arguments.length?(F=e,B):F},B.gradientProperties=function(e){return arguments.length?(U=e,B):U},B.labelProperties=function(e){return arguments.length?(H=e,B):H},B.titleProperties=function(e){return arguments.length?(j=e,B):j},B.reset=function(){return t(),B},B}function i(e,t,n,r,i,a,o){var s,l=r?{}:t,u=t.mark.def,c=u.offset,f=u.orient,d=2*u.padding,h="left"===f?0:n.width,p=~~t.bounds.width()+(t.width?0:d),g=~~t.bounds.height()+(t.height?0:d),m=n._legendPositions||(n._legendPositions={right:.5,left:.5});if(l.x=.5,l.y=.5,l.width=p,l.height=g,"left"===f||"right"===f){l.y=m[f],m[f]+=g+u.margin;var y=n.axes,b=n.axisItems,_=v[f];for(s=0;s<y.length;++s)y[s].orient()===f&&(h=Math.max(h,Math.abs(b[s].bounds[_])))}switch(f){case"left":l.x-=h+c+p;break;case"right":l.x+=h+c;break;case"top-left":l.x+=c,l.y+=c;break;case"top-right":l.x+=n.width-p-c,l.y+=c;break;case"bottom-left":l.x+=c,l.y+=n.height-g-c;break;case"bottom-right":l.x+=n.width-p-c,l.y+=n.height-g-c}var E=e.baseline,x=0;for(s=0;s<n.legendItems.length;s++){var S=n.legendItems[s];x+=S.bounds.height()+(t.height?0:d)}"middle"===E?l.y+=c+n.height/2-x/2:"bottom"===E&&(l.y+=c+n.height-x),r&&r.interpolate(t,l);var T=t.mark.def.properties.enter.encode;return T.call(T,t,n,r,i,a,o),!0}function a(e,t,n,r,i,a){var o=e.properties.enter,s=e.properties.update;t&&(o.size=s.size={scale:t.scaleName,field:"data"}),n&&(o.shape=s.shape={scale:n.scaleName,field:"data"}),r&&(o.fill=s.fill={scale:r.scaleName,field:"data"}),i&&(o.stroke=s.stroke={scale:i.scaleName,field:"data"}),a&&(s.opacity={scale:a.scaleName,field:"data"})}function o(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:e.titleColor},font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function s(e){return{type:"symbol",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:e.symbolShape},size:{value:e.symbolSize},stroke:{value:e.symbolColor},strokeWidth:{value:e.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}function l(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{value:e.labelAlign},baseline:{value:e.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}function u(e){return{type:"rect",interactive:!1,properties:{enter:{x:{value:0},y:{value:0},width:{value:e.gradientWidth},height:{value:e.gradientHeight},stroke:{value:e.gradientStrokeColor},strokeWidth:{value:e.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}function c(e){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}var f="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,d=e("datalib"),h=e("vega-scenegraph").Gradient,p=e("../parse/properties"),g=e("../parse/mark"),m=e("../util"),v={left:"x1",right:"x2","top-left":"x1","top-right":"x2","bottom-left":"x1","bottom-right":"x2"};t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../parse/mark":100,"../parse/properties":105,"../util":149,datalib:27,"vega-scenegraph":50}],118:[function(e,t,n){t.exports=function r(e,t){var n,i,a,o,s;if(t(e))return!0;var l=["items","axisItems","legendItems"];for(a=0,o=l.length;a<o;++a)if(s=e[l[a]])for(n=0,i=s.length;n<i;++n)if(r(s[n],t))return!0}},{}],119:[function(e,t,n){function r(e){return f.prototype.init.call(this,e),f.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(e){function t(e){e.signal&&(u[e.signal]=1)}var n,r,i,o,s,l,u={},f=this._transform;if(!a.isArray(o=e)){o=[];for(s in e)l=a.array(e[s]),o.push({field:s,ops:l})}for(n=0,r=o.length;n<r;++n)i=o[n],i.field.signal&&(u[i.field.signal]=1),a.array(i.ops).forEach(t),a.array(i.as).forEach(t);return f._fields=o,f._aggr=null,f.dependency(c.SIGNALS,a.keys(u)),f}}}),this._aggr=null,this._input=null,this._args=null,this._fields=[],this._out=[],this._type=p.TUPLE,this._acc={groupby:a["true"],value:a["true"]},this.router(!0).produces(!0)}function i(e){var t,n,r,i,a,o,s,l=[];for(a=e._dims,t=0,n=a.length;t<n;++t)l.push(a[t].name);for(o=e._aggr,t=0,n=o.length;t<n;++t)for(s=o[t].measures.fields,r=0,i=s.length;r<i;++r)l.push(s[r]);return l}var a=e("datalib"),o=e("vega-dataflow"),s=e("vega-logging"),l=o.ChangeSet,u=o.Tuple,c=o.Dependencies,f=e("./Transform"),d=e("./Facetor"),h=r.prototype=Object.create(f.prototype);h.constructor=r;var p=r.TYPES={VALUE:1,TUPLE:2,MULTI:3};r.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"],h.type=function(e){return this._type=e,this},h.accessors=function(e,t){var n=this._acc;n.groupby=a.$(e)||a["true"],n.value=a.$(t)||a["true"]},h.aggr=function(){if(this._aggr)return this._aggr;var e=this._graph,t=!1,n=[],r=this.param("groupby").field,o=function(t){return t.signal?e.signalRef(t.signal):t},s=this._fields.map(function(e){var r={name:o(e.field),as:a.array(e.as),ops:a.array(o(e.ops)).map(o),get:e.get};return t=t||null!=r.get,n.push(r.name),r});r.forEach(function(e){e.get&&(t=!0),n.push(e.name||e)}),this._args=t||!s.length?null:n,s.length||(s={"*":"values"});var l=this._aggr=(new d).groupby(r).stream(!0).summarize(s);return this._out=i(l),this._type!==p.VALUE&&l.key("_id"),l},h.transform=function(e,t){s.debug(e,["aggregate"]);var n,r,i,a,o,c=l.create(e),f=this.aggr(),d=this._out,h=this._args,g=!0,m=u.prev;if(t&&(c.rem.push.apply(c.rem,f.result()),f.clear(),this._aggr=null,f=this.aggr()),this._type===p.TUPLE)n=function(e){f._add(e),u.prev_init(e)},r=function(e){f._rem(m(e))},i=function(e){f._mod(e,m(e))},a=function(e){f._markMod(e,m(e))};else{var v=this._acc.groupby,y=this._acc.value,b=this._type===p.VALUE?y:function(e){return{_id:e._id,groupby:v(e),value:y(e)}};n=function(e){f._add(b(e)),u.prev_init(e)},r=function(e){f._rem(b(m(e)))},i=function(e){f._mod(b(e),b(m(e)))},a=function(e){f._mark(b(e),b(m(e)))}}if(e.add.forEach(n),t)e.mod.forEach(n);else{if(e.rem.forEach(r),h)for(o=0,g=!1;o<h.length;++o)if(e.fields[h[o]]){g=!0;break}e.mod.forEach(g?i:a)}for(o=0;o<d.length;++o)c.fields[d[o]]=1;return f._input=e,f.changes(c)},t.exports=r},{"./Facetor":125,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],120:[function(e,t,n){function r(){this._collector=null}var i=e("./Transform").prototype,a=r.prototype=Object.create(i);a.constructor=r,a.init=function(e){return i.init.call(this,e),this.batch(!0)},a.transform=function(e,t){return this.batchTransform(e,this._collector.data(),t)},a.batchTransform=function(){},t.exports=r},{"./Transform":141}],121:[function(e,t,n){function r(e){return l.prototype.init.call(this,e),s.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value","default":10},maxbins:{type:"value","default":20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>","default":[5,2]}}),this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"},this.mutates(!0)}var i=e("datalib"),a=e("vega-dataflow").Tuple,o=e("vega-logging"),s=e("./Transform"),l=e("./BatchTransform"),u=r.prototype=Object.create(l.prototype);u.constructor=r,u.extent=function(e){var t,n=[this.param("min"),this.param("max")];return null!=n[0]&&null!=n[1]||(t=i.extent(e,this.param("field").accessor),null==n[0]&&(n[0]=t[0]),null==n[1]&&(n[1]=t[1])),n},u.batchTransform=function(e,t){function n(e){var t=f(e);t=null==t?null:h.start+p*~~((t-h.start)/p),a.set(e,s.start,t),a.set(e,s.end,t+p),a.set(e,s.mid,t+p/2)}o.debug(e,["binning"]);var r=this.extent(t),s=this._output,l=this.param("step"),u=this.param("steps"),c=this.param("minstep"),f=this.param("field").accessor,d={min:r[0],max:r[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};l&&(d.step=l),u&&(d.steps=u),c&&(d.minstep=c);var h=i.bins(d),p=h.step;return e.add.forEach(n),e.mod.forEach(n),e.rem.forEach(n),e.fields[s.start]=1,e.fields[s.end]=1,e.fields[s.mid]=1,e},t.exports=r},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],122:[function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{field:{type:"field","default":"data"},pattern:{type:"value","default":"[\\w']+"},"case":{type:"value","default":"lower"},stopwords:{type:"value","default":""}}),this._output={text:"text",count:"count"},this.router(!0).produces(!0)}var i=e("vega-dataflow"),a=i.Tuple,o=e("vega-logging"),s=e("./Transform"),l=r.prototype=Object.create(s.prototype);l.constructor=r,l.transform=function(e,t){function n(e){return a.prev_init(e),i(e)}function r(e){return i(a.prev(e))}o.debug(e,["countpattern"]);var i=this.param("field").accessor,s=this.param("pattern"),l=this.param("stopwords"),u=!1;return this._stop!==l&&(this._stop=l,this._stop_re=new RegExp("^"+l+"$","i"),t=!0),this._pattern!==s&&(this._pattern=s,this._match=new RegExp(this._pattern,"g"),t=!0),t&&(this._counts={}),this._add(e.add,n),t||this._rem(e.rem,r),(t||(u=e.fields[i.field]))&&(u&&this._rem(e.mod,r),this._add(e.mod,n)),this._changeset(e)},l._changeset=function(e){var t,n,r,o=this._counts,s=this._tuples||(this._tuples={}),l=i.ChangeSet.create(e),u=this._output;for(t in o)n=s[t],r=o[t]||0,!n&&r?(s[t]=n=a.ingest({}),n[u.text]=t,n[u.count]=r,l.add.push(n)):0===r?(n&&l.rem.push(n),delete o[t],delete s[t]):n[u.count]!==r&&(a.set(n,u.count,r),l.mod.push(n));return l},l._tokenize=function(e){switch(this.param("case")){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(this._match)},l._add=function(e,t){var n,r,i,a,o=this._counts,s=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)s.test(a=n[r])||(o[a]=1+(o[a]||0))},l._rem=function(e,t){var n,r,i,a,o=this._counts,s=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)s.test(a=n[r])||(o[a]-=1)},t.exports=r},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],123:[function(e,t,n){function r(e){return m.prototype.init.call(this,e),g.addParameters(this,{"with":{type:"data"},diagonal:{type:"value","default":"true"},filter:{type:"expr"}}),this._output={left:"a",right:"b"},this._lastWith=null,this._cids={},this._cache={},this.router(!0).produces(!0)}function i(e,t){var n=this._cache,r=n[e._id]||(n[e._id]={c:[],f:!1});r.c.push(t)}function a(e,t,n){return e?t._id+"_"+n._id:n._id+"_"+t._id}function o(e,t,n,r,o,s,l){for(var u,c,f=this._output,d=this._cache,p=this._cids,g=e.add,m=!1,v=0,y=n.length,b={};v<y;++v)u=n[v],c=a(t,l,u),p[c]||(l._id!==u._id||r)&&(h.set(b,f.left,t?l:u),h.set(b,f.right,t?u:l),!o||o(b)?(g.push(b=h.ingest(b)),i.call(this,l,b),l._id!==u._id&&i.call(this,u,b),s[b._id]=1,p[c]=!0,b={}):(d[u._id]&&(d[u._id].f=!0),m=!0));d[l._id]&&(d[l._id].f=m)}function s(e,t,n,r,i,s,l,u){var c,f,d,h,p,g=this._output,m=this._cache,v=this._cids,y=m[u._id],b=y&&y.c,_=!y||y.f,E=e.mod,x=e.rem;if(b)for(c=b.length-1;c>=0;--c)if(f=b[c],h=u===f[g.left],d=h?f[g.right]:f[g.left],p=a(h,u,d),m[d._id])if(!i||i(f)){if(s[f._id])continue;E.push(f),s[f._id]=1}else l[f._id]||x.push.apply(x,b.splice(c,1)),l[f._id]=1,v[p]=!1,y.f=!0;else v[p]=!1,b.splice(c,1);i&&_&&o.call(this,e,t,n,r,i,s,u)}function l(e,t,n,r){var i,o,s,l,u,c=this._output,f=this._cache[r._id],d=this._cids,h=e.rem;if(f){for(i=0,o=f.c.length;i<o;++i)s=f.c[i],u=r===s[c.left],l=u?s[c.right]:s[c.left],d[a(u,r,l)]=!1,n[s._id]||(h.push(s),n[s._id]=1);this._cache[r._id]=null}}function u(e,t){var n,r,i,a,o,s,l=this._cache,u=c.keys(l),f=e.rem;for(n=0,r=u.length;n<r;++n)for(o=l[u[n]],i=0,a=o.c.length;i<a;++i)s=o.c[i],t[s._id]||(f.push(s),t[s._id]=1);this._cache={},this._cids={},this._lastWith=null}var c=e("datalib"),f=e("vega-dataflow"),d=f.ChangeSet,h=f.Tuple,p=e("vega-logging"),g=e("./Transform"),m=e("./BatchTransform"),v=r.prototype=Object.create(m.prototype);v.constructor=r,v.batchTransform=function(e,t,n){p.debug(e,["crossing"]);var r=this.param("with"),i=this.param("diagonal"),a=this._output,c=this.param("filter")||null,f=!r.name,h=f?e:r.source.last(),g=f?t:r.source.values(),m=d.create(e),v={},y={};return n?(u.call(this,m,y),t.forEach(o.bind(this,m,!0,g,i,c,v)),this._lastWith=h.stamp):(e.rem.forEach(l.bind(this,m,!0,y)),e.add.forEach(o.bind(this,m,!0,g,i,c,v)),h.stamp>this._lastWith&&(h.rem.forEach(l.bind(this,m,!1,y)),h.add.forEach(o.bind(this,m,!1,t,i,c,v)),h.mod.forEach(s.bind(this,m,!1,t,i,c,v,y)),this._lastWith=h.stamp),e.mod.forEach(s.bind(this,m,!0,g,i,c,v,y))),m.fields[a.left]=1,m.fields[a.right]=1,m},t.exports=r},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],124:[function(e,t,n){function r(t){return i.addParameters(this,{transform:{type:"custom",set:function(e){return this._transform._pipeline=e,this._transform},get:function(){var t=e("../parse/transforms"),n=this._transform;return n._pipeline.map(function(e){return t(n._graph,e)})}}}),this._pipeline=[],a.call(this,t)}var i=e("./Transform"),a=e("./Aggregate"),o=r.prototype=Object.create(a.prototype);o.constructor=r,o.aggr=function(){return a.prototype.aggr.call(this).facet(this)},o.transform=function(e,t){var n=a.prototype.transform.call(this,e,t);return e.add.length&&this.listeners()[0].rerank(),n},t.exports=r},{"../parse/transforms":109,"./Aggregate":119,"./Transform":141}],125:[function(e,t,n){function r(){o.call(this),this._facet=null,this._facetID=++f}function i(e){c.debug({},["disconnecting cell",this.tuple._id]);var t=this.ds.pipeline();e.removeListener(t[0]),e._graph.removeListener(t[0]),e._graph.disconnect(t)}var a=e("datalib"),o=a.Aggregator,s=o.prototype,l=e("vega-dataflow"),u=l.Tuple,c=e("vega-logging"),f=0,d=r.prototype=Object.create(s);d.constructor=r,d.facet=function(e){return arguments.length?(this._facet=e,this):this._facet},d._ingest=function(e){return u.ingest(e,null)},d._assign=u.set,d._newcell=function(e,t){var n=s._newcell.call(this,e,t),r=this._facet;if(r){var a=r._graph,o=n.tuple,l=r.param("transform");n.ds=a.data(o._facetID,l,o),n.disconnect=i,r.addListener(l[0])}return n},d._newtuple=function(e,t){var n=s._newtuple.call(this,e);return this._facet&&(u.set(n,"key",t),
u.set(n,"_facetID",this._facetID+"_"+t)),n},d.clear=function(){if(this._facet)for(var e in this._cells)this._cells[e].disconnect(this._facet);return s.clear.call(this)},d._on_add=function(e,t){this._facet&&t.ds._input.add.push(e)},d._on_rem=function(e,t){this._facet&&t.ds._input.rem.push(e)},d._on_mod=function(e,t,n,r){this._facet&&(n===r?n.ds._input.mod.push(e):(n.ds._input.rem.push(e),r.ds._input.add.push(e)))},d._on_drop=function(e){this._facet&&e.disconnect(this._facet)},d._on_keep=function(e){this._facet&&l.ChangeSet.copy(this._input,e.ds._input)},t.exports=r},{datalib:27,"vega-dataflow":42,"vega-logging":49}],126:[function(e,t,n){function r(e){return o.prototype.init.call(this,e),o.addParameters(this,{test:{type:"expr"}}),this._skip={},this.router(!0)}var i=e("vega-dataflow"),a=e("vega-logging"),o=e("./Transform"),s=r.prototype=Object.create(o.prototype);s.constructor=r,s.transform=function(e){a.debug(e,["filtering"]);var t=i.ChangeSet.create(e),n=this._skip,r=this.param("test");return e.rem.forEach(function(e){1!==n[e._id]?t.rem.push(e):n[e._id]=0}),e.add.forEach(function(e){r(e)?t.add.push(e):n[e._id]=1}),e.mod.forEach(function(e){var i=r(e),a=1===n[e._id];i&&a?(n[e._id]=0,t.add.push(e)):i&&!a?t.mod.push(e):!i&&a||(t.rem.push(e),n[e._id]=1)}),t},t.exports=r},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],127:[function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{fields:{type:"array<field>"}}),this._output={key:"key",value:"value"},this._cache={},this.router(!0).produces(!0)}var i=e("vega-dataflow"),a=i.Tuple,o=e("vega-logging"),s=e("./Transform"),l=r.prototype=Object.create(s.prototype);l.constructor=r,l._reset=function(e,t){for(var n in this._cache)t.rem.push.apply(t.rem,this._cache[n]);this._cache={}},l._tuple=function(e,t,n){var r=this._cache[e._id]||(this._cache[e._id]=Array(n));return r[t]?a.rederive(e,r[t]):r[t]=a.derive(e)},l._fn=function(e,t,n){var r,i,o,s,l,u;for(r=0,o=e.length;r<o;++r)for(l=e[r],i=0,s=t.field.length;i<s;++i)u=this._tuple(l,i,s),a.set(u,this._output.key,t.field[i]),a.set(u,this._output.value,t.accessor[i](l)),n.push(u)},l.transform=function(e,t){o.debug(e,["folding"]);var n=this,r=this.param("fields"),a=i.ChangeSet.create(e);return t&&this._reset(e,a),this._fn(e.add,r,a.add),this._fn(e.mod,r,t?a.add:a.mod),e.rem.forEach(function(e){a.rem.push.apply(a.rem,n._cache[e._id]),n._cache[e._id]=null}),(e.add.length||e.rem.length||r.field.some(function(t){return!!e.fields[t]}))&&(a.fields[this._output.key]=1,a.fields[this._output.value]=1),a},t.exports=r},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],128:[function(e,t,n){(function(n){function r(t){return u.prototype.init.call(this,t),this._prev=null,this._interactive=!1,this._setup=!0,this._nodes=[],this._links=[],this._layout=i.layout.force(),u.addParameters(this,{size:{type:"array<value>","default":e("./screen").size},bound:{type:"value","default":!0},links:{type:"data"},linkStrength:{type:"value","default":1},linkDistance:{type:"value","default":20},charge:{type:"value","default":-30},chargeDistance:{type:"value","default":1/0},friction:{type:"value","default":.9},theta:{type:"value","default":.8},gravity:{type:"value","default":.1},alpha:{type:"value","default":.1},iterations:{type:"value","default":500},interactive:{type:"value","default":this._interactive},active:{type:"value","default":this._prev},fixed:{type:"data"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("vega-dataflow"),o=a.Tuple,s=a.ChangeSet,l=e("vega-logging"),u=e("./Transform"),c=r.prototype=Object.create(u.prototype);c.constructor=r,c.transform=function(e,t){l.debug(e,["force"]),t-=e.signals.active?1:0;var n=this.param("interactive"),r=this.param("links").source,i=r.last(),a=this.param("active"),s=this._output,u=this._layout,c=this._nodes,f=this._links;if(i.stamp<e.stamp&&(i=null),this.configure(e,i,n,t),!n){for(var d=this.param("iterations"),h=0;h<d;++h)u.tick();u.stop()}return this.update(a),(t||a!==this._prev&&a&&a.update)&&u.alpha(this.param("alpha")),a!==this._prev&&(this._prev=a),e.rem.length&&u.nodes(this._nodes=o.idFilter(c,e.rem)),i&&i.rem.length&&u.links(this._links=o.idFilter(f,i.rem)),e.fields[s.x]=1,e.fields[s.y]=1,e},c.configure=function(e,t,n,r){var i=this._layout,a=this._setup||e.add.length||t&&t.add.length||n!==this._interactive||this.param("charge")!==i.charge()||this.param("linkStrength")!==i.linkStrength()||this.param("linkDistance")!==i.linkDistance();if((a||r)&&i.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction")),a){this._setup=!1,this._interactive=n;var o,l,u=this,c=this._graph,f=this._nodes,d=this._links;for(o=e.add,l=0;l<o.length;++l)f.push({tuple:o[l]});if(t)for(o=t.add,l=0;l<o.length;++l)d.push({tuple:o[l],source:f[o[l].source],target:f[o[l].target]});var h=n?function(){c.propagate(s.create(null,!0),u)}:null;i.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(f).links(d).on("tick",h).start().alpha(this.param("alpha"))}},c.update=function(e){var t,n,r,i,a,s,l=this._output,u=this.param("bound"),c=this.param("fixed"),f=this.param("size"),d=this._nodes,h={};if(c&&c.source)for(c=c.source.values(),n=0,r=c.length;n<r;++n)h[c[n].id]=1;for(n=0;n<d.length;++n)r=d[n],i=r.tuple,t=i._id,e&&e.id===t?(r.fixed=1,e.update&&(r.x=r.px=e.x,r.y=r.py=e.y)):r.fixed=h[t]||0,a=u?Math.max(0,Math.min(r.x,f[0])):r.x,s=u?Math.max(0,Math.min(r.y,f[1])):r.y,o.set(i,l.x,a),o.set(i,l.y,s)},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Transform":141,"./screen":147,"vega-dataflow":42,"vega-logging":49}],129:[function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{field:{type:"value"},expr:{type:"expr"}}),this.mutates(!0)}var i=e("vega-dataflow"),a=i.Tuple,o=e("vega-logging"),s=e("./Transform"),l=r.prototype=Object.create(s.prototype);l.constructor=r,l.transform=function(e){function t(e){a.set(e,n,r(e)),i=!0}o.debug(e,["formulating"]);var n=this.param("field"),r=this.param("expr"),i=!1;return e.add.forEach(t),this.reevaluate(e)&&e.mod.forEach(t),i&&(e.fields[n]=1),e},t.exports=r},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],130:[function(e,t,n){(function(n){function r(e){return l.prototype.init.call(this,e),l.addParameters(this,r.Parameters),l.addParameters(this,{lon:{type:"field"},lat:{type:"field"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),l=e("./Transform");r.Parameters={projection:{type:"value","default":"mercator"},center:{type:"array<value>"},translate:{type:"array<value>","default":e("./screen").center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}},r.d3Projection=function(){var e,t,n,o=this.param("projection"),s=r.Parameters;o!==this._mode&&(this._mode=o,this._projection=i.geo[o]()),e=this._projection;for(t in s)"projection"!==t&&e[t]&&(n=this.param(t),void 0===n||a.isArray(n)&&0===n.length||n!==e[t]()&&e[t](n));return e};var u=r.prototype=Object.create(l.prototype);u.constructor=r,u.transform=function(e){function t(e){var t=[i(e),a(e)],r=l(t)||[null,null];o.set(e,n.x,r[0]),o.set(e,n.y,r[1])}s.debug(e,["geo"]);var n=this._output,i=this.param("lon").accessor,a=this.param("lat").accessor,l=r.d3Projection.call(this);return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.x]=1,e.fields[n.y]=1,e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Transform":141,"./screen":147,datalib:27,"vega-dataflow":42,"vega-logging":49}],131:[function(e,t,n){(function(n){function r(e){return u.prototype.init.call(this,e),u.addParameters(this,l.Parameters),u.addParameters(this,{field:{type:"field","default":null}}),this._output={path:"layout_path"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),l=e("./Geo"),u=e("./Transform"),c=r.prototype=Object.create(u.prototype);c.constructor=r,c.transform=function(e){function t(e){o.set(e,n.path,c(r(e)))}s.debug(e,["geopath"]);var n=this._output,r=this.param("field").accessor||a.identity,u=l.d3Projection.call(this),c=i.geo.path().projection(u);return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.path]=1,e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Geo":130,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],132:[function(e,t,n){(function(n){function r(t){return u.prototype.init.call(this,t),l.addParameters(this,{sort:{type:"array<field>","default":null},children:{type:"field","default":"children"},parent:{type:"field","default":"parent"},field:{type:"value","default":null},mode:{type:"value","default":"tidy"},size:{type:"array<value>","default":e("./screen").size},nodesize:{type:"array<value>","default":null},orient:{type:"value","default":"cartesian"}}),this._mode=null,this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),l=e("./Transform"),u=e("./BatchTransform"),c="partition",f={cartesian:function(e,t){return e.parent===t.parent?1:2},radial:function(e,t){return(e.parent===t.parent?1:2)/e.depth}},d=r.prototype=Object.create(u.prototype);d.constructor=r,d.batchTransform=function(e,t){s.debug(e,["hierarchy layout"]);var n=this._layout,r=this._output,l=this.param("mode"),u=this.param("sort"),d=this.param("nodesize"),h=this.param("parent").accessor,p=t.filter(function(e){return null===h(e)})[0];return l!==this._mode&&(this._mode=l,"tidy"===l&&(l="tree"),n=this._layout=i.layout[l]()),e.fields[r.x]=1,e.fields[r.y]=1,e.fields[r.depth]=1,l===c?(e.fields[r.width]=1,e.fields[r.height]=1,n.value(this.param("field").accessor)):n.separation(f[this.param("orient")]),d.length&&l!==c?n.nodeSize(d):n.size(this.param("size")),n.sort(u.field.length?a.comparator(u.field):null).children(this.param("children").accessor).nodes(p),t.forEach(function(e){o.set(e,r.x,e.x),o.set(e,r.y,e.y),o.set(e,r.depth,e.depth),l===c&&(o.set(e,r.width,e.dx),o.set(e,r.height,e.dy))}),e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":120,"./Transform":141,"./screen":147,datalib:27,"vega-dataflow":42,"vega-logging":49}],133:[function(e,t,n){function r(e){return c.prototype.init.call(this,e),u.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value","default":"value"},value:{type:"value","default":0}}),this.router(!0).produces(!0)}function i(e,t,n,r){var i,a={_imputed:!0};for(i=0;i<t.length;++i)a[e[i]]=t[i];for(i=0;i<r.length;++i)a[n[i]]=r[i];return l.ingest(a)}function a(e,t,n){var r,i,a,s,l,u,c,f,d=[],h=function(e){return e(a)},p=function(e){return a=e,n.map(h)};for(u=d.domain=o.unique(e,p),f=u.length,c=u.reduce(function(e,t,n){return e[t]={value:t,index:n},e},{}),r={},i=0;i<e.length;++i)a=e[i],s=null==t?[]:t.map(h),l=r[s]||(d.push(r[s]=Array(f)),r[s].values=s,r[s]),l[c[p(a)].index]=a;return d}var o=e("datalib"),s=e("vega-logging"),l=e("vega-dataflow").Tuple,u=e("./Transform"),c=e("./BatchTransform"),f=r.prototype=Object.create(c.prototype);f.constructor=r,f.batchTransform=function(e,t){function n(e){return null==e?null:y(e)}s.debug(e,["imputing"]);var r,l,u,c,f,d,h=this.param("groupby"),p=this.param("orderby"),g=this.param("method"),m=this.param("value"),v=this.param("field"),y=v.accessor,b=v.field,_=this._imputed||[],E=[],x=a(t,h.accessor,p.accessor),S=x.domain;for(u=0,f=x.length;u<f;++u)for(r=x[u],"value"!==g&&(m=o[g](r,n)),l=0,c=r.length;l<c;++l)null==r[l]&&(d=i(h.field,r.values,p.field,S[l]),d[b]=m,E.push(d));for(l=0,c=E.length;l<c;++l)e.add.push(E[l]);for(l=0,c=_.length;l<c;++l)e.rem.push(_[l]);return this._imputed=E,e},t.exports=r},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],134:[function(e,t,n){function r(e){return p.prototype.init.call(this,e),p.addParameters(this,{sourceX:{type:"field","default":"_source.layout_x"},sourceY:{type:"field","default":"_source.layout_y"},targetX:{type:"field","default":"_target.layout_x"},targetY:{type:"field","default":"_target.layout_y"},tension:{type:"value","default":.2},shape:{type:"value","default":"line"}}),this._output={path:"layout_path"},this.mutates(!0)}function i(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function a(e,t,n,r,i){var a=n-e,o=r-t,s=i*(a+o),l=i*(o-a);return"M"+e+","+t+"C"+(e+s)+","+(t+l)+" "+(n+l)+","+(r-s)+" "+n+","+r}function o(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n}function s(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r}function l(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*s+"L"+r*o+","+r*s}function u(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r}function c(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r}function f(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*a+"C"+l*i+","+l*a+" "+l*o+","+l*s+" "+r*o+","+r*s}var d=e("vega-dataflow").Tuple,h=e("vega-logging"),p=e("./Transform"),g=r.prototype=Object.create(p.prototype);g.constructor=r;var m={line:i,curve:a,cornerX:o,cornerY:s,cornerR:l,diagonalX:u,diagonalY:c,diagonalR:f};g.transform=function(e){function t(e){var t=r(i(e),a(e),o(e),s(e),l);d.set(e,n.path,t)}h.debug(e,["linkpath"]);var n=this._output,r=m[this.param("shape")]||m.line,i=this.param("sourceX").accessor,a=this.param("sourceY").accessor,o=this.param("targetX").accessor,s=this.param("targetY").accessor,l=this.param("tension");return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.path]=1,e},t.exports=r},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],135:[function(e,t,n){function r(e){return o.prototype.init.call(this,e),o.addParameters(this,{on:{type:"data"},onKey:{type:"field","default":null},as:{type:"array<value>"},keys:{type:"array<field>","default":["data"]},"default":{type:"value"}}),this.mutates(!0)}var i=e("vega-dataflow").Tuple,a=e("vega-logging"),o=e("./Transform"),s=r.prototype=Object.create(o.prototype);s.constructor=r,s.transform=function(e,t){function n(e){for(var t=0;t<h.length;++t){var n=m[h[t](e)]||g;i.set(e,p[t],n)}}a.debug(e,["lookup"]);var r,o,s=this.param("on"),l=s.source.last(),u=s.source.values(),c=this.param("onKey"),f=c.field,d=this.param("keys"),h=d.accessor,p=this.param("as"),g=this.param("default"),m=this._lut;if(null==m||this._on!==f||f&&l.fields[f]||l.add.length||l.rem.length){if(f)for(c=c.accessor,m={},r=0;r<u.length;++r)m[c(o=u[r])]=o;else m=u;this._lut=m,this._on=f,t=!0}e.add.forEach(n);var v=d.field.some(function(t){return e.fields[t]});return(v||t)&&(e.mod.forEach(n),e.rem.forEach(n)),p.forEach(function(t){e.fields[t]=1}),e},t.exports=r},{"./Transform":141,"vega-dataflow":42,"vega-logging":49}],136:[function(e,t,n){function r(e,t,n){this._name=e,this._type=t,this._transform=n,this._value=[],this._accessors=[],this._resolution=!1,this._signals=[]}function i(){var e=s.test(this._type),t=l.test(this._type),n=u.test(this._type),r=e?this._value:this._value[0],i=e?this._accessors:this._accessors[0];return!a.isValid(i)&&f.test(this._type)?r:t?{name:r,source:i}:n?{field:r,accessor:i}:r}var a=e("datalib"),o=e("vega-dataflow").Dependencies,s=/array/i,l=/data/i,u=/field/i,c=/expr/i,f=/value/i,d=r.prototype;d.get=function(){var e,t,n,r,o,s=this._transform._graph,c=l.test(this._type),f=u.test(this._type);if(!this._resolution)return i.call(this);if(c)return this._accessors=this._value.map(function(e){return s.data(e)}),i.call(this);for(e=0,t=this._signals.length;e<t;++e)n=this._signals[e],r=n.index,o=n.value(s),f&&(this._accessors[r]=this._value[r]!=o?a.accessor(o):this._accessors[r]),this._value[r]=o;return i.call(this)},d.set=function(e){var t=this,n=t._transform._graph,r=c.test(this._type),i=l.test(this._type),s=u.test(this._type);return t._signals=[],this._value=a.array(e).map(function(e,l){var u;return a.isString(e)?r?(u=n.expr(e),t._transform.dependency(o.FIELDS,u.fields),t._transform.dependency(o.SIGNALS,u.globals),t._transform.dependency(o.DATA,u.dataSources),u.fn):(s?(t._accessors[l]=a.accessor(e),t._transform.dependency(o.FIELDS,a.field(e))):i&&(t._resolution=!0,t._transform.dependency(o.DATA,e)),e):void 0!==e.value?e.value:void 0!==e.field?(t._accessors[l]=a.accessor(e.field),t._transform.dependency(o.FIELDS,a.field(e.field)),e.field):void 0!==e.signal?(t._resolution=!0,t._transform.dependency(o.SIGNALS,a.field(e.signal)[0]),t._signals.push({index:l,value:function(t){return t.signalRef(e.signal)}}),e.signal):void 0!==e.expr?(t._resolution=!0,u=n.expr(e.expr),t._transform.dependency(o.SIGNALS,u.globals),t._signals.push({index:l,value:function(){return u.fn()}}),e.expr):e}),t._transform},t.exports=r},{datalib:27,"vega-dataflow":42}],137:[function(e,t,n){function r(e){return u.prototype.init.call(this,e),l.addParameters(this,{field:{type:"field","default":null},startAngle:{type:"value","default":0},endAngle:{type:"value","default":2*Math.PI},sort:{type:"value","default":!1}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function i(){return 1}var a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),l=e("./Transform"),u=e("./BatchTransform"),c=r.prototype=Object.create(u.prototype);c.constructor=r,c.batchTransform=function(e,t){s.debug(e,["pie"]);var n,r,l,u=this._output,c=this.param("field").accessor||i,f=this.param("startAngle"),d=this.param("endAngle"),h=this.param("sort"),p=t.map(c),g=f,m=(d-f)/a.sum(p),v=a.range(t.length);for(h&&v.sort(function(e,t){return p[e]-p[t]}),n=0;n<v.length;++n)r=t[v[n]],l=p[v[n]],o.set(r,u.start,g),o.set(r,u.mid,g+.5*l*m),o.set(r,u.end,g+=l*m);return e.fields[u.start]=1,e.fields[u.end]=1,e.fields[u.mid]=1,e},t.exports=r},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],138:[function(e,t,n){function r(e){return s.prototype.init.call(this,e),o.addParameters(this,{field:{type:"field","default":null},normalize:{type:"value","default":!1}}),this._output={rank:"rank"},this.mutates(!0)}var i=e("vega-dataflow").Tuple,a=e("vega-logging"),o=e("./Transform"),s=e("./BatchTransform"),l=r.prototype=Object.create(s.prototype);l.constructor=r,l.batchTransform=function(e,t){a.debug(e,["rank"]);var n,r,o,s,l=this._output.rank,u=this.param("normalize"),c=this.param("field").accessor,f={},d=t.length;if(c)for(n=0,r=0;n<d;++n)o=t[n],f[s=c(o)]=f[s]||(f[s]=++r);for(n=0;n<d&&(o=t[n]);++n)c&&(s=c(o))?i.set(o,l,u?f[s]/r:f[s]):i.set(o,l,u?(n+1)/d:n+1);return e.fields[l]=1,e},t.exports=r},{"./BatchTransform":120,"./Transform":141,"vega-dataflow":42,"vega-logging":49}],139:[function(e,t,n){function r(e){o.prototype.init.call(this,e),o.addParameters(this,{by:{type:"array<field>"}}),this.router(!0)}var i=e("datalib"),a=e("vega-logging"),o=e("./Transform"),s=r.prototype=Object.create(o.prototype);s.constructor=r,s.transform=function(e){return a.debug(e,["sorting"]),(e.add.length||e.mod.length||e.rem.length)&&(e.sort=i.comparator(this.param("by").field)),e},t.exports=r},{"./Transform":141,datalib:27,"vega-logging":49}],140:[function(e,t,n){function r(e){return u.prototype.init.call(this,e),l.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value","default":"zero"}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function i(e,t,n,r){var i,a,o,s,l,u,c,f=[],d=function(e){return e(o)};if(null==t)f.push(e.slice());else for(i={},a=0;a<e.length;++a)o=e[a],s=t.map(d),l=i[s]||(f.push(i[s]=[]),i[s]),l.push(o);for(s=0,c=0;s<f.length;++s){for(l=f[s],a=0,u=0;a<l.length;++a)u+=r(l[a]);l.sum=u,u>c&&(c=u),null!=n&&l.sort(n)}return f.max=c,f}var a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),l=e("./Transform"),u=e("./BatchTransform"),c=r.prototype=Object.create(u.prototype);c.constructor=r,c.batchTransform=function(e,t){s.debug(e,["stacking"]);for(var n=this.param("groupby").accessor,r=a.comparator(this.param("sortby").field),l=this.param("field").accessor,u=this.param("offset"),c=this._output,f=i(t,n,r,l),d=0,h=f.max;d<f.length;++d){var p,g,m,v=f[d],y=v.sum,b="center"===u?(h-y)/2:0,_="normalize"===u?1/y:1,E=b,x=0;for(p=0;p<v.length;++p)g=v[p],m=E,x+=l(g),E=_*x+b,o.set(g,c.start,m),o.set(g,c.end,E),o.set(g,c.mid,.5*(m+E))}return e.fields[c.start]=1,e.fields[c.end]=1,e.fields[c.mid]=1,e},t.exports=r},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],141:[function(e,t,n){function r(e){e&&a.init.call(this,e)}var i=e("vega-dataflow"),a=i.Node.prototype,o=i.Dependencies,s=e("./Parameter");r.addParameters=function(e,t){e._parameters=e._parameters||{};for(var n in t){var r=t[n],i=new s(n,r.type,e);e._parameters[n]=i,"custom"===r.type&&(r.set&&(i.set=r.set.bind(i)),r.get&&(i.get=r.get.bind(i))),r.hasOwnProperty("default")&&i.set(r["default"])}};var l=r.prototype=Object.create(a);l.constructor=r,l.param=function(e,t){var n=this._parameters[e];return void 0===n?this:1===arguments.length?n.get():n.set(t)},l.transform=function(e){return e},l.evaluate=function(e){var t=this._stamp<e.stamp&&this.dependency(o.SIGNALS).reduce(function(t,n){return t+=e.signals[n]?1:0},0);return this.transform(e,t)},l.output=function(e){for(var t in this._output)void 0!==e[t]&&(this._output[t]=e[t]);return this},t.exports=r},{"./Parameter":136,"vega-dataflow":42}],142:[function(e,t,n){function r(e){return l.prototype.init.call(this,e),s.addParameters(this,{groupby:{type:"array<field>"}}),this._output={children:"children",parent:"parent"},this.router(!0).produces(!0)}var i=e("datalib"),a=e("vega-dataflow").Tuple,o=e("vega-logging"),s=e("./Transform"),l=e("./BatchTransform"),u=r.prototype=Object.create(l.prototype);u.constructor=r,u.batchTransform=function(e,t){function n(e,t,r){var i=d[e].execute(r);t[u]=i,i.forEach(function(r){r[c]=t,p.push(a.ingest(r)),e+1<l.length?n(e+1,r,r[u]):r[u].forEach(function(e){e[c]=r})})}o.debug(e,["treeifying"]);var r,s,l=this.param("groupby").field,u=this._output.children,c=this._output.parent,f=[{name:"*",ops:["values"],as:[u]}],d=l.map(function(e){return i.groupby(e).summarize(f)}),h=this._internal||[],p=[],g=a.ingest({});for(g[c]=null,p.push(g),n(0,g,t),r=0,s=p.length;r<s;++r)e.add.push(p[r]);for(r=0,s=h.length;r<s;++r)e.rem.push(h[r]);return this._internal=p,e},t.exports=r},{"./BatchTransform":120,"./Transform":141,datalib:27,"vega-dataflow":42,"vega-logging":49}],143:[function(e,t,n){(function(n){function r(t){return u.prototype.init.call(this,t),l.addParameters(this,{sort:{type:"array<field>","default":["-value"]},children:{type:"field","default":"children"},parent:{type:"field","default":"parent"},field:{type:"field","default":"value"},size:{type:"array<value>","default":e("./screen").size},round:{type:"value","default":!0},sticky:{type:"value","default":!1},ratio:{type:"value","default":c},padding:{type:"value","default":null},mode:{type:"value","default":"squarify"}}),this._layout=i.layout.treemap(),this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),l=e("./Transform"),u=e("./BatchTransform"),c=.5*(1+Math.sqrt(5)),f=r.prototype=Object.create(u.prototype);f.constructor=r,f.batchTransform=function(e,t){s.debug(e,["treemap"]);var n=this._layout,r=this._output,i=this.param("sticky"),l=this.param("parent").accessor,u=t.filter(function(e){return null===l(e)})[0];return n.sticky()!==i&&n.sticky(i),n.sort(a.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(u),t.forEach(function(e){o.set(e,r.x,e.x),o.set(e,r.y,e.y),o.set(e,r.width,e.dx),o.set(e,r.height,e.dy),o.set(e,r.depth,e.depth)}),e.fields[r.x]=1,e.fields[r.y]=1,e.fields[r.width]=1,e.fields[r.height]=1,e.fields[r.depth]=1,e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":120,"./Transform":141,"./screen":147,datalib:27,"vega-dataflow":42,"vega-logging":49}],144:[function(e,t,n){(function(n){function r(t){return l.prototype.init.call(this,t),s.addParameters(this,{clipExtent:{type:"array<value>","default":e("./screen").extent},x:{type:"field","default":"layout_x"},y:{type:"field","default":"layout_y"}}),this._layout=i.geom.voronoi(),this._output={path:"layout_path"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("vega-dataflow/src/Tuple"),o=e("vega-logging"),s=e("./Transform"),l=e("./BatchTransform"),u=r.prototype=Object.create(l.prototype);u.constructor=r,u.batchTransform=function(e,t){o.debug(e,["voronoi"]);for(var n=this._output.path,r=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(t),i=0;i<t.length;++i)r[i]&&a.set(t[i],n,"M"+r[i].join("L")+"Z");return e.fields[n]=1,e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":120,"./Transform":141,"./screen":147,"vega-dataflow/src/Tuple":41,"vega-logging":49}],145:[function(e,t,n){(function(n){function r(t){return h.prototype.init.call(this,t),d.addParameters(this,{size:{type:"array<value>","default":e("./screen").size},text:{type:"field","default":"data"},rotate:{type:"field|value","default":0},font:{type:"field|value","default":{value:"sans-serif"}},fontSize:{type:"field|value","default":14},fontStyle:{type:"field|value","default":{value:"normal"}},fontWeight:{type:"field|value","default":{value:"normal"}},fontScale:{type:"array<value>","default":[10,50]},padding:{type:"value","default":1},spiral:{type:"value","default":"archimedean"}}),this._layout=l().canvas(u.instance),this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"},this.mutates(!0)}function i(e){return e&&e.accessor||e}function a(e){var t=Object.create(e);return t._tuple=e,t}var o=e("datalib"),s="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,l="undefined"!=typeof window?window.d3.layout.cloud:"undefined"!=typeof n?n.d3.layout.cloud:null,u=e("vega-scenegraph").canvas,c=e("vega-dataflow/src/Tuple"),f=e("vega-logging"),d=e("./Transform"),h=e("./BatchTransform"),p=r.prototype=Object.create(h.prototype);p.constructor=r,p.batchTransform=function(e,t){f.debug(e,["wordcloud"]);var n,r,l=this._layout,u=this._output,d=this.param("fontSize"),h=d.accessor&&this.param("fontScale");d=d.accessor||s.functor(d),h.length&&(r=s.scale.sqrt().domain(o.extent(t,n=d)).range(h),d=function(e){return r(n(e))}),l.size(this.param("size")).text(i(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(i(this.param("rotate"))).font(i(this.param("font"))).fontStyle(i(this.param("fontStyle"))).fontWeight(i(this.param("fontWeight"))).fontSize(d).words(t.map(a)).on("end",function(e){var t,n,r,i,a=l.size(),o=a[0]>>1,s=a[1]>>1;for(r=0,i=e.length;r<i;++r)t=e[r],n=t._tuple,c.set(n,u.x,t.x+o),c.set(n,u.y,t.y+s),c.set(n,u.font,t.font),c.set(n,u.fontSize,t.size),c.set(n,u.fontStyle,t.style),c.set(n,u.fontWeight,t.weight),c.set(n,u.rotate,t.rotate)}).start();for(var p in u)e.fields[u[p]]=1;return e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":120,"./Transform":141,"./screen":147,datalib:27,"vega-dataflow/src/Tuple":41,"vega-logging":49,"vega-scenegraph":50}],146:[function(e,t,n){t.exports={aggregate:e("./Aggregate"),bin:e("./Bin"),cross:e("./Cross"),countpattern:e("./CountPattern"),linkpath:e("./LinkPath"),facet:e("./Facet"),filter:e("./Filter"),fold:e("./Fold"),force:e("./Force"),formula:e("./Formula"),geo:e("./Geo"),geopath:e("./GeoPath"),hierarchy:e("./Hierarchy"),impute:e("./Impute"),lookup:e("./Lookup"),pie:e("./Pie"),rank:e("./Rank"),sort:e("./Sort"),stack:e("./Stack"),treeify:e("./Treeify"),treemap:e("./Treemap"),voronoi:e("./Voronoi"),wordcloud:e("./Wordcloud")}},{"./Aggregate":119,"./Bin":121,"./CountPattern":122,"./Cross":123,"./Facet":124,"./Filter":126,"./Fold":127,"./Force":128,"./Formula":129,"./Geo":130,"./GeoPath":131,"./Hierarchy":132,"./Impute":133,"./LinkPath":134,"./Lookup":135,"./Pie":137,"./Rank":138,"./Sort":139,"./Stack":140,"./Treeify":142,"./Treemap":143,"./Voronoi":144,"./Wordcloud":145}],147:[function(e,t,n){t.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},{}],148:[function(e,t,n){function r(e,t,n,r){var a=n||i(e);return o(e,t,a,r)}function i(e){switch(e.type){case l:return l;case u:return u;case f:return c;default:return d}}function a(e,t,n,r){function i(e){return(t[0]<0?-Math.log(e>0?0:-e):Math.log(e<0?0:e))/Math.log(s)}function a(e){return t[0]<0?-Math.pow(s,-e):Math.pow(s,e)}if(null==n)return r;var o,s=e.base(),l=Math.min(s,e.ticks().length/n),u=t[0]>0?(o=1e-12,Math.ceil):(o=-1e-12,Math.floor);return function(e){return a(u(i(e)+o))/e>=l?r(e):""}}function o(e,t,n,r){var i,o=s.format,c="log"===e.type;switch(n){case d:return i=e.domain(),c?a(e,i,t,o.auto.number(r||null)):o.auto.linear(i,t,r||null);case l:return(r?o:o.auto).time(r);case u:return(r?o:o.auto).utc(r);default:return String}}var s=e("datalib"),l="time",u="utc",c="string",f="ordinal",d="number";t.exports={getTickFormat:r}},{datalib:27}],149:[function(e,t,n){var r=e("datalib"),i={};r.extend(i,e("./format")),t.exports=r.extend(i,r)},{"./format":148,datalib:27}],150:[function(e,t,n){t.exports=function(e,t,n,r){return void 0!==e[n]?e[n]:void 0!==t&&void 0!==t[n]?t[n]:void 0!==r?r:void 0}},{}]},{},[1])(1)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.vl=e()}}(function(){var e;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){},{}],2:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e("d3-time",["exports"],i):i(t.d3_time={})}(this,function(e){"use strict";function t(e,n,r,o){function s(t){return e(t=new Date((+t))),t}return s.floor=s,s.round=function(t){var r=new Date((+t)),i=new Date(t-1);return e(r),e(i),n(i,1),t-r<i-t?r:i;
},s.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},s.offset=function(e,t){return n(e=new Date((+e)),null==t?1:Math.floor(t)),e},s.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date((+r)),i=null==i?1:Math.floor(i),!(t<r&&i>0))return a;for(n(t,1),e(t),t<r&&a.push(new Date((+t)));n(t,i),e(t),t<r;)a.push(new Date((+t)));return a},s.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(s.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),Math.floor(r(i,a))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,a=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var s=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()}),l=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),u=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),c=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=n(0),d=n(1),h=n(2),p=n(3),g=n(4),m=n(5),v=n(6),y=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),b=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),_=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),E=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),x=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),S=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),T=r(0),w=r(1),A=r(2),C=r(3),k=r(4),O=r(5),I=r(6),M=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),N=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),D=o.range,L=s.range,$=l.range,R=u.range,P=c.range,F=f.range,U=d.range,j=h.range,H=p.range,z=g.range,B=m.range,q=v.range,Y=f.range,X=y.range,W=b.range,G=o,V=D,K=_.range,Z=E.range,Q=x.range,J=S.range,ee=T.range,te=w.range,ne=A.range,re=C.range,ie=k.range,ae=O.range,oe=I.range,se=T.range,le=M.range,ue=N.range,ce="0.1.1";e.version=ce,e.milliseconds=D,e.seconds=L,e.minutes=$,e.hours=R,e.days=P,e.sundays=F,e.mondays=U,e.tuesdays=j,e.wednesdays=H,e.thursdays=z,e.fridays=B,e.saturdays=q,e.weeks=Y,e.months=X,e.years=W,e.utcMillisecond=G,e.utcMilliseconds=V,e.utcSeconds=K,e.utcMinutes=Z,e.utcHours=Q,e.utcDays=J,e.utcSundays=ee,e.utcMondays=te,e.utcTuesdays=ne,e.utcWednesdays=re,e.utcThursdays=ie,e.utcFridays=ae,e.utcSaturdays=oe,e.utcWeeks=se,e.utcMonths=le,e.utcYears=ue,e.millisecond=o,e.second=s,e.minute=l,e.hour=u,e.day=c,e.sunday=f,e.monday=d,e.tuesday=h,e.wednesday=p,e.thursday=g,e.friday=m,e.saturday=v,e.week=f,e.month=y,e.year=b,e.utcSecond=_,e.utcMinute=E,e.utcHour=x,e.utcDay=S,e.utcSunday=T,e.utcMonday=w,e.utcTuesday=A,e.utcWednesday=C,e.utcThursday=k,e.utcFriday=O,e.utcSaturday=I,e.utcWeek=T,e.utcMonth=M,e.utcYear=N,e.interval=t})},{}],3:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,s,l,u,c,f=e.maxbins||15,d=e.base||10,h=Math.log(d),p=e.div||[5,2],g=e.min,m=e.max,v=m-g;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,v/f,0,e.steps.length))];else{for(n=Math.ceil(Math.log(f)/h),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(v)/h)-n));Math.ceil(v/t)>f;)t*=d;for(u=0;u<p.length;++u)l=t/p[u],l>=r&&v/l<=f&&(t=l)}return l=Math.log(t),s=l>=0?0:~~(-l/h)+1,c=Math.pow(d,-s-1),g=Math.min(g,Math.floor(g/t+c)*t),m=Math.ceil(m/t)*t,{start:g,stop:m,step:t,unit:{precision:s},value:a,index:o}}function i(e,t,n,r){for(;n<r;){var i=n+r>>>1;u.cmp(e[i],t)<0?n=i+1:r=i}return n}function a(e){return this.step*Math.floor(e/this.step+f)}function o(e){return Math.floor((e-this.start)/this.step+f)}function s(e){return this.unit.date(a.call(this,e))}function l(e){return o.call(this,this.unit.unit(e))}var u=e("../util"),c=e("../time"),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?c.utc:c,n=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,u=+i-+n,f=e.unit?t[e.unit]:t.find(u,o,a),d=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:a,minstep:f.minstep,steps:f.step});return d.unit=f,d.index=l,e.raw||(d.value=s),d},t.exports=r},{"../time":5,"../util":6}],4:[function(e,t,n){var r=e("./util"),i=t.exports;i.repeat=function(e,t){var n,r=Array(t);for(n=0;n<t;++n)r[n]=e;return r},i.zeros=function(e){return i.repeat(0,e)},i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(n<0)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},i.random={},i.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,r=function(){return e+n*Math.random()};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r>=e&&r<=t?1/n:0},r.cdf=function(r){return r<e?0:r>t?1:(r-e)/n},r.icdf=function(t){return t>=0&&t<=1?e+t*n:NaN},r},i.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,r=function(){return e+Math.floor(n*Math.random())};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r===Math.floor(r)&&r>=e&&r<t?1/n:0},r.cdf=function(r){var i=Math.floor(r);return i<e?0:i>=t?1:(i-e+1)/n},r.icdf=function(t){return t>=0&&t<=1?e-1+Math.floor(t*n):NaN},r},i.random.normal=function(e,t){e=e||0,t=t||1;var n,r=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,r=a*a+o*o;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(n){var r=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*r},r.cdf=function(n){var r,i=(n-e)/t,a=Math.abs(i);if(a>37)r=0;else{var o,s=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,r=s*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,r/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,r=s/o/2.506628274631)}return i>0?1-r:r},r.icdf=function(n){if(n<=0||n>=1)return NaN;var r=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,o=Math.log(1-r*r)/i,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+t*Math.SQRT2*s},r},i.random.bootstrap=function(e,t){var n=e.filter(r.isValid),a=n.length,o=t?i.random.normal(0,t):null,s=function(){return n[~~(Math.random()*a)]+(o?o():0)};return s.samples=function(e){return i.zeros(e).map(s)},s}},{"./util":6}],5:[function(e,t,n){function r(e){return u.setTime(+e),u}function i(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,t,n,r,a,o){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,a,o)}function o(e,t,n,r){var i,a,o,s=p[0];for(i=1,a=p.length;i<a;++i)if(s=p[i],t>s[0]){if(o=t/s[0],o>r)return e[p[i-1][1]];if(o>=n)return e[s[1]]}return e[p[a-1][1]]}function s(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return o(e,t,n,r)},r}var l=e("d3-time"),u=new Date,c=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),d=[a("second",l.second,c),a("minute",l.minute,c),a("hour",l.hour,c),a("day",l.day,c,[1,7]),a("month",l.month,c,[1,3,6]),a("year",l.year,c),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],h=[a("second",l.utcSecond,f),a("minute",l.utcMinute,f),a("hour",l.utcHour,f),a("day",l.utcDay,f,[1,7]),a("month",l.utcMonth,f,[1,3,6]),a("year",l.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],p=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=s(d),t.exports.utc=s(h)},{"d3-time":2}],6:[function(e,t,n){(function(e){function n(e,t){var n,r="";for(n=0;n<e;++n)r+=t;return r}function r(e,t,n){var r=0,i=e.split(l);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,r<=t}).reverse():i.filter(function(e){return r+=e.length,r<=t}),e.length?e.join("").trim():i[0].slice(0,t)}var i=t.exports,a="__name__";i.namedfunc=function(e,t){return t[a]=e,t},i.name=function(e){return null==e?null:e[a]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.toMap=function(e,t){return(t=i.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},i.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;r<t;++r)n+="|"+String(e[r]);return n};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof e&&e.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"!==e&&!!e},i.date=function(e,t){var n=t?t:Date;return null==e||""===e?null:n.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var s=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(s).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var t;return i.isString(e)&&(t=i.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},i.$func=function(e,t){return function(n){n=i.$(n)||i.identity;var r=e+(i.name(n)?"_"+i.name(n):"");return i.namedfunc(r,function(e){return t(n(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,t){e=i.$(e);var n=i.isArray(t)?i.toMap(t):t;return function(t){return!!n[e(t)]}},i.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),i.accessor(e)}),function(n,r){var a,o,s,l;for(a=0,o=e.length;a<o;++a)if(s=e[a],l=i.cmp(s(n),s(r)))return l*t[a];return 0}},i.cmp=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},i.numcmp=function(e,t){return e-t},i.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return a<o?-1:a>o?1:r[n(e)]-r[n(i)]}),e},i.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},i.pad=function(e,t,r,i){i=i||" ";var a=t-e.length;if(a<=0)return e;switch(r){case"left":return n(a,i)+e;case"middle":case"center":return n(Math.floor(a/2),i)+e+n(Math.ceil(a/2),i);default:return e+n(a,i)}},i.truncate=function(e,t,n,i,a){var o=e.length;if(o<=t)return e;a=void 0!==a?String(a):"…";var s=Math.max(0,t-a.length);switch(n){case"left":return a+(i?r(e,s,1):e.slice(o-s));case"middle":case"center":var l=Math.ceil(s/2),u=Math.floor(s/2);return(i?r(e,l):e.slice(0,l))+a+(i?r(e,u,1):e.slice(o-u));default:return(i?r(e,s):e.slice(0,s))+a}};var l=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:1}],7:[function(e,t,n){var r="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var o="boolean"==typeof t.cycles&&t.cycles,s=t.replacer||function(e,t){return t},l=t.cmp&&function(e){return function(t){return function(n,r){var i={key:n,value:t[n]},a={key:r,value:t[r]};return e(i,a)}}}(t.cmp),u=[];return function c(e,t,f,d){var h=n?"\n"+new Array(d+1).join(n):"",p=n?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),f=s.call(e,t,f),void 0!==f){if("object"!=typeof f||null===f)return r.stringify(f);if(i(f)){for(var g=[],m=0;m<f.length;m++){var v=c(f,m,f[m],d+1)||r.stringify(null);g.push(h+n+v)}return"["+g.join(",")+h+"]"}if(u.indexOf(f)!==-1){if(o)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(f);for(var y=a(f).sort(l&&l(f)),g=[],m=0;m<y.length;m++){var t=y[m],b=c(f,t,f[t],d+1);if(b){var _=r.stringify(t)+p+b;g.push(h+n+_)}}return u.splice(u.indexOf(f),1),"{"+g.join(",")+h+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},{jsonify:8}],8:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":9,"./lib/stringify":10}],9:[function(e,t,n){var r,i,a,o,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=function(e){throw{name:"SyntaxError",message:e,at:r,text:a}},u=function(e){return e&&e!==i&&l("Expected '"+e+"' instead of '"+i+"'"),i=a.charAt(r),r+=1,i},c=function(){var e,t="";for("-"===i&&(t="-",u("-"));i>="0"&&i<="9";)t+=i,u();if("."===i)for(t+=".";u()&&i>="0"&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,u(),"-"!==i&&"+"!==i||(t+=i,u());i>="0"&&i<="9";)t+=i,u();return e=+t,isFinite(e)?e:void l("Bad number")},f=function(){var e,t,n,r="";if('"'===i)for(;u();){if('"'===i)return u(),r;if("\\"===i)if(u(),"u"===i){for(n=0,t=0;t<4&&(e=parseInt(u(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof s[i])break;r+=s[i]}else r+=i}l("Bad string")},d=function(){for(;i&&i<=" ";)u()},h=function(){switch(i){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}l("Unexpected '"+i+"'")},p=function(){var e=[];if("["===i){if(u("["),d(),"]"===i)return u("]"),e;for(;i;){if(e.push(o()),d(),"]"===i)return u("]"),e;u(","),d()}}l("Bad array")},g=function(){var e,t={};if("{"===i){if(u("{"),d(),"}"===i)return u("}"),t;for(;i;){if(e=f(),d(),u(":"),Object.hasOwnProperty.call(t,e)&&l('Duplicate key "'+e+'"'),t[e]=o(),d(),"}"===i)return u("}"),t;u(","),d()}}l("Bad object")};o=function(){switch(d(),i){case"{":return g();case"[":return p();case'"':return f();case"-":return c();default:return i>="0"&&i<="9"?c():h()}},t.exports=function(e,t){var n;return a=e,r=0,i=" ",n=o(),d(),i&&l("Syntax error"),"function"==typeof t?function s(e,n){var r,i,a=e[n];if(a&&"object"==typeof a)for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=s(a,r),void 0!==i?a[r]=i:delete a[r]);return t.call(e,n,a)}({"":n},""):n}},{}],10:[function(e,t,n){function r(e){return l.lastIndex=0,l.test(e)?'"'+e.replace(l,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function i(e,t){var n,l,u,c,f,d=a,h=t[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),"function"==typeof s&&(h=s.call(t,e,h)),typeof h){case"string":return r(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(a+=o,f=[],"[object Array]"===Object.prototype.toString.apply(h)){for(c=h.length,n=0;n<c;n+=1)f[n]=i(n,h)||"null";return u=0===f.length?"[]":a?"[\n"+a+f.join(",\n"+a)+"\n"+d+"]":"["+f.join(",")+"]",a=d,u}if(s&&"object"==typeof s)for(c=s.length,n=0;n<c;n+=1)l=s[n],"string"==typeof l&&(u=i(l,h),u&&f.push(r(l)+(a?": ":":")+u));else for(l in h)Object.prototype.hasOwnProperty.call(h,l)&&(u=i(l,h),u&&f.push(r(l)+(a?": ":":")+u));return u=0===f.length?"{}":a?"{\n"+a+f.join(",\n"+a)+"\n"+d+"}":"{"+f.join(",")+"}",a=d,u}}var a,o,s,l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.exports=function(e,t,n){var r;if(a="",o="","number"==typeof n)for(r=0;r<n;r+=1)o+=" ";else"string"==typeof n&&(o=n);if(s=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return i("",{"":e})}},{}],11:[function(e,t,n){"use strict";!function(e){e[e.VALUES="values"]="VALUES",e[e.COUNT="count"]="COUNT",e[e.VALID="valid"]="VALID",e[e.MISSING="missing"]="MISSING",e[e.DISTINCT="distinct"]="DISTINCT",e[e.SUM="sum"]="SUM",e[e.MEAN="mean"]="MEAN",e[e.AVERAGE="average"]="AVERAGE",e[e.VARIANCE="variance"]="VARIANCE",e[e.VARIANCEP="variancep"]="VARIANCEP",e[e.STDEV="stdev"]="STDEV",e[e.STDEVP="stdevp"]="STDEVP",e[e.MEDIAN="median"]="MEDIAN",e[e.Q1="q1"]="Q1",e[e.Q3="q3"]="Q3",e[e.MODESKEW="modeskew"]="MODESKEW",e[e.MIN="min"]="MIN",e[e.MAX="max"]="MAX",e[e.ARGMIN="argmin"]="ARGMIN",e[e.ARGMAX="argmax"]="ARGMAX"}(n.AggregateOp||(n.AggregateOp={}));var r=n.AggregateOp;n.AGGREGATE_OPS=[r.VALUES,r.COUNT,r.VALID,r.MISSING,r.DISTINCT,r.SUM,r.MEAN,r.AVERAGE,r.VARIANCE,r.VARIANCEP,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MODESKEW,r.MIN,r.MAX,r.ARGMIN,r.ARGMAX],n.SUM_OPS=[r.COUNT,r.SUM,r.DISTINCT],n.SHARED_DOMAIN_OPS=[r.MEAN,r.AVERAGE,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MIN,r.MAX]},{}],12:[function(e,t,n){"use strict";!function(e){e[e.TOP="top"]="TOP",e[e.RIGHT="right"]="RIGHT",e[e.LEFT="left"]="LEFT",e[e.BOTTOM="bottom"]="BOTTOM"}(n.AxisOrient||(n.AxisOrient={}));n.AxisOrient;n.defaultAxisConfig={offset:void 0,grid:void 0,labels:!0,labelMaxLength:25,tickSize:void 0,characterWidth:6},n.defaultFacetAxisConfig={axisWidth:0,labels:!0,grid:!1,tickSize:0}},{}],13:[function(e,t,n){"use strict";function r(e){switch(e){case i.ROW:case i.COLUMN:case i.SIZE:case i.SHAPE:return 6;default:return 10}}var i=e("./channel");n.autoMaxBins=r},{"./channel":14}],14:[function(e,t,n){"use strict";function r(e,t){return!!i(e)[t]}function i(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.DETAIL:case n.ORDER:case n.OPACITY:case n.ROW:case n.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,line:!0,area:!0,text:!0,boxplot:!0,hexagon:!0,leader:!0,contour:!0,scatter3D:!0,radar:!0};case n.X2:return{scatter3D:!0,radar:!0};case n.Y2:return{rule:!0,bar:!0,area:!0,radar:!0};case n.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,radar:!0};case n.SHAPE:return{point:!0,radar:!0};case n.TEXT:return{text:!0};case n.PATH:return{line:!0,radar:!0}}return{}}function a(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.OPACITY:case n.LABEL:case n.DETAIL:return{measure:!0,dimension:!0};case n.ROW:case n.COLUMN:case n.SHAPE:return{measure:!1,dimension:!0};case n.X2:case n.Y2:case n.SIZE:case n.TEXT:return{measure:!0,dimension:!1};case n.PATH:return{measure:!1,dimension:!0}}throw new Error("Invalid encoding channel"+e)}function o(e){return!s.contains([n.DETAIL,n.PATH,n.TEXT,n.LABEL,n.ORDER],e)}var s=e("./util");!function(e){e[e.X="x"]="X",e[e.Y="y"]="Y",e[e.X2="x2"]="X2",e[e.Y2="y2"]="Y2",e[e.ROW="row"]="ROW",e[e.COLUMN="column"]="COLUMN",e[e.SHAPE="shape"]="SHAPE",e[e.SIZE="size"]="SIZE",e[e.COLOR="color"]="COLOR",e[e.TEXT="text"]="TEXT",e[e.DETAIL="detail"]="DETAIL",e[e.LABEL="label"]="LABEL",e[e.PATH="path"]="PATH",e[e.ORDER="order"]="ORDER",e[e.OPACITY="opacity"]="OPACITY"}(n.Channel||(n.Channel={}));var l=n.Channel;n.X=l.X,n.Y=l.Y,n.X2=l.X2,n.Y2=l.Y2,n.ROW=l.ROW,n.COLUMN=l.COLUMN,n.SHAPE=l.SHAPE,n.SIZE=l.SIZE,n.COLOR=l.COLOR,n.TEXT=l.TEXT,n.DETAIL=l.DETAIL,n.LABEL=l.LABEL,n.PATH=l.PATH,n.ORDER=l.ORDER,n.OPACITY=l.OPACITY,n.CHANNELS=[n.X,n.Y,n.X2,n.Y2,n.ROW,n.COLUMN,n.SIZE,n.SHAPE,n.COLOR,n.PATH,n.ORDER,n.OPACITY,n.TEXT,n.DETAIL,n.LABEL],n.UNIT_CHANNELS=s.without(n.CHANNELS,[n.ROW,n.COLUMN]),n.UNIT_SCALE_CHANNELS=s.without(n.UNIT_CHANNELS,[n.PATH,n.ORDER,n.DETAIL,n.TEXT,n.LABEL,n.X2,n.Y2]),n.NONSPATIAL_CHANNELS=s.without(n.UNIT_CHANNELS,[n.X,n.Y,n.X2,n.Y2]),n.NONSPATIAL_SCALE_CHANNELS=s.without(n.UNIT_SCALE_CHANNELS,[n.X,n.Y,n.X2,n.Y2]),n.STACK_GROUP_CHANNELS=[n.COLOR,n.DETAIL,n.ORDER,n.OPACITY,n.SIZE],n.supportMark=r,n.getSupportedMark=i,n.getSupportedRole=a,n.hasScale=o},{"./util":64}],15:[function(e,t,n){"use strict";function r(e,t){return t.reduce(function(t,n){return e.axis(n)&&(t[n]=a(n,e)),t},{})}function i(e,t){var r=e===y.COLUMN,i=e===y.ROW,a=r?"x":i?"y":e,o={type:a,scale:t.scaleName(e),grid:!0,tickSize:0,properties:{labels:{text:{value:""}},axis:{stroke:{value:"transparent"}}}},s=t.axis(e);["layer","ticks","values","subdivide"].forEach(function(r){var i,a=(i=n[r])?i(t,e,o):s[r];void 0!==a&&(o[r]=a)});var l=t.axis(e).properties||{};return["grid"].forEach(function(n){var r=S[n]?S[n](t,e,l[n]||{},o):l[n];void 0!==r&&E.keys(r).length>0&&(o.properties=o.properties||{},o.properties[n]=r)}),o}function a(e,t){var r=e===y.COLUMN,i=e===y.ROW,a=r?"x":i?"y":e,o=t.axis(e),s={type:a,scale:t.scaleName(e)};["format","grid","layer","offset","orient","tickSize","ticks","tickSizeEnd","title","titleOffset","tickPadding","tickSize","tickSizeMajor","tickSizeMinor","values","subdivide"].forEach(function(r){var i,a=(i=n[r])?i(t,e,s):o[r];void 0!==a&&(s[r]=a)});var l=t.axis(e).properties||{};return["axis","labels","grid","title","ticks","majorTicks","minorTicks"].forEach(function(n){var r=S[n]?S[n](t,e,l[n]||{},s):l[n];void 0!==r&&E.keys(r).length>0&&(s.properties=s.properties||{},s.properties[n]=r)}),s}function o(e,t){return x.numberFormat(e.fieldDef(t),e.axis(t).format,e.config())}function s(e,t){return e.axis(t).offset}function l(e,t){var n=e.axis(t).grid;return void 0!==n?n:!e.isOrdinalScale(t)&&!e.fieldDef(t).bin}function u(e,t){if(t!==y.ROW&&t!==y.COLUMN)return l(e,t)&&(t===y.Y||t===y.X)&&!(e.parent()&&e.parent().isFacet())}function c(e,t,n){var r=e.axis(t).layer;return void 0!==r?r:n.grid?"back":void 0}function f(e,t){var n=e.axis(t).orient;return n?n:t===y.COLUMN?v.AxisOrient.TOP:void 0}function d(e,t){var n=e.axis(t).ticks;return void 0!==n?n:t!==y.X||e.fieldDef(t).bin?void 0:5}function h(e,t){var n=e.axis(t).tickSize;if(void 0!==n)return n}function p(e,t){var n=e.axis(t).tickSizeEnd;if(void 0!==n)return n}function g(e,t){var n=e.axis(t);if(void 0!==n.title)return n.title;var r,i=b.title(e.fieldDef(t),e.config());if(n.titleMaxLength)r=n.titleMaxLength;else if(t!==y.X||e.isOrdinalScale(y.X)){if(t===y.Y&&!e.isOrdinalScale(y.Y)){var a=e;r=a.config().cell.height/e.axis(y.Y).characterWidth}}else{var a=e;r=a.config().cell.width/e.axis(y.X).characterWidth}return r?E.truncate(i,r):i}function m(e,t){var n=e.axis(t).titleOffset;if(void 0!==n)return n}var v=e("../axis"),y=e("../channel"),b=e("../fielddef"),_=e("../type"),E=e("../util"),x=e("./common");n.parseAxisComponent=r,n.parseInnerAxis=i,n.parseAxis=a,n.format=o,n.offset=s,n.gridShow=l,n.grid=u,n.layer=c,n.orient=f,n.ticks=d,n.tickSize=h,n.tickSizeEnd=p,n.title=g,n.titleOffset=m;var S;!function(e){function t(e,t,n){var r=e.axis(t);return E.extend(void 0!==r.axisColor?{stroke:{value:r.axisColor}}:{},void 0!==r.axisWidth?{strokeWidth:{value:r.axisWidth}}:{},n||{})}function n(e,t,n){var r=e.axis(t);return E.extend(void 0!==r.gridColor?{stroke:{value:r.gridColor}}:{},void 0!==r.gridOpacity?{strokeOpacity:{value:r.gridOpacity}}:{},void 0!==r.gridWidth?{strokeWidth:{value:r.gridWidth}}:{},void 0!==r.gridDash?{strokeDashOffset:{value:r.gridDash}}:{},n||{})}function r(e,t,n,r){var i=e.fieldDef(t),a=e.axis(t),o=e.config();return a.labels?(E.contains([_.NOMINAL,_.ORDINAL],i.type)&&a.labelMaxLength?n=E.extend({text:{template:'{{ datum["data"] | truncate:'+a.labelMaxLength+" }}"}},n||{}):i.type===_.TEMPORAL&&(n=E.extend({text:{template:x.timeTemplate('datum["data"]',i.timeUnit,a.format,a.shortTimeLabels,o)}},n)),void 0!==a.labelAngle?n.angle={value:a.labelAngle}:t!==y.X||!b.isDimension(i)&&i.type!==_.TEMPORAL||(n.angle={value:270}),void 0!==a.labelAlign?n.align={value:a.labelAlign}:n.angle&&(270===n.angle.value?n.align={value:"top"===r.orient?"left":"x"===r.type?"right":"center"}:90===n.angle.value&&(n.align={value:"center"})),void 0!==a.labelBaseline?n.baseline={value:a.labelBaseline}:n.angle&&(270===n.angle.value?n.baseline={value:"x"===r.type?"middle":"bottom"}:90===n.angle.value&&(n.baseline={value:"bottom"})),void 0!==a.tickLabelColor&&(n.stroke={value:a.tickLabelColor}),void 0!==a.tickLabelFont&&(n.font={value:a.tickLabelFont}),void 0!==a.tickLabelFontSize&&(n.fontSize={value:a.tickLabelFontSize}),0===E.keys(n).length?void 0:n):E.extend({text:""},n)}function i(e,t,n){var r=e.axis(t);return E.extend(void 0!==r.tickColor?{stroke:{value:r.tickColor}}:{},void 0!==r.tickWidth?{strokeWidth:{value:r.tickWidth}}:{},n||{})}function a(e,t,n){var r=e.axis(t);return E.extend(void 0!==r.titleColor?{stroke:{value:r.titleColor}}:{},void 0!==r.titleFont?{font:{value:r.titleFont}}:{},void 0!==r.titleFontSize?{fontSize:{value:r.titleFontSize}}:{},void 0!==r.titleFontWeight?{fontWeight:{value:r.titleFontWeight}}:{},n||{})}e.axis=t,e.grid=n,e.labels=r,e.ticks=i,e.title=a}(S=n.properties||(n.properties={}))},{"../axis":12,"../channel":14,"../fielddef":52,"../type":63,"../util":64,"./common":16}],16:[function(e,t,n){"use strict";function r(e,t,n){return _.isFacetSpec(e)?new m.FacetModel(e,t,n):_.isLayerSpec(e)?new v.LayerModel(e,t,n):_.isUnitSpec(e)?new b.UnitModel(e,t,n):(console.error("Invalid spec."),null)}function i(e,t){var r=t.config().mark.filled,i=t.fieldDef(f.COLOR),a=t.fieldDef(f.OPACITY);r?o(e,t,n.FILL_CONFIG):o(e,t,n.STROKE_CONFIG);var s,l;t.has(f.COLOR)?s={scale:t.scaleName(f.COLOR),field:t.field(f.COLOR,i.type===p.ORDINAL?{prefix:"rank"}:{})}:i&&i.value&&(s={value:i.value}),t.has(f.OPACITY)?l={scale:t.scaleName(f.OPACITY),field:t.field(f.OPACITY,a.type===p.ORDINAL?{prefix:"rank"}:{})}:a&&a.value&&(l={value:a.value}),void 0!==s?r?e.fill=s:e.stroke=s:e[r?"fill":"stroke"]=e[r?"fill":"stroke"]||{value:t.config().mark.color},!e.fill&&g.contains([c.BAR,c.POINT,c.CIRCLE,c.SQUARE],t.mark())&&(e.fill={value:"transparent"}),void 0!==l&&(e.opacity=l)}function a(e,t,n){return n.forEach(function(n){var r=t[n];void 0!==r&&(e[n]={value:r})}),e}function o(e,t,n){return a(e,t.config().mark,n)}function s(e,t,n){if(e.type===p.QUANTITATIVE&&!e.bin)return t||n.numberFormat}function l(e){return(e.sort===h.SortOrder.DESCENDING?"-":"")+d.field(e,{binSuffix:"mid"})}function u(e,t,n,r,i){if(!t||n){var a=n||i.timeFormat;return"{{"+e+" | time:'"+a+"'}}"}return y.template(t,e,r)}var c=e("../mark"),f=e("../channel"),d=e("../fielddef"),h=e("../sort"),p=e("../type"),g=e("../util"),m=e("./facet"),v=e("./layer"),y=e("../timeunit"),b=e("./unit"),_=e("../spec");n.buildModel=r,n.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","opacity"],n.FILL_CONFIG=["fill","fillOpacity","opacity"],n.FILL_STROKE_CONFIG=g.union(n.STROKE_CONFIG,n.FILL_CONFIG),n.applyColorAndOpacity=i,n.applyConfig=a,n.applyMarkConfig=o,n.numberFormat=s,n.sortField=l,n.timeTemplate=u},{"../channel":14,"../fielddef":52,"../mark":55,"../sort":58,"../spec":59,"../timeunit":61,"../type":63,"../util":64,"./facet":32,"./layer":33,"./unit":46}],17:[function(e,t,n){"use strict";function r(e){var t=s.normalize(e),n=u.buildModel(t,null,"");return n.parse(),i(n)}function i(e){var t=e.config(),n=l.extend({width:1,height:1,padding:"auto"},t.viewport?{viewport:t.viewport}:{},t.background?{background:t.background}:{},{data:[].concat(e.assembleData([]),e.assembleLayout([])),marks:[a(e)]});return{spec:n}}function a(e){var t=l.extend({name:e.name("root"),type:"group"},e.description()?{description:e.description()}:{},{from:{data:o.LAYOUT},properties:{update:l.extend({width:{field:"width"},height:{field:"height"}},e.assembleParentGroupProperties(e.config().cell))}});return l.extend(t,e.assembleGroup())}var o=e("../data"),s=e("../spec"),l=e("../util"),u=e("./common");n.compile=r,n.assembleRootGroup=a},{"../data":48,"../spec":59,"../util":64,"./common":16}],18:[function(e,t,n){
"use strict";function r(e,t,n){return c.extend(["filled","opacity","orient","align"].reduce(function(r,o){var l=n.mark[o];switch(o){case"filled":void 0===l&&(r[o]=e!==u.POINT&&e!==u.LINE&&e!==u.RULE);break;case"opacity":void 0===l&&(c.contains([u.POINT,u.TICK,u.CIRCLE,u.SQUARE],e)&&(s.isAggregate(t)&&!s.has(t,a.DETAIL)||(r[o]=.7)),e===u.AREA&&(r[o]=.7));break;case"orient":r[o]=i(e,t,n.mark);break;case"align":void 0===l&&(r[o]=s.has(t,a.X)?"center":"right")}return r},{}),n.mark)}function i(e,t,n){switch(void 0===n&&(n={}),e){case u.POINT:case u.CIRCLE:case u.SQUARE:case u.TEXT:case u.HEXAGON:case u.LEADER:case u.CONTOUR:case u.SCATTER3D:return}var r=l.isMeasure(t.x)||l.isMeasure(t.x2),i=l.isMeasure(t.y)||l.isMeasure(t.y2),a=t.y&&t.y2,s=t.x&&t.x2;switch(e){case u.TICK:return r&&!i?o.Orient.VERTICAL:o.Orient.HORIZONTAL;case u.RULE:if(s)return o.Orient.HORIZONTAL;if(a)return o.Orient.VERTICAL;if(t.y)return o.Orient.HORIZONTAL;if(t.x)return o.Orient.VERTICAL;return;case u.BAR:case u.BOXPLOT:case u.AREA:case u.HEXAGON:case u.LEADER:case u.SCATTER3D:case u.CONTOUR:case u.RADAR:if(a)return o.Orient.VERTICAL;if(s)return o.Orient.HORIZONTAL;case u.LINE:return r&&!i?o.Orient.HORIZONTAL:o.Orient.VERTICAL}return console.warn("orient unimplemented for mark",e),o.Orient.VERTICAL}var a=e("../channel"),o=e("../config"),s=e("../encoding"),l=e("../fielddef"),u=e("../mark"),c=e("../util");n.initMarkConfig=r,n.orient=i},{"../channel":14,"../config":47,"../encoding":50,"../fielddef":52,"../mark":55,"../util":64}],19:[function(e,t,n){"use strict";var r,i=e("../../bin"),a=e("../../channel"),o=e("../../fielddef"),s=e("../../util");!function(e){function t(e){return e.reduce(function(t,n,r){var l=e.fieldDef(r).bin;if(l){var u=s.extend({type:"bin",field:n.field,output:{start:o.field(n,{binSuffix:"start"}),mid:o.field(n,{binSuffix:"mid"}),end:o.field(n,{binSuffix:"end"})}},"boolean"==typeof l?{}:l);u.maxbins||u.step||(u.maxbins=i.autoMaxBins(r));var c=[u],f=e.isOrdinalScale(r)||r===a.COLOR;f&&c.push({type:"formula",field:o.field(n,{binSuffix:"range"}),expr:o.field(n,{datum:!0,binSuffix:"start"})+" + '-' + "+o.field(n,{datum:!0,binSuffix:"end"})});var d=s.hash(l)+"_"+n.field+"oc:"+f;t[d]=c}return t},{})}function n(e){var n=t(e),r=e.child().component.data;return r.source||(s.extend(n,r.bin),delete r.bin),n}function r(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;t.source||(s.extend(n,t.bin),delete t.bin)}),n}function l(e){return s.flatten(s.vals(e.bin))}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=l}(r=n.bin||(n.bin={}))},{"../../bin":13,"../../channel":14,"../../fielddef":52,"../../util":64}],20:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../type"),o=e("../../util");!function(e){function t(e){var t={};return e.has(i.COLOR)&&e.fieldDef(i.COLOR).type===a.ORDINAL&&(t[e.field(i.COLOR)]=[{type:"sort",by:e.field(i.COLOR)},{type:"rank",field:e.field(i.COLOR),output:{rank:e.field(i.COLOR,{prefix:"rank"})}}]),t}function n(e){var t=e.child().component.data;if(!t.source){var n=t.colorRank;return delete t.colorRank,n}return{}}function r(e){var t={};return e.children().forEach(function(e){var n=e.component.data;n.source||(o.extend(t,n.colorRank),delete n.colorRank)}),t}function s(e){return o.flatten(o.vals(e.colorRank))}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=s}(r=n.colorRank||(n.colorRank={}))},{"../../channel":14,"../../type":63,"../../util":64}],21:[function(e,t,n){"use strict";function r(e){return{formatParse:u.formatParse.parseUnit(e),nullFilter:c.nullFilter.parseUnit(e),filter:f.filter.parseUnit(e),nonPositiveFilter:p.nonPositiveFilter.parseUnit(e),source:l.source.parseUnit(e),bin:d.bin.parseUnit(e),calculate:h.formula.parseUnit(e),timeUnit:v.timeUnit.parseUnit(e),timeUnitDomain:y.timeUnitDomain.parseUnit(e),summary:g.summary.parseUnit(e),stackScale:m.stackScale.parseUnit(e),colorRank:b.colorRank.parseUnit(e)}}function i(e){return{formatParse:u.formatParse.parseFacet(e),nullFilter:c.nullFilter.parseFacet(e),filter:f.filter.parseFacet(e),nonPositiveFilter:p.nonPositiveFilter.parseFacet(e),source:l.source.parseFacet(e),bin:d.bin.parseFacet(e),calculate:h.formula.parseFacet(e),timeUnit:v.timeUnit.parseFacet(e),timeUnitDomain:y.timeUnitDomain.parseFacet(e),summary:g.summary.parseFacet(e),stackScale:m.stackScale.parseFacet(e),colorRank:b.colorRank.parseFacet(e)}}function a(e){return{filter:f.filter.parseLayer(e),formatParse:u.formatParse.parseLayer(e),nullFilter:c.nullFilter.parseLayer(e),nonPositiveFilter:p.nonPositiveFilter.parseLayer(e),source:l.source.parseLayer(e),bin:d.bin.parseLayer(e),calculate:h.formula.parseLayer(e),timeUnit:v.timeUnit.parseLayer(e),timeUnitDomain:y.timeUnitDomain.parseLayer(e),summary:g.summary.parseLayer(e),stackScale:m.stackScale.parseLayer(e),colorRank:b.colorRank.parseLayer(e)}}function o(e,t){var n=e.component.data,r=l.source.assemble(e,n);if(r&&t.push(r),g.summary.assemble(n,e).forEach(function(e){t.push(e)}),t.length>0){var i=t[t.length-1],a=b.colorRank.assemble(n);a.length>0&&(i.transform=(i.transform||[]).concat(a));var o=p.nonPositiveFilter.assemble(n);o.length>0&&(i.transform=(i.transform||[]).concat(o))}else{if(s.keys(n.colorRank).length>0)throw new Error("Invalid colorRank not merged");if(s.keys(n.nonPositiveFilter).length>0)throw new Error("Invalid nonPositiveFilter not merged")}var u=m.stackScale.assemble(n);return u&&t.push(u),y.timeUnitDomain.assemble(n).forEach(function(e){t.push(e)}),t}var s=e("../../util"),l=e("./source"),u=e("./formatparse"),c=e("./nullfilter"),f=e("./filter"),d=e("./bin"),h=e("./formula"),p=e("./nonpositivenullfilter"),g=e("./summary"),m=e("./stackscale"),v=e("./timeunit"),y=e("./timeunitdomain"),b=e("./colorrank");n.parseUnitData=r,n.parseFacetData=i,n.parseLayerData=a,n.assembleData=o},{"../../util":64,"./bin":19,"./colorrank":20,"./filter":22,"./formatparse":23,"./formula":24,"./nonpositivenullfilter":25,"./nullfilter":26,"./source":27,"./stackscale":28,"./summary":29,"./timeunit":30,"./timeunitdomain":31}],22:[function(e,t,n){"use strict";var r,i=e("../../filter"),a=e("../../util");!function(e){function t(e){var t=e.transform().filter;return a.isArray(t)?"("+t.map(function(e){return i.expression(e)}).filter(function(e){return void 0!==e}).join(") && (")+")":t?i.expression(t):void 0}function n(e){var n=t(e),r=e.child().component.data;return!r.source&&r.filter&&(n=(n?n+" && ":"")+r.filter,delete r.filter),n}function r(e){var n=t(e);return e.children().forEach(function(t){var r=t.component.data;e.compatibleSource(t)&&r.filter&&r.filter===n&&delete r.filter}),n}function o(e){var t=e.filter;return t?[{type:"filter",test:t}]:[]}e.parse=t,e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=o}(r=n.filter||(n.filter={}))},{"../../filter":53,"../../util":64}],23:[function(e,t,n){"use strict";var r,i=e("../../fielddef"),a=e("../../type"),o=e("../../util");!function(e){function t(e){var t=(e.transform().calculate||[]).reduce(function(e,t){return e[t.field]=!0,e},{}),n={};return e.forEach(function(e){if(e.type===a.TEMPORAL)n[e.field]="date";else if(e.type===a.QUANTITATIVE){if(i.isCount(e)||t[e.field])return;n[e.field]="number"}}),n}function n(e){var n=t(e),r=e.child().component.data;return!r.source&&r.formatParse&&(o.extend(n,r.formatParse),delete r.formatParse),n}function r(e){var n=t(e);return e.children().forEach(function(t){var r=t.component.data;e.compatibleSource(t)&&!o.differ(r.formatParse,n)&&(o.extend(n,r.formatParse),delete r.formatParse)}),n}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r}(r=n.formatParse||(n.formatParse={}))},{"../../fielddef":52,"../../type":63,"../../util":64}],24:[function(e,t,n){"use strict";var r,i=e("../../util");!function(e){function t(e){return(e.transform().calculate||[]).reduce(function(e,t){return e[i.hash(t)]=t,e},{})}function n(e){var n=t(e),r=e.child().component.data;return r.source||(i.extend(n,r.calculate),delete r.calculate),n}function r(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;!t.source&&t.calculate&&(i.extend(n||{},t.calculate),delete t.calculate)}),n}function a(e){return i.vals(e.calculate).reduce(function(e,t){return e.push(i.extend({type:"formula"},t)),e},[])}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=a}(r=n.formula||(n.formula={}))},{"../../util":64}],25:[function(e,t,n){"use strict";var r,i=e("../../scale"),a=e("../../util");!function(e){function t(e){return e.channels().reduce(function(t,n){var r=e.scale(n);return e.field(n)&&r?(t[e.field(n)]=r.type===i.ScaleType.LOG,t):t},{})}function n(e){var t=e.child().component.data;if(!t.source){var n=t.nonPositiveFilter;return delete t.nonPositiveFilter,n}return{}}function r(e){var t={};return e.children().forEach(function(n){var r=n.component.data;e.compatibleSource(n)&&!a.differ(r.nonPositiveFilter,t)&&(a.extend(t,r.nonPositiveFilter),delete r.nonPositiveFilter)}),t}function o(e){return a.keys(e.nonPositiveFilter).filter(function(t){return e.nonPositiveFilter[t]}).map(function(e){return{type:"filter",test:'datum["'+e+'"] > 0'}})}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=o}(r=n.nonPositiveFilter||(n.nonPositiveFilter={}))},{"../../scale":56,"../../util":64}],26:[function(e,t,n){"use strict";var r,i=e("../../type"),a=e("../../util"),o={nominal:!1,ordinal:!1,quantitative:!0,temporal:!0};!function(e){function t(e){var t=e.transform(),n=t.filterInvalid;return void 0===n&&void 0!==t.filterNull&&(n=t.filterNull,console.warn("filterNull is deprecated. Please use filterInvalid instead.")),e.reduce(function(e,t){return"*"!==t.field&&(n||void 0===n&&t.field&&o[t.type]?e[t.field]=t:e[t.field]=null),e},{})}function n(e){var n=t(e),r=e.child().component.data;return r.source||(a.extend(n,r.nullFilter),delete r.nullFilter),n}function r(e){var n=t(e);return e.children().forEach(function(t){var r=t.component.data;e.compatibleSource(t)&&!a.differ(r.nullFilter,n)&&(a.extend(n,r.nullFilter),delete r.nullFilter)}),n}function s(e){var t=a.keys(e.nullFilter).reduce(function(t,n){var r=e.nullFilter[n];return null!==r&&(t.push('datum["'+r.field+'"] !== null'),a.contains([i.QUANTITATIVE,i.TEMPORAL],r.type)&&t.push('!isNaN(datum["'+r.field+'"])')),t},[]);return t.length>0?[{type:"filter",test:t.join(" && ")}]:[]}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=s}(r=n.nullFilter||(n.nullFilter={}))},{"../../type":63,"../../util":64}],27:[function(e,t,n){"use strict";var r,i=e("../../data"),a=e("../../util"),o=e("./nullfilter"),s=e("./filter"),l=e("./bin"),u=e("./formula"),c=e("./timeunit");!function(e){function t(e){var t=e.data();if(t){var n={name:e.dataName(i.SOURCE)};if(t.values&&t.values.length>0)n.values=t.values,n.format={type:"json"};else if(t.url){n.url=t.url;var r=/(?:\.([^.]+))?$/.exec(n.url)[1];a.contains(["json","csv","tsv","topojson"],r)||(r="json");var o=t.format||{},s=o.type||t.formatType;n.format=a.extend({type:s?s:r},o.property?{property:o.property}:{},o.feature?{feature:o.feature}:o.mesh?{mesh:o.mesh}:{})}return n}if(!e.parent())return{name:e.dataName(i.SOURCE)}}function n(e){var n=t(e);return e.child().component.data.source||e.child().renameData(e.child().dataName(i.SOURCE),e.dataName(i.SOURCE)),n}function r(e){var n=t(e);return e.children().forEach(function(t){var n=t.component.data;if(e.compatibleSource(t)){var r=!n.filter&&!n.formatParse&&!n.nullFilter;r?(t.renameData(t.dataName(i.SOURCE),e.dataName(i.SOURCE)),delete n.source):n.source={name:t.dataName(i.SOURCE),source:e.dataName(i.SOURCE)}}}),n}function f(e,t){if(t.source){var n=t.source;return t.formatParse&&(t.source.format=t.source.format||{},t.source.format.parse=t.formatParse),n.transform=[].concat(o.nullFilter.assemble(t),u.formula.assemble(t),s.filter.assemble(t),l.bin.assemble(t),c.timeUnit.assemble(t)),n}return null}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=f}(r=n.source||(n.source={}))},{"../../data":48,"../../util":64,"./bin":19,"./filter":22,"./formula":24,"./nullfilter":26,"./timeunit":30}],28:[function(e,t,n){"use strict";var r,i=e("../../data"),a=e("../../fielddef"),o=e("../../util");!function(e){function t(e){var t=e.stack();if(t){var n=t.groupbyChannel,r=t.fieldChannel,a=[],s=e.field(n);return s&&a.push(s),{name:e.dataName(i.STACKED_SCALE),source:e.dataName(i.SUMMARY),transform:[o.extend({type:"aggregate",summarize:[{ops:["sum"],field:e.field(r)}]},a.length>0?{groupby:a}:{})]}}return null}function n(e){var t=e.child(),n=t.component.data;if(!n.source&&n.stackScale){var r=n.stackScale,o=e.dataName(i.STACKED_SCALE);return t.renameData(r.name,o),r.name=o,r.source=e.dataName(i.SUMMARY),r.transform[0].groupby=e.reduce(function(e,t){return e.push(a.field(t)),e},r.transform[0].groupby),delete n.stackScale,r}return null}function r(e){return null}function s(e){return e.stackScale}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=s}(r=n.stackScale||(n.stackScale={}))},{"../../data":48,"../../fielddef":52,"../../util":64}],29:[function(e,t,n){"use strict";var r,i=e("../../aggregate"),a=e("../../data"),o=e("../../fielddef"),s=e("../../util");!function(e){function t(e,t){return t.bin?(e[o.field(t,{binSuffix:"start"})]=!0,e[o.field(t,{binSuffix:"mid"})]=!0,e[o.field(t,{binSuffix:"end"})]=!0,e[o.field(t,{binSuffix:"range"})]=!0):e[o.field(t)]=!0,e}function n(e){var n={},r={};return e.forEach(function(e,a){e.aggregate?e.aggregate===i.AggregateOp.COUNT?(r["*"]=r["*"]||{},r["*"].count=!0):(r[e.field]=r[e.field]||{},r[e.field][e.aggregate]=!0):t(n,e)}),[{name:e.dataName(a.SUMMARY),dimensions:n,measures:r}]}function r(e){var n=e.child().component.data;if(!n.source&&n.summary){var r=n.summary.map(function(n){n.dimensions=e.reduce(t,n.dimensions);var r=n.name.substr(e.child().name("").length);return e.child().renameData(n.name,r),n.name=r,n});return delete n.summary,r}return[]}function l(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&(n in e?e[n][i]=!0:e[n]={op:!0})}}function u(e){var t={};return e.children().forEach(function(n){var r=n.component.data;!r.source&&r.summary&&r.summary.forEach(function(i){var o=s.hash(i.dimensions);o in t?l(t[o].measures,i.measures):(i.name=e.dataName(a.SUMMARY)+"_"+s.keys(t).length,t[o]=i),n.renameData(n.dataName(a.SUMMARY),t[o].name),delete r.summary})}),s.vals(t)}function c(e,t){return e.summary?e.summary.reduce(function(e,n){var r=n.dimensions,i=n.measures,o=s.keys(r),l=s.reduce(i,function(e,t,n){return e[n]=s.keys(t),e},{});return s.keys(i).length>0&&e.push({name:n.name,source:t.dataName(a.SOURCE),transform:[{type:"aggregate",groupby:o,summarize:l}]}),e},[]):[]}e.parseUnit=n,e.parseFacet=r,e.parseLayer=u,e.assemble=c}(r=n.summary||(n.summary={}))},{"../../aggregate":11,"../../data":48,"../../fielddef":52,"../../util":64}],30:[function(e,t,n){"use strict";var r,i=e("../../fielddef"),a=e("../../timeunit"),o=e("../../type"),s=e("../../util");!function(e){function t(e){return e.reduce(function(e,t,n){if(t.type===o.TEMPORAL&&t.timeUnit){var r=i.field(t);e[r]={type:"formula",field:i.field(t),expr:a.fieldExpr(t.timeUnit,t.field)}}return e},{})}function n(e){var n=t(e),r=e.child().component.data;return r.source||(s.extend(n,r.timeUnit),delete r.timeUnit),n}function r(e){var n=t(e);return e.children().forEach(function(e){var t=e.component.data;t.source||(s.extend(n,t.timeUnit),delete t.timeUnit)}),n}function l(e){return s.vals(e.timeUnit)}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=l}(r=n.timeUnit||(n.timeUnit={}))},{"../../fielddef":52,"../../timeunit":61,"../../type":63,"../../util":64}],31:[function(e,t,n){"use strict";var r,i=e("../../datetime"),a=e("../../timeunit"),o=e("../../util");!function(e){function t(e){return e.reduce(function(e,t,n){if(t.timeUnit){var r=a.rawDomain(t.timeUnit,n);r&&(e[t.timeUnit]=!0)}return e},{})}function n(e){return o.extend(t(e),e.child().component.data.timeUnitDomain)}function r(e){return o.extend(t(e),e.children().forEach(function(e){return e.component.data.timeUnitDomain}))}function s(e){return o.keys(e.timeUnitDomain).reduce(function(e,t){var n=t,r=a.rawDomain(n,null);if(r){var o={};o[n]='datum["data"]',e.push({name:n,values:r,transform:[{type:"formula",field:"date",expr:i.dateTimeExpr(o)}]})}return e},[])}e.parseUnit=t,e.parseFacet=n,e.parseLayer=r,e.assemble=s}(r=n.timeUnitDomain||(n.timeUnitDomain={}))},{"../../datetime":49,"../../timeunit":61,"../../util":64}],32:[function(e,t,n){"use strict";function r(e){var t=e.child(),n=y.extend({},t.config().cell,t.config().facet.cell);return y.extend({x:e.has(f.COLUMN)?{scale:e.scaleName(f.COLUMN),field:e.field(f.COLUMN),offset:e.scale(f.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2},y:e.has(f.ROW)?{scale:e.scaleName(f.ROW),field:e.field(f.ROW),offset:e.scale(f.ROW).padding/2}:{value:e.config().facet.scale.padding/2},width:{field:{parent:e.child().sizeName("width")}},height:{field:{parent:e.child().sizeName("height")}}},t.assembleParentGroupProperties(n))}function i(e,t){var n=null,r=e.child();return r.has(t)&&r.axis(t)&&(n=t===f.X?a(e):o(e),r.axis(t)&&b.gridShow(r,t)?r.component.axis[t]=b.parseInnerAxis(t,r):delete r.component.axis[t]),n}function a(e){var t=e.has(f.COLUMN);return y.extend({name:e.name("x-axes"),type:"group"},t?{from:{data:e.dataTable(),transform:[{type:"aggregate",groupby:[e.field(f.COLUMN)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{parent:e.child().sizeName("width")}},height:{field:{group:"height"}},x:t?{scale:e.scaleName(f.COLUMN),field:e.field(f.COLUMN),offset:e.scale(f.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2}}},axes:[b.parseAxis(f.X,e.child())]})}function o(e){var t=e.has(f.ROW);return y.extend({name:e.name("y-axes"),type:"group"},t?{from:{data:e.dataTable(),transform:[{type:"aggregate",groupby:[e.field(f.ROW)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{group:"width"}},height:{field:{parent:e.child().sizeName("height")}},y:t?{scale:e.scaleName(f.ROW),field:e.field(f.ROW),offset:e.scale(f.ROW).padding/2}:{value:e.config().facet.scale.padding/2}}},axes:[b.parseAxis(f.Y,e.child())]})}function s(e){var t=e.config().facet.grid,n={name:e.name("row-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(f.ROW)]}]},properties:{update:{y:{scale:e.scaleName(f.ROW),field:e.field(f.ROW)},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}};return[n,{name:e.name("row-grid-end"),type:"rule",properties:{update:{y:{field:{group:"height"}},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}]}function l(e){var t=e.config().facet.grid,n={name:e.name("column-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(f.COLUMN)]}]},properties:{update:{x:{scale:e.scaleName(f.COLUMN),field:e.field(f.COLUMN)},y:{value:0,offset:-t.offset},y2:{field:{group:"height"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}};return[n,{name:e.name("column-grid-end"),type:"rule",properties:{update:{x:{field:{group:"width"}},y:{value:0,offset:-t.offset},y2:{field:{group:"height"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}]}var u=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},c=e("../axis"),f=e("../channel"),d=e("../config"),h=e("../data"),p=e("../encoding"),g=e("../fielddef"),m=e("../scale"),v=e("../type"),y=e("../util"),b=e("./axis"),_=e("./common"),E=e("./data/data"),x=e("./layout"),S=e("./model"),T=e("./scale"),w=function(e){function t(t,n,r){e.call(this,t,n,r);var i=this._config=this._initConfig(t.config,n),a=this._child=_.buildModel(t.spec,this,this.name("child")),o=this._facet=this._initFacet(t.facet);this._scale=this._initScale(o,i,a),this._axis=this._initAxis(o,i,a)}return u(t,e),t.prototype._initConfig=function(e,t){return y.mergeDeep(y.duplicate(d.defaultConfig),e,t?t.config():{})},t.prototype._initFacet=function(e){e=y.duplicate(e);var t=this;return p.channelMappingForEach(this.channels(),e,function(e,n){g.isDimension(e)||t.addWarning(n+" encoding should be ordinal."),e.type&&(e.type=v.getFullName(e.type))}),e},t.prototype._initScale=function(e,t,n){return[f.ROW,f.COLUMN].reduce(function(r,i){if(e[i]){var a=e[i].scale||{};r[i]=y.extend({type:m.ScaleType.ORDINAL,round:t.facet.scale.round,padding:i===f.ROW&&n.has(f.Y)||i===f.COLUMN&&n.has(f.X)?t.facet.scale.padding:0},a)}return r},{})},t.prototype._initAxis=function(e,t,n){return[f.ROW,f.COLUMN].reduce(function(r,i){if(e[i]){var a=e[i].axis;if(a!==!1){var o=r[i]=y.extend({},t.facet.axis,a===!0?{}:a||{});if(i===f.ROW){var s=n.axis(f.Y);s&&s.orient!==c.AxisOrient.RIGHT&&!o.orient&&(o.orient=c.AxisOrient.RIGHT),n.has(f.X)&&!o.labelAngle&&(o.labelAngle=o.orient===c.AxisOrient.RIGHT?90:270)}}}return r},{})},t.prototype.facet=function(){return this._facet},t.prototype.has=function(e){return!!this._facet[e]},t.prototype.child=function(){return this._child},t.prototype.hasSummary=function(){for(var e=this.component.data.summary,t=0;t<e.length;t++)if(y.keys(e[t].measures).length>0)return!0;return!1},t.prototype.dataTable=function(){return(this.hasSummary()?h.SUMMARY:h.SOURCE)+""},t.prototype.fieldDef=function(e){return this.facet()[e]},t.prototype.stack=function(){return null},t.prototype.parseData=function(){this.child().parseData(),this.component.data=E.parseFacetData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this.child().parseLayoutData(),this.component.layout=x.parseFacetLayout(this)},t.prototype.parseScale=function(){var e=this.child(),t=this;e.parseScale();var n=this.component.scale=T.parseScaleComponent(this);y.keys(e.component.scale).forEach(function(r){n[r]=e.component.scale[r],y.vals(n[r]).forEach(function(n){var r=n.name.substr(e.name("").length),i=t.scaleName(r);e.renameScale(n.name,i),n.name=i}),delete e.component.scale[r]})},t.prototype.parseMark=function(){this.child().parseMark(),this.component.mark=y.extend({name:this.name("cell"),type:"group",from:y.extend(this.dataTable()?{data:this.dataTable()}:{},{transform:[{type:"facet",groupby:[].concat(this.has(f.ROW)?[this.field(f.ROW)]:[],this.has(f.COLUMN)?[this.field(f.COLUMN)]:[])}]}),properties:{update:r(this)}},this.child().assembleGroup())},t.prototype.parseAxis=function(){this.child().parseAxis(),this.component.axis=b.parseAxisComponent(this,[f.ROW,f.COLUMN])},t.prototype.parseAxisGroup=function(){var e=i(this,f.X),t=i(this,f.Y);this.component.axisGroup=y.extend(e?{x:e}:{},t?{y:t}:{})},t.prototype.parseGridGroup=function(){var e=this.child();this.component.gridGroup=y.extend(!e.has(f.X)&&this.has(f.COLUMN)?{column:l(this)}:{},!e.has(f.Y)&&this.has(f.ROW)?{row:s(this)}:{})},t.prototype.parseLegend=function(){this.child().parseLegend(),this.component.legend=this._child.component.legend,this._child.component.legend={}},t.prototype.assembleParentGroupProperties=function(){return null},t.prototype.assembleData=function(e){return E.assembleData(this,e),this._child.assembleData(e)},t.prototype.assembleLayout=function(e){return this._child.assembleLayout(e),x.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return[].concat(y.vals(this.component.axisGroup),y.flatten(y.vals(this.component.gridGroup)),this.component.mark)},t.prototype.channels=function(){return[f.ROW,f.COLUMN]},t.prototype.mapping=function(){return this.facet()},t.prototype.isFacet=function(){return!0},t}(S.Model);n.FacetModel=w},{"../axis":12,"../channel":14,"../config":47,"../data":48,"../encoding":50,"../fielddef":52,"../scale":56,"../type":63,"../util":64,"./axis":15,"./common":16,"./data/data":21,"./layout":34,"./model":44,"./scale":45}],33:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../util"),a=e("../config"),o=e("./data/data"),s=e("./layout"),l=e("./model"),u=e("./common"),c=e("../vega.schema"),f=function(e){function t(t,n,r){var i=this;e.call(this,t,n,r),this._config=this._initConfig(t.config,n),this._children=t.layers.map(function(e,t){return u.buildModel(e,i,i.name("layer_"+t))})}return r(t,e),t.prototype._initConfig=function(e,t){return i.mergeDeep(i.duplicate(a.defaultConfig),e,t?t.config():{})},t.prototype.has=function(e){return!1},t.prototype.children=function(){return this._children},t.prototype.isOrdinalScale=function(e){return this._children[0].isOrdinalScale(e)},t.prototype.dataTable=function(){return this._children[0].dataTable()},t.prototype.fieldDef=function(e){return null},t.prototype.stack=function(){return null},t.prototype.parseData=function(){this._children.forEach(function(e){e.parseData()}),this.component.data=o.parseLayerData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this._children.forEach(function(e,t){e.parseLayoutData()}),this.component.layout=s.parseLayerLayout(this)},t.prototype.parseScale=function(){var e=this,t=this.component.scale={};this._children.forEach(function(n){n.parseScale(),i.keys(n.component.scale).forEach(function(r){var a=n.component.scale[r];if(a){var o=t[r];if(o&&o.main){var s=o.main.domain,l=a.main.domain;if(i.isArray(s))i.isArray(a.main.domain)?o.main.domain=s.concat(l):e.addWarning("custom domain scale cannot be unioned with default field-based domain");else{var u=c.isUnionedDomain(s)?s.fields:[s];i.isArray(l)&&e.addWarning("custom domain scale cannot be unioned with default field-based domain");var f=c.isDataRefDomain(l)?u.concat([l]):c.isUnionedDomain(l)?u.concat(l.fields):u;f=i.unique(f,i.hash),f.length>1?o.main.domain={fields:f}:o.main.domain=f[0]}o.colorLegend=o.colorLegend?o.colorLegend:a.colorLegend,o.binColorLegend=o.binColorLegend?o.binColorLegend:a.binColorLegend}else t[r]=a;i.vals(a).forEach(function(t){var r=t.name.substr(n.name("").length),i=e.scaleName(r);n.renameScale(t.name,i),t.name=i}),delete a[r]}})})},t.prototype.parseMark=function(){this._children.forEach(function(e){e.parseMark()})},t.prototype.parseAxis=function(){var e=this.component.axis={};this._children.forEach(function(t){t.parseAxis(),i.keys(t.component.axis).forEach(function(n){e[n]||(e[n]=t.component.axis[n])})})},t.prototype.parseAxisGroup=function(){return null},t.prototype.parseGridGroup=function(){return null},t.prototype.parseLegend=function(){var e=this.component.legend={};this._children.forEach(function(t){t.parseLegend(),i.keys(t.component.legend).forEach(function(n){e[n]||(e[n]=t.component.legend[n])})})},t.prototype.assembleParentGroupProperties=function(){return null},t.prototype.assembleData=function(e){return o.assembleData(this,e),this._children.forEach(function(t){t.assembleData(e)}),e},t.prototype.assembleLayout=function(e){return this._children.forEach(function(t){t.assembleLayout(e)}),s.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return i.flatten(this._children.map(function(e){return e.assembleMarks()}))},t.prototype.channels=function(){return[]},t.prototype.mapping=function(){return null},t.prototype.isLayer=function(){return!0},t.prototype.compatibleSource=function(e){var t=this.data(),n=e.component.data,r=!n.source||t&&t.url===n.source.url;return r},t}(l.Model);n.LayerModel=f},{"../config":47,"../util":64,"../vega.schema":66,"./common":16,"./data/data":21,"./layout":34,"./model":44}],34:[function(e,t,n){"use strict";function r(e,t){var n=e.component.layout;if(!n.width&&!n.height)return t;var r=v.keys(v.extend(n.width.distinct,n.height.distinct)),i=n.width.formula.concat(n.height.formula).map(function(e){return v.extend({type:"formula"},e)});return[r.length>0?{name:e.dataName(g.LAYOUT),source:e.dataTable(),transform:[{type:"aggregate",summarize:r.map(function(e){return{field:e,ops:["distinct"]}})}].concat(i)}:{name:e.dataName(g.LAYOUT),values:[{}],transform:i}]}function i(e){return{width:a(e,p.X),height:a(e,p.Y)}}function a(e,t){var n=e.config().cell,r=t===p.X?n.width:n.height;return{distinct:d(e,t),formula:[{field:e.channelSizeName(t),expr:o(e,t,r)}]}}function o(e,t,n){if(e.scale(t)){if(e.isOrdinalScale(t)){var r=e.scale(t);return"("+h(e,t)+" + "+r.padding+") * "+r.bandSize}return n+""}return e.mark()===y.TEXT&&t===p.X?e.config().scale.textBandWidth+"":e.config().scale.bandSize+""}function s(e){return{width:l(e,p.COLUMN),height:l(e,p.ROW)}}function l(e,t){var n=e.child().component.layout,r=t===p.ROW?"height":"width",i=n[r],a=v.extend(d(e,t),i.distinct),o=i.formula.concat([{field:e.channelSizeName(t),expr:u(e,t,e.child().channelSizeName(t))}]);return delete n[r],{distinct:a,formula:o}}function u(e,t,n){var r=e.scale(t);return e.has(t)?'(datum["'+n+'"] + '+r.padding+") * "+h(e,t):'datum["'+n+'"] + '+e.config().facet.scale.padding}function c(e){return{width:f(e,p.X),height:f(e,p.Y)}}function f(e,t){var n=e.children()[0].component.layout,r=t===p.Y?"height":"width",i=n[r],a=i.distinct,o=[{field:e.channelSizeName(t),expr:i.formula[0].expr}];return e.children().forEach(function(e){delete e.component.layout[r]}),{distinct:a,formula:o}}function d(e,t){if(e.has(t)&&e.isOrdinalScale(t)){var n=e.scale(t);if(n.type===m.ScaleType.ORDINAL&&!(n.domain instanceof Array)){var r=e.field(t),i={};return i[r]=!0,i}}return{}}function h(e,t){var n=e.scale(t);if(n.domain instanceof Array)return n.domain.length;var r=e.fieldDef(t).timeUnit,i=r?b.rawDomain(r,t):null;return null!==i?i.length:e.field(t,{datum:!0,prefix:"distinct"})}var p=e("../channel"),g=e("../data"),m=e("../scale"),v=e("../util"),y=e("../mark"),b=e("../timeunit");n.assembleLayout=r,n.parseUnitLayout=i,n.parseFacetLayout=s,n.parseLayerLayout=c},{"../channel":14,"../data":48,"../mark":55,"../scale":56,"../timeunit":61,"../util":64}],35:[function(e,t,n){"use strict";function r(e){return[l.COLOR,l.SIZE,l.SHAPE,l.OPACITY].reduce(function(t,n){return e.legend(n)&&(t[n]=a(e,n)),t},{})}function i(e,t){switch(t){case l.COLOR:var n=e.fieldDef(l.COLOR),r=e.scaleName(s(n)?p.COLOR_LEGEND:l.COLOR);return e.config().mark.filled?{fill:r}:{stroke:r};case l.SIZE:return{size:e.scaleName(l.SIZE)};case l.SHAPE:return{shape:e.scaleName(l.SHAPE)};case l.OPACITY:return{opacity:e.scaleName(l.OPACITY)}}return null}function a(e,t){var n=e.fieldDef(t),r=e.legend(t),a=e.config(),s=i(e,t);s.title=o(r,n,a);var l=h.numberFormat(n,r.format,a);l&&(s.format=l),["offset","orient","values"].forEach(function(e){var t=r[e];void 0!==t&&(s[e]=t)});var u="boolean"!=typeof r&&r.properties||{};return["title","symbols","legend","labels"].forEach(function(r){var i=g[r]?g[r](n,u[r],e,t):u[r];void 0!==i&&d.keys(i).length>0&&(s.properties=s.properties||{},s.properties[r]=i)}),s}function o(e,t,n){return"boolean"!=typeof e&&e.title?e.title:u.title(t,n)}function s(e){return e.type===f.ORDINAL||e.bin||e.timeUnit}var l=e("../channel"),u=e("../fielddef"),c=e("../mark"),f=e("../type"),d=e("../util"),h=e("./common"),p=e("./scale");n.parseLegendComponent=r,n.parseLegend=a,n.title=o,n.useColorLegendScale=s;var g;!function(e){function t(e,t,n,r){var i={},a=n.mark(),o=n.legend(r);switch(a){case c.BAR:case c.TICK:case c.TEXT:i.shape={value:"square"};break;case c.CIRCLE:case c.SQUARE:i.shape={value:a};break;case c.POINT:case c.LINE:case c.AREA:}var u=n.config(),f=u.mark.filled,p=r===l.COLOR?d.without(h.FILL_STROKE_CONFIG,[f?"fill":"stroke","strokeDash","strokeDashOffset"]):d.without(h.FILL_STROKE_CONFIG,["strokeDash","strokeDashOffset"]);p=d.without(p,["strokeDash","strokeDashOffset"]),h.applyMarkConfig(i,n,p),f&&(i.strokeWidth={value:0}),r===l.OPACITY&&delete i.opacity;var g;return n.has(l.COLOR)&&r===l.COLOR?s(e)&&(g={scale:n.scaleName(l.COLOR),field:"data"}):n.fieldDef(l.COLOR).value&&(g={value:n.fieldDef(l.COLOR).value}),void 0!==g?f?i.fill=g:i.stroke=g:r!==l.COLOR&&(i[f?"fill":"stroke"]=i[f?"fill":"stroke"]||{value:u.mark.color}),void 0!==o.symbolColor?i.fill={
value:o.symbolColor}:void 0===i.fill&&(void 0!==u.mark.fill?i.fill={value:u.mark.fill}:void 0!==u.mark.stroke&&(i.stroke={value:u.mark.stroke})),void 0!==o.symbolShape?i.shape={value:o.symbolShape}:void 0!==u.mark.shape&&(i.shape={value:u.mark.shape}),void 0!==o.symbolSize&&(i.size={value:o.symbolSize}),void 0!==o.symbolStrokeWidth&&(i.strokeWidth={value:o.symbolStrokeWidth}),i=d.extend(i,t||{}),d.keys(i).length>0?i:void 0}function n(e,t,n,r){var i=n.legend(r),a=n.config(),o={};return r===l.COLOR&&(e.type===f.ORDINAL?t=d.extend({text:{scale:n.scaleName(p.COLOR_LEGEND),field:"data"}},t||{}):e.bin?t=d.extend({text:{scale:n.scaleName(p.COLOR_LEGEND_LABEL),field:"data"}},t||{}):e.type===f.TEMPORAL&&(t=d.extend({text:{template:h.timeTemplate('datum["data"]',e.timeUnit,i.format,i.shortTimeLabels,a)}},t||{}))),void 0!==i.labelAlign&&(o.align={value:i.labelAlign}),void 0!==i.labelColor&&(o.stroke={value:i.labelColor}),void 0!==i.labelFont&&(o.font={value:i.labelFont}),void 0!==i.labelFontSize&&(o.fontSize={value:i.labelFontSize}),void 0!==i.labelBaseline&&(o.baseline={value:i.labelBaseline}),o=d.extend(o,t||{}),d.keys(o).length>0?o:void 0}function r(e,t,n,r){var i=n.legend(r),a={};return void 0!==i.titleColor&&(a.stroke={value:i.titleColor}),void 0!==i.titleFont&&(a.font={value:i.titleFont}),void 0!==i.titleFontSize&&(a.fontSize={value:i.titleFontSize}),void 0!==i.titleFontWeight&&(a.fontWeight={value:i.titleFontWeight}),a=d.extend(a,t||{}),d.keys(a).length>0?a:void 0}e.symbols=t,e.labels=n,e.title=r}(g=n.properties||(n.properties={}))},{"../channel":14,"../fielddef":52,"../mark":55,"../type":63,"../util":64,"./common":16,"./scale":45}],36:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../common");!function(e){function t(){return"area"}function n(e){var t={},n=e.config(),a=n.mark.orient;t.orient={value:a};var o=e.stack();t.x=r(e.encoding().x,e.scaleName(i.X),a,o),t.y=u(e.encoding().y,e.scaleName(i.Y),a,o);var f=l(e.encoding().x,e.encoding().x2,e.scaleName(i.X),a,o);f&&(t.x2=f);var d=c(e.encoding().y,e.encoding().y2,e.scaleName(i.Y),a,o);return d&&(t.y2=d),s.applyColorAndOpacity(t,e),s.applyMarkConfig(t,e,["interpolate","tension"]),t}function r(e,t,n,r){return r&&i.X===r.fieldChannel?{scale:t,field:o.field(e,{suffix:"start"})}:o.isMeasure(e)?n===a.Orient.HORIZONTAL?e&&e.field?{scale:t,field:o.field(e)}:{scale:t,value:0}:{scale:t,field:o.field(e)}:o.isDimension(e)?{scale:t,field:o.field(e,{binSuffix:"mid"})}:void 0}function l(e,t,n,r,s){if(r===a.Orient.HORIZONTAL){if(s&&i.X===s.fieldChannel)return{scale:n,field:o.field(e,{suffix:"end"})};if(t){if(t.field)return{scale:n,field:o.field(t)};if(t.value)return{scale:n,value:t.value}}return{scale:n,value:0}}}function u(e,t,n,r){return r&&i.Y===r.fieldChannel?{scale:t,field:o.field(e,{suffix:"start"})}:o.isMeasure(e)?n!==a.Orient.HORIZONTAL?e&&e.field?{scale:t,field:o.field(e)}:{field:{group:"height"}}:{scale:t,field:o.field(e)}:o.isDimension(e)?{scale:t,field:o.field(e,{binSuffix:"mid"})}:void 0}function c(e,t,n,r,s){if(r!==a.Orient.HORIZONTAL){if(s&&i.Y===s.fieldChannel)return{scale:n,field:o.field(e,{suffix:"end"})};if(t){if(t.field)return{scale:n,field:o.field(t)};if(t.value)return{scale:n,value:t.value}}return{scale:n,value:0}}}function f(e){}e.markType=t,e.properties=n,e.x=r,e.x2=l,e.y=u,e.y2=c,e.labels=f}(r=n.area||(n.area={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../common":16}],37:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../../scale"),l=e("../common");!function(e){function t(){return"rect"}function n(e){var t={},n=e.config().mark.orient,u=e.stack(),c=e.encoding().x,f=e.encoding().x2,d=o.isMeasure(c)||o.isMeasure(f);u&&i.X===u.fieldChannel?(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"start"})},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"end"})}):d?n===a.Orient.HORIZONTAL?(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={scale:e.scaleName(i.X),value:0},e.has(i.X2)?t.x2={scale:e.scaleName(i.X),field:e.field(i.X2)}:e.scale(i.X).type===s.ScaleType.LOG?t.x2={value:0}:t.x2={scale:e.scaleName(i.X),value:0}):(t.xc={scale:e.scaleName(i.X),field:e.field(i.X)},t.width={value:r(e,i.X)}):e.fieldDef(i.X).bin?e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?(t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})},t.width={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"start"}),offset:1},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"end"})}):(e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={value:0,offset:2},t.width=e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)});var h=e.encoding().y,p=e.encoding().y2,g=o.isMeasure(h)||o.isMeasure(p);return u&&i.Y===u.fieldChannel?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"end"})}):g?n!==a.Orient.HORIZONTAL?(e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y={scale:e.scaleName(i.Y),value:0},e.has(i.Y2)?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y2)}:e.scale(i.Y).type===s.ScaleType.LOG?t.y2={field:{group:"height"}}:t.y2={scale:e.scaleName(i.Y),value:0}):(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.height={value:r(e,i.Y)}):e.fieldDef(i.Y).bin?e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})},t.height={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"end"}),offset:1}):(e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y2={field:{group:"height"},offset:-1},t.height=e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),l.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().mark;return r.barSize?r.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?r.barThinSize:e.config().scale.bandSize-1}function u(e){}e.markType=t,e.properties=n,e.labels=u}(r=n.bar||(n.bar={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../../scale":56,"../common":16}],38:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../fielddef"),o=e("../common");!function(e){function t(){return"line"}function n(e){var t={},n=e.config();t.x=r(e.encoding().x,e.scaleName(i.X),n),t.y=s(e.encoding().y,e.scaleName(i.Y),n);var a=l(e.encoding().size,n);return a&&(t.strokeWidth=a),o.applyColorAndOpacity(t,e),o.applyMarkConfig(t,e,["interpolate","tension"]),t}function r(e,t,n){return e&&e.field?{scale:t,field:a.field(e,{binSuffix:"mid"})}:{value:0}}function s(e,t,n){return e&&e.field?{scale:t,field:a.field(e,{binSuffix:"mid"})}:{field:{group:"height"}}}function l(e,t){return e&&void 0!==e.value?{value:e.value}:{value:t.mark.lineSize}}function u(e){}e.markType=t,e.properties=n,e.labels=u}(r=n.line||(n.line={}))},{"../../channel":14,"../../fielddef":52,"../common":16}],39:[function(e,t,n){"use strict";function r(e){return b.contains([v.LINE,v.AREA],e.mark())?i(e):a(e)}function i(e){var t=e.mark(),n=e.parent()&&e.parent().isFacet(),r={data:e.dataTable()},i=l(e),a=[{name:e.name("marks"),type:L[t].markType(),from:b.extend(n||i.length>0?{}:r,{transform:[{type:"sort",by:s(e)}]}),properties:{update:L[t].properties(e)}}];if(i.length>0){var c={type:"facet",groupby:i},f=t===v.AREA&&e.stack()?u(e,!0).concat(c):[].concat(c,e.has(h.ORDER)?[{type:"sort",by:o(e)}]:[]);return[{name:e.name("pathgroup"),type:"group",from:b.extend(n?{}:r,{transform:f}),properties:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:a}]}return a}function a(e){var t=e.mark(),n=e.parent()&&e.parent().isFacet(),r={data:e.dataTable()},i=[];if(t===v.TEXT&&e.has(h.COLOR)&&e.config().mark.applyColorToBackground&&!e.has(h.X)&&!e.has(h.Y)&&i.push(b.extend({name:e.name("background"),type:"rect"},n?{}:{from:r},{properties:{update:N.text.background(e)}})),i.push(b.extend({name:e.name("marks"),type:L[t].markType()},!n||e.stack()||e.has(h.ORDER)?{from:b.extend(n?{}:r,e.stack()?{transform:u(e,!1)}:e.has(h.ORDER)?{transform:[{type:"sort",by:o(e)}]}:{})}:{},{properties:{update:L[t].properties(e)}})),e.has(h.LABEL)&&L[t].labels){var a=L[t].labels(e);void 0!==a&&i.push(b.extend({name:e.name("label"),type:"text"},n?{}:{from:r},{properties:{update:a}}))}return i}function o(e){if(e.has(h.ORDER)){var t=e.encoding().order;return t instanceof Array?t.map(k.sortField):k.sortField(t)}return null}function s(e){if(e.mark()===v.LINE&&e.has(h.PATH)){var t=e.encoding().path;return t instanceof Array?t.map(k.sortField):k.sortField(t)}return"-"+e.field(e.config().mark.orient===p.Orient.HORIZONTAL?h.Y:h.X,{binSuffix:"mid"})}function l(e){return[h.COLOR,h.DETAIL,h.OPACITY,h.SHAPE].reduce(function(t,n){return e.has(n)&&!e.fieldDef(n).aggregate&&t.push(e.field(n)),t},[])}function u(e,t){var n=c(e);return t?[f(e,n),d(e,n)]:[d(e,n)]}function c(e){var t=e.encoding();return h.STACK_GROUP_CHANNELS.reduce(function(n,r){var i=t[r];if(g.has(t,r))if(b.isArray(i))i.forEach(function(e){n.push(m.field(e))});else{var a=i,o=e.scale(r),s=m.field(a,{binSuffix:o&&o.type===y.ScaleType.ORDINAL?"range":"start"});s&&n.push(s)}return n},[])}function f(e,t){var n=e.stack();return{type:"impute",field:e.field(n.fieldChannel),groupby:t,orderby:[e.field(n.groupbyChannel,{binSuffix:"mid"})],method:"value",value:0}}function d(e,t){var n=e.stack(),r=e.encoding(),i=e.has(h.ORDER)?(b.isArray(r[h.ORDER])?r[h.ORDER]:[r[h.ORDER]]).map(k.sortField):t.map(function(e){return"-"+e}),a=e.field(n.fieldChannel),o={type:"stack",groupby:[e.field(n.groupbyChannel,{binSuffix:"mid"})||"undefined"],field:e.field(n.fieldChannel),sortby:i,output:{start:a+"_start",end:a+"_end"}};return n.offset&&(o.offset=n.offset),o}var h=e("../../channel"),p=e("../../config"),g=e("../../encoding"),m=e("../../fielddef"),v=e("../../mark"),y=e("../../scale"),b=e("../../util"),_=e("./area"),E=e("./bar"),x=e("./boxplot"),S=e("./hexagon"),T=e("./leader"),w=e("./contour"),A=e("./scatter3D"),C=e("./radar"),k=e("../common"),O=e("./line"),I=e("./point"),M=e("./rule"),N=e("./text"),D=e("./tick"),L={area:_.area,bar:E.bar,line:O.line,point:I.point,text:N.text,tick:D.tick,rule:M.rule,circle:I.circle,square:I.square,boxplot:x.boxplot,hexagon:S.hexagon,leader:T.leader,contour:w.contour,scatter3D:A.scatter3D,radar:C.radar};n.parseMark=r},{"../../channel":14,"../../config":47,"../../encoding":50,"../../fielddef":52,"../../mark":55,"../../scale":56,"../../util":64,"../common":16,"./area":36,"./bar":37,"./boxplot":68,"./hexagon":69,"./leader":70,"./contour":71,"./scatter3D":72,"./radar":73,"./line":38,"./point":40,"./rule":41,"./text":42,"./tick":43}],40:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../fielddef"),o=e("../common");!function(e){function t(){return"symbol"}function n(e,t){var n={},a=e.config();return n.x=r(e.encoding().x,e.scaleName(i.X),a),n.y=s(e.encoding().y,e.scaleName(i.Y),a),n.size=l(e.encoding().size,e.scaleName(i.SIZE),e.scale(i.SIZE),a),n.shape=u(e.encoding().shape,e.scaleName(i.SHAPE),e.scale(i.SHAPE),a,t),o.applyColorAndOpacity(n,e),n}function r(e,t,n){return e&&e.field?{scale:t,field:a.field(e,{binSuffix:"mid"})}:{value:n.scale.bandSize/2}}function s(e,t,n){return e&&e.field?{scale:t,field:a.field(e,{binSuffix:"mid"})}:{value:n.scale.bandSize/2}}function l(e,t,n,r){if(e){if(e.field)return{scale:t,field:a.field(e,{scaleType:n.type})};if(void 0!==e.value)return{value:e.value}}return{value:r.mark.size}}function u(e,t,n,r,i){if(i)return{value:i};if(e){if(e.field)return{scale:t,field:a.field(e,{scaleType:n.type})};if(e.value)return{value:e.value}}return{value:r.mark.shape}}e.markType=t,e.properties=n}(r=n.point||(n.point={}));var s;!function(e){function t(){return"symbol"}function n(e){return r.properties(e,"circle")}function i(e){}e.markType=t,e.properties=n,e.labels=i}(s=n.circle||(n.circle={}));var l;!function(e){function t(){return"symbol"}function n(e){return r.properties(e,"square")}function i(e){}e.markType=t,e.properties=n,e.labels=i}(l=n.square||(n.square={}))},{"../../channel":14,"../../fielddef":52,"../common":16}],41:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../common");!function(e){function t(){return"rule"}function n(e){var t={};return e.config().mark.orient===a.Orient.VERTICAL?(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})}:t.x={value:0},e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})}:t.y={field:{group:"height"}},e.has(i.Y2)?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y2,{binSuffix:"mid"})}:t.y2={value:0}):(e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})}:t.y={value:0},e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})}:t.x={value:0},e.has(i.X2)?t.x2={scale:e.scaleName(i.X),field:e.field(i.X2,{binSuffix:"mid"})}:t.x2={field:{group:"width"}}),o.applyColorAndOpacity(t,e),e.has(i.SIZE)?t.strokeWidth={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:t.strokeWidth={value:r(e)},t}function r(e){var t=e.fieldDef(i.SIZE);return t&&void 0!==t.value?t.value:e.config().mark.ruleSize}function s(e){}e.markType=t,e.properties=n,e.labels=s}(r=n.rule||(n.rule={}))},{"../../channel":14,"../../config":47,"../common":16}],42:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../common"),o=e("../../fielddef"),s=e("../../type");!function(e){function t(){return"text"}function n(e){return{x:{value:0},y:{value:0},width:{field:{group:"width"}},height:{field:{group:"height"}},fill:{scale:e.scaleName(i.COLOR),field:e.field(i.COLOR,e.fieldDef(i.COLOR).type===s.ORDINAL?{prefix:"rank"}:{})}}}function r(e){var t={};a.applyMarkConfig(t,e,["angle","align","baseline","dx","dy","font","fontWeight","fontStyle","radius","theta","text"]);var n=e.config(),r=e.fieldDef(i.TEXT);if(t.x=l(e.encoding().x,e.scaleName(i.X),n,r),t.y=u(e.encoding().y,e.scaleName(i.Y),n),t.fontSize=c(e.encoding().size,e.scaleName(i.SIZE),n),t.text=f(e.encoding().text,e.scaleName(i.TEXT),n),!e.config().mark.applyColorToBackground||e.has(i.X)||e.has(i.Y))a.applyColorAndOpacity(t,e);else{t.fill={value:"black"};var o=e.config().mark.opacity;o&&(t.opacity={value:o})}return t}function l(e,t,n,r){return e&&e.field?{scale:t,field:o.field(e,{binSuffix:"mid"})}:r&&r.type===s.QUANTITATIVE?{field:{group:"width"},offset:-5}:{value:n.scale.textBandWidth/2}}function u(e,t,n){return e&&e.field?{scale:t,field:o.field(e,{binSuffix:"mid"})}:{value:n.scale.bandSize/2}}function c(e,t,n){if(e){if(e.field)return{scale:t,field:o.field(e)};if(e.value)return{value:e.value}}return{value:n.mark.fontSize}}function f(e,t,n){if(e){if(e.field){if(s.QUANTITATIVE===e.type){var r=a.numberFormat(e,n.mark.format,n),i="number"+(r?":'"+r+"'":"");return{template:"{{"+o.field(e,{datum:!0})+" | "+i+"}}"}}return s.TEMPORAL===e.type?{template:a.timeTemplate(o.field(e,{datum:!0}),e.timeUnit,n.mark.format,n.mark.shortTimeLabels,n)}:{field:e.field}}if(e.value)return{value:e.value}}return{value:n.mark.text}}e.markType=t,e.background=n,e.properties=r}(r=n.text||(n.text={}))},{"../../channel":14,"../../fielddef":52,"../../type":63,"../common":16}],43:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../common");!function(e){function t(){return"rect"}function n(e){var t={},n=e.config();return t.xc=r(e.encoding().x,e.scaleName(i.X),n),t.yc=l(e.encoding().y,e.scaleName(i.Y),n),n.mark.orient===a.Orient.HORIZONTAL?(t.width=u(e.encoding().size,e.scaleName(i.SIZE),n,(e.scale(i.X)||{}).bandSize),t.height={value:n.mark.tickThickness}):(t.width={value:n.mark.tickThickness},t.height=u(e.encoding().size,e.scaleName(i.SIZE),n,(e.scale(i.Y)||{}).bandSize)),s.applyColorAndOpacity(t,e),t}function r(e,t,n){if(e){if(e.field)return{scale:t,field:o.field(e,{binSuffix:"mid"})};if(e.value)return{value:e.value}}return{value:n.scale.bandSize/2}}function l(e,t,n){if(e){if(e.field)return{scale:t,field:o.field(e,{binSuffix:"mid"})};if(e.value)return{value:e.value}}return{value:n.scale.bandSize/2}}function u(e,t,n,r){if(e){if(e.field)return{scale:t,field:e.field};if(void 0!==e.value)return{value:e.value}}if(n.mark.tickSize)return{value:n.mark.tickSize};var i=void 0!==r?r:n.scale.bandSize;return{value:i/1.5}}function c(e){}e.markType=t,e.properties=n,e.labels=c}(r=n.tick||(n.tick={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../common":16}],44:[function(e,t,n){"use strict";var r=e("../channel"),i=e("../encoding"),a=e("../fielddef"),o=e("../scale"),s=e("../util"),l=function(){function e(){this._nameMap={}}return e.prototype.rename=function(e,t){this._nameMap[e]=t},e.prototype.get=function(e){for(;this._nameMap[e];)e=this._nameMap[e];return e},e}(),u=function(){function e(e,t,n){this._warnings=[],this._parent=t,this._name=e.name||n,this._dataNameMap=t?t._dataNameMap:new l,this._scaleNameMap=t?t._scaleNameMap:new l,this._sizeNameMap=t?t._sizeNameMap:new l,this._data=e.data,this._description=e.description,this._transform=e.transform,this.component={data:null,layout:null,mark:null,scale:null,axis:null,axisGroup:null,gridGroup:null,legend:null}}return e.prototype.parse=function(){this.parseData(),this.parseSelectionData(),this.parseLayoutData(),this.parseScale(),this.parseAxis(),this.parseLegend(),this.parseAxisGroup(),this.parseGridGroup(),this.parseMark()},e.prototype.assembleScales=function(){return s.flatten(s.vals(this.component.scale).map(function(e){var t=[e.main];return e.colorLegend&&t.push(e.colorLegend),e.binColorLegend&&t.push(e.binColorLegend),t}))},e.prototype.assembleAxes=function(){return s.vals(this.component.axis)},e.prototype.assembleLegends=function(){return s.vals(this.component.legend)},e.prototype.assembleGroup=function(){var e={};e.marks=this.assembleMarks();var t=this.assembleScales();t.length>0&&(e.scales=t);var n=this.assembleAxes();n.length>0&&(e.axes=n);var r=this.assembleLegends();return r.length>0&&(e.legends=r),e},e.prototype.reduce=function(e,t,n){return i.channelMappingReduce(this.channels(),this.mapping(),e,t,n)},e.prototype.forEach=function(e,t){i.channelMappingForEach(this.channels(),this.mapping(),e,t)},e.prototype.parent=function(){return this._parent},e.prototype.name=function(e,t){return void 0===t&&(t="_"),(this._name?this._name+t:"")+e},e.prototype.description=function(){return this._description},e.prototype.data=function(){return this._data},e.prototype.renameData=function(e,t){this._dataNameMap.rename(e,t)},e.prototype.dataName=function(e){return this._dataNameMap.get(this.name(String(e)))},e.prototype.renameSize=function(e,t){this._sizeNameMap.rename(e,t)},e.prototype.channelSizeName=function(e){return this.sizeName(e===r.X||e===r.COLUMN?"width":"height")},e.prototype.sizeName=function(e){return this._sizeNameMap.get(this.name(e,"_"))},e.prototype.transform=function(){return this._transform||{}},e.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n.bin&&(t=s.extend({binSuffix:this.scale(e).type===o.ScaleType.ORDINAL?"range":"start"},t)),a.field(n,t)},e.prototype.scale=function(e){return this._scale[e]},e.prototype.isOrdinalScale=function(e){var t=this.scale(e);return t&&t.type===o.ScaleType.ORDINAL},e.prototype.renameScale=function(e,t){this._scaleNameMap.rename(e,t)},e.prototype.scaleName=function(e){return this._scaleNameMap.get(this.name(e+""))},e.prototype.sort=function(e){return(this.mapping()[e]||{}).sort},e.prototype.axis=function(e){return this._axis[e]},e.prototype.legend=function(e){return this._legend[e]},e.prototype.config=function(){return this._config},e.prototype.addWarning=function(e){s.warning(e),this._warnings.push(e)},e.prototype.warnings=function(){return this._warnings},e.prototype.isUnit=function(){return!1},e.prototype.isFacet=function(){return!1},e.prototype.isLayer=function(){return!1},e}();n.Model=u},{"../channel":14,"../encoding":50,"../fielddef":52,"../scale":56,"../util":64}],45:[function(e,t,n){"use strict";function r(e){return e.channels().reduce(function(t,n){if(e.scale(n)){var r=e.fieldDef(n),s={main:i(e,r,n)};n===E.COLOR&&e.legend(E.COLOR)&&(r.type===O.ORDINAL||r.bin||r.timeUnit)&&(s.colorLegend=a(e,r),r.bin&&(s.binColorLegend=o(e,r))),t[n]=s}return t},{})}function i(e,t,r){var i=e.scale(r),a=e.sort(r),o={name:e.scaleName(r),type:i.type};return r===E.X&&e.has(E.X2)?e.has(E.X)?o.domain={fields:[l(i,e,E.X),l(i,e,E.X2)]}:o.domain=l(i,e,E.X2):r===E.Y&&e.has(E.Y2)?e.has(E.Y)?o.domain={fields:[l(i,e,E.Y),l(i,e,E.Y2)]}:o.domain=l(i,e,E.Y2):o.domain=l(i,e,r),I.extend(o,f(i,e,r)),a&&(C.isSortField(a)?a.order:a)===C.SortOrder.DESCENDING&&(o.reverse=!0),["round","clamp","nice","exponent","zero","padding","points"].forEach(function(a){var s=n[a](i,r,t,e);void 0!==s&&(o[a]=s)}),o}function a(e,t){return{name:e.scaleName(n.COLOR_LEGEND),type:A.ScaleType.ORDINAL,domain:{data:e.dataTable(),field:e.field(E.COLOR,t.bin||t.timeUnit?{}:{prefix:"rank"}),sort:!0},range:{data:e.dataTable(),field:e.field(E.COLOR),sort:!0}}}function o(e,t){return{name:e.scaleName(n.COLOR_LEGEND_LABEL),type:A.ScaleType.ORDINAL,domain:{data:e.dataTable(),field:e.field(E.COLOR),sort:!0},range:{data:e.dataTable(),field:T.field(t,{binSuffix:"range"}),sort:{field:e.field(E.COLOR,{binSuffix:"start"}),op:"min"}}}}function s(e,t,n,r){if(!E.hasScale(n))return null;if(I.contains([E.ROW,E.COLUMN,E.SHAPE],n))return e&&void 0!==e.type&&e.type!==A.ScaleType.ORDINAL&&console.warn("Channel",n,"does not work with scale type =",e.type),A.ScaleType.ORDINAL;if(void 0!==e.type)return e.type;switch(t.type){case O.NOMINAL:return A.ScaleType.ORDINAL;case O.ORDINAL:return n===E.COLOR?A.ScaleType.LINEAR:A.ScaleType.ORDINAL;case O.TEMPORAL:return n===E.COLOR?A.ScaleType.TIME:t.timeUnit?M.defaultScaleType(t.timeUnit):A.ScaleType.TIME;case O.QUANTITATIVE:return t.bin?I.contains([E.X,E.Y,E.COLOR],n)?A.ScaleType.LINEAR:A.ScaleType.ORDINAL:A.ScaleType.LINEAR}return null}function l(e,t,n){var r=t.fieldDef(n);if(e.domain)return e.domain;if(r.type===O.TEMPORAL)return M.rawDomain(r.timeUnit,n)?{data:r.timeUnit,field:"date"}:{data:t.dataTable(),field:t.field(n),sort:{field:t.field(n),op:"min"}};var i=t.stack();if(i&&n===i.fieldChannel)return i.offset===k.StackOffset.NORMALIZE?[0,1]:{data:t.dataName(S.STACKED_SCALE),field:t.field(n,{prefix:"sum"})};var a=c(e,t,n),o=u(t,n,e.type);return a?{data:S.SOURCE,field:t.field(n,{noAggregate:!0})}:r.bin?e.type===A.ScaleType.ORDINAL?{data:t.dataTable(),field:t.field(n,{binSuffix:"range"}),sort:{field:t.field(n,{binSuffix:"start"}),op:"min"}}:n===E.COLOR?{data:t.dataTable(),field:t.field(n,{binSuffix:"start"})}:{data:t.dataTable(),field:[t.field(n,{binSuffix:"start"}),t.field(n,{binSuffix:"end"})]}:o?{data:o.op?S.SOURCE:t.dataTable(),field:r.type===O.ORDINAL&&n===E.COLOR?t.field(n,{prefix:"rank"}):t.field(n),sort:o}:{data:t.dataTable(),field:r.type===O.ORDINAL&&n===E.COLOR?t.field(n,{prefix:"rank"}):t.field(n)}}function u(e,t,n){if(n===A.ScaleType.ORDINAL){var r=e.sort(t);return C.isSortField(r)?{op:r.op,field:r.field}:!!I.contains([C.SortOrder.ASCENDING,C.SortOrder.DESCENDING,void 0],r)||void 0}}function c(e,t,n){var r=t.fieldDef(n);return e.useRawDomain&&r.aggregate&&_.SHARED_DOMAIN_OPS.indexOf(r.aggregate)>=0&&(r.type===O.QUANTITATIVE&&!r.bin||r.type===O.TEMPORAL&&I.contains([A.ScaleType.TIME,A.ScaleType.UTC],e.type))}function f(e,t,n){var r=t.fieldDef(n),i=t.config().scale;if(e.type===A.ScaleType.ORDINAL&&e.bandSize&&I.contains([E.X,E.Y],n))return{bandSize:e.bandSize};if(e.range&&!I.contains([E.X,E.Y,E.ROW,E.COLUMN],n))return{range:e.range};switch(n){case E.ROW:return{range:"height"};case E.COLUMN:return{range:"width"}}var a=t;switch(n){case E.X:return{rangeMin:0,rangeMax:a.config().cell.width};case E.Y:return{rangeMin:a.config().cell.height,rangeMax:0};case E.SIZE:if(a.mark()===w.BAR){if(void 0!==i.barSizeRange)return{range:i.barSizeRange};var o=t.config().mark.orient===x.Orient.HORIZONTAL?E.Y:E.X;return{range:[t.config().mark.barThinSize,t.scale(o).bandSize]}}if(a.mark()===w.TEXT)return{range:i.fontSizeRange};if(a.mark()===w.RULE)return{range:i.ruleSizeRange};if(a.mark()===w.TICK)return{range:i.tickSizeRange};if(void 0!==i.pointSizeRange)return{range:i.pointSizeRange};var s=d(a);return{range:[9,(s-2)*(s-2)]};case E.SHAPE:return{range:i.shapeRange};case E.COLOR:return r.type===O.NOMINAL?{range:i.nominalColorRange}:{range:i.sequentialColorRange};case E.OPACITY:return{range:i.opacity}}return{}}function d(e){var t=e.config().scale,n=e.has(E.X),r=e.has(E.Y),i=T.isMeasure(e.encoding().x),a=T.isMeasure(e.encoding().y);return n&&r?i!==a?e.scale(i?E.Y:E.X).bandSize:Math.min(e.scale(E.X).bandSize||t.bandSize,e.scale(E.Y).bandSize||t.bandSize):r?a?e.config().scale.bandSize:e.scale(E.Y).bandSize:n?i?e.config().scale.bandSize:e.scale(E.X).bandSize:e.config().scale.bandSize}function h(e){if(I.contains([A.ScaleType.LINEAR,A.ScaleType.POW,A.ScaleType.SQRT,A.ScaleType.LOG,A.ScaleType.TIME,A.ScaleType.UTC],e.type))return e.clamp}function p(e){if(e.type===A.ScaleType.POW)return e.exponent}function g(e,t,n){if(I.contains([A.ScaleType.LINEAR,A.ScaleType.POW,A.ScaleType.SQRT,A.ScaleType.LOG,A.ScaleType.TIME,A.ScaleType.UTC,A.ScaleType.QUANTIZE],e.type))return void 0!==e.nice?e.nice:I.contains([A.ScaleType.TIME,A.ScaleType.UTC],e.type)?M.smallestUnit(n.timeUnit):I.contains([E.X,E.Y],t)}function m(e,t){if(e.type===A.ScaleType.ORDINAL&&I.contains([E.X,E.Y],t))return e.padding}function v(e,t,n,r){if(e.type===A.ScaleType.ORDINAL&&I.contains([E.X,E.Y],t))return!0}function y(e,t){if(I.contains([E.X,E.Y,E.ROW,E.COLUMN,E.SIZE],t)&&void 0!==e.round)return e.round}function b(e,t,n){if(!I.contains([A.ScaleType.TIME,A.ScaleType.UTC,A.ScaleType.ORDINAL],e.type))return void 0!==e.zero?e.zero:!e.domain&&!n.bin&&I.contains([E.X,E.Y],t)}var _=e("../aggregate"),E=e("../channel"),x=e("../config"),S=e("../data"),T=e("../fielddef"),w=e("../mark"),A=e("../scale"),C=e("../sort"),k=e("../stack"),O=e("../type"),I=e("../util"),M=e("../timeunit");n.COLOR_LEGEND="color_legend",n.COLOR_LEGEND_LABEL="color_legend_label",n.parseScaleComponent=r,n.scaleType=s,n.domain=l,n.domainSort=u,n.rangeMixins=f,n.clamp=h,n.exponent=p,n.nice=g,n.padding=m,n.points=v,n.round=y,n.zero=b},{"../aggregate":11,"../channel":14,"../config":47,"../data":48,"../fielddef":52,"../mark":55,"../scale":56,"../sort":58,"../stack":60,"../timeunit":61,"../type":63,"../util":64}],46:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../aggregate"),a=e("../channel"),o=e("../config"),s=e("../data"),l=e("../encoding"),u=e("../fielddef"),c=e("../mark"),f=e("../scale"),d=e("../type"),h=e("../util"),p=e("./axis"),g=e("./common"),m=e("./config"),v=e("./data/data"),y=e("./legend"),b=e("./layout"),_=e("./model"),E=e("./mark/mark"),x=e("./scale"),S=e("../stack"),T=function(e){function t(t,n,r){e.call(this,t,n,r);var i=this._mark=t.mark,a=this._encoding=this._initEncoding(i,t.encoding||{}),o=this._config=this._initConfig(t.config,n,i,a);this._scale=this._initScale(i,a,o),this._axis=this._initAxis(a,o),this._legend=this._initLegend(a,o),this._stack=S.stack(i,a,o)}return r(t,e),t.prototype._initEncoding=function(e,t){return t=h.duplicate(t),l.forEach(t,function(t,n){return a.supportMark(n,e)?(t.type&&(t.type=d.getFullName(t.type)),void(n!==a.PATH&&n!==a.ORDER||t.aggregate||t.type!==d.QUANTITATIVE||(t.aggregate=i.AggregateOp.MIN))):(console.warn(n,"dropped as it is incompatible with",e),void delete t.field)}),t},t.prototype._initConfig=function(e,t,n,r){var i=h.mergeDeep(h.duplicate(o.defaultConfig),t?t.config():{},e);return i.mark=m.initMarkConfig(n,r,i),i},t.prototype._initScale=function(e,t,n){return a.UNIT_SCALE_CHANNELS.reduce(function(r,i){if(l.has(t,i)||i===a.X&&l.has(t,a.X2)||i===a.Y&&l.has(t,a.Y2)){var o=t[i],s=(o||{}).scale||{},u=x.scaleType(s,o,i,e);r[i]=h.extend({type:u,round:n.scale.round,padding:n.scale.padding,useRawDomain:n.scale.useRawDomain,bandSize:i===a.X&&u===f.ScaleType.ORDINAL&&e===c.TEXT?n.scale.textBandWidth:n.scale.bandSize},s)}return r},{})},t.prototype._initAxis=function(e,t){return[a.X,a.Y].reduce(function(n,r){if(l.has(e,r)||r===a.X&&l.has(e,a.X2)||r===a.Y&&l.has(e,a.Y2)){var i=(e[r]||{}).axis;i!==!1&&(n[r]=h.extend({},t.axis,i===!0?{}:i||{}))}return n},{})},t.prototype._initLegend=function(e,t){return a.NONSPATIAL_SCALE_CHANNELS.reduce(function(n,r){if(l.has(e,r)){var i=e[r].legend;i!==!1&&(n[r]=h.extend({},t.legend,i===!0?{}:i||{}))}return n},{})},t.prototype.parseData=function(){this.component.data=v.parseUnitData(this)},t.prototype.parseSelectionData=function(){},t.prototype.parseLayoutData=function(){this.component.layout=b.parseUnitLayout(this)},t.prototype.parseScale=function(){this.component.scale=x.parseScaleComponent(this)},t.prototype.parseMark=function(){this.component.mark=E.parseMark(this)},t.prototype.parseAxis=function(){this.component.axis=p.parseAxisComponent(this,[a.X,a.Y])},t.prototype.parseAxisGroup=function(){return null},t.prototype.parseGridGroup=function(){return null},t.prototype.parseLegend=function(){this.component.legend=y.parseLegendComponent(this)},t.prototype.assembleData=function(e){return v.assembleData(this,e)},t.prototype.assembleLayout=function(e){return b.assembleLayout(this,e)},t.prototype.assembleMarks=function(){return this.component.mark},t.prototype.assembleParentGroupProperties=function(e){return g.applyConfig({},e,g.FILL_STROKE_CONFIG.concat(["clip"]))},t.prototype.channels=function(){return a.UNIT_CHANNELS},t.prototype.mapping=function(){return this.encoding()},t.prototype.stack=function(){return this._stack},t.prototype.toSpec=function(e,t){var n,r=h.duplicate(this._encoding);return n={mark:this._mark,encoding:r},e||(n.config=h.duplicate(this._config)),t||(n.data=h.duplicate(this._data)),n},t.prototype.mark=function(){return this._mark},t.prototype.has=function(e){return l.has(this._encoding,e)},t.prototype.encoding=function(){return this._encoding},t.prototype.fieldDef=function(e){return this._encoding[e]||{}},t.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);return n.bin&&(t=h.extend({binSuffix:this.scale(e).type===f.ScaleType.ORDINAL?"range":"start"},t)),u.field(n,t)},t.prototype.dataTable=function(){return this.dataName(l.isAggregate(this._encoding)?s.SUMMARY:s.SOURCE)},t.prototype.isUnit=function(){return!0},t}(_.Model);n.UnitModel=T},{"../aggregate":11,"../channel":14,"../config":47,"../data":48,"../encoding":50,"../fielddef":52,"../mark":55,"../scale":56,"../stack":60,"../type":63,"../util":64,"./axis":15,"./common":16,"./config":18,"./data/data":21,"./layout":34,"./legend":35,"./mark/mark":39,"./model":44,"./scale":45}],47:[function(e,t,n){"use strict";var r=e("./scale"),i=e("./axis"),a=e("./legend");n.defaultCellConfig={width:200,height:200},n.defaultFacetCellConfig={stroke:"#ccc",strokeWidth:1};var o={color:"#000000",opacity:.4,offset:0};n.defaultFacetConfig={scale:r.defaultFacetScaleConfig,axis:i.defaultFacetAxisConfig,grid:o,cell:n.defaultFacetCellConfig},function(e){e[e.NORMAL="normal"]="NORMAL",e[e.BOLD="bold"]="BOLD"}(n.FontWeight||(n.FontWeight={}));n.FontWeight;!function(e){e[e.CIRCLE="circle"]="CIRCLE",e[e.SQUARE="square"]="SQUARE",e[e.CROSS="cross"]="CROSS",e[e.DIAMOND="diamond"]="DIAMOND",e[e.TRIANGLEUP="triangle-up"]="TRIANGLEUP",e[e.TRIANGLEDOWN="triangle-down"]="TRIANGLEDOWN"}(n.Shape||(n.Shape={}));var s=n.Shape;!function(e){e[e.HORIZONTAL="horizontal"]="HORIZONTAL",e[e.VERTICAL="vertical"]="VERTICAL"}(n.Orient||(n.Orient={}));n.Orient;!function(e){e[e.LEFT="left"]="LEFT",e[e.RIGHT="right"]="RIGHT",e[e.CENTER="center"]="CENTER"}(n.HorizontalAlign||(n.HorizontalAlign={}));n.HorizontalAlign;!function(e){e[e.TOP="top"]="TOP",e[e.MIDDLE="middle"]="MIDDLE",
e[e.BOTTOM="bottom"]="BOTTOM"}(n.VerticalAlign||(n.VerticalAlign={}));var l=n.VerticalAlign;!function(e){e[e.NORMAL="normal"]="NORMAL",e[e.ITALIC="italic"]="ITALIC"}(n.FontStyle||(n.FontStyle={}));n.FontStyle;!function(e){e[e.LINEAR="linear"]="LINEAR",e[e.LINEAR_CLOSED="linear-closed"]="LINEAR_CLOSED",e[e.STEP="step"]="STEP",e[e.STEP_BEFORE="step-before"]="STEP_BEFORE",e[e.STEP_AFTER="step-after"]="STEP_AFTER",e[e.BASIS="basis"]="BASIS",e[e.BASIS_OPEN="basis-open"]="BASIS_OPEN",e[e.BASIS_CLOSED="basis-closed"]="BASIS_CLOSED",e[e.CARDINAL="cardinal"]="CARDINAL",e[e.CARDINAL_OPEN="cardinal-open"]="CARDINAL_OPEN",e[e.CARDINAL_CLOSED="cardinal-closed"]="CARDINAL_CLOSED",e[e.BUNDLE="bundle"]="BUNDLE",e[e.MONOTONE="monotone"]="MONOTONE"}(n.Interpolate||(n.Interpolate={}));n.Interpolate;!function(e){e[e.LINE="line"]="LINE",e[e.LINEPOINT="linepoint"]="LINEPOINT",e[e.NONE="none"]="NONE"}(n.AreaOverlay||(n.AreaOverlay={}));n.AreaOverlay;n.defaultOverlayConfig={line:!1,pointStyle:{filled:!0},lineStyle:{}},n.defaultMarkConfig={color:"#4682b4",fill:"#4682b4",shape:s.CIRCLE,strokeWidth:1,size:10,barThinSize:2,ruleSize:1,tickThickness:1,fontSize:10,baseline:l.MIDDLE,text:"Abc",shortTimeLabels:!1,applyColorToBackground:!1},n.defaultConfig={numberFormat:"s",timeFormat:"%Y-%m-%d",countTitle:"Number of Records",cell:n.defaultCellConfig,mark:n.defaultMarkConfig,overlay:n.defaultOverlayConfig,scale:r.defaultScaleConfig,axis:i.defaultAxisConfig,legend:a.defaultLegendConfig,facet:n.defaultFacetConfig}},{"./axis":12,"./legend":54,"./scale":56}],48:[function(e,t,n){"use strict";var r=e("./type");!function(e){e[e.JSON="json"]="JSON",e[e.CSV="csv"]="CSV",e[e.TSV="tsv"]="TSV",e[e.TOPOJSON="topojson"]="TOPOJSON"}(n.DataFormatType||(n.DataFormatType={}));n.DataFormatType;!function(e){e[e.SOURCE="source"]="SOURCE",e[e.SUMMARY="summary"]="SUMMARY",e[e.STACKED_SCALE="stacked_scale"]="STACKED_SCALE",e[e.LAYOUT="layout"]="LAYOUT"}(n.DataTable||(n.DataTable={}));var i=n.DataTable;n.SUMMARY=i.SUMMARY,n.SOURCE=i.SOURCE,n.STACKED_SCALE=i.STACKED_SCALE,n.LAYOUT=i.LAYOUT,n.types={"boolean":r.Type.NOMINAL,number:r.Type.QUANTITATIVE,integer:r.Type.QUANTITATIVE,date:r.Type.TEMPORAL,string:r.Type.NOMINAL}},{"./type":63}],49:[function(e,t,n){"use strict";function r(e){return!!(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds)}function i(e){return l.isNumber(e)?e-1+"":(console.warn("Potentially invalid quarter",e),e)}function a(e){if(l.isNumber(e))return e-1+"";var t=e.toLowerCase(),r=n.MONTHS.indexOf(t);if(r!==-1)return r+"";var i=t.substr(0,3),a=n.SHORT_MONTHS.indexOf(i);return a!==-1?a+"":(console.warn("Potentially invalid month",e),e)}function o(e){if(l.isNumber(e))return e%7+"";var t=e.toLowerCase(),r=n.DAYS.indexOf(t);if(r!==-1)return r+"";var i=t.substr(0,3),a=n.SHORT_DAYS.indexOf(i);return a!==-1?a+"":(console.warn("Potentially invalid day",e),e)}function s(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day)for(var r=0,s=["year","quarter","month","date"];r<s.length;r++){var u=s[r];if(void 0!==e[u]){console.warn("Dropping day from datetime",JSON.stringify(e),"as day cannot be combined with",u),e=l.duplicate(e),delete e.day;break}}if(void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(2006):n.push(0),void 0!==e.month){var c=t?a(e.month):e.month;n.push(c)}else if(void 0!==e.quarter){var f=t?i(e.quarter):e.quarter;n.push(f+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var d=t?o(e.day):e.day;n.push(d+"+1")}else n.push(1);for(var h=0,p=["hours","minutes","seconds","milliseconds"];h<p.length;h++){var g=p[h];void 0!==e[g]?n.push(e[g]):n.push(0)}return"datetime("+n.join(", ")+")"}var l=e("./util");n.isDateTime=r,n.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],n.SHORT_MONTHS=n.MONTHS.map(function(e){return e.substr(0,3)}),n.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n.SHORT_DAYS=n.DAYS.map(function(e){return e.substr(0,3)}),n.dateTimeExpr=s},{"./util":64}],50:[function(e,t,n){"use strict";function r(e){var t=0;return e.color&&t++,e.opacity&&t++,e.size&&t++,e.shape&&t++,t}function i(e){return g.CHANNELS.filter(function(t){return a(e,t)})}function a(e,t){var n=e&&e[t];return n&&(void 0!==n.field||m.isArray(n)&&n.length>0)}function o(e){return m.some(g.CHANNELS,function(t){return!(!a(e,t)||!e[t].aggregate)})}function s(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}function l(e){var t=[];return g.CHANNELS.forEach(function(n){a(e,n)&&(m.isArray(e[n])?e[n].forEach(function(e){t.push(e)}):t.push(e[n]))}),t}function u(e,t,n){c(g.CHANNELS,e,t,n)}function c(e,t,n,r){var i=0;e.forEach(function(e){a(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){n.call(r,t,e,i++)}):n.call(r,t[e],e,i++))})}function f(e,t,n){return d(g.CHANNELS,e,t,n)}function d(e,t,n,r){var i=[];return e.forEach(function(e){a(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){i.push(n.call(r,t,e))}):i.push(n.call(r,t[e],e)))}),i}function h(e,t,n,r){return p(g.CHANNELS,e,t,n,r)}function p(e,t,n,r,i){var o=r;return g.CHANNELS.forEach(function(e){a(t,e)&&(m.isArray(t[e])?t[e].forEach(function(t){o=n.call(i,o,t,e)}):o=n.call(i,o,t[e],e))}),o}var g=e("./channel"),m=e("./util");n.countRetinal=r,n.channels=i,n.has=a,n.isAggregate=o,n.isRanged=s,n.fieldDefs=l,n.forEach=u,n.channelMappingForEach=c,n.map=f,n.channelMappingMap=d,n.reduce=h,n.channelMappingReduce=p},{"./channel":14,"./util":64}],51:[function(e,t,n){"use strict"},{}],52:[function(e,t,n){"use strict";function r(e,t){void 0===t&&(t={});var n=e.field,r=t.prefix,i=t.suffix;if(l(e))n="count";else{var a=t.fn;t.nofn||(e.bin?(a="bin",i=t.binSuffix||(t.scaleType===d.ScaleType.ORDINAL?"range":"start")):!t.noAggregate&&e.aggregate?a=String(e.aggregate):e.timeUnit&&(a=String(e.timeUnit))),a&&(n=a+"_"+n)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),t.datum&&(n='datum["'+n+'"]'),n}function i(e){return g.contains([p.NOMINAL,p.ORDINAL],e.type)||!!e.bin||e.type===p.TEMPORAL&&!!e.timeUnit}function a(e){return e&&e.field&&i(e)}function o(e){return e&&e.field&&!i(e)}function s(){return{field:"*",aggregate:f.AggregateOp.COUNT,type:p.QUANTITATIVE}}function l(e){return e.aggregate===f.AggregateOp.COUNT}function u(e,t,n){void 0===n&&(n={});var r=t[e.field],i=e.type;if(e.bin){var a=e.bin,o="boolean"==typeof a?void 0:a.maxbins;void 0===o&&(o=10);var s=g.getbins(r,o);return(s.stop-s.start)/s.step}if(i===p.TEMPORAL){var l=e.timeUnit;switch(l){case h.TimeUnit.SECONDS:return 60;case h.TimeUnit.MINUTES:return 60;case h.TimeUnit.HOURS:return 24;case h.TimeUnit.DAY:return 7;case h.TimeUnit.DATE:return 31;case h.TimeUnit.MONTH:return 12;case h.TimeUnit.QUARTER:return 4;case h.TimeUnit.YEAR:var u=t["year_"+e.field];return u?u.distinct-(r.missing>0&&n[i]?1:0):null}}return e.aggregate?1:r.distinct-(r.missing>0&&n[i]?1:0)}function c(e,t){if(null!=e.title)return e.title;if(l(e))return t.countTitle;var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toString().toUpperCase()+"("+e.field+")":e.field}var f=e("./aggregate"),d=e("./scale"),h=e("./timeunit"),p=e("./type"),g=e("./util");n.aggregate={type:"string","enum":f.AGGREGATE_OPS,supportedEnums:{quantitative:f.AGGREGATE_OPS,ordinal:["median","min","max"],nominal:[],temporal:["mean","median","min","max"],"":["count"]},supportedTypes:g.toMap([p.QUANTITATIVE,p.NOMINAL,p.ORDINAL,p.TEMPORAL,""])},n.field=r,n.isDimension=a,n.isMeasure=o,n.count=s,n.isCount=l,n.cardinality=u,n.title=c},{"./aggregate":11,"./scale":56,"./timeunit":61,"./type":63,"./util":64}],53:[function(e,t,n){"use strict";function r(e){return e&&!!e.field&&void 0!==e.equal}function i(e){return!!(e&&e.field&&f.isArray(e.range)&&2===e.range.length)}function a(e){return e&&!!e.field&&f.isArray(e["in"])}function o(e){if(f.isString(e))return e;var t=e.timeUnit?"time("+c.fieldExpr(e.timeUnit,e.field)+")":u.field(e,{datum:!0});if(r(e))return t+"==="+s(e.equal,e.timeUnit);if(a(e))return"indexof(["+e["in"].map(function(t){return s(t,e.timeUnit)}).join(",")+"], "+t+") !== -1";if(i(e)){var n=e.range[0],o=e.range[1];if(null!==n&&null!==o)return"inrange("+t+", "+s(n,e.timeUnit)+", "+s(o,e.timeUnit)+")";if(null!==n)return t+" >= "+n;if(null!==o)return t+" <= "+o}}function s(e,t){if(l.isDateTime(e)){var n=l.dateTimeExpr(e,!0);return"time("+n+")"}if(c.isSingleTimeUnit(t)){var r={};r[t]=e;var n=l.dateTimeExpr(r,!0);return"time("+n+")"}return JSON.stringify(e)}var l=e("./datetime"),u=e("./fielddef"),c=e("./timeunit"),f=e("./util");n.isEqualFilter=r,n.isRangeFilter=i,n.isInFilter=a,n.expression=o},{"./datetime":49,"./fielddef":52,"./timeunit":61,"./util":64}],54:[function(e,t,n){"use strict";n.defaultLegendConfig={orient:void 0,shortTimeLabels:!1}},{}],55:[function(e,t,n){"use strict";!function(e){e[e.AREA="area"]="AREA",e[e.BAR="bar"]="BAR",e[e.LINE="line"]="LINE",e[e.POINT="point"]="POINT",e[e.TEXT="text"]="TEXT",e[e.TICK="tick"]="TICK",e[e.RULE="rule"]="RULE",e[e.CIRCLE="circle"]="CIRCLE",e[e.SQUARE="square"]="SQUARE",e[e.ERRORBAR="errorBar"]="ERRORBAR",e[e.BOXPLOT="boxplot"]="BOXPLOT",e[e.HEXAGON="hexagon"]="HEXAGON",e[e.LEADER="leader"]="LEADER",e[e.CONTOUR="contour"]="CONTOUR",e[e.SCATTER3D="scatter3D"]="SCATTER3D",e[e.RADAR="radar"]="RADAR"}(n.Mark||(n.Mark={}));var r=n.Mark;n.AREA=r.AREA,n.BAR=r.BAR,n.LINE=r.LINE,n.POINT=r.POINT,n.TEXT=r.TEXT,n.TICK=r.TICK,n.RULE=r.RULE,n.CIRCLE=r.CIRCLE,n.SQUARE=r.SQUARE,n.ERRORBAR=r.ERRORBAR,n.BOXPLOT=r.BOXPLOT,n.HEXAGON=r.HEXAGON,n.LEADER=r.LEADER,n.CONTOUR=r.CONTOUR,n.SCATTER3D=r.SCATTER3D,n.PRIMITIVE_MARKS=[n.AREA,n.BAR,n.LINE,n.POINT,n.TEXT,n.TICK,n.RULE,n.CIRCLE,n.SQUARE,n.BOXPLOT,n.HEXAGON,n.LEADER,n.CONTOUR,n.SCATTER3D]},{}],56:[function(e,t,n){"use strict";!function(e){e[e.LINEAR="linear"]="LINEAR",e[e.LOG="log"]="LOG",e[e.POW="pow"]="POW",e[e.SQRT="sqrt"]="SQRT",e[e.QUANTILE="quantile"]="QUANTILE",e[e.QUANTIZE="quantize"]="QUANTIZE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TIME="time"]="TIME",e[e.UTC="utc"]="UTC"}(n.ScaleType||(n.ScaleType={}));n.ScaleType;!function(e){e[e.SECOND="second"]="SECOND",e[e.MINUTE="minute"]="MINUTE",e[e.HOUR="hour"]="HOUR",e[e.DAY="day"]="DAY",e[e.WEEK="week"]="WEEK",e[e.MONTH="month"]="MONTH",e[e.YEAR="year"]="YEAR"}(n.NiceTime||(n.NiceTime={}));n.NiceTime;n.defaultScaleConfig={round:!0,textBandWidth:90,bandSize:21,padding:1,useRawDomain:!1,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]},n.defaultFacetScaleConfig={round:!0,padding:16}},{}],57:[function(e,t,n){"use strict";function r(e){return"mark"+n.ASSIGN+e.mark+n.DELIM+a(e.encoding)}function i(e,t,r){var i=e.split(n.DELIM),a=i.shift().split(n.ASSIGN)[1].trim(),s=o(i.join(n.DELIM)),l={mark:p.Mark[a],encoding:s};return void 0!==t&&(l.data=t),void 0!==r&&(l.config=r),l}function a(e){return h.map(e,function(e,t){return t+n.ASSIGN+s(e)}).join(n.DELIM)}function o(e){return e.split(n.DELIM).reduce(function(e,t){var r=t.split(n.ASSIGN),i=r[0].trim(),a=r[1];return e[i]=u(a),e},{})}function s(e){return(e.aggregate?e.aggregate+n.FUNC:"")+(e.timeUnit?e.timeUnit+n.FUNC:"")+(e.bin?"bin"+n.FUNC:"")+(e.field||"")+n.TYPE+d.SHORT_TYPE[e.type]}function l(e,t){return void 0===t&&(t=n.DELIM),e.map(s).join(t)}function u(e){for(var t=e.split(n.TYPE),r={field:t[0].trim(),type:d.TYPE_FROM_SHORT_TYPE[t[1].trim()]},i=0;i<c.AGGREGATE_OPS.length;i++){var a=c.AGGREGATE_OPS[i];if(0===r.field.indexOf(a+"_")){r.field=r.field.substr(a.toString().length+1),a===c.AggregateOp.COUNT&&0===r.field.length&&(r.field="*"),r.aggregate=a;break}}for(var i=0;i<f.TIMEUNITS.length;i++){var o=f.TIMEUNITS[i];if(r.field&&0===r.field.indexOf(o+"_")){r.field=r.field.substr(r.field.length+1),r.timeUnit=o;break}}return r.field&&0===r.field.indexOf("bin_")&&(r.field=r.field.substr(4),r.bin=!0),r}var c=e("./aggregate"),f=e("./timeunit"),d=e("./type"),h=e("./encoding"),p=e("./mark");n.DELIM="|",n.ASSIGN="=",n.TYPE=",",n.FUNC="_",n.shorten=r,n.parse=i,n.shortenEncoding=a,n.parseEncoding=o,n.shortenFieldDef=s,n.shortenFieldDefs=l,n.parseFieldDef=u},{"./aggregate":11,"./encoding":50,"./mark":55,"./timeunit":61,"./type":63}],58:[function(e,t,n){"use strict";function r(e){return!!e&&!!e.field&&!!e.op}!function(e){e[e.ASCENDING="ascending"]="ASCENDING",e[e.DESCENDING="descending"]="DESCENDING",e[e.NONE="none"]="NONE"}(n.SortOrder||(n.SortOrder={}));n.SortOrder;n.isSortField=r},{}],59:[function(e,t,n){"use strict";function r(e){return void 0!==e.facet}function i(e){if(o(e)){var t=b.has(e.encoding,x.ROW),n=b.has(e.encoding,x.COLUMN);return t||n}return!1}function a(e){return!!o(e)&&!i(e)}function o(e){return void 0!==e.mark}function s(e){return void 0!==e.layers}function l(e){return i(e)?u(e):a(e)?c(e):e}function u(e){var t=b.has(e.encoding,x.ROW),n=b.has(e.encoding,x.COLUMN),r=T.duplicate(e.encoding);return delete r.column,delete r.row,T.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},{data:e.data},e.transform?{transform:e.transform}:{},{facet:T.extend(t?{row:e.encoding.row}:{},n?{column:e.encoding.column}:{}),spec:c({mark:e.mark,encoding:r})},e.config?{config:e.config}:{})}function c(e){var t=e.config,n=t&&t.overlay,r=n&&e.mark===_.AREA&&T.contains([y.AreaOverlay.LINEPOINT,y.AreaOverlay.LINE],n.area),i=n&&(n.line&&e.mark===_.LINE||n.area===y.AreaOverlay.LINEPOINT&&e.mark===_.AREA);return e.mark===_.ERRORBAR?d(e):b.isRanged(e.encoding)?f(e):v(e)?e:i||r?h(e,i,r):e}function f(e){if(e.encoding){var t=b.has(e.encoding,x.X),n=b.has(e.encoding,x.Y),r=b.has(e.encoding,x.X2),i=b.has(e.encoding,x.Y2);if(r&&!t||i&&!n){var a=T.duplicate(e);return r&&!t&&(a.encoding.x=a.encoding.x2,delete a.encoding.x2),i&&!n&&(a.encoding.y=a.encoding.y2,delete a.encoding.y2),a}}return e}function d(e){var t=T.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},e.data?{data:e.data}:{},e.transform?{transform:e.transform}:{},e.config?{config:e.config}:{},{layers:[]});if(!e.encoding)return t;if(e.mark===_.ERRORBAR){var n={mark:_.RULE,encoding:T.extend(e.encoding.x?{x:T.duplicate(e.encoding.x)}:{},e.encoding.y?{y:T.duplicate(e.encoding.y)}:{},e.encoding.x2?{x2:T.duplicate(e.encoding.x2)}:{},e.encoding.y2?{y2:T.duplicate(e.encoding.y2)}:{},{})},r={mark:_.TICK,encoding:T.extend(e.encoding.x?{x:T.duplicate(e.encoding.x)}:{},e.encoding.y?{y:T.duplicate(e.encoding.y)}:{},e.encoding.size?{size:T.duplicate(e.encoding.size)}:{},{})},i={mark:_.TICK,encoding:T.extend({x:e.encoding.x2?T.duplicate(e.encoding.x2):T.duplicate(e.encoding.x),y:e.encoding.y2?T.duplicate(e.encoding.y2):T.duplicate(e.encoding.y)},e.encoding.size?{size:T.duplicate(e.encoding.size)}:{})};t.layers.push(c(n)),t.layers.push(c(r)),t.layers.push(c(i))}return t}function h(e,t,n){var r=["name","description","data","transform"],i=T.omit(e,r.concat("config")),a=T.duplicate(e.config);delete a.overlay;var o=T.extend(T.pick(e,r),{layers:[i]},T.keys(a).length>0?{config:a}:{});if(n){var s=T.duplicate(i);s.mark=_.LINE;var l=T.extend({},y.defaultOverlayConfig.lineStyle,e.config.overlay.lineStyle);T.keys(l).length>0&&(s.config={mark:l}),o.layers.push(s)}if(t){var u=T.duplicate(i);u.mark=_.POINT;var l=T.extend({},y.defaultOverlayConfig.pointStyle,e.config.overlay.pointStyle);T.keys(l).length>0&&(u.config={mark:l}),o.layers.push(u)}return o}function p(e){return S.isAggregate(e.encoding)}function g(e){return S.fieldDefs(e.encoding)}function m(e){return e}function v(e){return null!==E.stack(e.mark,e.encoding,e.config)}var y=e("./config"),b=e("./encoding"),_=e("./mark"),E=e("./stack"),x=e("./channel"),S=e("./encoding"),T=e("./util");n.isFacetSpec=r,n.isExtendedUnitSpec=i,n.isUnitSpec=a,n.isSomeUnitSpec=o,n.isLayerSpec=s,n.normalize=l,n.normalizeExtendedUnitSpec=u,n.normalizeUnitSpec=c,n.normalizeRangedUnitSpec=f,n.normalizeErrorBarUnitSpec=d,n.normalizeOverlay=h,n.alwaysNoOcclusion=p,n.fieldDefs=g,n.getCleanSpec=m,n.isStacked=v},{"./channel":14,"./config":47,"./encoding":50,"./mark":55,"./stack":60,"./util":64}],60:[function(e,t,n){"use strict";function r(e,t,n){var r=n&&n.mark?n.mark.stacked:void 0;if(s.contains([l.NONE,null,!1],r))return null;if(!s.contains([o.BAR,o.AREA],e))return null;if(!a.isAggregate(t))return null;var u=i.STACK_GROUP_CHANNELS.reduce(function(e,n){return a.has(t,n)&&!t[n].aggregate&&e.push(n),e},[]);if(0===u.length)return null;var c=a.has(t,i.X),f=a.has(t,i.Y),d=c&&!!t.x.aggregate,h=f&&!!t.y.aggregate;return d!==h?{groupbyChannel:d?f?i.Y:null:c?i.X:null,fieldChannel:d?i.X:i.Y,stackByChannels:u,offset:r||l.ZERO}:null}var i=e("./channel"),a=e("./encoding"),o=e("./mark"),s=e("./util");!function(e){e[e.ZERO="zero"]="ZERO",e[e.CENTER="center"]="CENTER",e[e.NORMALIZE="normalize"]="NORMALIZE",e[e.NONE="none"]="NONE"}(n.StackOffset||(n.StackOffset={}));var l=n.StackOffset;n.stack=r},{"./channel":14,"./encoding":50,"./mark":55,"./util":64}],61:[function(e,t,n){"use strict";function r(e){return!!v[e]}function i(e,t){var r=new Date(0,0,1,0,0,0,0);return n.SINGLE_TIMEUNITS.forEach(function(n){if(o(e,n))switch(n){case m.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case m.YEAR:r.setFullYear(t.getFullYear());break;case m.QUARTER:r.setMonth(3*Math.floor(t.getMonth()/3));break;case m.MONTH:r.setMonth(t.getMonth());break;case m.DATE:r.setDate(t.getDate());break;case m.HOURS:r.setHours(t.getHours());break;case m.MINUTES:r.setMinutes(t.getMinutes());break;case m.SECONDS:r.setSeconds(t.getSeconds());break;case m.MILLISECONDS:r.setMilliseconds(t.getMilliseconds())}}),r}function a(e){return!!y[e]}function o(e,t){var n=e.toString(),r=t.toString(),i=n.indexOf(r);return i>-1&&(t!==m.SECONDS||0===i||"i"!==n.charAt(i-1))}function s(e){switch(e){case m.HOURS:case m.DAY:case m.MONTH:case m.QUARTER:return p.ScaleType.ORDINAL}return p.ScaleType.TIME}function l(e,t){function r(e){return e===m.QUARTER?"floor(month("+i+")/3)":e+"("+i+")"}var i='datum["'+t+'"]',a=n.SINGLE_TIMEUNITS.reduce(function(t,n){return o(e,n)&&(t[n]=r(n)),t},{});return a.day&&g.keys(a).length>1&&(console.warn('Time unit "'+e+'" is not supported. We are replacing it with ',(e+"").replace("day","date")+"."),delete a.day,a.date=r(m.DATE)),h.dateTimeExpr(a)}function u(e,t){if(g.contains([d.ROW,d.COLUMN,d.SHAPE,d.COLOR],t))return null;switch(e){case m.SECONDS:return g.range(0,60);case m.MINUTES:return g.range(0,60);case m.HOURS:return g.range(0,24);case m.DAY:return g.range(0,7);case m.DATE:return g.range(1,32);case m.MONTH:return g.range(0,12);case m.QUARTER:return[0,3,6,9]}return null}function c(e){if(e)return o(e,m.SECONDS)?"second":o(e,m.MINUTES)?"minute":o(e,m.HOURS)?"hour":o(e,m.DAY)||o(e,m.DATE)?"day":o(e,m.MONTH)?"month":o(e,m.YEAR)?"year":void 0}function f(e,t,n){if(e){var r=[];o(e,m.YEAR)&&r.push(n?"%y":"%Y"),o(e,m.QUARTER)&&r.push("'}}Q{{"+t+" | quarter}}{{"+t+" | time:'"),o(e,m.MONTH)&&r.push(n?"%b":"%B"),o(e,m.DAY)?r.push(n?"%a":"%A"):o(e,m.DATE)&&r.push("%d");var i=[];o(e,m.HOURS)&&i.push("%H"),o(e,m.MINUTES)&&i.push("%M"),o(e,m.SECONDS)&&i.push("%S"),o(e,m.MILLISECONDS)&&i.push("%L");var a=[];if(r.length>0&&a.push(r.join("-")),i.length>0&&a.push(i.join(":")),a.length>0){var s="{{"+t+" | time:'"+a.join(" ")+"'}}",l=t.replace(/(\[|\])/g,"\\$1");return s.replace(new RegExp("{{"+l+" \\| time:''}}","g"),"")}}}var d=e("./channel"),h=e("./datetime"),p=e("./scale"),g=e("./util");!function(e){e[e.YEAR="year"]="YEAR",e[e.MONTH="month"]="MONTH",e[e.DAY="day"]="DAY",e[e.DATE="date"]="DATE",e[e.HOURS="hours"]="HOURS",e[e.MINUTES="minutes"]="MINUTES",e[e.SECONDS="seconds"]="SECONDS",e[e.MILLISECONDS="milliseconds"]="MILLISECONDS",e[e.YEARMONTH="yearmonth"]="YEARMONTH",e[e.YEARMONTHDATE="yearmonthdate"]="YEARMONTHDATE",e[e.YEARMONTHDATEHOURS="yearmonthdatehours"]="YEARMONTHDATEHOURS",e[e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes"]="YEARMONTHDATEHOURSMINUTES",e[e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds"]="YEARMONTHDATEHOURSMINUTESSECONDS",e[e.HOURSMINUTES="hoursminutes"]="HOURSMINUTES",e[e.HOURSMINUTESSECONDS="hoursminutesseconds"]="HOURSMINUTESSECONDS",e[e.MINUTESSECONDS="minutesseconds"]="MINUTESSECONDS",e[e.SECONDSMILLISECONDS="secondsmilliseconds"]="SECONDSMILLISECONDS",e[e.QUARTER="quarter"]="QUARTER",e[e.YEARQUARTER="yearquarter"]="YEARQUARTER",e[e.QUARTERMONTH="quartermonth"]="QUARTERMONTH",e[e.YEARQUARTERMONTH="yearquartermonth"]="YEARQUARTERMONTH"}(n.TimeUnit||(n.TimeUnit={}));var m=n.TimeUnit;n.SINGLE_TIMEUNITS=[m.YEAR,m.QUARTER,m.MONTH,m.DAY,m.DATE,m.HOURS,m.MINUTES,m.SECONDS,m.MILLISECONDS];var v=n.SINGLE_TIMEUNITS.reduce(function(e,t){return e[t]=!0,e},{});n.isSingleTimeUnit=r,n.convert=i,n.MULTI_TIMEUNITS=[m.YEARQUARTER,m.YEARQUARTERMONTH,m.YEARMONTH,m.YEARMONTHDATE,m.YEARMONTHDATEHOURS,m.YEARMONTHDATEHOURSMINUTES,m.YEARMONTHDATEHOURSMINUTESSECONDS,m.QUARTERMONTH,m.HOURSMINUTES,m.HOURSMINUTESSECONDS,m.MINUTESSECONDS,m.SECONDSMILLISECONDS];var y=n.MULTI_TIMEUNITS.reduce(function(e,t){return e[t]=!0,e},{});n.isMultiTimeUnit=a,n.TIMEUNITS=n.SINGLE_TIMEUNITS.concat(n.MULTI_TIMEUNITS),n.containsTimeUnit=o,n.defaultScaleType=s,n.fieldExpr=l,n.rawDomain=u,n.smallestUnit=c,n.template=f},{"./channel":14,"./datetime":49,"./scale":56,"./util":64}],62:[function(e,t,n){"use strict"},{}],63:[function(e,t,n){"use strict";function r(e){var t=e;return n.TYPE_FROM_SHORT_TYPE[t.toUpperCase()]||t.toLowerCase()}!function(e){e[e.QUANTITATIVE="quantitative"]="QUANTITATIVE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TEMPORAL="temporal"]="TEMPORAL",e[e.NOMINAL="nominal"]="NOMINAL"}(n.Type||(n.Type={}));var i=n.Type;n.QUANTITATIVE=i.QUANTITATIVE,n.ORDINAL=i.ORDINAL,n.TEMPORAL=i.TEMPORAL,n.NOMINAL=i.NOMINAL,n.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"},n.TYPE_FROM_SHORT_TYPE={Q:n.QUANTITATIVE,T:n.TEMPORAL,O:n.ORDINAL,N:n.NOMINAL},n.getFullName=r},{}],64:[function(e,t,n){"use strict";function r(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}function i(e,t){var n=T.duplicate(e);return t.forEach(function(e){delete n[e]}),n}function a(e){return A.isString(e)||A.isNumber(e)||A.isBoolean(e)?String(e):x(e)}function o(e,t){return e.indexOf(t)>-1}function s(e,t){return e.filter(function(e){return!o(t,e)})}function l(e,t){return e.concat(s(t,e))}function u(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function c(e,t,n,r){if(e.reduce)return e.reduce.call(r,t,n);for(var i in e)e.hasOwnProperty(i)&&(n=t.call(r,n,e[i],i,e));return n}function f(e,t,n){if(e.map)return e.map.call(n,t);var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(t.call(n,e[i],i,e));return r}function d(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1}function h(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0}function p(e){return[].concat.apply([],e)}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=m(e,t[r]);return e}function m(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=g(t[n].constructor===Array?[]:{},t[n]):g(e[n],t[n]));return e}function v(e,t){return C({min:e.min,max:e.max,maxbins:t})}function y(e,t){var n,r,i,a=[],o={};for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],n in o||(o[n]=1,a.push(e[r]));return a}function b(e){console.warn("[VL Warning]",e)}function _(e){console.error("[VL Error]",e)}function E(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1}var x=e("json-stable-stringify"),S=e("datalib/src/util");n.keys=S.keys,n.extend=S.extend,n.duplicate=S.duplicate,n.isArray=S.isArray,n.vals=S.vals,n.truncate=S.truncate,n.toMap=S.toMap,n.isObject=S.isObject,n.isString=S.isString,n.isNumber=S.isNumber,n.isBoolean=S.isBoolean;var T=e("datalib/src/util"),w=e("datalib/src/generate");n.range=w.range;var A=e("datalib/src/util");n.pick=r,n.omit=i,n.hash=a,n.contains=o,n.without=s,n.union=l,n.forEach=u,n.reduce=c,n.map=f,n.some=d,n.every=h,n.flatten=p,n.mergeDeep=g;var C=e("datalib/src/bins/bins");n.getbins=v,n.unique=y,n.warning=b,n.error=_,n.differ=E},{"datalib/src/bins/bins":3,"datalib/src/generate":4,"datalib/src/util":6,"json-stable-stringify":7}],65:[function(e,t,n){"use strict";function r(e,t,r){void 0===t&&(t=n.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===r&&(r=n.DEFAULT_SUPPORTED_CHANNEL_TYPE);var i=e.mark,o=e.encoding,s=t[i],l=r[i];for(var u in s)if(!(s[u]in o))return'Missing encoding channel "'+s[u]+'" for mark "'+i+'"';for(var c in o)if(!l[c])return'Encoding channel "'+c+'" is not supported by mark type "'+i+'"';return i!==a.BAR||o.x||o.y?null:"Missing both x and y for bar"}var i=e("./util"),a=e("./mark");n.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},n.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:i.toMap(["row","column","x","y","size","color","detail"]),boxplot:i.toMap(["row","column","x","y"]),line:i.toMap(["row","column","x","y","color","detail"]),area:i.toMap(["row","column","x","y","color","detail"]),tick:i.toMap(["row","column","x","y","color","detail"]),circle:i.toMap(["row","column","x","y","color","size","detail"]),square:i.toMap(["row","column","x","y","color","size","detail"]),point:i.toMap(["row","column","x","y","color","size","detail","shape"]),text:i.toMap(["row","column","size","color","text"])},n.getEncodingMappingError=r},{"./mark":55,"./util":64}],66:[function(e,t,n){"use strict";function r(e){return!a.isArray(e)&&"fields"in e}function i(e){return!a.isArray(e)&&"data"in e}var a=e("./util");n.isUnionedDomain=r,n.isDataRefDomain=i},{"./util":64}],68:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../../scale"),l=e("../common");!function(e){function t(){return"rect"}function n(e){var t={},n=e.config().mark.orient,u=e.stack(),c=e.encoding().x,f=e.encoding().x2,d=o.isMeasure(c)||o.isMeasure(f);u&&i.X===u.fieldChannel?(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"start"})},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"end"})}):d?n===a.Orient.HORIZONTAL?(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={scale:e.scaleName(i.X),value:0},e.has(i.X2)?t.x2={scale:e.scaleName(i.X),field:e.field(i.X2)}:e.scale(i.X).type===s.ScaleType.LOG?t.x2={value:0}:t.x2={scale:e.scaleName(i.X),value:0}):(t.xc={scale:e.scaleName(i.X),field:e.field(i.X)},t.width={value:r(e,i.X)}):e.fieldDef(i.X).bin?e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?(t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})},t.width={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"start"}),offset:1},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"end"})}):(e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={value:0,offset:2},t.width=e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)});var h=e.encoding().y,p=e.encoding().y2,g=o.isMeasure(h)||o.isMeasure(p);return u&&i.Y===u.fieldChannel?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"end"})}):g?n!==a.Orient.HORIZONTAL?(e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y={scale:e.scaleName(i.Y),value:0},e.has(i.Y2)?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y2)}:e.scale(i.Y).type===s.ScaleType.LOG?t.y2={field:{group:"height"}}:t.y2={scale:e.scaleName(i.Y),value:0}):(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.height={value:r(e,i.Y)}):e.fieldDef(i.Y).bin?e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})},t.height={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"end"}),offset:1}):(e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y2={field:{group:"height"},offset:-1},t.height=e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),l.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().mark;return r.barSize?r.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?r.barThinSize:e.config().scale.bandSize-1}function u(e){}e.markType=t,e.properties=n,e.labels=u}(r=n.boxplot||(n.boxplot={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../../scale":56,"../common":16}],69:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../../scale"),l=e("../common");!function(e){function t(){return"rect"}function n(e){var t={},n=e.config().mark.orient,u=e.stack(),c=e.encoding().x,f=e.encoding().x2,d=o.isMeasure(c)||o.isMeasure(f);u&&i.X===u.fieldChannel?(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"start"})},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"end"})}):d?n===a.Orient.HORIZONTAL?(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={scale:e.scaleName(i.X),value:0},e.has(i.X2)?t.x2={scale:e.scaleName(i.X),field:e.field(i.X2)}:e.scale(i.X).type===s.ScaleType.LOG?t.x2={value:0}:t.x2={scale:e.scaleName(i.X),value:0}):(t.xc={scale:e.scaleName(i.X),field:e.field(i.X)},t.width={value:r(e,i.X)}):e.fieldDef(i.X).bin?e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?(t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})},t.width={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"start"}),offset:1},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"end"})}):(e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={value:0,offset:2},t.width=e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)});var h=e.encoding().y,p=e.encoding().y2,g=o.isMeasure(h)||o.isMeasure(p);return u&&i.Y===u.fieldChannel?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"end"})}):g?n!==a.Orient.HORIZONTAL?(e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y={scale:e.scaleName(i.Y),value:0},e.has(i.Y2)?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y2)}:e.scale(i.Y).type===s.ScaleType.LOG?t.y2={field:{group:"height"}}:t.y2={scale:e.scaleName(i.Y),value:0}):(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.height={value:r(e,i.Y)}):e.fieldDef(i.Y).bin?e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})},t.height={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"end"}),offset:1}):(e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y2={field:{group:"height"},offset:-1},t.height=e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),l.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().mark;return r.barSize?r.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?r.barThinSize:e.config().scale.bandSize-1}function u(e){}e.markType=t,e.properties=n,e.labels=u}(r=n.hexagon||(n.hexagon={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../../scale":56,"../common":16}],70:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../../scale"),l=e("../common");!function(e){function t(){return"rect"}function n(e){var t={},n=e.config().mark.orient,u=e.stack(),c=e.encoding().x,f=e.encoding().x2,d=o.isMeasure(c)||o.isMeasure(f);u&&i.X===u.fieldChannel?(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"start"})},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"end"})}):d?n===a.Orient.HORIZONTAL?(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={scale:e.scaleName(i.X),value:0},e.has(i.X2)?t.x2={scale:e.scaleName(i.X),
field:e.field(i.X2)}:e.scale(i.X).type===s.ScaleType.LOG?t.x2={value:0}:t.x2={scale:e.scaleName(i.X),value:0}):(t.xc={scale:e.scaleName(i.X),field:e.field(i.X)},t.width={value:r(e,i.X)}):e.fieldDef(i.X).bin?e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?(t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})},t.width={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"start"}),offset:1},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"end"})}):(e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={value:0,offset:2},t.width=e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)});var h=e.encoding().y,p=e.encoding().y2,g=o.isMeasure(h)||o.isMeasure(p);return u&&i.Y===u.fieldChannel?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"end"})}):g?n!==a.Orient.HORIZONTAL?(e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y={scale:e.scaleName(i.Y),value:0},e.has(i.Y2)?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y2)}:e.scale(i.Y).type===s.ScaleType.LOG?t.y2={field:{group:"height"}}:t.y2={scale:e.scaleName(i.Y),value:0}):(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.height={value:r(e,i.Y)}):e.fieldDef(i.Y).bin?e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})},t.height={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"end"}),offset:1}):(e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y2={field:{group:"height"},offset:-1},t.height=e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),l.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().mark;return r.barSize?r.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?r.barThinSize:e.config().scale.bandSize-1}function u(e){}e.markType=t,e.properties=n,e.labels=u}(r=n.leader||(n.leader={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../../scale":56,"../common":16}],71:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../../scale"),l=e("../common");!function(e){function t(){return"rect"}function n(e){var t={},n=e.config().mark.orient,u=e.stack(),c=e.encoding().x,f=e.encoding().x2,d=o.isMeasure(c)||o.isMeasure(f);u&&i.X===u.fieldChannel?(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"start"})},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"end"})}):d?n===a.Orient.HORIZONTAL?(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={scale:e.scaleName(i.X),value:0},e.has(i.X2)?t.x2={scale:e.scaleName(i.X),field:e.field(i.X2)}:e.scale(i.X).type===s.ScaleType.LOG?t.x2={value:0}:t.x2={scale:e.scaleName(i.X),value:0}):(t.xc={scale:e.scaleName(i.X),field:e.field(i.X)},t.width={value:r(e,i.X)}):e.fieldDef(i.X).bin?e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?(t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})},t.width={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"start"}),offset:1},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"end"})}):(e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={value:0,offset:2},t.width=e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)});var h=e.encoding().y,p=e.encoding().y2,g=o.isMeasure(h)||o.isMeasure(p);return u&&i.Y===u.fieldChannel?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"end"})}):g?n!==a.Orient.HORIZONTAL?(e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y={scale:e.scaleName(i.Y),value:0},e.has(i.Y2)?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y2)}:e.scale(i.Y).type===s.ScaleType.LOG?t.y2={field:{group:"height"}}:t.y2={scale:e.scaleName(i.Y),value:0}):(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.height={value:r(e,i.Y)}):e.fieldDef(i.Y).bin?e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})},t.height={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"end"}),offset:1}):(e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y2={field:{group:"height"},offset:-1},t.height=e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),l.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().mark;return r.barSize?r.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?r.barThinSize:e.config().scale.bandSize-1}function u(e){}e.markType=t,e.properties=n,e.labels=u}(r=n.contour||(n.contour={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../../scale":56,"../common":16}],72:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../../scale"),l=e("../common");!function(e){function t(){return"scatter3D"}function n(e){var t={},n=e.config().mark.orient,u=e.stack(),c=e.encoding().x,f=e.encoding().x2,d=o.isMeasure(c)||o.isMeasure(f);u&&i.X===u.fieldChannel?(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"start"})},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"end"})}):d?n===a.Orient.HORIZONTAL?(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={scale:e.scaleName(i.X),value:0},e.has(i.X2)?t.x2={scale:e.scaleName(i.X),field:e.field(i.X2)}:e.scale(i.X).type===s.ScaleType.LOG?t.x2={value:0}:t.x2={scale:e.scaleName(i.X),value:0}):(t.xc={scale:e.scaleName(i.X),field:e.field(i.X)},t.width={value:r(e,i.X)}):e.fieldDef(i.X).bin?e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?(t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})},t.width={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"start"}),offset:1},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"end"})}):(e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={value:0,offset:2},t.width=e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)});var h=e.encoding().y,p=e.encoding().y2,g=o.isMeasure(h)||o.isMeasure(p);return u&&i.Y===u.fieldChannel?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"end"})}):g?n!==a.Orient.HORIZONTAL?(e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y={scale:e.scaleName(i.Y),value:0},e.has(i.Y2)?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y2)}:e.scale(i.Y).type===s.ScaleType.LOG?t.y2={field:{group:"height"}}:t.y2={scale:e.scaleName(i.Y),value:0}):(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.height={value:r(e,i.Y)}):e.fieldDef(i.Y).bin?e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})},t.height={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"end"}),offset:1}):(e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y2={field:{group:"height"},offset:-1},t.height=e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),l.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().mark;return r.barSize?r.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?r.barThinSize:e.config().scale.bandSize-1}function u(e){}e.markType=t,e.properties=n,e.labels=u}(r=n.scatter3D||(n.scatter3D={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../../scale":56,"../common":16}],73:[function(e,t,n){"use strict";var r,i=e("../../channel"),a=e("../../config"),o=e("../../fielddef"),s=e("../../scale"),l=e("../common");!function(e){function t(){return"rect"}function n(e){var t={},n=e.config().mark.orient,u=e.stack(),c=e.encoding().x,f=e.encoding().x2,d=o.isMeasure(c)||o.isMeasure(f);u&&i.X===u.fieldChannel?(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"start"})},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{suffix:"end"})}):d?n===a.Orient.HORIZONTAL?(e.has(i.X)?t.x={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={scale:e.scaleName(i.X),value:0},e.has(i.X2)?t.x2={scale:e.scaleName(i.X),field:e.field(i.X2)}:e.scale(i.X).type===s.ScaleType.LOG?t.x2={value:0}:t.x2={scale:e.scaleName(i.X),value:0}):(t.xc={scale:e.scaleName(i.X),field:e.field(i.X)},t.width={value:r(e,i.X)}):e.fieldDef(i.X).bin?e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?(t.xc={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"mid"})},t.width={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.x={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"start"}),offset:1},t.x2={scale:e.scaleName(i.X),field:e.field(i.X,{binSuffix:"end"})}):(e.has(i.X)?t.xc={scale:e.scaleName(i.X),field:e.field(i.X)}:t.x={value:0,offset:2},t.width=e.has(i.SIZE)&&n!==a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.X)});var h=e.encoding().y,p=e.encoding().y2,g=o.isMeasure(h)||o.isMeasure(p);return u&&i.Y===u.fieldChannel?(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{suffix:"end"})}):g?n!==a.Orient.HORIZONTAL?(e.has(i.Y)?t.y={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y={scale:e.scaleName(i.Y),value:0},e.has(i.Y2)?t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y2)}:e.scale(i.Y).type===s.ScaleType.LOG?t.y2={field:{group:"height"}}:t.y2={scale:e.scaleName(i.Y),value:0}):(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)},t.height={value:r(e,i.Y)}):e.fieldDef(i.Y).bin?e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?(t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"mid"})},t.height={scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}):(t.y={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"start"})},t.y2={scale:e.scaleName(i.Y),field:e.field(i.Y,{binSuffix:"end"}),offset:1}):(e.has(i.Y)?t.yc={scale:e.scaleName(i.Y),field:e.field(i.Y)}:t.y2={field:{group:"height"},offset:-1},t.height=e.has(i.SIZE)&&n===a.Orient.HORIZONTAL?{scale:e.scaleName(i.SIZE),field:e.field(i.SIZE)}:{value:r(e,i.Y)}),l.applyColorAndOpacity(t,e),t}function r(e,t){var n=e.fieldDef(i.SIZE);if(n&&void 0!==n.value)return n.value;var r=e.config().mark;return r.barSize?r.barSize:e.isOrdinalScale(t)?e.scale(t).bandSize-1:e.has(t)?r.barThinSize:e.config().scale.bandSize-1}function u(e){}e.markType=t,e.properties=n,e.labels=u}(r=n.radar||(n.radar={}))},{"../../channel":14,"../../config":47,"../../fielddef":52,"../../scale":56,"../common":16}],67:[function(e,t,n){"use strict";n.axis=e("./axis"),n.aggregate=e("./aggregate"),n.bin=e("./bin"),n.channel=e("./channel"),n.compile=e("./compile/compile").compile,n.config=e("./config"),n.data=e("./data"),n.datetime=e("./datetime"),n.encoding=e("./encoding"),n.facet=e("./facet"),n.fieldDef=e("./fielddef"),n.legend=e("./legend"),n.mark=e("./mark"),n.scale=e("./scale"),n.shorthand=e("./shorthand"),n.sort=e("./sort"),n.spec=e("./spec"),n.stack=e("./stack"),n.timeUnit=e("./timeunit"),n.transform=e("./transform"),n.type=e("./type"),n.util=e("./util"),n.validate=e("./validate"),n.version="1.1.4"},{"./aggregate":11,"./axis":12,"./bin":13,"./channel":14,"./compile/compile":17,"./config":47,"./data":48,"./datetime":49,"./encoding":50,"./facet":51,"./fielddef":52,"./legend":54,"./mark":55,"./scale":56,"./shorthand":57,"./sort":58,"./spec":59,"./stack":60,"./timeunit":61,"./transform":62,"./type":63,"./util":64,"./validate":65}]},{},[67])(67)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.dl=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e){var t=e.url;if(!t&&e.file)return et+e.file;if(e.baseURL&&!Je.test(t)&&(l(t,"/")||"/"===e.baseURL[e.baseURL.length-1]||(t="/"+t),t=e.baseURL+t),!n.useXHR&&l(t,"//")&&(t=(e.defaultProtocol||"http")+":"+t),e.domainWhiteList){var r,i;if(n.useXHR){var a=document.createElement("a");a.href=t,""===a.host&&(a.href=a.href),r=a.hostname.toLowerCase(),i=window.location.hostname}else{var o=Qe.parse(t);r=o.hostname,i=null}if(i!==r){var s=e.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&"."===r[t-1]&&r.lastIndexOf(e)===t});if(!s)throw"URL is not whitelisted: "+t}}return t}function n(e,t){return n.loader(e,t)}function r(e,t){var r,i=t||function(e){throw e};try{r=n.sanitizeUrl(e)}catch(a){return void i(a)}return r?n.useXHR?n.xhr(r,e,t):l(r,et)?n.file(r.slice(et.length),e,t):r.indexOf("://")<0?n.file(r,e,t):n.http(r,e,t):void i("Invalid URL: "+e.url)}function i(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function a(e,t,r){function a(){var e=s.status;!e&&i(s)||e>=200&&e<300||304===e?r(null,s.responseText):r(s,null)}var o=!!r,s=new XMLHttpRequest;if("undefined"==typeof XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(e)||(s=new XDomainRequest),o&&("onload"in s?s.onload=s.onerror=a:s.onreadystatechange=function(){s.readyState>3&&a()}),s.open("GET",e,o),s.setRequestHeader){var l=Ne.extend({},n.headers,t.headers);for(var u in l)s.setRequestHeader(u,l[u])}if(s.send(),!o&&i(s))return s.responseText}function o(e,t,n){var r=Qe;return n?void r.readFile(e,n):r.readFileSync(e,"utf8")}function s(e,t,r){var i=Ne.extend({},n.headers,t.headers),a={url:e,encoding:null,gzip:!0,headers:i};return r?void Qe(a,function(e,t,n){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",r(e,null)):r(null,n)}):Qe("GET",e,a).getBody()}function l(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function u(e,t){return t?void(e[nt]=t):e&&e[nt]||null}function c(e){return Ne.keys(e)}function f(e){return"["+e+"]"}function d(e,t){e=Ne.array(e),t=Ne.$(t);var n,r,i;if(e[nt]&&(n=t(e[nt]),Ne.isString(n)))return n;for(r=0,i=e.length;!Ne.isValid(n)&&r<i;++r)n=t?t(e[r]):e[r];return Ne.isDate(n)?"date":Ne.isNumber(n)?"number":Ne.isBoolean(n)?"boolean":Ne.isString(n)?"string":null}function h(e,t){if(e.length){var n=t?Ne.identity:(t=c(e[0]),f);return t.reduce(function(t,r){return t[r]=d(e,n(r)),t},{})}}function p(e,t,n){e=Ne.array(e),t=Ne.$(t);var r,i,a,o=["boolean","integer","number","date"];for(r=0;r<e.length;++r){for(a=t?t(e[r]):e[r],i=0;i<o.length;++i)n&&n.test(a)||!Ne.isValid(a)||it[o[i]](a)||(o.splice(i,1),i-=1);if(0===o.length)return"string"}return o[0]}function g(e,t,n){var r=t?Ne.identity:(t=c(e[0]),f);return t.reduce(function(t,i){return t[i]=p(e,r(i),n),t},{})}function m(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return ot.dsv(t.delimiter).parse(e)}function v(e){return e}function y(e){if(null==e)return v;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,s){s||(t=n=0);var l=2,u=e.length,c=new Array(u);for(c[0]=(t+=e[0])*r+a,c[1]=(n+=e[1])*i+o;l<u;)c[l]=e[l],++l;return c}}function b(e){function t(e){e=i(e),e[0]<a&&(a=e[0]),e[0]>s&&(s=e[0]),e[1]<o&&(o=e[1]),e[1]>l&&(l=e[1])}function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var r,i=y(e.transform),a=1/0,o=a,s=-a,l=-a;e.arcs.forEach(function(e){for(var t,n=-1,r=e.length;++n<r;)t=i(e[n],n),t[0]<a&&(a=t[0]),t[0]>s&&(s=t[0]),t[1]<o&&(o=t[1]),t[1]>l&&(l=t[1])});for(r in e.objects)n(e.objects[r]);return[a,o,s,l]}function _(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function E(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return x(e,t)})}:x(e,t)}function x(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=S(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function S(e,t){function n(e,t){t.length&&t.pop();for(var n=u[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(l(n[r],r));e<0&&_(t,i)}function r(e){return l(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}function s(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(s)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var l=y(e.transform),u=e.arcs;return s(t)}function T(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),s.push(r)}}var i={},a={},o={},s=[],l=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++l],t[l]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),s=i[0],l=i[1];if(t=o[s])if(delete o[t.end],t.push(e),t.end=l,r=a[l]){delete a[r.start];var u=r===t?t:t.concat(r);a[u.start=t.start]=o[u.end=r.end]=u}else a[t.start]=o[t.end]=t;else if(t=a[l])if(delete a[t.start],t.unshift(e),t.start=s,r=o[s]){delete o[r.end];var c=r===t?t:r.concat(t);a[c.start=r.start]=o[c.end=t.end]=c}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=s]=o[t.end=l]=t}),r(o,a),r(a,o),t.forEach(function(e){i[e<0?~e:e]||s.push([e])}),s}function w(e){return S(e,A.apply(this,arguments))}function A(e,t,n){var r,i,a;if(arguments.length>1)r=C(e,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:T(e,r)}}function C(e,t,n){function r(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function s(e){switch(l=e,e.type){case"GeometryCollection":e.geometries.forEach(s);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":a(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var l,u=[],c=[];return s(t),c.forEach(null==n?function(e){u.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}function k(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return Math.abs(a)}function O(e){return S(e,I.apply(this,arguments))}function I(e,t){function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Polygon":r(e.arcs);break;case"MultiPolygon":e.arcs.forEach(r)}}function r(e){e.forEach(function(t){t.forEach(function(t){(a[t=t<0?~t:t]||(a[t]=[])).push(e)})}),o.push(e)}function i(t){return k(S(e,{type:"Polygon",arcs:[t]}).coordinates[0])}var a={},o=[],s=[];return t.forEach(n),o.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,s.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){a[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),o.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:s.map(function(t){var n,r=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){a[e<0?~e:e].length<2&&r.push(e)})})}),r=T(e,r),(n=r.length)>1)for(var o,s,l=1,u=i(r[0]);l<n;++l)(o=i(r[l]))>u&&(s=r[0],r[0]=r[l],r[l]=s,u=o);return r})}}function M(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function N(e){function t(e,t){e.forEach(function(e){e<0&&(e=~e);var n=i[e];n?n.push(t):i[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in o&&o[e.type](e.arcs,t)}var i={},a=e.map(function(){return[]}),o={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var s in i)for(var l=i[s],u=l.length,c=0;c<u;++c)for(var f=c+1;f<u;++f){var d,h=l[c],p=l[f];(d=a[h])[s=M(d,p)]!==p&&d.splice(s,0,p),(d=a[p])[s=M(d,h)]!==h&&d.splice(s,0,h)}return a}function D(e){if(null==e)return v;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,s){s||(t=n=0);var l=2,u=e.length,c=new Array(u),f=Math.round((e[0]-a)/r),d=Math.round((e[1]-o)/i);for(c[0]=f-t,t=f,c[1]=d-n,n=d;l<u;)c[l]=e[l],++l;return c}}function L(e,t){function n(e){return d(e)}function r(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(r)};break;case"Point":t={type:"Point",coordinates:n(e.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:e.coordinates.map(n)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function i(e){var t,n=0,r=1,i=e.length,a=new Array(i);for(a[0]=d(e[0],0);++n<i;)((t=d(e[n],n))[0]||t[1])&&(a[r++]=t);return 1===r&&(a[r++]=[0,0]),a.length=r,a}if(e.transform)throw new Error("already quantized");if(t&&t.scale)c=e.bbox;else{if(!((a=Math.floor(t))>=2))throw new Error("n must be ≥2");c=e.bbox||b(e);var a,o=c[0],s=c[1],l=c[2],u=c[3];t={scale:[l-o?(l-o)/(a-1):1,u-s?(u-s)/(a-1):1],translate:[o,s]}}var c,f,d=D(t),h=e.objects,p={};for(f in h)p[f]=r(h[f]);return{type:"Topology",bbox:c,transform:t,objects:p,arcs:e.arcs.map(i)}}function $(e,t){function n(e,t){e[i]=t,a.push(e);var o=e[r];if(o)for(var s=0;s<o.length;++s)n(o[s],e)}var r=t&&t.children||"children",i=t&&t.parent||"parent",a=[];return n(e,null),a.root=e,a}function R(e){return e.length>4&&"locale"+(e[0].toUpperCase()+e[1].toLowerCase()+e[3].toUpperCase()+e[4].toLowerCase())}function P(e){var t=Ne.isString(e)?_t[R(e)]:_t.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);Et=t}function F(e){var t=Ne.isString(e)?bt[R(e)]:bt.locale(e);if(null==t)throw Error("Unrecognized locale: "+e);xt=t,ft=dt=ht=pt=null}function U(e,t){e.length||(e=[0]),null==t&&(t=10);var n=e[0],r=e[e.length-1];r<n&&(o=r,r=n,n=o);var i=r-n||(t=1,n||r||1),a=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=i/t/a;return o>=wt?a*=10:o>=At?a*=5:o>=Ct&&(a*=2),[Math.ceil(n/a)*a,Math.floor(r/a)*a+a/2,a]}function j(e,t){return function(n){var r=e(n),i=r.indexOf(t);if(i<0)return r;for(var a=H(r,i),o=a<r.length?r.slice(a):"";--a>i;)if("0"!==r[a]){++a;break}return r.slice(0,a)+o}}function H(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}function z(e){var t=Et.format(".1f")(1)[1];switch(null==e&&(e=","),e=_t.formatSpecifier(e),null==e.precision&&(e.precision=12),e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return j(Et.format(e),t)}function B(e,t,n){var r=U(e,t);switch(null==n&&(n=",f"),n=_t.formatSpecifier(n),n.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=_t.precisionPrefix(r[2],i)),Et.formatPrefix(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=_t.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=_t.precisionFixed(r[2])-2*("%"===n.type))}return Et.format(n)}function q(){var e=xt.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),l=e("%Y");return function(e){var u=+e;return(yt.second(e)<u?t:yt.minute(e)<u?n:yt.hour(e)<u?r:yt.day(e)<u?i:yt.month(e)<u?yt.week(e)<u?a:o:yt.year(e)<u?s:l)(e)}}function Y(){var e=xt.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),l=e("%Y");return function(e){var u=+e;return(yt.utcSecond(e)<u?t:yt.utcMinute(e)<u?n:yt.utcHour(e)<u?r:yt.utcDay(e)<u?i:yt.utcMonth(e)<u?yt.utcWeek(e)<u?a:o:yt.utcYear(e)<u?s:l)(e)}}function X(e,t){var n=t?dt||(dt=xt.format("%b")):ft||(ft=xt.format("%B"));return St.setMonth(e),n(St)}function W(e,t){var n=t?pt||(pt=xt.format("%a")):ht||(ht=xt.format("%A"));return St.setMonth(0),St.setDate(2+e),n(St)}function G(e){return Math.floor(e.getMonth()/3)+1}function V(e){return Math.floor(e.getUTCMonth()/3)+1}function K(e,t){var n=t&&t.type||"json";return e=vt[n](e,t),t&&t.parse&&Z(e,t.parse),e}function Z(e,t){var n,r,i,a,o,s,l=e.length;for(t="auto"===t?at.inferAll(e):Ne.duplicate(t),n=Ne.keys(t),r=n.map(function(e){var n=t[e];if(n&&0===n.indexOf("date:")){var r=n.split(/:(.+)?/,2),i=r[1];if(!("'"===i[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1]))throw Error("Format pattern must be quoted: "+i);return i=i.slice(1,-1),i=kt(i),function(e){return i.parse(e)}}if(!at.parsers[n])throw Error("Illegal format pattern: "+e+":"+n);return at.parsers[n]}),a=0,s=n.length;a<l;++a)for(i=e[a],o=0;o<s;++o)i[n[o]]=r[o](i[n[o]]);at.annotation(e,t)}function Q(e){return function(t){var n=Ne.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function J(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=Nt[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{}));return Ne.vals(r).sort(function(e,t){return e.idx-t.idx})}function ee(e,t,n,r){var i=J(e,t),a="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",o="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",s="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",l="var t = this.tuple; var cell = this.cell;";return i.forEach(function(e){e.idx<0?(a=e.init+a,o=e.add+o,s=e.rem+s):(a+=e.init,o+=e.add,s+=e.rem)}),e.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){l+="this.assign(t,'"+e.out+"',"+e.set+");"}),l+="return t;",a=Function("cell","t",a),a.prototype.assign=r,a.prototype.add=Function("t","var v = this.get(t);"+o),a.prototype.rem=Function("t","var v = this.get(t);"+s),a.prototype.set=Function(l),a.prototype.get=n,a.prototype.distinct=Mt.count.distinct,a.prototype.isValid=Ne.isValid,a.fields=e.map(Ne.$("out")),a}function te(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}function ne(){this._cells={},this._aggr=[],this._stream=!1}function re(e){if(Ne.isArray(e))return e;if(null==e)return[];var t,n,r=[];for(t in e)n=Ne.array(e[t]),r.push({name:t,ops:n});return r}function ie(e){return Ht.setTime(+e),Ht}function ae(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function oe(e,t,n,r,i,a){return ae(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,i,a)}function se(e,t,n,r){var i,a,o,s=Xt[0];for(i=1,a=Xt.length;i<a;++i)if(s=Xt[i],t>s[0]){if(o=t/s[0],o>r)return e[Xt[i-1][1]];if(o>=n)return e[s[1]]}return e[Xt[a-1][1]]}function le(e){var t,n,r={};for(t=0,n=e.length;t<n;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return se(e,t,n,r)},r}function ue(e){if(!e)throw Error("Missing binning options.");var t,n,r,i,a,o,s,l=e.maxbins||15,u=e.base||10,c=Math.log(u),f=e.div||[5,2],d=e.min,h=e.max,p=h-d;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,ce(e.steps,p/l,0,e.steps.length))];else{for(n=Math.ceil(Math.log(l)/c),r=e.minstep||0,t=Math.max(r,Math.pow(u,Math.round(Math.log(p)/c)-n));Math.ceil(p/t)>l;)t*=u;for(o=0;o<f.length;++o)a=t/f[o],a>=r&&p/a<=l&&(t=a)}return a=Math.log(t),i=a>=0?0:~~(-a/c)+1,s=Math.pow(u,-i-1),d=Math.min(d,Math.floor(d/t+s)*t),h=Math.ceil(h/t)*t,{start:d,stop:h,step:t,unit:{precision:i},value:fe,index:de}}function ce(e,t,n,r){for(;n<r;){var i=n+r>>>1;Ne.cmp(e[i],t)<0?n=i+1:r=i}return n}function fe(e){return this.step*Math.floor(e/this.step+Vt)}function de(e){return Math.floor((e-this.start)/this.step+Vt)}function he(e){return this.unit.date(fe.call(this,e))}function pe(e){return de.call(this,this.unit.unit(e))}function ge(e,t,n){n=ye(e,t,n);var r=ve(n);return r?Ne.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor):n.accessor||Ne.identity}function me(e,t,n){n=ye(e,t,n);var r=ve(n);return r?be(e,n.accessor,r):_e(e,n.accessor,n&&n.sort)}function ve(e){var t=e.type,n=null;return(null==t||Zt[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?Kt.date(e):Kt(e)),n}function ye(){var e=arguments,t=0,n=Ne.isArray(e[t])?e[t++]:null,r=Ne.isFunction(e[t])||Ne.isString(e[t])?Ne.$(e[t++]):null,i=Ne.extend({},e[t]);if(n&&(i.type=i.type||at(n,r),Zt[i.type])){var a=Mt.extent(n,r);i=Ne.extend({min:a[0],max:a[1]},i)}return r&&(i.accessor=r),i}function be(e,t,n){for(var r,i,a=It.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}}),o=0;o<e.length;++o)if(r=t?t(e[o]):e[o],Ne.isValid(r)){if(i=n.index(r),i<0||i>=a.length||!isFinite(i))continue;a[i].count+=1}return a.bins=n,a}function _e(e,t,n){var r=Mt.unique(e,t),i=Mt.count.map(e,t);return r.map(function(e){return{value:e,count:i[e]}}).sort(Ne.comparator(n?"-count":"+value"))}function Ee(e){var t=xe(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(Jt)}function xe(e,t,n){t=t||"obj";var r=0,i="'",a=tn;return e.replace(a,function(a,o,s){return i+=e.slice(r,s).replace(on,Te),r=s+a.length,o&&(i+="'\n+((__t=("+Se(o,t,n)+"))==null?'':__t)+\n'"),a}),i+"'"}function Se(e,t,n){function r(e){return e=e||"",l?(l=!1,u="String("+u+")"+e):u+=e,u}function i(){return"(typeof "+u+'==="number"?new Date('+u+"):"+u+")"}function a(e){var t=g[0];if(!("'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]))throw Error("Format pattern must be quoted: "+t);t=t.slice(1,-1),d=we(t,e),l=!1;var n="number"===e?u:i();u="this.formats["+d+"]("+n+")"}var o=e.match(nn),s=o.shift().trim(),l=!0;n&&(n[s]=1);for(var u=Ee.property(t,s),c=0;c<o.length;++c){var f,d,h,p=o[c],g=null;switch((f=p.indexOf(":"))>0&&(p=p.slice(0,f),g=o[c].slice(f+1).match(rn).map(function(e){return e.trim()})),p=p.trim()){case"length":r(".length");break;case"lower":r(".toLowerCase()");break;case"upper":r(".toUpperCase()");break;case"lower-locale":r(".toLocaleLowerCase()");break;case"upper-locale":r(".toLocaleUpperCase()");break;case"trim":r(".trim()");break;case"left":d=Ne.number(g[0]),r(".slice(0,"+d+")");break;case"right":d=Ne.number(g[0]),r(".slice(-"+d+")");break;case"mid":d=Ne.number(g[0]),h=d+Ne.number(g[1]),r(".slice(+"+d+","+h+")");break;case"slice":d=Ne.number(g[0]),r(".slice("+d+(g.length>1?","+Ne.number(g[1]):"")+")");break;case"truncate":d=Ne.number(g[0]),h=g[1],h="left"!==h&&"middle"!==h&&"center"!==h?"right":h,u="this.truncate("+r()+","+d+",'"+h+"')";break;case"pad":d=Ne.number(g[0]),h=g[1],h="left"!==h&&"middle"!==h&&"center"!==h?"right":h,u="this.pad("+r()+","+d+",'"+h+"')";break;case"number":a("number");break;case"time":a("time");break;case"time-utc":a("utc");break;case"month":u="this.month("+u+")";break;case"month-abbrev":u="this.month("+u+",true)";break;case"day":u="this.day("+u+")";break;case"day-abbrev":u="this.day("+u+",true)";break;case"quarter":u="this.quarter("+u+")";break;case"quarter-utc":u="this.utcQuarter("+u+")";break;default:throw Error("Unrecognized template filter: "+p)}}return u}function Te(e){return"\\"+an[e]}function we(e,t){var n=t+":"+e;if(null==Jt.format_map[n]){var r=Tt[t](e),i=Jt.formats.length;return Jt.formats.push(r),Jt.format_map[n]=i,i}return Jt.format_map[n]}function Ae(e,t){return Jt.formats[we(e,t)]}function Ce(e,t){t=Ne.extend({separator:" ",minwidth:8,maxwidth:15},t);var n=t.fields||Ne.keys(e[0]),r=at.all(e);if(t.start||t.limit){var i=t.start||0,a=t.limit?i+t.limit:e.length;e=e.slice(i,a)}var o=n.map(function(n){var i=cn[r[n]]||"",a=en("{{"+n+i+"}}"),o=Mt.max(e,function(e){return a(e).length});return o=Math.max(Math.min(n.length,t.minwidth),o),t.maxwidth>0?Math.min(o,t.maxwidth):o}),s=n.map(function(e,t){
return Ne.truncate(Ne.pad(e,o[t],"center"),o[t])}).join(t.separator),l=en(n.map(function(e,t){return"{{"+e+(cn[r[e]]||"")+("|pad:"+o[t]+","+(fn[r[e]]||"right"))+("|truncate:"+o[t])+"}}"}).join(t.separator));return s+"\n"+e.map(l).join("\n")}function ke(e){e=e?e.__summary__?e:Mt.summary(e):this;var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push("-- "+e[t].field+" --"),"string"===e[t].type||e[t].distinct<10?r.push(Ie(e[t])):r.push(Oe(e[t])),r.push("");return r.join("\n")}function Oe(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function Ie(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,r=Ne.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(r).join("\n")}var Me="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ne=e(function(e){function t(e,t){var n,r="";for(n=0;n<e;++n)r+=t;return r}function n(e,t,n){var r=0,i=e.split(s);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,r<=t}).reverse():i.filter(function(e){return r+=e.length,r<=t}),e.length?e.join("").trim():i[0].slice(0,t)}var r=e.exports,i="__name__";r.namedfunc=function(e,t){return t[i]=e,t},r.name=function(e){return null==e?null:e[i]},r.identity=function(e){return e},r["true"]=r.namedfunc("true",function(){return!0}),r["false"]=r.namedfunc("false",function(){return!1}),r.duplicate=function(e){return JSON.parse(JSON.stringify(e))},r.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},r.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},r.length=function(e){return null!=e&&null!=e.length?e.length:null},r.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},r.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},r.toMap=function(e,t){return(t=r.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},r.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;r<t;++r)n+="|"+String(e[r]);return n};var a=Object.prototype.toString;r.isObject=function(e){return e===Object(e)},r.isFunction=function(e){return"[object Function]"===a.call(e)},r.isString=function(e){return"string"==typeof value||"[object String]"===a.call(e)},r.isArray=Array.isArray||function(e){return"[object Array]"===a.call(e)},r.isNumber=function(e){return"number"==typeof e||"[object Number]"===a.call(e)},r.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==a.call(e)},r.isDate=function(e){return"[object Date]"===a.call(e)},r.isValid=function(e){return null!=e&&e===e},r.isBuffer="function"==typeof Buffer&&Buffer.isBuffer||r["false"],r.number=function(e){return null==e||""===e?null:+e},r["boolean"]=function(e){return null==e||""===e?null:"false"!==e&&!!e},r.date=function(e,t){var n=t?t:Date;return null==e||""===e?null:n.parse(e)},r.array=function(e){return null!=e?r.isArray(e)?e:[e]:[]},r.str=function(e){return r.isArray(e)?"["+e.map(r.str)+"]":r.isObject(e)||r.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var o=/\[(.*?)\]|[^.\[]+/g;r.field=function(e){return String(e).match(o).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},r.accessor=function(e){return null==e||r.isFunction(e)?e:r.namedfunc(e,Function("x","return x["+r.field(e).map(r.str).join("][")+"];"))},r.$=r.accessor,r.mutator=function(e){var t;return r.isString(e)&&(t=r.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},r.$func=function(e,t){return function(n){n=r.$(n)||r.identity;var i=e+(r.name(n)?"_"+r.name(n):"");return r.namedfunc(i,function(e){return t(n(e))})}},r.$valid=r.$func("valid",r.isValid),r.$length=r.$func("length",r.length),r.$in=function(e,t){e=r.$(e);var n=r.isArray(t)?r.toMap(t):t;return function(t){return!!n[e(t)]}},r.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=r.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),r.accessor(e)}),function(n,i){var a,o,s,l;for(a=0,o=e.length;a<o;++a)if(s=e[a],l=r.cmp(s(n),s(i)))return l*t[a];return 0}},r.cmp=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},r.numcmp=function(e,t){return e-t},r.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return a<o?-1:a>o?1:r[n(e)]-r[n(i)]}),e},r.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},r.pad=function(e,n,r,i){i=i||" ";var a=n-e.length;if(a<=0)return e;switch(r){case"left":return t(a,i)+e;case"middle":case"center":return t(Math.floor(a/2),i)+e+t(Math.ceil(a/2),i);default:return e+t(a,i)}},r.truncate=function(e,t,r,i,a){var o=e.length;if(o<=t)return e;a=void 0!==a?String(a):"…";var s=Math.max(0,t-a.length);switch(r){case"left":return a+(i?n(e,s,1):e.slice(o-s));case"middle":case"center":var l=Math.ceil(s/2),u=Math.floor(s/2);return(i?n(e,l):e.slice(0,l))+a+(i?n(e,u,1):e.slice(o-u));default:return(i?n(e,s):e.slice(0,s))+a}};var s=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}),De="datalib",Le="1.9.1",$e="JavaScript utilites for loading, summarizing and working with data.",Re=["data","table","statistics","parse","csv","tsv","json","utility"],Pe={type:"git",url:"http://github.com/vega/datalib.git"},Fe={name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},Ue=[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],je="BSD-3-Clause",He={"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",request:"^2.67.0","sync-request":"^2.1.0","topojson-client":"^3.0.0"},ze={chai:"^4.1.2",istanbul:"latest",jshint:"^2.9.5",mocha:"^5.2.0",rollup:"^0.62.0","rollup-plugin-commonjs":"^9.1.3","rollup-plugin-json":"^3.0.0","rollup-plugin-node-resolve":"^3.3.0","uglify-js":"^3.4.3"},Be="src/index.js",qe="datalib.min.js",Ye="datalib.min.js",Xe={deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",build:"rollup -c",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js"},We={buffer:!1,fs:!1,http:!1,request:!1,"sync-request":!1,url:!1},Ge={name:De,version:Le,description:$e,keywords:Re,repository:Pe,author:Fe,contributors:Ue,license:je,dependencies:He,devDependencies:ze,main:Be,unpkg:qe,jsdelivr:Ye,scripts:Xe,browser:We},Ve=Object.freeze({name:De,version:Le,description:$e,keywords:Re,repository:Pe,author:Fe,contributors:Ue,license:je,dependencies:He,devDependencies:ze,main:Be,unpkg:qe,jsdelivr:Ye,scripts:Xe,browser:We,"default":Ge}),Ke={},Ze=Object.freeze({"default":Ke}),Qe=Ze&&Ke||Ze,Je=/^([A-Za-z]+:)?\/\//,et="file://";n.loader=r,n.sanitizeUrl=t,n.xhr=a,n.file=o,n.http=s,n.useXHR="undefined"!=typeof XMLHttpRequest,n.headers={};var tt=n,nt="__types__",rt={"boolean":Ne["boolean"],integer:Ne.number,number:Ne.number,date:Ne.date,string:function(e){return null==e||""===e?null:e+""}},it={"boolean":function(e){return"true"===e||"false"===e||Ne.isBoolean(e)},integer:function(e){return it.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!Ne.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};d.annotation=u,d.all=h,d.infer=p,d.inferAll=g,d.parsers=rt;var at=d,ot=e(function(e,t){!function(e,n){n(t)}(Me,function(e){function t(e){return new a(e)}function n(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function r(e,t){var r=n(e);return function(n,i){return t(r(n),i,e)}}function i(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function a(e){function t(t){return t.map(a).join(e)}function a(e){return o.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var o=new RegExp('["'+e+"\n]"),s=e.charCodeAt(0);this.parse=function(e,t){var i,a,o=this.parseRows(e,function(e,o){return i?i(e,o-1):(a=e,void(i=t?r(e,t):n(e)))});return o.columns=a,o},this.parseRows=function(e,t){function n(){if(c>=u)return o;if(i)return i=!1,a;var t,n=c;if(34===e.charCodeAt(n)){for(var r=n;r++<u;)if(34===e.charCodeAt(r)){if(34!==e.charCodeAt(r+1))break;++r}return c=r+2,t=e.charCodeAt(r+1),13===t?(i=!0,10===e.charCodeAt(r+2)&&++c):10===t&&(i=!0),e.slice(n+1,r).replace(/""/g,'"')}for(;c<u;){var l=1;if(t=e.charCodeAt(c++),10===t)i=!0;else if(13===t)i=!0,10===e.charCodeAt(c)&&(++c,++l);else if(t!==s)continue;return e.slice(n,c-l)}return e.slice(n)}for(var r,i,a={},o={},l=[],u=e.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();t&&null==(d=t(d,f++))||l.push(d)}return l},this.format=function(t,n){return null==n&&(n=i(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")},this.formatRows=function(e){return e.map(t).join("\n")}}t.prototype=a.prototype;var o=t(","),s=t("\t"),l="0.1.14";e.version=l,e.dsv=t,e.csv=o,e.tsv=s})});m.delimiter=function(e){var t={delimiter:e};return function(e,n){return m(e,n?Ne.extend(n,t):t)}};var st=m,lt=function(e,t){var n=Ne.isObject(e)&&!Ne.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(n=Ne.accessor(t.property)(n)),n},ut=Object.freeze({bbox:b,feature:E,mesh:w,meshArcs:A,merge:O,mergeArcs:I,neighbors:N,quantize:L,transform:y,untransform:D}),ct=function(e,t){var n=ct.topojson;if(null==n)throw Error("TopoJSON library not loaded.");var r,i=lt(e,t);if(t&&t.feature){if(r=i.objects[t.feature])return n.feature(i,r).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(r=i.objects[t.mesh])return[n.mesh(i,i.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};ct.topojson=ut;var ft,dt,ht,pt,gt=ct,mt=function(e,t){return $(lt(e,t),t)},vt={json:lt,topojson:gt,treejson:mt,dsv:st,csv:st.delimiter(","),tsv:st.delimiter("\t")},yt=e(function(e,t){!function(e,n){n(t)}(Me,function(e){function t(e,n,r,o){function s(t){return e(t=new Date((+t))),t}return s.floor=s,s.round=function(t){var r=new Date((+t)),i=new Date(t-1);return e(r),e(i),n(i,1),t-r<i-t?r:i},s.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},s.offset=function(e,t){return n(e=new Date((+e)),null==t?1:Math.floor(t)),e},s.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date((+r)),i=null==i?1:Math.floor(i),!(t<r&&i>0))return a;for(n(t,1),e(t),t<r&&a.push(new Date((+t)));n(t,i),e(t),t<r;)a.push(new Date((+t)));return a},s.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(s.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),Math.floor(r(i,a))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,a=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var s=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()}),l=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),u=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),c=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=n(0),d=n(1),h=n(2),p=n(3),g=n(4),m=n(5),v=n(6),y=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),b=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),_=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),E=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),x=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),S=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),T=r(0),w=r(1),A=r(2),C=r(3),k=r(4),O=r(5),I=r(6),M=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),N=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),D=o.range,L=s.range,$=l.range,R=u.range,P=c.range,F=f.range,U=d.range,j=h.range,H=p.range,z=g.range,B=m.range,q=v.range,Y=f.range,X=y.range,W=b.range,G=o,V=D,K=_.range,Z=E.range,Q=x.range,J=S.range,ee=T.range,te=w.range,ne=A.range,re=C.range,ie=k.range,ae=O.range,oe=I.range,se=T.range,le=M.range,ue=N.range,ce="0.1.1";e.version=ce,e.milliseconds=D,e.seconds=L,e.minutes=$,e.hours=R,e.days=P,e.sundays=F,e.mondays=U,e.tuesdays=j,e.wednesdays=H,e.thursdays=z,e.fridays=B,e.saturdays=q,e.weeks=Y,e.months=X,e.years=W,e.utcMillisecond=G,e.utcMilliseconds=V,e.utcSeconds=K,e.utcMinutes=Z,e.utcHours=Q,e.utcDays=J,e.utcSundays=ee,e.utcMondays=te,e.utcTuesdays=ne,e.utcWednesdays=re,e.utcThursdays=ie,e.utcFridays=ae,e.utcSaturdays=oe,e.utcWeeks=se,e.utcMonths=le,e.utcYears=ue,e.millisecond=o,e.second=s,e.minute=l,e.hour=u,e.day=c,e.sunday=f,e.monday=d,e.tuesday=h,e.wednesday=p,e.thursday=g,e.friday=m,e.saturday=v,e.week=f,e.month=y,e.year=b,e.utcSecond=_,e.utcMinute=E,e.utcHour=x,e.utcDay=S,e.utcSunday=T,e.utcMonday=w,e.utcTuesday=A,e.utcWednesday=C,e.utcThursday=k,e.utcFriday=O,e.utcSaturday=I,e.utcWeek=T,e.utcMonth=M,e.utcYear=N,e.interval=t})}),bt=e(function(e,t){!function(e,n){n(t,yt)}(Me,function(e,t){function n(e){if(0<=e.y&&e.y<100){var t=new Date((-1),e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){function t(e,t){return function(n){var r,i,a,o=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date((+n)));++s<u;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=ee[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function a(e,t){return function(n){var a=i(1900),s=o(a,e,n+="",0);if(s!=n.length)return null;if("p"in a&&(a.H=a.H%12+12*a.p),"W"in a||"U"in a){"w"in a||(a.w="W"in a?1:0);var l="Z"in a?r(i(a.y)).getUTCDay():t(i(a.y)).getDay();a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(l+5)%7:a.w+7*a.U-(l+6)%7}return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,r(a)):t(a)}}function o(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=Pe[i in ee?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(e,t,n){var r=we.exec(t.slice(n));return r?(e.p=Ae[r[0].toLowerCase()],n+r[0].length):-1}function J(e,t,n){var r=Oe.exec(t.slice(n));return r?(e.w=Ie[r[0].toLowerCase()],n+r[0].length):-1}function te(e,t,n){var r=Ce.exec(t.slice(n));return r?(e.w=ke[r[0].toLowerCase()],n+r[0].length):-1}function ne(e,t,n){var r=De.exec(t.slice(n));return r?(e.m=Le[r[0].toLowerCase()],n+r[0].length):-1}function re(e,t,n){var r=Me.exec(t.slice(n));return r?(e.m=Ne[r[0].toLowerCase()],n+r[0].length):-1}function ie(e,t,n){return o(e,ve,t,n)}function ae(e,t,n){return o(e,ye,t,n)}function oe(e,t,n){return o(e,be,t,n)}function se(e){return xe[e.getDay()]}function le(e){return Ee[e.getDay()]}function ue(e){return Te[e.getMonth()]}function ce(e){return Se[e.getMonth()]}function fe(e){return _e[+(e.getHours()>=12)]}function de(e){return xe[e.getUTCDay()]}function he(e){return Ee[e.getUTCDay()]}function pe(e){return Te[e.getUTCMonth()]}function ge(e){return Se[e.getUTCMonth()]}function me(e){return _e[+(e.getUTCHours()>=12)]}var ve=e.dateTime,ye=e.date,be=e.time,_e=e.periods,Ee=e.days,xe=e.shortDays,Se=e.months,Te=e.shortMonths,we=l(_e),Ae=u(_e),Ce=l(Ee),ke=u(Ee),Oe=l(xe),Ie=u(xe),Me=l(Se),Ne=u(Se),De=l(Te),Le=u(Te),$e={a:se,A:le,b:ue,B:ce,c:null,d:T,e:T,H:w,I:A,j:C,L:k,m:O,M:I,p:fe,S:M,U:N,w:D,W:L,x:null,X:null,y:$,Y:R,Z:P,"%":Q},Re={a:de,A:he,b:pe,B:ge,c:null,d:F,e:F,H:U,I:j,j:H,L:z,m:B,M:q,p:me,S:Y,U:X,w:W,W:G,x:null,X:null,y:V,Y:K,Z:Z,"%":Q},Pe={a:J,A:te,b:ne,B:re,c:ie,d:v,e:v,H:b,I:b,j:y,L:x,m:m,M:_,p:s,S:E,U:f,w:c,W:d,x:ae,X:oe,y:p,Y:h,Z:g,"%":S};return $e.x=t(ye,$e),$e.X=t(be,$e),$e.c=t(ve,$e),Re.x=t(ye,Re),Re.X=t(be,Re),Re.c=t(ve,Re),{format:function(e){var r=t(e+="",$e);return r.parse=a(e,n),r.toString=function(){return e},r},utcFormat:function(e){var n=t(e+="",Re);return n.parse=a(e,r),n.toString=function(){return e},n}}}function o(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function s(e){return e.replace(re,"\\$&")}function l(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function u(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function c(e,t,n){var r=te.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function f(e,t,n){var r=te.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function d(e,t,n){var r=te.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function h(e,t,n){var r=te.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function p(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function g(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function m(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function v(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function y(e,t,n){var r=te.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function b(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function E(e,t,n){var r=te.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function x(e,t,n){var r=te.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S(e,t,n){var r=ne.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function T(e,t){return o(e.getDate(),t,2)}function w(e,t){return o(e.getHours(),t,2)}function A(e,t){return o(e.getHours()%12||12,t,2)}function C(e,n){return o(1+t.day.count(t.year(e),e),n,3)}function k(e,t){return o(e.getMilliseconds(),t,3)}function O(e,t){return o(e.getMonth()+1,t,2)}function I(e,t){return o(e.getMinutes(),t,2)}function M(e,t){return o(e.getSeconds(),t,2)}function N(e,n){return o(t.sunday.count(t.year(e),e),n,2)}function D(e){return e.getDay()}function L(e,n){return o(t.monday.count(t.year(e),e),n,2)}function $(e,t){return o(e.getFullYear()%100,t,2)}function R(e,t){return o(e.getFullYear()%1e4,t,4)}function P(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function F(e,t){return o(e.getUTCDate(),t,2)}function U(e,t){return o(e.getUTCHours(),t,2)}function j(e,t){return o(e.getUTCHours()%12||12,t,2)}function H(e,n){return o(1+t.utcDay.count(t.utcYear(e),e),n,3)}function z(e,t){return o(e.getUTCMilliseconds(),t,3)}function B(e,t){return o(e.getUTCMonth()+1,t,2)}function q(e,t){return o(e.getUTCMinutes(),t,2)}function Y(e,t){return o(e.getUTCSeconds(),t,2)}function X(e,n){return o(t.utcSunday.count(t.utcYear(e),e),n,2)}function W(e){return e.getUTCDay()}function G(e,n){return o(t.utcMonday.count(t.utcYear(e),e),n,2)}function V(e,t){return o(e.getUTCFullYear()%100,t,2)}function K(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function Z(){return"+0000"}function Q(){return"%"}function J(e){return e.toISOString()}var ee={"-":"",_:" ",0:"0"},te=/^\s*\d+/,ne=/^%/,re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ie=a({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ae=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),oe=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),se=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),le=a({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ue=a({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ce=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),fe=a({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),de=a({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),he=a({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),pe=a({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),ge=a({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),me=a({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),ve=a({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),ye=a({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]}),be=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),_e=a({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),Ee=a({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),xe=a({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),Se=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),Te=a({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),we=a({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),Ae="%Y-%m-%dT%H:%M:%S.%LZ";J.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},J.toString=function(){return Ae};var Ce=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?J:ie.utcFormat(Ae),ke=ie.format,Oe=ie.utcFormat,Ie="0.2.1";e.version=Ie,e.format=ke,e.utcFormat=Oe,e.locale=a,e.localeCaEs=ae,e.localeDeCh=oe,e.localeDeDe=se,e.localeEnCa=le,e.localeEnGb=ue,e.localeEnUs=ie,e.localeEsEs=ce,e.localeFiFi=fe,e.localeFrCa=de,e.localeFrFr=he,e.localeHeIl=pe,e.localeHuHu=ge,e.localeItIt=me,e.localeJaJp=ve,e.localeKoKr=ye,e.localeMkMk=be,e.localeNlNl=_e,e.localePlPl=Ee,e.localePtBr=xe,e.localeRuRu=Se,e.localeSvSe=Te,e.localeZhCn=we,e.isoFormat=Ce})}),_t=e(function(e,t){!function(e,n){n(t)}(Me,function(e){function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:NaN}function r(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];
return a.reverse().join(t)}}function i(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1],o=a-(p=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+t(e,Math.max(0,n+o-1))[0]}function a(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return a<0?"0."+new Array((-a)).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}function o(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,i=1,a=-1;i<r;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e}function s(e){return new l(e)}function l(e){if(!(t=m.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],l=!!t[7],u=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(l=!0,c="g"):g[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=l,this.precision=u,this.type=c}function u(e){return e}function c(e){function t(e){e=s(e);var t=e.fill,n=e.align,r=e.sign,i=e.symbol,u=e.zero,c=e.width,f=e.comma,d=e.precision,h=e.type,m="$"===i?o[0]:"#"===i&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",y="$"===i?o[1]:/[%p]/.test(h)?"%":"",b=g[h],_=!h||/[defgprs%]/.test(h);return d=null==d?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),function(e){var i=m,o=y;if("c"===h)o=b(e)+o,e="";else{e=+e;var s=(e<0||1/e<0)&&(e*=-1,!0);if(e=b(e,d),s){var g,E=-1,x=e.length;for(s=!1;++E<x;)if(g=e.charCodeAt(E),48<g&&g<58||"x"===h&&96<g&&g<103||"X"===h&&64<g&&g<71){s=!0;break}}if(i=(s?"("===r?r:"-":"-"===r||"("===r?"":r)+i,o=o+("s"===h?v[8+p/3]:"")+(s&&"("===r?")":""),_)for(var g,E=-1,x=e.length;++E<x;)if(g=e.charCodeAt(E),48>g||g>57){o=(46===g?l+e.slice(E+1):e.slice(E))+o,e=e.slice(0,E);break}}f&&!u&&(e=a(e,1/0));var S=i.length+e.length+o.length,T=S<c?new Array(c-S+1).join(t):"";switch(f&&u&&(e=a(T+e,T.length?c-o.length:1/0),T=""),n){case"<":return i+e+o+T;case"=":return i+T+e+o;case"^":return T.slice(0,S=T.length>>1)+i+e+o+T.slice(S)}return T+i+e+o}}function i(e,r){var i=t((e=s(e),e.type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),o=Math.pow(10,-a),l=v[8+a/3];return function(e){return i(o*e)+l}}var a=e.grouping&&e.thousands?r(e.grouping,e.thousands):u,o=e.currency,l=e.decimal;return{format:t,formatPrefix:i}}function f(e){return Math.max(0,-n(Math.abs(e)))}function d(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))}function h(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,n(t)-n(e))+1}var p,g={"":o,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return a(100*e,t)},r:a,s:i,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},m=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var v=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],y=c({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),b=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),_=c({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),E=c({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),x=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),S=c({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),T=c({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),w=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),A=c({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),C=c({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),k=c({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),O=c({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),I=c({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),M=c({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),N=c({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),D=c({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),L=c({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),$=c({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),R=c({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),P=c({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),F=c({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),U=c({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),j=c({decimal:".",thousands:",",grouping:[3],currency:["¥",""]}),H=y.format,z=y.formatPrefix,B="0.4.2";e.version=B,e.format=H,e.formatPrefix=z,e.locale=c,e.localeCaEs=b,e.localeCsCz=_,e.localeDeCh=E,e.localeDeDe=x,e.localeEnCa=S,e.localeEnGb=T,e.localeEnUs=y,e.localeEsEs=w,e.localeFiFi=A,e.localeFrCa=C,e.localeFrFr=k,e.localeHeIl=O,e.localeHuHu=I,e.localeItIt=M,e.localeJaJp=N,e.localeKoKr=D,e.localeMkMk=L,e.localeNlNl=$,e.localePlPl=R,e.localePtBr=P,e.localeRuRu=F,e.localeSvSe=U,e.localeZhCn=j,e.formatSpecifier=s,e.precisionFixed=f,e.precisionPrefix=d,e.precisionRound=h})}),Et=_t,xt=bt,St=new Date(2e3,0,1),Tt={numberLocale:P,number:function(e){return Et.format(e)},numberPrefix:function(e,t){return Et.formatPrefix(e,t)},timeLocale:F,time:function(e){return xt.format(e)},utc:function(e){return xt.utcFormat(e)},locale:function(e){P(e),F(e)},auto:{number:z,linear:B,time:function(){return q()},utc:function(){return Y()}},month:X,day:W,quarter:G,utcQuarter:V},wt=Math.sqrt(50),At=Math.sqrt(10),Ct=Math.sqrt(2),kt=Tt.time;K.formats=vt;var Ot=K,It=e(function(e){var t=e.exports;t.repeat=function(e,t){var n,r=Array(t);for(n=0;n<t;++n)r[n]=e;return r},t.zeros=function(e){return t.repeat(0,e)},t.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(n<0)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},t.random={},t.random.uniform=function(e,n){void 0===n&&(n=void 0===e?1:e,e=0);var r=n-e,i=function(){return e+r*Math.random()};return i.samples=function(e){return t.zeros(e).map(i)},i.pdf=function(t){return t>=e&&t<=n?1/r:0},i.cdf=function(t){return t<e?0:t>n?1:(t-e)/r},i.icdf=function(t){return t>=0&&t<=1?e+t*r:NaN},i},t.random.integer=function(e,n){void 0===n&&(n=e,e=0);var r=n-e,i=function(){return e+Math.floor(r*Math.random())};return i.samples=function(e){return t.zeros(e).map(i)},i.pdf=function(t){return t===Math.floor(t)&&t>=e&&t<n?1/r:0},i.cdf=function(t){var i=Math.floor(t);return i<e?0:i>=n?1:(i-e+1)/r},i.icdf=function(t){return t>=0&&t<=1?e-1+Math.floor(t*r):NaN},i},t.random.normal=function(e,n){e=e||0,n=n||1;var r,i=function(){var t,i,a=0,o=0;if(void 0!==r)return a=r,r=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,t=a*a+o*o;while(0===t||t>1);return i=Math.sqrt(-2*Math.log(t)/t),r=e+o*i*n,e+a*i*n};return i.samples=function(e){return t.zeros(e).map(i)},i.pdf=function(t){var r=Math.exp(Math.pow(t-e,2)/(-2*Math.pow(n,2)));return 1/(n*Math.sqrt(2*Math.PI))*r},i.cdf=function(t){var r,i=(t-e)/n,a=Math.abs(i);if(a>37)r=0;else{var o,s=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,r=s*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,r/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,r=s/o/2.506628274631)}return i>0?1-r:r},i.icdf=function(t){if(t<=0||t>=1)return NaN;var r=2*t-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,o=Math.log(1-r*r)/i,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+n*Math.SQRT2*s},i},t.random.bootstrap=function(e,n){var r=e.filter(Ne.isValid),i=r.length,a=n?t.random.normal(0,n):null,o=function(){return r[~~(Math.random()*i)]+(a?a():0)};return o.samples=function(e){return t.zeros(e).map(o)},o}}),Mt=e(function(e){function t(e,t,n){var r=e&&e.nullh||0,a=It.random.normal(0,1),o=i.mean(t,n),s=i.stdev(t,n)/Math.sqrt(i.count.valid(t,n));if(0===s)return o-r===0?1:0;var l=(o-r)/s;return 2*a.cdf(-Math.abs(l))}function n(e,t,n,r){var a,o=r?t.map(Ne.$(n)):t,s=r?t.map(Ne.$(r)):n,l=i.count(o),u=i.count(s),c=Array();if(l!==u)throw Error("Array lengths must match.");for(a=0;a<l;++a)Ne.isValid(o[a])&&Ne.isValid(s[a])&&c.push(o[a]-s[a]);return i.z.test(c,e&&e.nullh||0)}function r(e,t,n,r){var a=r?t.map(Ne.$(n)):t,o=r?t.map(Ne.$(r)):n,s=i.count.valid(a),l=i.count.valid(o),u=It.random.normal(0,1),c=i.mean(a)-i.mean(o)-(e&&e.nullh||0),f=Math.sqrt(i.variance(a)/s+i.variance(o)/l);if(0===f)return 0===c?1:0;var d=c/f;return 2*u.cdf(-Math.abs(d))}var i=e.exports;i.unique=function(e,t,n){t=Ne.$(t),n=n||[];var r,i,a,o={};for(i=0,a=e.length;i<a;++i)r=t?t(e[i]):e[i],r in o||(o[r]=1,n.push(r));return n},i.count=function(e){return e&&e.length||0},i.count.valid=function(e,t){t=Ne.$(t);var n,r,i,a=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],Ne.isValid(n)&&(a+=1);return a},i.count.missing=function(e,t){t=Ne.$(t);var n,r,i,a=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],null==n&&(a+=1);return a},i.count.distinct=function(e,t){t=Ne.$(t);var n,r,i,a={},o=0;for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],n in a||(a[n]=1,o+=1);return o},i.count.map=function(e,t){t=Ne.$(t);var n,r,i,a={};for(r=0,i=e.length;r<i;++r)n=t?t(e[r]):e[r],a[n]=n in a?a[n]+1:1;return a},i.median=function(e,t){return t&&(e=e.map(Ne.$(t))),e=e.filter(Ne.isValid).sort(Ne.cmp),i.quantile(e,.5)},i.quartile=function(e,t){t&&(e=e.map(Ne.$(t))),e=e.filter(Ne.isValid).sort(Ne.cmp);var n=i.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},i.quantile=function(e,t,n){void 0===n&&(n=t,t=Ne.identity),t=Ne.$(t);var r=(e.length-1)*n+1,i=Math.floor(r),a=+t(e[i-1]),o=r-i;return o?a+o*(t(e[i])-a):a},i.sum=function(e,t){t=Ne.$(t);for(var n,r=0,i=0,a=e.length;i<a;++i)n=t?t(e[i]):e[i],Ne.isValid(n)&&(r+=n);return r},i.mean=function(e,t){t=Ne.$(t);var n,r,i,a,o,s=0;for(r=0,a=0,i=e.length;r<i;++r)o=t?t(e[r]):e[r],Ne.isValid(o)&&(n=o-s,s+=n/++a);return s},i.mean.geometric=function(e,t){t=Ne.$(t);var n,r,i,a,o=1;for(a=0,n=0,r=e.length;a<r;++a)if(i=t?t(e[a]):e[a],Ne.isValid(i)){if(i<=0)throw Error("Geometric mean only defined for positive values.");o*=i,++n}return o=n>0?Math.pow(o,1/n):0},i.mean.harmonic=function(e,t){t=Ne.$(t);var n,r,i,a,o=0;for(a=0,n=0,r=e.length;a<r;++a)i=t?t(e[a]):e[a],Ne.isValid(i)&&(o+=1/i,++n);return n/o},i.variance=function(e,t){if(t=Ne.$(t),!Ne.isArray(e)||e.length<2)return 0;var n,r,i,a,o=0,s=0;for(r=0,i=0;r<e.length;++r)a=t?t(e[r]):e[r],Ne.isValid(a)&&(n=a-o,o+=n/++i,s+=n*(a-o));return s/=i-1},i.stdev=function(e,t){return Math.sqrt(i.variance(e,t))},i.modeskew=function(e,t){var n=i.mean(e,t),r=i.median(e,t),a=i.stdev(e,t);return 0===a?0:(n-r)/a},i.min=function(e,t){return i.extent(e,t)[0]},i.max=function(e,t){return i.extent(e,t)[1]},i.extent=function(e,t){t=Ne.$(t);var n,r,i,a,o=e.length;for(a=0;a<o;++a)if(i=t?t(e[a]):e[a],Ne.isValid(i)){n=r=i;break}for(;a<o;++a)i=t?t(e[a]):e[a],Ne.isValid(i)&&(i<n&&(n=i),i>r&&(r=i));return[n,r]},i.extent.index=function(e,t){t=Ne.$(t);var n,r,i,a,o=-1,s=-1,l=e.length;for(a=0;a<l;++a)if(i=t?t(e[a]):e[a],Ne.isValid(i)){n=r=i,o=s=a;break}for(;a<l;++a)i=t?t(e[a]):e[a],Ne.isValid(i)&&(i<n&&(n=i,o=a),i>r&&(r=i,s=a));return[o,s]},i.dot=function(e,t,n){var r,i,a=0;if(n)for(t=Ne.$(t),n=Ne.$(n),r=0;r<e.length;++r)i=t(e[r])*n(e[r]),i===i&&(a+=i);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(r=0;r<e.length;++r)i=e[r]*t[r],i===i&&(a+=i)}return a},i.dist=function(e,t,n,r){var i,a,o=Ne.isFunction(n)||Ne.isString(n),s=e,l=o?e:t,u=o?r:n,c=2===u||null==u,f=e.length,d=0;for(o&&(t=Ne.$(t),n=Ne.$(n)),a=0;a<f;++a)i=o?t(s[a])-n(l[a]):s[a]-l[a],d+=c?i*i:Math.pow(Math.abs(i),u);return c?Math.sqrt(d):Math.pow(d,1/u)},i.cohensd=function(e,t,n){var r=n?e.map(Ne.$(t)):e,a=n?e.map(Ne.$(n)):t,o=i.mean(r),s=i.mean(a),l=i.count.valid(r),u=i.count.valid(a);if(l+u-2<=0)return 0;var c=i.variance(r),f=i.variance(a),d=Math.sqrt(((l-1)*c+(u-1)*f)/(l+u-2));return 0===d?0:(o-s)/d},i.covariance=function(e,t,n){var r,a,o,s,l,u=n?e.map(Ne.$(t)):e,c=n?e.map(Ne.$(n)):t,f=u.length,d=i.mean(u),h=i.mean(c),p=0,g=0;if(f!==c.length)throw Error("Input lengths must match.");for(r=0;r<f;++r)if(a=u[r],s=Ne.isValid(a),o=c[r],l=Ne.isValid(o),s&&l)p+=(a-d)*(o-h),++g;else if(s||l)throw Error("Valid values must align.");return p/(g-1)},i.rank=function(e,t){t=Ne.$(t)||Ne.identity;var n,r,i,a=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(Ne.comparator("val")),o=e.length,s=Array(o),l=-1,u={};for(n=0;n<o;++n){if(r=a[n].val,l<0&&u===r)l=n-1;else if(l>-1&&u!==r){for(i=1+(n-1+l)/2;l<n;++l)s[a[l].idx]=i;l=-1}s[a[n].idx]=n+1,u=r}if(l>-1)for(i=1+(o-1+l)/2;l<o;++l)s[a[l].idx]=i;return s},i.cor=function(e,t,n){var r=n;n=r?e.map(Ne.$(n)):t,t=r?e.map(Ne.$(t)):e;var a=i.dot(t,n),o=i.mean(t),s=i.mean(n),l=i.stdev(t),u=i.stdev(n),c=e.length;return(a-c*o*s)/((c-1)*l*u)},i.cor.rank=function(e,t,n){var r,a,o,s=n?i.rank(e,t):i.rank(e),l=n?i.rank(e,n):i.rank(t),u=e.length;for(r=0,a=0;r<u;++r)o=s[r]-l[r],a+=o*o;return 1-6*a/(u*(u*u-1))},i.cor.dist=function(e,t,n){var r,a,o,s,l=n?e.map(Ne.$(t)):e,u=n?e.map(Ne.$(n)):t,c=i.dist.mat(l),f=i.dist.mat(u),d=c.length;for(r=0,a=0,o=0,s=0;r<d;++r)a+=c[r]*c[r],o+=f[r]*f[r],s+=c[r]*f[r];return Math.sqrt(s/Math.sqrt(a*o))},i.linearRegression=function(e,t,n){var r,a,o=n?e.map(Ne.$(t)):e,s=n?e.map(Ne.$(n)):t,l=o.length,u=i.covariance(o,s),c=i.stdev(o),f=i.stdev(s),d=u/(c*c),h=i.mean(s)-d*i.mean(o),p={slope:d,intercept:h,R:u/(c*f),rss:0};for(a=0;a<l;++a)Ne.isValid(o[a])&&Ne.isValid(s[a])&&(r=d*o[a]+h-s[a],p.rss+=r*r);return p},i.bootstrap={},i.bootstrap.ci=function(e,t,n,r,a){var o,s,l,u,c,f,d;for(Ne.isFunction(t)||Ne.isString(t)?(o=e.map(Ne.$(t)),s=n,l=r,u=a):(o=e,s=t,l=n,u=r),s=s?+s:1e3,l=l||.05,c=It.random.bootstrap(o,u),d=0,f=Array(s);d<s;++d)f[d]=i.mean(c.samples(o.length));return f.sort(Ne.numcmp),[i.quantile(f,l/2),i.quantile(f,1-l/2)]},i.z={},i.z.ci=function(e,t,n){var r=e,a=t;(Ne.isFunction(t)||Ne.isString(t))&&(r=e.map(Ne.$(t)),a=n),a=a||.05;var o=.05===a?1.96:It.random.normal(0,1).icdf(1-a/2),s=i.mean(r),l=i.stdev(r)/Math.sqrt(i.count.valid(r));return[s-o*l,s+o*l]},i.z.test=function(e,i,a,o){return Ne.isFunction(a)||Ne.isString(a)?(o&&o.paired?n:r)(o,e,i,a):Ne.isArray(i)?(a&&a.paired?n:r)(a,e,i):Ne.isFunction(i)||Ne.isString(i)?t(a,e,i):t(i,e)},i.dist.mat=function(e){var t,n,r,i=e.length,a=i*i,o=Array(a),s=It.zeros(i),l=0;for(n=0;n<i;++n)for(o[n*i+n]=0,r=n+1;r<i;++r)o[n*i+r]=t=Math.abs(e[n]-e[r]),o[r*i+n]=t,s[n]+=t,s[r]+=t;for(n=0;n<i;++n)l+=s[n],s[n]/=i;for(l/=a,n=0;n<i;++n)for(r=n;r<i;++r)o[n*i+r]+=l-s[n]-s[r],o[r*i+n]=o[n*i+r];return o},i.entropy=function(e,t){t=Ne.$(t);var n,r,i=0,a=0,o=e.length;for(n=0;n<o;++n)i+=t?t(e[n]):e[n];if(0===i)return 0;for(n=0;n<o;++n)r=(t?t(e[n]):e[n])/i,r&&(a+=r*Math.log(r));return-a/Math.LN2},i.mutual=function(e,t,n,r){var i,a,o,s=r?e.map(Ne.$(t)):e,l=r?e.map(Ne.$(n)):t,u=r?e.map(Ne.$(r)):n,c={},f={},d=u.length,h=0,p=0,g=0;for(o=0;o<d;++o)c[s[o]]=0,f[l[o]]=0;for(o=0;o<d;++o)c[s[o]]+=u[o],f[l[o]]+=u[o],h+=u[o];for(a=1/(h*Math.LN2),o=0;o<d;++o)0!==u[o]&&(i=h*u[o]/(c[s[o]]*f[l[o]]),p+=u[o]*a*Math.log(i),g+=u[o]*a*Math.log(u[o]/h));return[p,1+p/g]},i.mutual.info=function(e,t,n,r){return i.mutual(e,t,n,r)[0]},i.mutual.dist=function(e,t,n,r){return i.mutual(e,t,n,r)[1]},i.profile=function(e,t){var n,r,a,o,s,l=0,u=0,c=0,f=0,d=null,h=null,p=0,g=[],m={};for(a=0;a<e.length;++a)o=t?t(e[a]):e[a],m[o]=o in m?m[o]+1:(f+=1,1),null==o?++c:Ne.isValid(o)&&(s="string"==typeof o?o.length:o,(null===d||s<d)&&(d=s),(null===h||s>h)&&(h=s),n=s-l,l+=n/++u,p+=n*(s-l),g.push(s));return p/=u-1,r=Math.sqrt(p),g.sort(Ne.cmp),{type:at(e,t),unique:m,count:e.length,valid:u,missing:c,distinct:f,min:d,max:h,mean:l,stdev:r,median:o=i.quantile(g,.5),q1:i.quantile(g,.25),q3:i.quantile(g,.75),modeskew:0===r?0:(l-o)/r}},i.summary=function(e,t){t=t||Ne.keys(e[0]);var n=t.map(function(t){var n=i.profile(e,Ne.$(t));return n.field=t,n});return n.__summary__=!0,n}}),Nt={values:Q({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:Q({name:"count",set:"cell.num"}),missing:Q({name:"missing",set:"this.missing"}),valid:Q({name:"valid",set:"this.valid"}),sum:Q({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Q({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:Q({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:Q({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:Q({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:Q({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:Q({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:Q({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:Q({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Q({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Q({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:Q({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:Q({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Q({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Q({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Q({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:Q({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};Nt.create=ee;var Dt=Nt,Lt="__dl_rem__",$t=te.prototype;$t.add=function(e){this._add.push(e)},$t.rem=function(e){this._rem.push(e)},$t.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r,i=this._add,a=this._rem,o=this._key,s=Array(i.length-a.length);if(Ne.isObject(a[0]))if(o)for(r=Ne.toMap(a,o),e=0,t=0,n=i.length;e<n;++e)r.hasOwnProperty(o(i[e]))||(s[t++]=i[e]);else{for(e=0,n=a.length;e<n;++e)a[e][Lt]=1;for(e=0,t=0,n=i.length;e<n;++e)i[e][Lt]||(s[t++]=i[e]);for(e=0,n=a.length;e<n;++e)delete a[e][Lt]}else for(r=Mt.count.map(a),e=0,t=0,n=i.length;e<n;++e)r[i[e]]>0?r[i[e]]-=1:s[t++]=i[e];return this._rem=[],this._add=s},$t.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Mt.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},$t.argmin=function(e){return this.extent(e)[0]},$t.argmax=function(e){return this.extent(e)[1]},$t.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):+(1/0)},$t.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-(1/0)},$t.quartile=function(e){return this._get===e&&this._q||(this._q=Mt.quartile(this.values(),e),this._get=e),this._q},$t.q1=function(e){return this.quartile(e)[0]},$t.q2=function(e){return this.quartile(e)[1]},$t.q3=function(e){return this.quartile(e)[2]};var Rt=te,Pt=ne.Flags={ADD_CELL:1,MOD_CELL:2},Ft=ne.prototype;Ft.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},Ft.key=function(e){return null==e?this._key:(this._key=Ne.$(e),this)},Ft.groupby=function(e){return this._dims=Ne.array(e).map(function(e,t){if(e=Ne.isString(e)?{name:e,get:Ne.$(e)}:Ne.isFunction(e)?{name:Ne.name(e)||e.name||"_"+t,get:e}:e.name&&Ne.isFunction(e.get)?e:null,null==e)throw"Invalid groupby argument: "+e;return e}),this.clear()},Ft.summarize=function(e){e=re(e),this._count=!0;var t,n,r,i,a,o,s,l=this._aggr=[];for(r=0;r<e.length;++r){for(i=0,t=[],n=e[r];i<n.ops.length;++i)a=n.ops[i],"count"!==a&&(this._count=!1),o=n.as&&n.as[i]||a+("*"===n.name?"":"_"+n.name),t.push(Dt[a](o));s=n.get&&Ne.$(n.get)||("*"===n.name?Ne.identity:Ne.$(n.name)),l.push({name:n.name,measures:Dt.create(t,this._stream,s,this._assign)})}return this.clear()},Ft.count=function(){return this.summarize({"*":"count"})},Ft._assign=function(e,t,n){e[t]=n},Ft.clear=function(){return this._cells={},this},Ft._cellkey=function(e){var t,n=this._dims,r=n.length,i=String(n[0].get(e));for(t=1;t<r;++t)i+="|"+n[t].get(e);return i},Ft._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))},Ft._newcell=function(e,t){var n,r={num:0,tuple:this._newtuple(e,t),flag:Pt.ADD_CELL,aggs:{}},i=this._aggr;for(n=0;n<i.length;++n)r.aggs[i[n].name]=new i[n].measures(r,r.tuple);return r.collect&&(r.data=new Rt(this._key)),r},Ft._newtuple=function(e){var t,n,r=this._dims,i={};for(t=0,n=r.length;t<n;++t)i[r[t].name]=r[t].get(e);return this._ingest(i)},Ft._ingest=Ne.identity,Ft._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=Pt.MOD_CELL,this._on_add&&this._on_add(e,n)},Ft._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=Pt.MOD_CELL,this._on_rem&&this._on_rem(e,n)},Ft._mod=function(e,t){var n,r=this._cell(t),i=this._cell(e),a=this._aggr;for(r!==i?(r.num-=1,i.num+=1,r.collect&&r.data.rem(t),i.collect&&i.data.add(e)):r.collect&&!Ne.isObject(e)&&(r.data.rem(t),r.data.add(e)),n=0;n<a.length;++n)r.aggs[a[n].name].rem(t),i.aggs[a[n].name].add(e);r.flag|=Pt.MOD_CELL,i.flag|=Pt.MOD_CELL,this._on_mod&&this._on_mod(e,t,r,i)},Ft._markMod=function(e){var t=this._cell(e);t.flag|=Pt.MOD_CELL},Ft.result=function(){var e,t,n,r=[],i=this._aggr;for(n in this._cells){if(e=this._cells[n],e.num>0){for(e.collect&&e.data.values(),t=0;t<i.length;++t)e.aggs[i[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},Ft.changes=function(e){var t,n,r,i,a=e||{add:[],rem:[],mod:[]},o=this._aggr;for(i in this._cells){for(t=this._cells[i],n=t.flag,t.collect&&t.data.values(),r=0;r<o.length;++r)t.aggs[o[r].name].set();t.num<=0?(a.rem.push(t.tuple),delete this._cells[i],this._on_drop&&this._on_drop(t)):(this._on_keep&&this._on_keep(t),n&Pt.ADD_CELL?a.add.push(t.tuple):n&Pt.MOD_CELL&&a.mod.push(t.tuple)),t.flag=0}return this._rems=!1,a},Ft.execute=function(e){return this.clear().insert(e).result()},Ft.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},Ft.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},Ft._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}};var Ut=ne,jt=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(Ne.array(t))},[]);return(new Ut).groupby(e).summarize({"*":"values"})},Ht=new Date,zt=new Date(0,0,1).setFullYear(0),Bt=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),qt=[oe("second",yt.second,zt),oe("minute",yt.minute,zt),oe("hour",yt.hour,zt),oe("day",yt.day,zt,[1,7]),oe("month",yt.month,zt,[1,3,6]),oe("year",yt.year,zt),ae("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return ie(e).getSeconds()},null,0,59),ae("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return ie(e).getMinutes()},null,0,59),ae("hours",function(e){return new Date(1970,0,1,e)},function(e){return ie(e).getHours()},null,0,23),ae("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return ie(e).getDay()},[1],0,6),ae("dates",function(e){return new Date(1970,0,e)},function(e){return ie(e).getDate()},[1],1,31),ae("months",function(e){return new Date(1970,e%12,1)},function(e){return ie(e).getMonth()},[1],0,11)],Yt=[oe("second",yt.utcSecond,Bt),oe("minute",yt.utcMinute,Bt),oe("hour",yt.utcHour,Bt),oe("day",yt.utcDay,Bt,[1,7]),oe("month",yt.utcMonth,Bt,[1,3,6]),oe("year",yt.utcYear,Bt),ae("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return ie(e).getUTCSeconds()},null,0,59),ae("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return ie(e).getUTCMinutes()},null,0,59),ae("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return ie(e).getUTCHours()},null,0,23),ae("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return ie(e).getUTCDay()},[1],0,6),ae("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return ie(e).getUTCDate()},[1],1,31),ae("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return ie(e).getUTCMonth()},[1],0,11)],Xt=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]],Wt=le(qt),Gt=le(Yt);Wt.utc=Gt;var Vt=1e-15;ue.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?Wt.utc:Wt,n=e.min,r=e.max,i=e.maxbins||20,a=e.minbins||4,o=+r-+n,s=e.unit?t[e.unit]:t.find(o,a,i),l=ue({min:null!=s.min?s.min:s.unit(n),max:null!=s.max?s.max:s.unit(r),maxbins:i,minstep:s.minstep,steps:s.step});return l.unit=s,l.index=pe,e.raw||(l.value=he),l};var Kt=ue,Zt={integer:1,number:1,date:1},Qt={$bin:ge,histogram:me},Jt={formats:[],format_map:{},truncate:Ne.truncate,pad:Ne.pad,day:Tt.day,month:Tt.month,quarter:Tt.quarter,utcQuarter:Tt.utcQuarter};Ee.source=xe,Ee.context=Jt,Ee.format=Ae;var en=Ee;Ee.clearFormatCache=function(){Jt.formats=[],Jt.format_map={}},Ee.property=function(e,t){var n=Ne.field(t).map(Ne.str).join("][");return e+"["+n+"]"};var tn=/\{\{(.+?)\}\}|$/g,nn=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,rn=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,an={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},on=/\\|'|\r|\n|\u2028|\u2029/g,sn=e(function(e){var t=Wt.utc,n=e.exports;n.$year=Ne.$func("year",Wt.year.unit),n.$month=Ne.$func("month",Wt.months.unit),n.$date=Ne.$func("date",Wt.dates.unit),n.$day=Ne.$func("day",Wt.weekdays.unit),n.$hour=Ne.$func("hour",Wt.hours.unit),n.$minute=Ne.$func("minute",Wt.minutes.unit),n.$second=Ne.$func("second",Wt.seconds.unit),n.$utcYear=Ne.$func("utcYear",t.year.unit),n.$utcMonth=Ne.$func("utcMonth",t.months.unit),n.$utcDate=Ne.$func("utcDate",t.dates.unit),n.$utcDay=Ne.$func("utcDay",t.weekdays.unit),n.$utcHour=Ne.$func("utcHour",t.hours.unit),n.$utcMinute=Ne.$func("utcMinute",t.minutes.unit),n.$utcSecond=Ne.$func("utcSecond",t.seconds.unit)}),ln=Ne.keys(Ot.formats).reduce(function(e,t){return e[t]=function(e,n,r){Ne.isString(e)&&(e={url:e}),2===arguments.length&&Ne.isFunction(n)&&(r=n,n=void 0),n=Ne.extend({parse:"auto"},n),n.type=t;var i=tt(e,r?function(e,t){if(e)return void r(e,null);try{t=Ot(t,n),r(null,t)}catch(i){r(i,null)}}:void 0);if(!r)return Ot(i,n)},e},{}),un={table:Ce,summary:ke},cn={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},fn={number:"left",integer:"left"},dn=Ve&&Ge||Ve,hn={version:dn.version,load:tt,read:Ot,type:at,Aggregator:Ut,groupby:jt,bins:Kt,$bin:Qt.$bin,histogram:Qt.histogram,format:Tt,template:en,time:Wt};Ne.extend(hn,Ne),Ne.extend(hn,sn),Ne.extend(hn,It),Ne.extend(hn,Mt),Ne.extend(hn,ln),Ne.extend(hn.format,un),hn.print={table:hn.format.table,summary:hn.format.summary};var pn=hn;return pn}),function(){function e(){window.clearTimeout(C),C=void 0}function t(e,t){var a=[];return e.showAllFields!==!1?vl.spec.fieldDefs(t).forEach(function(r){var o=n(e.fields,r),s=i(o,r,t);a.push(s)}):e.fields&&e.fields.length>0&&e.fields.forEach(function(e){var n=r(vl.spec.fieldDefs(t),e),o=i(e,n,t);a.push(o)}),e.fields=a,e}function n(e,t){if(t&&e&&!(e.length<=0))if(t.aggregate){for(var n=0;n<e.length;n++){var r=e[n];if(r.field===t.field&&r.aggregate===t.aggregate)return r}for(var n=0;n<e.length;n++){var r=e[n];if(r.field===t.field&&!r.aggregate)return r}}else for(var n=0;n<e.length;n++){var r=e[n];if(r.field===t.field)return r}}function r(e,t){if(t&&t.field&&e)for(var n=0;n<e.length;n++){var r=e[n];if(r.field===t.field){if(!r.aggregate)return r;if(r.aggregate===t.aggregate||!t.aggregate)return r}}}function i(e,t,n){var r=vl.util.extend({},n.config);if(!e&&!t)return void console.error("[Tooltip] Cannot supplement a field when field and fieldDef are both empty.");!e&&t&&(e={}),e&&!t&&(t={});var i={};if(i.field=t.field?vl.fieldDef.field(t):e.field,"temporal"===t.type&&t.timeUnit){var a=t.field;i.removeOriginalTemporalField=a;for(var o=vl.spec.fieldDefs(n),s=0;s<o.length;s++)if(o[s].field===a&&!o[s].timeUnit){i.removeOriginalTemporalField=void 0;break}}if(r.countTitle||(r.countTitle=vl.config.defaultConfig.countTitle),i.title=e.title?e.title:vl.fieldDef.title(t,r),i.formatType=e.formatType?e.formatType:O[t.type],e.format)i.format=e.format;else switch(i.formatType){case"time":i.format=t.timeUnit?vl.timeUnit.template(t.timeUnit,"",!1).match(/time:'[%-a-z]*'/i)[0].split("'")[1]:r.timeFormat||vl.config.defaultConfig.timeFormat;break;case"number":i.format=r.numberFormat;break;case"string":}return t.bin&&(i.field=i.field.replace("_start","_range"),i.bin=!0,i.formatType="string"),i}function a(e,t,n){var r=b(),i=u(t,n);i&&0!==i.length&&(_(r,i),x(e,n),T(n),d3.select("#vis-tooltip").style("visibility","visible"),k=!0,n.onAppear&&n.onAppear(e,t))}function o(e,t,n){x(e,n),n.onMove&&n.onMove(e,t)}function s(e,t,n){d3.select("#vis-tooltip").style("visibility","hidden"),k=!1,E(),w(),S(),n.onDisappear&&n.onDisappear(e,t)}function l(e){return!(!e||!e.datum)&&(!e.datum._facetID&&!!e.datum._id)}function u(e,t){var n,r=d3.map(e.datum),i=["_id","_prev","count_start","count_end","layout_start","layout_mid","layout_end","layout_path","layout_x","layout_y"];return h(r,i),p(r,t.fields),g(r,t.fields),m(e.mark.marktype,r),n=t.showAllFields!==!1?d(r,t):c(r,t)}function c(e,t){var n=[];return t.fields.forEach(function(t){var r=t.title?t.title:t.field,i=f(e,t.field);if(void 0!==i){var a=v(i,t.formatType,t.format)||y(i);n.push({title:r,value:a})}}),n}function f(e,t){var n,r=t.split("."),i=r[0];return r.shift(),e.has(i)&&(n=e.get(i),r.forEach(function(e){n[e]&&(n=n[e])})),void 0===n?void console.warn("[Tooltip] Cannot find field "+t+" in data."):n}function d(e,t){var n=[],r=d3.map(t.fields,function(e){return e.field});return e.forEach(function(e,t){var i;if(i=r.has(e)&&r.get(e).title?r.get(e).title:e,r.has(e))var a=r.get(e).formatType,o=r.get(e).format;var s=v(t,a,o)||y(t);n.push({title:i,value:s})}),n}function h(e,t){t.forEach(function(t){e.remove(t)})}function p(e,t){t&&t.forEach(function(t){t.removeOriginalTemporalField&&h(e,[t.removeOriginalTemporalField])})}function g(e,t){if(t)return t.forEach(function(t){
if(t.bin===!0){var n=t.field,r=n.replace("_range","_start"),i=n.replace("_range","_mid"),a=n.replace("_range","_end"),o=e.get(r),s=e.get(a);if(void 0!==o&&void 0!==s){var l=o+"-"+s;e.set(n,l)}var u=[];u.push(r,i,a),h(e,u)}}),e}function m(e,t){if("line"===e||"area"===e){var n=[];t.forEach(function(e,t){switch(dl.type(t)){case"number":case"date":n.push(e);break;case"boolean":case"string":}}),h(t,n)}}function v(e,t,n){if(void 0!==e&&null!==e&&t)switch(t){case"time":return n?dl.format.time(n)(e):dl.format.auto.time()(e);case"number":return n?dl.format.number(n)(e):dl.format.auto.number()(e);case"string":default:return e}}function y(e){switch(dl.type(e)){case"date":return dl.format.auto.time()(e);case"number":return dl.format.auto.number()(e);case"boolean":case"string":default:return e}}function b(){var e;return e=d3.select("#vis-tooltip").empty()?d3.select("body").append("div").attr("id","vis-tooltip").attr("class","vg-tooltip"):d3.select("#vis-tooltip")}function _(e,t){e.selectAll("table").remove();var n=e.append("table").selectAll(".tooltip-row").data(t);n.exit().remove();var r=n.enter().append("tr").attr("class","tooltip-row");r.append("td").attr("class","key").text(function(e){return e.title+":"}),r.append("td").attr("class","value").text(function(e){return e.value})}function E(){d3.select("#vis-tooltip").selectAll(".tooltip-row").data([]).exit().remove()}function x(e,t){var n=10,r=10;t&&t.offset&&void 0!==t.offset.x&&null!==t.offset.x&&(n=t.offset.x),t&&t.offset&&void 0!==t.offset.y&&null!==t.offset.y&&(r=t.offset.y),d3.select("#vis-tooltip").style("top",function(){var t=this.getBoundingClientRect().height;return e.clientY+t+r<window.innerHeight?""+(e.clientY+r)+"px":""+(e.clientY-t-r)+"px"}).style("left",function(){var t=this.getBoundingClientRect().width;return e.clientX+t+n<window.innerWidth?""+(e.clientX+n)+"px":""+(e.clientX-t-n)+"px"})}function S(){d3.select("#vis-tooltip").style("top","-9999px").style("left","-9999px")}function T(e){w(),e&&"dark"===e.colorTheme?d3.select("#vis-tooltip").classed("dark-theme",!0):d3.select("#vis-tooltip").classed("light-theme",!0)}function w(){d3.select("#vis-tooltip").classed("dark-theme light-theme",!1)}var A=100,C=void 0,k=!1;window.vg=window.vg||{},window.vg.tooltip=function(t,n){return n||(n={}),t.on("mouseover.tooltipInit",function(t,r){l(r)&&(e(),C=window.setTimeout(function(){a(t,r,n)},n.delay||A))}),t.on("mousemove.tooltipUpdate",function(e,t){l(t)&&k&&o(e,t,n)}),t.on("mouseout.tooltipClear",function(t,r){l(r)&&(e(),k&&s(t,r,n))}),{destroy:function(){t.off("mouseover.tooltipInit"),t.off("mousemove.tooltipUpdate"),t.off("mouseout.tooltipClear"),e()}}},window.vl=window.vl||{},window.vl.tooltip=function(n,r,i){return i||(i={}),i=t(i,r),n.on("mouseover.tooltipInit",function(t,n){l(n)&&(e(),C=window.setTimeout(function(){a(t,n,i)},i.delay||A))}),n.on("mousemove.tooltipUpdate",function(e,t){l(t)&&k&&o(e,t,i)}),n.on("mouseout.tooltipClear",function(t,n){l(n)&&(e(),k&&s(t,n,i))}),{destroy:function(){n.off("mouseover.tooltipInit"),n.off("mousemove.tooltipUpdate"),n.off("mouseout.tooltipClear"),e()}}};var O={quantitative:"number",temporal:"time",ordinal:void 0,nominal:void 0}}(),function(){(function(){function e(t,r){function a(e){if(a[e]!==m)return a[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=a("json-stringify")&&a("json-parse");else{var n,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=r.stringify,c="function"==typeof l&&b;if(c){(n=function(){return 1}).toJSON=n;try{c="0"===l(0)&&"0"===l(new o)&&'""'==l(new s)&&l(y)===m&&l(m)===m&&l()===m&&"1"===l(n)&&"[1]"==l([n])&&"[null]"==l([m])&&"null"==l(null)&&"[null,null,null]"==l([m,y,null])&&l({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===l(null,n)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new u((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==l(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new u((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==l(new u((-1)))}catch(f){c=!1}}t=c}if("json-parse"==e){var d=r.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){n=d(i);var h=5==n.a.length&&1===n.a[0];if(h){try{h=!d('"\t"')}catch(f){}if(h)try{h=1!==d("01")}catch(f){}if(h)try{h=1!==d("1.")}catch(f){}}}}catch(f){h=!1}t=h}}return a[e]=!!t}t||(t=i.Object()),r||(r=i.Object());var o=t.Number||i.Number,s=t.String||i.String,l=t.Object||i.Object,u=t.Date||i.Date,c=t.SyntaxError||i.SyntaxError,f=t.TypeError||i.TypeError,d=t.Math||i.Math,h=t.JSON||i.JSON;"object"==typeof h&&h&&(r.stringify=h.stringify,r.parse=h.parse);var p,g,m,v=l.prototype,y=v.toString,b=new u((-0xc782b5b800cec));try{b=b.getUTCFullYear()==-109252&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(_){}var E="[object Function]",x="[object Date]",S="[object Number]",T="[object String]",w="[object Array]",A="[object Boolean]",C=a("bug-string-char-index");if(!b)var k=d.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],I=function(e,t){return O[t]+365*(e-1970)+k((e-1969+(t=+(t>1)))/4)-k((e-1901+t)/100)+k((e-1601+t)/400)};(p=v.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),g=function(e,t){var r,i,a,o=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,i=new r;for(a in i)p.call(i,a)&&o++;return r=i=null,o?g=2==o?function(e,t){var n,r={},i=y.call(e)==E;for(n in e)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,r,i=y.call(e)==E;for(n in e)i&&"prototype"==n||!p.call(e,n)||(r="constructor"===n)||t(n);(r||p.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var r,a,o=y.call(e)==E,s=!o&&"function"!=typeof e.constructor&&n[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(r in e)o&&"prototype"==r||!s.call(e,r)||t(r);for(a=i.length;r=i[--a];s.call(e,r)&&t(r));}),g(e,t)};var M={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N="000000",D=function(e,t){return(N+(t||0)).slice(-e)},L="\\u00",$=function(e){for(var t='"',n=0,r=e.length,i=!C||r>10,a=i&&(C?e.split(""):e);n<r;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=M[o];break;default:if(o<32){t+=L+D(2,o.toString(16));break}t+=i?a[n]:e.charAt(n)}}return t+'"'},R=function(e,t,n,r,i,a,o,s){var l,u,c,d,h,v,b,_,E,C,O,M,N,L,P,F;s=s||0;try{l=t[e]}catch(U){}if("object"==typeof l&&l)if(u=y.call(l),u!=x||p.call(l,"toJSON"))"function"==typeof l.toJSON&&(u!=S&&u!=T&&u!=w||p.call(l,"toJSON"))&&(l=l.toJSON(e));else if(l>-1/0&&l<1/0){if(I){for(h=k(l/864e5),c=k(h/365.2425)+1970-1;I(c+1,0)<=h;c++);for(d=k((h-I(c,0))/30.42);I(c,d+1)<=h;d++);h=1+h-I(c,d),v=(l%864e5+864e5)%864e5,b=k(v/36e5)%24,_=k(v/6e4)%60,E=k(v/1e3)%60,C=v%1e3}else c=l.getUTCFullYear(),d=l.getUTCMonth(),h=l.getUTCDate(),b=l.getUTCHours(),_=l.getUTCMinutes(),E=l.getUTCSeconds(),C=l.getUTCMilliseconds();l=(c<=0||c>=1e4?(c<0?"-":"+")+D(6,c<0?-c:c):D(4,c))+"-"+D(2,d+1)+"-"+D(2,h)+"T"+D(2,b)+":"+D(2,_)+":"+D(2,E)+"."+D(3,C)+"Z"}else l=null;if(n&&(l=n.call(t,e,l)),null===l)return"null";if(u=y.call(l),u==A)return""+l;if(u==S)return l>-1/0&&l<1/0?""+l:"null";if(u==T)return $(""+l);if("object"==typeof l){for(L=o.length;L--;)if(o[L]===l)throw f();if(o.push(l),O=[],P=a,a+=i,u==w){var F,j=a.length;for(N=0,L=l.length;N<L;N++)M=R(N,l,n,r,i,a,o,s),F=M===m?"null":M,j+=F.length+(N>0?1:0),O.push(F);F=O.length?i&&j>s?"[\n"+a+O.join(",\n"+a)+"\n"+P+"]":"["+O.join(",")+"]":"[]"}else{var j=a.length,N=0;g(r||l,function(e){var t,u=R(e,l,n,r,i,a,o,s);u!==m&&(t=$(e)+":"+(i?" ":"")+u,j+=t.length+(N++>0?1:0),O.push(t))}),F=O.length?i&&j>s?"{\n"+a+O.join(",\n"+a)+"\n"+P+"}":"{"+O.join(",")+"}":"{}"}return o.pop(),F}};if(r.stringify=function(e,t,r,i){var a,o,s,l;if(n[typeof t]&&t)if((l=y.call(t))==E)o=t;else if(l==w){s={};for(var u,c=0,f=t.length;c<f;u=t[c++],l=y.call(u),(l==T||l==S)&&(s[u]=1));}if(r)if((l=y.call(r))==S){if((r-=r%1)>0)for(a="",r>10&&(r=10);a.length<r;a+=" ");}else l==T&&(a=r.length<=10?r:r.slice(0,10));return R("",(u={},u[""]=e,u),o,s,a,"",[],i)},r.compactStringify=function(e,t,n){return r.stringify(e,t,n,60)},!a("json-parse")){var P,F,U=s.fromCharCode,j={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},H=function(){throw P=F=null,c()},z=function(){for(var e,t,n,r,i,a=F,o=a.length;P<o;)switch(i=a.charCodeAt(P)){case 9:case 10:case 13:case 32:P++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=C?a.charAt(P):a[P],P++,e;case 34:for(e="@",P++;P<o;)if(i=a.charCodeAt(P),i<32)H();else if(92==i)switch(i=a.charCodeAt(++P)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=j[i],P++;break;case 117:for(t=++P,n=P+4;P<n;P++)i=a.charCodeAt(P),i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||H();e+=U("0x"+a.slice(t,P));break;default:H()}else{if(34==i)break;for(i=a.charCodeAt(P),t=P;i>=32&&92!=i&&34!=i;)i=a.charCodeAt(++P);e+=a.slice(t,P)}if(34==a.charCodeAt(P))return P++,e;H();default:if(t=P,45==i&&(r=!0,i=a.charCodeAt(++P)),i>=48&&i<=57){for(48==i&&(i=a.charCodeAt(P+1),i>=48&&i<=57)&&H(),r=!1;P<o&&(i=a.charCodeAt(P),i>=48&&i<=57);P++);if(46==a.charCodeAt(P)){for(n=++P;n<o&&(i=a.charCodeAt(n),i>=48&&i<=57);n++);n==P&&H(),P=n}if(i=a.charCodeAt(P),101==i||69==i){for(i=a.charCodeAt(++P),43!=i&&45!=i||P++,n=P;n<o&&(i=a.charCodeAt(n),i>=48&&i<=57);n++);n==P&&H(),P=n}return+a.slice(t,P)}if(r&&H(),"true"==a.slice(P,P+4))return P+=4,!0;if("false"==a.slice(P,P+5))return P+=5,!1;if("null"==a.slice(P,P+4))return P+=4,null;H()}return"$"},B=function(e){var t,n;if("$"==e&&H(),"string"==typeof e){if("@"==(C?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=z(),"]"!=e;n||(n=!0))n&&(","==e?(e=z(),"]"==e&&H()):H()),","==e&&H(),t.push(B(e));return t}if("{"==e){for(t={};e=z(),"}"!=e;n||(n=!0))n&&(","==e?(e=z(),"}"==e&&H()):H()),","!=e&&"string"==typeof e&&"@"==(C?e.charAt(0):e[0])&&":"==z()||H(),t[e.slice(1)]=B(z());return t}H()}return e},q=function(e,t,n){var r=Y(e,t,n);r===m?delete e[t]:e[t]=r},Y=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(y.call(i)==w)for(r=i.length;r--;)q(i,r,n);else g(i,function(e){q(i,e,n)});return n.call(e,t,i)};r.parse=function(e,t){var n,r;return P=0,F=""+e,n=B(z()),"$"!=z()&&H(),P=F=null,t&&y.call(t)==E?Y((r={},r[""]=n,r),"",t):n}}return r.runInContext=e,r}var t="function"==typeof define&&define.amd,n={"function":!0,object:!0},r=n[typeof exports]&&exports&&!exports.nodeType&&exports,i=n[typeof window]&&window||this,a=r&&n[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(i=a),r&&!t)e(i,r);else{var o=i.JSON,s=i.JSON3,l=!1,u=e(i,i.JSON3={noConflict:function(){return l||(l=!0,i.JSON=o,i.JSON3=s,o=s=null),u}});i.JSON={parse:u.parse,stringify:u.stringify}}t&&define(function(){return u})}).call(this)}(),function(){window.vlSchema={oneOf:[{$ref:"#/definitions/ExtendedUnitSpec",description:"Schema for a unit Vega-Lite specification, with the syntactic sugar extensions:\n\n- `row` and `column` are included in the encoding.\n\n- (Future) label, box plot\n\n\n\nNote: the spec could contain facet."},{$ref:"#/definitions/FacetSpec"},{$ref:"#/definitions/LayerSpec"}],definitions:{ExtendedUnitSpec:{type:"object",properties:{mark:{$ref:"#/definitions/Mark",description:'The mark type.\n\nOne of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`,\n\n`"area"`, `"point"`, `"rule"`, and `"text"`.'},encoding:{$ref:"#/definitions/Encoding",description:"A key-value mapping between encoding channels and definition of fields."},name:{description:"Name of the visualization for later reference.",type:"string"},description:{description:"An optional description of this mark for commenting purpose.\n\nThis property has no effect on the output visualization.",type:"string"},data:{$ref:"#/definitions/Data",description:"An object describing the data source"},transform:{$ref:"#/definitions/Transform",description:"An object describing filter and new field calculation."},config:{$ref:"#/definitions/Config",description:"Configuration object"}},required:["mark"]},Mark:{type:"string","enum":["area","bar","line","point","text","tick","rule","circle","square","errorBar","boxplot","hexagon","leader","contour","scatter3D","radar"]},Encoding:{type:"object",properties:{row:{$ref:"#/definitions/PositionChannelDef",description:"Vertical facets for trellis plots."},column:{$ref:"#/definitions/PositionChannelDef",description:"Horizontal facets for trellis plots."},x:{$ref:"#/definitions/PositionChannelDef",description:"X coordinates for `point`, `circle`, `square`,\n\n`line`, `rule`, `text`, and `tick`\n\n(or to width and height for `bar` and `area` marks)."},y:{$ref:"#/definitions/PositionChannelDef",description:"Y coordinates for `point`, `circle`, `square`,\n\n`line`, `rule`, `text`, and `tick`\n\n(or to width and height for `bar` and `area` marks)."},x2:{$ref:"#/definitions/PositionChannelDef",description:"X2 coordinates for ranged `bar`, `rule`, `area`"},y2:{$ref:"#/definitions/PositionChannelDef",description:"Y2 coordinates for ranged `bar`, `rule`, `area`"},color:{$ref:"#/definitions/ChannelDefWithLegend",description:"Color of the marks – either fill or stroke color based on mark type.\n\n(By default, fill color for `area`, `bar`, `tick`, `text`, `circle`, and `square` /\n\nstroke color for `line` and `point`.)"},opacity:{$ref:"#/definitions/ChannelDefWithLegend",description:"Opacity of the marks – either can be a value or in a range."},size:{$ref:"#/definitions/ChannelDefWithLegend",description:"Size of the mark.\n\n- For `point`, `square` and `circle`\n\n– the symbol size, or pixel area of the mark.\n\n- For `bar` and `tick` – the bar and tick's size.\n\n- For `text` – the text's font size.\n\n- Size is currently unsupported for `line` and `area`."},shape:{$ref:"#/definitions/ChannelDefWithLegend",description:'The symbol\'s shape (only for `point` marks). The supported values are\n\n`"circle"` (default), `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`,\n\nor `"triangle-down"`, or else a custom SVG path string.'},detail:{description:"Additional levels of detail for grouping data in aggregate views and\n\nin line and area marks without mapping data to a specific visual channel.",oneOf:[{$ref:"#/definitions/FieldDef",description:"Interface for any kind of FieldDef;\n\nFor simplicity, we do not declare multiple interfaces of FieldDef like\n\nwe do for JSON schema."},{type:"array",items:{$ref:"#/definitions/FieldDef",description:"Interface for any kind of FieldDef;\n\nFor simplicity, we do not declare multiple interfaces of FieldDef like\n\nwe do for JSON schema."}}]},text:{$ref:"#/definitions/FieldDef",description:"Text of the `text` mark."},label:{$ref:"#/definitions/FieldDef"},path:{description:"Order of data points in line marks.",oneOf:[{$ref:"#/definitions/OrderChannelDef"},{type:"array",items:{$ref:"#/definitions/OrderChannelDef"}}]},order:{description:"Layer order for non-stacked marks, or stack order for stacked marks.",oneOf:[{$ref:"#/definitions/OrderChannelDef"},{type:"array",items:{$ref:"#/definitions/OrderChannelDef"}}]}}},PositionChannelDef:{type:"object",properties:{axis:{oneOf:[{type:"boolean"},{$ref:"#/definitions/Axis"}]},scale:{$ref:"#/definitions/Scale"},sort:{oneOf:[{$ref:"#/definitions/SortField"},{$ref:"#/definitions/SortOrder"}]},field:{description:"Name of the field from which to pull a data value.",type:"string"},type:{$ref:"#/definitions/Type",description:'The encoded field\'s type of measurement. This can be either a full type\n\nname (`"quantitative"`, `"temporal"`, `"ordinal"`,  and `"nominal"`)\n\nor an initial character of the type name (`"Q"`, `"T"`, `"O"`, `"N"`).\n\nThis property is case insensitive.'},value:{description:"A constant value in visual domain.",oneOf:[{type:"number"},{type:"string"},{type:"boolean"}]},timeUnit:{$ref:"#/definitions/TimeUnit",description:"Time unit for a `temporal` field  (e.g., `year`, `yearmonth`, `month`, `hour`)."},bin:{description:"Flag for binning a `quantitative` field, or a bin property object\n\nfor binning parameters.",oneOf:[{type:"boolean"},{$ref:"#/definitions/Bin",description:"Binning properties or boolean flag for determining whether to bin data or not."}]},aggregate:{$ref:"#/definitions/AggregateOp",description:"Aggregation function for the field\n\n(e.g., `mean`, `sum`, `median`, `min`, `max`, `count`)."},title:{description:"Title for axis or legend.",type:"string"}}},Axis:{type:"object",properties:{labelAngle:{description:"The rotation angle of the axis labels.",type:"number"},format:{description:"The formatting pattern for axis labels.",type:"string"},orient:{$ref:"#/definitions/AxisOrient",description:"The orientation of the axis. One of top, bottom, left or right. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart)."},title:{description:"A title for the axis. Shows field name and its function by default.",type:"string"},values:{type:"array",items:{type:"number"}},axisWidth:{description:"Width of the axis line",type:"number"},layer:{description:"A string indicating if the axis (and any gridlines) should be placed above or below the data marks.",type:"string"},offset:{description:"The offset, in pixels, by which to displace the axis from the edge of the enclosing group or data rectangle.",type:"number"},axisColor:{description:"Color of axis line.",type:"string"},grid:{description:"A flag indicate if gridlines should be created in addition to ticks. If `grid` is unspecified, the default value is `true` for ROW and COL. For X and Y, the default value is `true` for quantitative and time fields and `false` otherwise.",type:"boolean"},gridColor:{description:"Color of gridlines.",type:"string"},gridDash:{description:"The offset (in pixels) into which to begin drawing with the grid dash array.",type:"array",items:{type:"number"}},gridOpacity:{description:"The stroke opacity of grid (value between [0,1])",type:"number"},gridWidth:{description:"The grid width, in pixels.",type:"number"},labels:{description:"Enable or disable labels.",type:"boolean"},labelAlign:{description:"Text alignment for the Label.",type:"string"},labelBaseline:{description:"Text baseline for the label.",type:"string"},labelMaxLength:{description:"Truncate labels that are too long.",minimum:1,type:"number"},shortTimeLabels:{description:"Whether month and day names should be abbreviated.",type:"boolean"},subdivide:{description:"If provided, sets the number of minor ticks between major ticks (the value 9 results in decimal subdivision). Only applicable for axes visualizing quantitative scales.",type:"number"},ticks:{description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of 2, 5, 10) and lie within the underlying scale\'s range.',minimum:0,type:"number"},tickColor:{description:"The color of the axis's tick.",type:"string"},tickLabelColor:{description:"The color of the tick label, can be in hex color code or regular color name.",type:"string"},tickLabelFont:{description:"The font of the tick label.",type:"string"},tickLabelFontSize:{description:"The font size of label, in pixels.",type:"number"},tickPadding:{description:"The padding, in pixels, between ticks and text labels.",type:"number"},tickSize:{description:"The size, in pixels, of major, minor and end ticks.",minimum:0,type:"number"},tickSizeMajor:{description:"The size, in pixels, of major ticks.",minimum:0,type:"number"},tickSizeMinor:{description:"The size, in pixels, of minor ticks.",minimum:0,type:"number"},tickSizeEnd:{description:"The size, in pixels, of end ticks.",minimum:0,type:"number"},tickWidth:{description:"The width, in pixels, of ticks.",type:"number"},titleColor:{description:"Color of the title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:"Font of the title.",type:"string"},titleFontSize:{description:"Size of the title.",type:"number"},titleFontWeight:{description:"Weight of the title.",type:"string"},titleOffset:{description:"A title offset value for the axis.",type:"number"},titleMaxLength:{description:"Max length for axis title if the title is automatically generated from the field's description. By default, this is automatically based on cell size and characterWidth property.",minimum:0,type:"number"},characterWidth:{description:"Character width for automatically determining title max length.",type:"number"},properties:{description:"Optional mark property definitions for custom axis styling."}}},AxisOrient:{type:"string","enum":["top","right","left","bottom"]},Scale:{type:"object",properties:{type:{$ref:"#/definitions/ScaleType"},domain:{description:"The domain of the scale, representing the set of data values. For quantitative data, this can take the form of a two-element array with minimum and maximum values. For ordinal/categorical data, this may be an array of valid input values.",oneOf:[{type:"array",items:{type:"number"}},{type:"array",items:{type:"string"}}]},range:{description:"The range of the scale, representing the set of visual values. For numeric values, the range can take the form of a two-element array with minimum and maximum values. For ordinal or quantized data, the range may by an array of desired output values, which are mapped to elements in the specified domain. For ordinal scales only, the range can be defined using a DataRef: the range values are then drawn dynamically from a backing data set.",oneOf:[{type:"string"},{type:"array",items:{type:"number"}},{type:"array",items:{type:"string"}}]},round:{description:"If true, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid.",type:"boolean"},bandSize:{minimum:0,type:"number"},padding:{description:"Applies spacing among ordinal elements in the scale range. The actual effect depends on how the scale is configured. If the __points__ parameter is `true`, the padding value is interpreted as a multiple of the spacing between points. A reasonable value is 1.0, such that the first and last point will be offset from the minimum and maximum value by half the distance between points. Otherwise, padding is typically in the range [0, 1] and corresponds to the fraction of space in the range interval to allocate to padding. A value of 0.5 means that the range band width will be equal to the padding width. For more, see the [D3 ordinal scale documentation](https://github.com/mbostock/d3/wiki/Ordinal-Scales).",type:"number"},clamp:{description:"If true, values that exceed the data domain are clamped to either the minimum or maximum range value",type:"boolean"},nice:{description:"If specified, modifies the scale domain to use a more human-friendly value range. If specified as a true boolean, modifies the scale domain to use a more human-friendly number range (e.g., 7 instead of 6.96). If specified as a string, modifies the scale domain to use a more human-friendly value range. For time and utc scale types only, the nice value should be a string indicating the desired time interval.",oneOf:[{type:"boolean"},{$ref:"#/definitions/NiceTime"}]},exponent:{description:"Sets the exponent of the scale transformation. For pow scale types only, otherwise ignored.",type:"number"},zero:{description:"If `true`, ensures that a zero baseline value is included in the scale domain.\n\nDefault value: `true` for `x` and `y` channel if the quantitative field is not binned\n\nand no custom `domain` is provided; `false` otherwise.",type:"boolean"},useRawDomain:{description:'Uses the source data range as scale domain instead of aggregated data for aggregate axis.\n\nThis property only works with aggregate functions that produce values within the raw data domain (`"mean"`, `"average"`, `"stdev"`, `"stdevp"`, `"median"`, `"q1"`, `"q3"`, `"min"`, `"max"`). For other aggregations that produce values outside of the raw data domain (e.g. `"count"`, `"sum"`), this property is ignored.',type:"boolean"}}},ScaleType:{type:"string","enum":["linear","log","pow","sqrt","quantile","quantize","ordinal","time","utc"]},NiceTime:{type:"string","enum":["second","minute","hour","day","week","month","year"]},SortField:{type:"object",properties:{field:{description:"The field name to aggregate over.",type:"string"},op:{$ref:"#/definitions/AggregateOp",description:"The sort aggregation operator"},order:{$ref:"#/definitions/SortOrder"}},required:["field","op"]},AggregateOp:{type:"string","enum":["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"]},SortOrder:{type:"string","enum":["ascending","descending","none"]},Type:{type:"string","enum":["quantitative","ordinal","temporal","nominal"]},TimeUnit:{type:"string","enum":["year","month","day","date","hours","minutes","seconds","milliseconds","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","hoursminutes","hoursminutesseconds","minutesseconds","secondsmilliseconds","quarter","yearquarter","quartermonth","yearquartermonth"]},Bin:{type:"object",properties:{min:{description:"The minimum bin value to consider. If unspecified, the minimum value of the specified field is used.",type:"number"},max:{description:"The maximum bin value to consider. If unspecified, the maximum value of the specified field is used.",type:"number"},base:{description:"The number base to use for automatic bin determination (default is base 10).",type:"number"},step:{description:"An exact step size to use between bins. If provided, options such as maxbins will be ignored.",type:"number"},steps:{description:"An array of allowable step sizes to choose from.",type:"array",items:{type:"number"}},minstep:{description:"A minimum allowable step size (particularly useful for integer values).",type:"number"},div:{description:"Scale factors indicating allowable subdivisions. The default value is [5, 2], which indicates that for base 10 numbers (the default base), the method may consider dividing bin sizes by 5 and/or 2. For example, for an initial step size of 10, the method can check if bin sizes of 2 (= 10/5), 5 (= 10/2), or 1 (= 10/(5*2)) might also satisfy the given constraints.",type:"array",items:{type:"number"}},maxbins:{description:"Maximum number of bins.",minimum:2,type:"number"}}},ChannelDefWithLegend:{type:"object",properties:{legend:{$ref:"#/definitions/Legend"},scale:{$ref:"#/definitions/Scale"},sort:{oneOf:[{$ref:"#/definitions/SortField"},{$ref:"#/definitions/SortOrder"}]},field:{description:"Name of the field from which to pull a data value.",type:"string"},type:{$ref:"#/definitions/Type",description:'The encoded field\'s type of measurement. This can be either a full type\n\nname (`"quantitative"`, `"temporal"`, `"ordinal"`,  and `"nominal"`)\n\nor an initial character of the type name (`"Q"`, `"T"`, `"O"`, `"N"`).\n\nThis property is case insensitive.'},value:{description:"A constant value in visual domain.",oneOf:[{type:"number"},{type:"string"},{type:"boolean"}]},timeUnit:{$ref:"#/definitions/TimeUnit",description:"Time unit for a `temporal` field  (e.g., `year`, `yearmonth`, `month`, `hour`)."},bin:{description:"Flag for binning a `quantitative` field, or a bin property object\n\nfor binning parameters.",oneOf:[{type:"boolean"},{$ref:"#/definitions/Bin",description:"Binning properties or boolean flag for determining whether to bin data or not."}]},aggregate:{$ref:"#/definitions/AggregateOp",description:"Aggregation function for the field\n\n(e.g., `mean`, `sum`, `median`, `min`, `max`, `count`)."},title:{description:"Title for axis or legend.",type:"string"}}},Legend:{type:"object",properties:{format:{description:"An optional formatting pattern for legend labels. Vega uses D3\\'s format pattern.",type:"string"},title:{description:"A title for the legend. (Shows field name and its function by default.)",type:"string"},values:{description:"Explicitly set the visible legend values.",type:"array",items:{}},orient:{description:'The orientation of the legend. One of "left" or "right". This determines how the legend is positioned within the scene. The default is "right".',type:"string"},offset:{description:"The offset, in pixels, by which to displace the legend from the edge of the enclosing group or data rectangle.",type:"number"},padding:{description:"The padding, in pixels, between the lengend and axis.",type:"number"},margin:{description:"The margin around the legend, in pixels",type:"number"},gradientStrokeColor:{description:"The color of the gradient stroke, can be in hex color code or regular color name.",type:"string"},gradientStrokeWidth:{description:"The width of the gradient stroke, in pixels.",type:"number"},gradientHeight:{description:"The height of the gradient, in pixels.",type:"number"},gradientWidth:{description:"The width of the gradient, in pixels.",type:"number"},labelAlign:{description:"The alignment of the legend label, can be left, middle or right.",type:"string"},labelBaseline:{description:"The position of the baseline of legend label, can be top, middle or bottom.",type:"string"},labelColor:{description:"The color of the legend label, can be in hex color code or regular color name.",type:"string"},labelFont:{description:"The font of the lengend label.",type:"string"},labelFontSize:{description:"The font size of lengend lable.",type:"number"},labelOffset:{description:"The offset of the legend label.",type:"number"},shortTimeLabels:{description:"Whether month names and weekday names should be abbreviated.",type:"boolean"},symbolColor:{description:"The color of the legend symbol,",type:"string"},symbolShape:{description:"The shape of the legend symbol, can be the 'circle', 'square', 'cross', 'diamond',\n\n'triangle-up', 'triangle-down', or else a custom SVG path string.",type:"string"},symbolSize:{description:"The size of the lengend symbol, in pixels.",type:"number"},symbolStrokeWidth:{description:"The width of the symbol's stroke.",type:"number"},titleColor:{description:"Optional mark property definitions for custom legend styling.\n\nThe color of the legend title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:"The font of the legend title.",type:"string"},titleFontSize:{description:"The font size of the legend title.",type:"number"},titleFontWeight:{description:"The font weight of the legend title.",type:"string"},properties:{description:"Optional mark property definitions for custom legend styling."}}},FieldDef:{type:"object",properties:{field:{description:"Name of the field from which to pull a data value.",type:"string"},type:{$ref:"#/definitions/Type",description:'The encoded field\'s type of measurement. This can be either a full type\n\nname (`"quantitative"`, `"temporal"`, `"ordinal"`,  and `"nominal"`)\n\nor an initial character of the type name (`"Q"`, `"T"`, `"O"`, `"N"`).\n\nThis property is case insensitive.'},value:{description:"A constant value in visual domain.",oneOf:[{type:"number"},{type:"string"},{type:"boolean"}]},timeUnit:{$ref:"#/definitions/TimeUnit",description:"Time unit for a `temporal` field  (e.g., `year`, `yearmonth`, `month`, `hour`)."},bin:{description:"Flag for binning a `quantitative` field, or a bin property object\n\nfor binning parameters.",oneOf:[{type:"boolean"},{$ref:"#/definitions/Bin",description:"Binning properties or boolean flag for determining whether to bin data or not."}]},aggregate:{$ref:"#/definitions/AggregateOp",description:"Aggregation function for the field\n\n(e.g., `mean`, `sum`, `median`, `min`, `max`, `count`)."},
title:{description:"Title for axis or legend.",type:"string"}}},OrderChannelDef:{type:"object",properties:{sort:{$ref:"#/definitions/SortOrder"},field:{description:"Name of the field from which to pull a data value.",type:"string"},type:{$ref:"#/definitions/Type",description:'The encoded field\'s type of measurement. This can be either a full type\n\nname (`"quantitative"`, `"temporal"`, `"ordinal"`,  and `"nominal"`)\n\nor an initial character of the type name (`"Q"`, `"T"`, `"O"`, `"N"`).\n\nThis property is case insensitive.'},value:{description:"A constant value in visual domain.",oneOf:[{type:"number"},{type:"string"},{type:"boolean"}]},timeUnit:{$ref:"#/definitions/TimeUnit",description:"Time unit for a `temporal` field  (e.g., `year`, `yearmonth`, `month`, `hour`)."},bin:{description:"Flag for binning a `quantitative` field, or a bin property object\n\nfor binning parameters.",oneOf:[{type:"boolean"},{$ref:"#/definitions/Bin",description:"Binning properties or boolean flag for determining whether to bin data or not."}]},aggregate:{$ref:"#/definitions/AggregateOp",description:"Aggregation function for the field\n\n(e.g., `mean`, `sum`, `median`, `min`, `max`, `count`)."},title:{description:"Title for axis or legend.",type:"string"}}},Data:{type:"object",properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for the data file or values."},url:{description:"A URL from which to load the data set. Use the format.type property\n\nto ensure the loaded data is correctly parsed.",type:"string"},values:{description:"Pass array of objects instead of a url to a file.",type:"array",items:{}}}},DataFormat:{type:"object",properties:{type:{$ref:"#/definitions/DataFormatType",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`.\n\nThe default format type is determined by the extension of the file url.\n\nIf no extension is detected, `"json"` will be used by default.'},property:{description:'JSON only) The JSON property containing the desired data.\n\nThis parameter can be used when the loaded JSON file may have surrounding structure or meta-data.\n\nFor example `"property": "values.features"` is equivalent to retrieving `json.values.features`\n\nfrom the loaded JSON object.',type:"string"},feature:{description:'The name of the TopoJSON object set to convert to a GeoJSON feature collection.\n\nFor example, in a map of the world, there may be an object set named `"countries"`.\n\nUsing the feature property, we can extract this set and generate a GeoJSON feature object for each country.',type:"string"},mesh:{description:"The name of the TopoJSON object set to convert to a mesh.\n\nSimilar to the `feature` option, `mesh` extracts a named TopoJSON object set.\n\nUnlike the `feature` option, the corresponding geo data is returned as a single, unified mesh instance, not as inidividual GeoJSON features.\n\nExtracting a mesh is useful for more efficiently drawing borders or other geographic elements that you do not need to associate with specific regions such as individual countries, states or counties.",type:"string"}}},DataFormatType:{type:"string","enum":["json","csv","tsv","topojson"]},Transform:{type:"object",properties:{filter:{description:"A string containing the filter Vega expression. Use `datum` to refer to the current data object.",oneOf:[{type:"string"},{$ref:"#/definitions/EqualFilter"},{$ref:"#/definitions/RangeFilter"},{$ref:"#/definitions/InFilter"},{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/definitions/EqualFilter"},{$ref:"#/definitions/RangeFilter"},{$ref:"#/definitions/InFilter"}]}}]},filterInvalid:{description:"Whether to filter invalid values (`null` and `NaN`) from the data. By default (`undefined`), only quantitative and temporal fields are filtered. If set to `true`, all data items with null values are filtered. If `false`, all data items are included.",type:"boolean"},calculate:{description:"Calculate new field(s) using the provided expresssion(s). Calculation are applied before filter.",type:"array",items:{$ref:"#/definitions/Formula",description:"Formula object for calculate."}}}},EqualFilter:{type:"object",properties:{timeUnit:{$ref:"#/definitions/TimeUnit",description:"Time unit for the field to be filtered."},field:{description:"Field to be filtered.",type:"string"},equal:{description:"Value that the field should be equal to.",oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{$ref:"#/definitions/DateTime",description:"Object for defining datetime in Vega-Lite Filter.\n\nIf both month and quarter are provided, month has higher precedence.\n\n`day` cannot be combined with other date.\n\nWe accept string for month and day names."}]}},required:["field","equal"]},DateTime:{type:"object",properties:{year:{description:"Integer value representing the year.",type:"number"},quarter:{description:"Integer value representing the quarter of the year (from 1-4).",type:"number"},month:{description:'One of: (1) integer value representing the month from `1`-`12`. `1` represents January;  (2) case-insensitive month name (e.g., `"January"`);  (3) case-insensitive, 3-character short month name (e.g., `"Jan"`).',oneOf:[{type:"number"},{type:"string"}]},date:{description:"Integer value representing the date from 1-31.",type:"number"},day:{description:'Value representing the day of week.  This can be one of: (1) integer value -- `1` represents Monday; (2) case-insensitive day name (e.g., `"Monday"`);  (3) case-insensitive, 3-character short day name (e.g., `"Mon"`).   <br/> **Warning:** A DateTime definition object with `day`** should not be combined with `year`, `quarter`, `month`, or `date`.',oneOf:[{type:"number"},{type:"string"}]},hours:{description:"Integer value representing the hour of day from 0-23.",type:"number"},minutes:{description:"Integer value representing minute segment of a time from 0-59.",type:"number"},seconds:{description:"Integer value representing second segment of a time from 0-59.",type:"number"},milliseconds:{description:"Integer value representing millisecond segment of a time.",type:"number"}}},RangeFilter:{type:"object",properties:{timeUnit:{$ref:"#/definitions/TimeUnit",description:"time unit for the field to be filtered."},field:{description:"Field to be filtered",type:"string"},range:{description:"Array of inclusive minimum and maximum values\n\nfor a field value of a data item to be included in the filtered data.",maxItems:2,minItems:2,type:"array",items:{oneOf:[{type:"number"},{$ref:"#/definitions/DateTime",description:"Object for defining datetime in Vega-Lite Filter.\n\nIf both month and quarter are provided, month has higher precedence.\n\n`day` cannot be combined with other date.\n\nWe accept string for month and day names."}]}}},required:["field","range"]},InFilter:{type:"object",properties:{timeUnit:{$ref:"#/definitions/TimeUnit",description:"time unit for the field to be filtered."},field:{description:"Field to be filtered",type:"string"},"in":{description:"A set of values that the `field`'s value should be a member of,\n\nfor a data item included in the filtered data.",type:"array",items:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{$ref:"#/definitions/DateTime",description:"Object for defining datetime in Vega-Lite Filter.\n\nIf both month and quarter are provided, month has higher precedence.\n\n`day` cannot be combined with other date.\n\nWe accept string for month and day names."}]}}},required:["field","in"]},Formula:{type:"object",properties:{field:{description:"The field in which to store the computed formula value.",type:"string"},expr:{description:"A string containing an expression for the formula. Use the variable `datum` to to refer to the current data object.",type:"string"}},required:["field","expr"]},Config:{type:"object",properties:{viewport:{description:"The width and height of the on-screen viewport, in pixels. If necessary, clipping and scrolling will be applied.",type:"number"},background:{description:'CSS color property to use as background of visualization. Default is `"transparent"`.',type:"string"},numberFormat:{description:'D3 Number format for axis labels and text tables. For example "s" for SI units.',type:"string"},timeFormat:{description:"Default datetime format for axis and legend labels. The format can be set directly on each axis and legend.",type:"string"},countTitle:{description:"Default axis and legend title for count fields.",type:"string"},cell:{$ref:"#/definitions/CellConfig",description:"Cell Config"},mark:{$ref:"#/definitions/MarkConfig",description:"Mark Config"},overlay:{$ref:"#/definitions/OverlayConfig",description:"Mark Overlay Config"},scale:{$ref:"#/definitions/ScaleConfig",description:"Scale Config"},axis:{$ref:"#/definitions/AxisConfig",description:"Axis Config"},legend:{$ref:"#/definitions/LegendConfig",description:"Legend Config"},facet:{$ref:"#/definitions/FacetConfig",description:"Facet Config"}}},CellConfig:{type:"object",properties:{width:{type:"number"},height:{type:"number"},clip:{type:"boolean"},fill:{description:"The fill color.",format:"color",type:"string"},fillOpacity:{description:"The fill opacity (value between [0,1]).",type:"number"},stroke:{description:"The stroke color.",type:"string"},strokeOpacity:{description:"The stroke opacity (value between [0,1]).",type:"number"},strokeWidth:{description:"The stroke width, in pixels.",type:"number"},strokeDash:{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",type:"array",items:{type:"number"}},strokeDashOffset:{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"}}},MarkConfig:{type:"object",properties:{filled:{description:'Whether the shape\\\'s color should be used as fill color instead of stroke color.\n\nThis is only applicable for "bar", "point", and "area".\n\nAll marks except "point" marks are filled by default.\n\nSee Mark Documentation (http://vega.github.io/vega-lite/docs/marks.html)\n\nfor usage example.',type:"boolean"},color:{description:"Default color.",format:"color",type:"string"},fill:{description:"Default Fill Color.  This has higher precedence than config.color",format:"color",type:"string"},stroke:{description:"Default Stroke Color.  This has higher precedence than config.color",format:"color",type:"string"},opacity:{minimum:0,maximum:1,type:"number"},fillOpacity:{minimum:0,maximum:1,type:"number"},strokeOpacity:{minimum:0,maximum:1,type:"number"},strokeWidth:{minimum:0,type:"number"},strokeDash:{description:"An array of alternating stroke, space lengths for creating dashed or dotted lines.",type:"array",items:{type:"number"}},strokeDashOffset:{description:"The offset (in pixels) into which to begin drawing with the stroke dash array.",type:"number"},stacked:{$ref:"#/definitions/StackOffset"},orient:{$ref:"#/definitions/Orient",description:"The orientation of a non-stacked bar, tick, area, and line charts.\n\nThe value is either horizontal (default) or vertical.\n\n- For bar, rule and tick, this determines whether the size of the bar and tick\n\nshould be applied to x or y dimension.\n\n- For area, this property determines the orient property of the Vega output.\n\n- For line, this property determines the sort order of the points in the line\n\nif `config.sortLineBy` is not specified.\n\nFor stacked charts, this is always determined by the orientation of the stack;\n\ntherefore explicitly specified value will be ignored."},interpolate:{$ref:"#/definitions/Interpolate",description:"The line interpolation method to use. One of linear, step-before, step-after, basis, basis-open, cardinal, cardinal-open, monotone."},tension:{description:"Depending on the interpolation type, sets the tension parameter.",type:"number"},lineSize:{description:"Size of line mark.",type:"number"},ruleSize:{description:"Size of rule mark.",type:"number"},barSize:{description:"The size of the bars.  If unspecified, the default size is  `bandSize-1`,\n\nwhich provides 1 pixel offset between bars.",type:"number"},barThinSize:{description:"The size of the bars on continuous scales.",type:"number"},shape:{description:"The symbol shape to use. One of circle (default), square, cross, diamond, triangle-up, or triangle-down, or a custom SVG path.",oneOf:[{$ref:"#/definitions/Shape"},{type:"string"}]},size:{description:"The pixel area each the point. For example: in the case of circles, the radius is determined in part by the square root of the size value.",type:"number"},tickSize:{description:"The width of the ticks.",type:"number"},tickThickness:{description:"Thickness of the tick mark.",type:"number"},align:{$ref:"#/definitions/HorizontalAlign",description:"The horizontal alignment of the text. One of left, right, center."},angle:{description:"The rotation angle of the text, in degrees.",type:"number"},baseline:{$ref:"#/definitions/VerticalAlign",description:"The vertical alignment of the text. One of top, middle, bottom."},dx:{description:"The horizontal offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the angle property.",type:"number"},dy:{description:"The vertical offset, in pixels, between the text label and its anchor point. The offset is applied after rotation by the angle property.",type:"number"},radius:{description:"Polar coordinate radial offset, in pixels, of the text label from the origin determined by the x and y properties.",type:"number"},theta:{description:'Polar coordinate angle, in radians, of the text label from the origin determined by the x and y properties. Values for theta follow the same convention of arc mark startAngle and endAngle properties: angles are measured in radians, with 0 indicating "north".',type:"number"},font:{description:"The typeface to set the text in (e.g., Helvetica Neue).",type:"string"},fontSize:{description:"The font size, in pixels.",type:"number"},fontStyle:{$ref:"#/definitions/FontStyle",description:"The font style (e.g., italic)."},fontWeight:{$ref:"#/definitions/FontWeight",description:"The font weight (e.g., bold)."},format:{description:"The formatting pattern for text value. If not defined, this will be determined automatically.",type:"string"},shortTimeLabels:{description:"Whether month names and weekday names should be abbreviated.",type:"boolean"},text:{description:"Placeholder Text",type:"string"},applyColorToBackground:{description:"Apply color field to background color instead of the text.",type:"boolean"}}},StackOffset:{type:"string","enum":["zero","center","normalize","none"]},Orient:{type:"string","enum":["horizontal","vertical"]},Interpolate:{type:"string","enum":["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"]},Shape:{type:"string","enum":["circle","square","cross","diamond","triangle-up","triangle-down"]},HorizontalAlign:{type:"string","enum":["left","right","center"]},VerticalAlign:{type:"string","enum":["top","middle","bottom"]},FontStyle:{type:"string","enum":["normal","italic"]},FontWeight:{type:"string","enum":["normal","bold"]},OverlayConfig:{type:"object",properties:{line:{description:"Whether to overlay line with point.",type:"boolean"},area:{$ref:"#/definitions/AreaOverlay",description:"Type of overlay for area mark (line or linepoint)"},pointStyle:{$ref:"#/definitions/MarkConfig",description:"Default style for the overlayed point."},lineStyle:{$ref:"#/definitions/MarkConfig",description:"Default style for the overlayed point."}}},AreaOverlay:{type:"string","enum":["line","linepoint","none"]},ScaleConfig:{type:"object",properties:{round:{description:"If true, rounds numeric output values to integers.\n\nThis can be helpful for snapping to the pixel grid.\n\n(Only available for `x`, `y`, `size`, `row`, and `column` scales.)",type:"boolean"},textBandWidth:{description:"Default band width for `x` ordinal scale when is mark is `text`.",minimum:0,type:"number"},bandSize:{description:"Default band size for (1) `y` ordinal scale,\n\nand (2) `x` ordinal scale when the mark is not `text`.",minimum:0,type:"number"},opacity:{description:"Default range for opacity.",type:"array",items:{type:"number"}},padding:{description:"Default padding for `x` and `y` ordinal scales.",type:"number"},useRawDomain:{description:'Uses the source data range as scale domain instead of aggregated data for aggregate axis.\n\nThis property only works with aggregate functions that produce values within the raw data domain (`"mean"`, `"average"`, `"stdev"`, `"stdevp"`, `"median"`, `"q1"`, `"q3"`, `"min"`, `"max"`). For other aggregations that produce values outside of the raw data domain (e.g. `"count"`, `"sum"`), this property is ignored.',type:"boolean"},nominalColorRange:{description:"Default range for nominal color scale",oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},sequentialColorRange:{description:"Default range for ordinal / continuous color scale",oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},shapeRange:{description:"Default range for shape",oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},barSizeRange:{description:"Default range for bar size scale",type:"array",items:{type:"number"}},fontSizeRange:{description:"Default range for font size scale",type:"array",items:{type:"number"}},ruleSizeRange:{description:"Default range for rule stroke widths",type:"array",items:{type:"number"}},tickSizeRange:{description:"Default range for tick spans",type:"array",items:{type:"number"}},pointSizeRange:{description:"Default range for bar size scale",type:"array",items:{type:"number"}}}},AxisConfig:{type:"object",properties:{axisWidth:{description:"Width of the axis line",type:"number"},layer:{description:"A string indicating if the axis (and any gridlines) should be placed above or below the data marks.",type:"string"},offset:{description:"The offset, in pixels, by which to displace the axis from the edge of the enclosing group or data rectangle.",type:"number"},axisColor:{description:"Color of axis line.",type:"string"},grid:{description:"A flag indicate if gridlines should be created in addition to ticks. If `grid` is unspecified, the default value is `true` for ROW and COL. For X and Y, the default value is `true` for quantitative and time fields and `false` otherwise.",type:"boolean"},gridColor:{description:"Color of gridlines.",type:"string"},gridDash:{description:"The offset (in pixels) into which to begin drawing with the grid dash array.",type:"array",items:{type:"number"}},gridOpacity:{description:"The stroke opacity of grid (value between [0,1])",type:"number"},gridWidth:{description:"The grid width, in pixels.",type:"number"},labels:{description:"Enable or disable labels.",type:"boolean"},labelAngle:{description:"The rotation angle of the axis labels.",type:"number"},labelAlign:{description:"Text alignment for the Label.",type:"string"},labelBaseline:{description:"Text baseline for the label.",type:"string"},labelMaxLength:{description:"Truncate labels that are too long.",minimum:1,type:"number"},shortTimeLabels:{description:"Whether month and day names should be abbreviated.",type:"boolean"},subdivide:{description:"If provided, sets the number of minor ticks between major ticks (the value 9 results in decimal subdivision). Only applicable for axes visualizing quantitative scales.",type:"number"},ticks:{description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of 2, 5, 10) and lie within the underlying scale\'s range.',minimum:0,type:"number"},tickColor:{description:"The color of the axis's tick.",type:"string"},tickLabelColor:{description:"The color of the tick label, can be in hex color code or regular color name.",type:"string"},tickLabelFont:{description:"The font of the tick label.",type:"string"},tickLabelFontSize:{description:"The font size of label, in pixels.",type:"number"},tickPadding:{description:"The padding, in pixels, between ticks and text labels.",type:"number"},tickSize:{description:"The size, in pixels, of major, minor and end ticks.",minimum:0,type:"number"},tickSizeMajor:{description:"The size, in pixels, of major ticks.",minimum:0,type:"number"},tickSizeMinor:{description:"The size, in pixels, of minor ticks.",minimum:0,type:"number"},tickSizeEnd:{description:"The size, in pixels, of end ticks.",minimum:0,type:"number"},tickWidth:{description:"The width, in pixels, of ticks.",type:"number"},titleColor:{description:"Color of the title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:"Font of the title.",type:"string"},titleFontSize:{description:"Size of the title.",type:"number"},titleFontWeight:{description:"Weight of the title.",type:"string"},titleOffset:{description:"A title offset value for the axis.",type:"number"},titleMaxLength:{description:"Max length for axis title if the title is automatically generated from the field's description. By default, this is automatically based on cell size and characterWidth property.",minimum:0,type:"number"},characterWidth:{description:"Character width for automatically determining title max length.",type:"number"},properties:{description:"Optional mark property definitions for custom axis styling."}}},LegendConfig:{type:"object",properties:{orient:{description:'The orientation of the legend. One of "left" or "right". This determines how the legend is positioned within the scene. The default is "right".',type:"string"},offset:{description:"The offset, in pixels, by which to displace the legend from the edge of the enclosing group or data rectangle.",type:"number"},padding:{description:"The padding, in pixels, between the lengend and axis.",type:"number"},margin:{description:"The margin around the legend, in pixels",type:"number"},gradientStrokeColor:{description:"The color of the gradient stroke, can be in hex color code or regular color name.",type:"string"},gradientStrokeWidth:{description:"The width of the gradient stroke, in pixels.",type:"number"},gradientHeight:{description:"The height of the gradient, in pixels.",type:"number"},gradientWidth:{description:"The width of the gradient, in pixels.",type:"number"},labelAlign:{description:"The alignment of the legend label, can be left, middle or right.",type:"string"},labelBaseline:{description:"The position of the baseline of legend label, can be top, middle or bottom.",type:"string"},labelColor:{description:"The color of the legend label, can be in hex color code or regular color name.",type:"string"},labelFont:{description:"The font of the lengend label.",type:"string"},labelFontSize:{description:"The font size of lengend lable.",type:"number"},labelOffset:{description:"The offset of the legend label.",type:"number"},shortTimeLabels:{description:"Whether month names and weekday names should be abbreviated.",type:"boolean"},symbolColor:{description:"The color of the legend symbol,",type:"string"},symbolShape:{description:"The shape of the legend symbol, can be the 'circle', 'square', 'cross', 'diamond',\n\n'triangle-up', 'triangle-down', or else a custom SVG path string.",type:"string"},symbolSize:{description:"The size of the lengend symbol, in pixels.",type:"number"},symbolStrokeWidth:{description:"The width of the symbol's stroke.",type:"number"},titleColor:{description:"Optional mark property definitions for custom legend styling.\n\nThe color of the legend title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:"The font of the legend title.",type:"string"},titleFontSize:{description:"The font size of the legend title.",type:"number"},titleFontWeight:{description:"The font weight of the legend title.",type:"string"},properties:{description:"Optional mark property definitions for custom legend styling."}}},FacetConfig:{type:"object",properties:{scale:{$ref:"#/definitions/FacetScaleConfig",description:"Facet Scale Config"},axis:{$ref:"#/definitions/AxisConfig",description:"Facet Axis Config"},grid:{$ref:"#/definitions/FacetGridConfig",description:"Facet Grid Config"},cell:{$ref:"#/definitions/CellConfig",description:"Facet Cell Config"}}},FacetScaleConfig:{type:"object",properties:{round:{type:"boolean"},padding:{type:"number"}}},FacetGridConfig:{type:"object",properties:{color:{format:"color",type:"string"},opacity:{type:"number"},offset:{type:"number"}}},FacetSpec:{type:"object",properties:{facet:{$ref:"#/definitions/Facet"},spec:{oneOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},name:{description:"Name of the visualization for later reference.",type:"string"},description:{description:"An optional description of this mark for commenting purpose.\n\nThis property has no effect on the output visualization.",type:"string"},data:{$ref:"#/definitions/Data",description:"An object describing the data source"},transform:{$ref:"#/definitions/Transform",description:"An object describing filter and new field calculation."},config:{$ref:"#/definitions/Config",description:"Configuration object"}},required:["facet","spec"]},Facet:{type:"object",properties:{row:{$ref:"#/definitions/PositionChannelDef"},column:{$ref:"#/definitions/PositionChannelDef"}}},LayerSpec:{type:"object",properties:{layers:{description:"Unit specs that will be layered.",type:"array",items:{$ref:"#/definitions/UnitSpec"}},name:{description:"Name of the visualization for later reference.",type:"string"},description:{description:"An optional description of this mark for commenting purpose.\n\nThis property has no effect on the output visualization.",type:"string"},data:{$ref:"#/definitions/Data",description:"An object describing the data source"},transform:{$ref:"#/definitions/Transform",description:"An object describing filter and new field calculation."},config:{$ref:"#/definitions/Config",description:"Configuration object"}},required:["layers"]},UnitSpec:{type:"object",properties:{mark:{$ref:"#/definitions/Mark",description:'The mark type.\n\nOne of `"bar"`, `"circle"`, `"square"`, `"tick"`, `"line"`,\n\n`"area"`, `"point"`, `"rule"`, and `"text"`.'},encoding:{$ref:"#/definitions/UnitEncoding",description:"A key-value mapping between encoding channels and definition of fields."},name:{description:"Name of the visualization for later reference.",type:"string"},description:{description:"An optional description of this mark for commenting purpose.\n\nThis property has no effect on the output visualization.",type:"string"},data:{$ref:"#/definitions/Data",description:"An object describing the data source"},transform:{$ref:"#/definitions/Transform",description:"An object describing filter and new field calculation."},config:{$ref:"#/definitions/Config",description:"Configuration object"}},required:["mark"]},UnitEncoding:{type:"object",properties:{x:{$ref:"#/definitions/PositionChannelDef",description:"X coordinates for `point`, `circle`, `square`,\n\n`line`, `rule`, `text`, and `tick`\n\n(or to width and height for `bar` and `area` marks)."},y:{$ref:"#/definitions/PositionChannelDef",description:"Y coordinates for `point`, `circle`, `square`,\n\n`line`, `rule`, `text`, and `tick`\n\n(or to width and height for `bar` and `area` marks)."},x2:{$ref:"#/definitions/PositionChannelDef",description:"X2 coordinates for ranged `bar`, `rule`, `area`"},y2:{$ref:"#/definitions/PositionChannelDef",description:"Y2 coordinates for ranged `bar`, `rule`, `area`"},color:{$ref:"#/definitions/ChannelDefWithLegend",description:"Color of the marks – either fill or stroke color based on mark type.\n\n(By default, fill color for `area`, `bar`, `tick`, `text`, `circle`, and `square` /\n\nstroke color for `line` and `point`.)"},opacity:{$ref:"#/definitions/ChannelDefWithLegend",description:"Opacity of the marks – either can be a value or in a range."},size:{$ref:"#/definitions/ChannelDefWithLegend",description:"Size of the mark.\n\n- For `point`, `square` and `circle`\n\n– the symbol size, or pixel area of the mark.\n\n- For `bar` and `tick` – the bar and tick's size.\n\n- For `text` – the text's font size.\n\n- Size is currently unsupported for `line` and `area`."},shape:{$ref:"#/definitions/ChannelDefWithLegend",description:'The symbol\'s shape (only for `point` marks). The supported values are\n\n`"circle"` (default), `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`,\n\nor `"triangle-down"`, or else a custom SVG path string.'},detail:{description:"Additional levels of detail for grouping data in aggregate views and\n\nin line and area marks without mapping data to a specific visual channel.",oneOf:[{$ref:"#/definitions/FieldDef",description:"Interface for any kind of FieldDef;\n\nFor simplicity, we do not declare multiple interfaces of FieldDef like\n\nwe do for JSON schema."},{type:"array",items:{$ref:"#/definitions/FieldDef",description:"Interface for any kind of FieldDef;\n\nFor simplicity, we do not declare multiple interfaces of FieldDef like\n\nwe do for JSON schema."}}]},text:{$ref:"#/definitions/FieldDef",description:"Text of the `text` mark."},label:{$ref:"#/definitions/FieldDef"},path:{description:"Order of data points in line marks.",oneOf:[{$ref:"#/definitions/OrderChannelDef"},{type:"array",items:{$ref:"#/definitions/OrderChannelDef"}}]},order:{description:"Layer order for non-stacked marks, or stack order for stacked marks.",oneOf:[{$ref:"#/definitions/OrderChannelDef"},{type:"array",items:{$ref:"#/definitions/OrderChannelDef"}}]}}}},$schema:"http://json-schema.org/draft-04/schema#"}}(),function(){"use strict";angular.module("vlui",["LocalStorageModule","angular-google-analytics","angular-sortable-view","angular-websql","ui-rangeSlider"]).constant("_",window._).constant("vl",window.vl).constant("cql",window.cql).constant("vlSchema",window.vlSchema).constant("vg",window.vg).constant("util",window.vg.util).constant("jQuery",window.$).constant("Papa",window.Papa).constant("Blob",window.Blob).constant("URL",window.URL).constant("Drop",window.Drop).constant("Heap",window.Heap).constant("JSON3",window.JSON3.noConflict()).constant("ANY","__ANY__").constant("consts",{addCount:!0,debug:!0,useUrl:!0,logging:!0,logLevel:"INFO",logPrintLevel:"INFO",logToWebSql:!0,hideMoreFn:!0,defaultConfigSet:"large",appId:"vlui",embeddedData:window.vguiData||void 0,priority:{bookmark:0,popup:0,vislist:1e3},myriaRest:"http://ec2-52-1-38-182.compute-1.amazonaws.com:8753",defaultTimeFn:"year",wildcardFn:!0,hideOrdinalTypeSelect:!0}).config(["cql",function(e){e.config.DEFAULT_QUERY_CONFIG.channels=["x","y","column","size","color"],e.config.DEFAULT_QUERY_CONFIG.stylize=!1}])}(),function(){angular.module("vlui").run(["$templateCache",function(e){e.put("dataset/addmyriadataset.html",'<div class="add-myria-dataset"><p>Select a dataset from the Myria instance at <input ng-model="myriaRestUrl"><button ng-click="loadDatasets(\'\')">update</button>.</p><form ng-submit="addDataset(myriaDataset)"><div><select name="myria-dataset" id="select-myria-dataset" ng-disabled="disabled" ng-model="myriaDataset" ng-options="optionName(dataset) for dataset in myriaDatasets track by dataset.relationName"><option value="">Select Dataset...</option></select></div><button type="submit">Add dataset</button></form></div>'),e.put("dataset/addurldataset.html",'<div class="add-url-dataset"><p>Add the name of the dataset and the URL to a <b>JSON</b> or <b>CSV</b> (with header) file. Make sure that the formatting is correct and clean the data before adding it. The added dataset is only visible to you.</p><form ng-submit="addFromUrl(addedDataset)"><div class="form-group"><label for="dataset-name">Name</label> <input ng-model="addedDataset.name" id="dataset-name" type="text"></div><div class="form-group"><label for="dataset-url">URL</label> <input ng-model="addedDataset.url" id="dataset-url" type="url"><p>Make sure that you host the file on a server that has <code>Access-Control-Allow-Origin: *</code> set.</p></div><button type="submit">Add dataset</button></form></div>'),
e.put("dataset/changeloadeddataset.html",'<div class="change-loaded-dataset"><div ng-if="userData.length"><h3>Uploaded Datasets</h3><ul><li ng-repeat="dataset in userData track by dataset.id" ng-class="{selected: Dataset.currentDataset.id === dataset.id}"><a class="dataset" ng-click="selectDataset(dataset)" ng-disabled="Dataset.currentDataset.id === dataset.id"><i class="fa fa-database"></i> <strong>{{dataset.name}}</strong></a> <span ng-if="dataset.description">{{dataset.description}}</span> <strong ng-if="Dataset.currentDataset === dataset">(selected)</strong></li></ul></div><h3>Explore a Sample Dataset</h3><ul class="loaded-dataset-list"><li ng-repeat="dataset in sampleData track by dataset.id" ng-class="{selected: Dataset.currentDataset.id === dataset.id}"><a class="dataset" ng-click="selectDataset(dataset)" ng-disabled="Dataset.currentDataset.id === dataset.id"><i class="fa fa-database"></i> <strong>{{dataset.name}}</strong></a> <strong ng-if="Dataset.currentDataset === dataset">(selected)</strong> <em ng-if="dataset.description">{{dataset.description}}</em></li></ul></div>'),e.put("dataset/datasetmodal.html",'<modal id="dataset-modal" max-width="800px"><div class="modal-header"><modal-close-button></modal-close-button><h2>Add Dataset</h2></div><div class="modal-main"><tabset><tab heading="Change Dataset"><change-loaded-dataset></change-loaded-dataset></tab><tab heading="Paste or Upload Data"><paste-dataset></paste-dataset></tab><tab heading="From URL"><add-url-dataset></add-url-dataset></tab><tab heading="From Myria"><add-myria-dataset></add-myria-dataset></tab></tabset></div></modal>'),e.put("dataset/datasetselector.html",'<button id="select-data" class="small-button select-data" ng-click="loadDataset();">Change</button>'),e.put("dataset/filedropzone.html",'<div class="dropzone" ng-transclude=""></div>'),e.put("dataset/pastedataset.html",'<div class="paste-data"><file-dropzone dataset="dataset" max-file-size="10" valid-mime-types="[text/csv, text/json, text/tsv,application/json]"><div class="upload-data"><div class="form-group"><label for="dataset-file">File</label> <input type="file" id="dataset-file" accept="text/csv,text/tsv"></div><p>Upload a CSV, or paste data in <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> format into the fields.</p><div class="dropzone-target"><p>Drop CSV file here</p></div></div><form ng-submit="addDataset()"><div class="form-group"><label for="dataset-name">Name</label> <input type="name" ng-model="dataset.name" id="dataset-name" required=""></div><div class="form-group"><textarea ng-model="dataset.data" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 17, \'blur\': 0 }}" required="">\n      </textarea></div><button type="submit">Add data</button></form></file-dropzone></div>'),e.put("components/alertmessages/alertmessages.html",'<div class="alert-box" ng-show="Alerts.alerts.length > 0"><div class="alert-item" ng-repeat="alert in Alerts.alerts">{{ alert.msg }} <a class="close" ng-click="Alerts.closeAlert($index)">&times;</a></div></div>'),e.put("components/bookmarklist/bookmarklist.html",'<modal id="bookmark-list" ng-if="Bookmarks.isSupported"><div class="modal-header card no-top-margin no-right-margin"><modal-close-button close-action="Bookmarks.logBookmarksClosed()"></modal-close-button><h2 class="no-bottom-margin">Bookmarks ({{ Bookmarks.list.length }})</h2><a class="bookmark-list-util" ng-click="Bookmarks.clear()"><i class="fa fa-trash-o"></i> Clear all</a> <a class="bookmark-list-util" ng-click="Bookmarks.export()"><i class="fa fa-clipboard"></i> Export</a></div><div class="flex-grow-1 scroll-y"><div ng-if="Bookmarks.list.length > 0" class="hflex flex-wrap" sv-root="" sv-part="Bookmarks.list" sv-on-sort="Bookmarks.reorder()"><vl-plot-group ng-repeat="bookmark in Bookmarks.list | orderObjectBy : \'timeAdded\' : false" class="wrapped-vl-plot-group card" list-title="\'Bookmark\'" chart="bookmark.chart" field-set="bookmark.chart.fieldSet" show-filter-info="true" show-bookmark="true" show-debug="consts.debug" show-expand="false" always-selected="true" highlighted="highlighted" overflow="true" tooltip="true" priority="consts.priority.bookmark" show-select="true" sv-element=""></vl-plot-group><div sv-placeholder=""></div></div><div class="vis-list-empty" ng-if="Bookmarks.list.length === 0">You have no bookmarks</div></div></modal>'),e.put("components/channelproperty/channelproperty.html",'<div class="channel-property mb5"><div class="scale-type" ng-if="fieldDef.type === \'quantitative\' && !fieldDef.bin"><h4>Scale Type</h4><label class="channel-prop-radio-label"><input type="radio" ng-value="undefined" ng-model="fieldDef.scale.type" ng-change="typeChanged()"> Linear</label> <label class="channel-prop-radio-label"><input type="radio" ng-value="\'log\'" ng-model="fieldDef.scale.type" ng-change="typeChanged()"> Log</label></div><div class="scale-domain" ng-if="fieldDef.type === \'quantitative\' && fieldDef.aggregate !== \'count\'"><h4>Scale Domain</h4><label><input type="checkbox" ng-model="useRawDomain" ng-change="useRawDomainChange(useRawDomain)"> Always include raw min & max values</label></div></div>'),e.put("components/channelshelf/channelshelf.html",'<div class="shelf-group"><div class="shelf" ng-class="{disabled: disabled || !supportMark(channelId, mark), \'any\': isAnyChannel}"><div class="shelf-label" ng-class="{expanded: propsExpanded}">{{ isAnyChannel ? \'any\' : labelEncode(channelId) }}</div><div class="field-drop" ng-model="pills[channelId]" data-drop="!disabled && supportMark(channelId, mark)" jqyoui-droppable="{onDrop:\'fieldDropped\'}"  data-jqyoui-options="{activeClass: \'drop-active\'}"><field-info ng-show="encoding[channelId].field" ng-class="{ expanded: funcsExpanded, any: isAnyField || isAnyFunction, \'enumerated-field\': isEnumeratedField, \'enumerated-channel\': isEnumeratedChannel, highlighted: isHighlighted(channelId) }" field-def="encoding[channelId]" show-type="true" show-caret="true" show-enum-spec-fn="true" disable-caret="encoding[channelId].aggregate===\'count\' || !hasFunctions" popup-content="fieldInfoPopupContent" show-remove="true" remove-action="removeField()" class="selected draggable full-width" data-drag="true" ng-model="pills[channelId]" jqyoui-draggable="{onStart: \'fieldDragStart\', onStop:\'fieldDragStop\'}" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\'}"></field-info><span class="placeholder" ng-if="!encoding[channelId].field">drop a field here</span></div></div><div class="drop-container"><div class="popup-menu shelf-properties shelf-properties-{{channelId}}" ng-show="false"></div><div class="popup-menu shelf-functions shelf-functions-{{channelId}}" ng-hide="!hasFunctions"><function-select ng-if="!preview" field-def="encoding[channelId]" channel-id="channelId" support-any="supportAny && consts.wildcardFn"></function-select></div></div></div>'),e.put("components/fieldinfo/fieldinfo.html",'<span class="field-info"><span class="hflex full-width" ng-click="clicked($event)"><span class="type-caret" ng-class="{active: !disableCaret}"><i class="fa fa-caret-down" ng-show="showCaret"></i> <span class="type fa {{icon}}" ng-show="showType" title="{{typeName}}"></span></span> <span ng-if="fieldDef.aggregate!==\'count\'" class="field-info-text"><span ng-if="func(fieldDef)" class="field-func" title="{{ func(fieldDef) }}" ng-class="{any: fieldDef._any}">{{ func(fieldDef) }}</span><span class="field-name" ng-class="{hasfunc: func(fieldDef), any: fieldDef._any}">{{ (fieldDef.title || fieldTitle(fieldDef.field)) | underscore2space }}</span> <span class="wildcard-field-count">{{ fieldCount(fieldDef.field) }}</span></span> <span ng-if="fieldDef.aggregate===\'count\' || fieldDef.autoCount" class="field-count field-info-text"><span class="field-name">COUNT</span></span> <span class="no-shrink remove" ng-show="showRemove"><a class="remove-field" ng-click="removeAction()"><i class="fa fa-times"></i></a></span><span ng-if="fieldDef.aggregate!==\'count\'" class="no-shrink filter" ng-show="showFilter"><a class="filter-field" ng-click="filterAction()"><i class="fa fa-filter"></i></a></span> <span class="no-shrink add" ng-show="showAdd"><a class="add-field" ng-click="addAction()"><i class="fa fa-plus"></i></a></span></span></span>'),e.put("components/filter/categoricalfilter.html",'<div class="categorical-filter-box filter-box"><div class="actions"><div class="right selected-status">({{filter.in.length}}/{{values.length}} selected)</div><a ng-click="selectAll()" class="select-all">Select All</a></div><div class="values scroll-y no-scroll-x"><div ng-repeat="val in values" ng-mouseenter="showKeepOnly=true" ng-mouseleave="showKeepOnly=false"><label><input type="checkbox" ng-model="include[stringify(val)]" ng-change="filterChange()"> {{val+\'\'}}</label> <a ng-show="showKeepOnly" ng-init="showKeepOnly=false" class="right keep-only" ng-click="keepOnly(val)">Keep Only</a></div></div></div>'),e.put("components/filter/filtershelves.html",'<div class="right"><label><input ng-model="spec.transform.filterInvalid" type="checkbox" ng-true-value="true" ng-false-value="undefined"> <a><i class="fa fa-filter"></i> invalid values</a></label></div><h2>Filter</h2><div class="filter-absolute-container scroll-y no-scroll-x"><div class="shelf-group" ng-repeat="(field, filter) in filterManager.filterIndex" ng-if="filter.enabled"><div class="shelf filter-shelf"><div class="field-drop"><field-info ng-class="{expanded: funcsExpanded}" field-def="{field: field}" show-type="true" show-remove="true" remove-action="removeFilter(field)" class="selected full-width"></field-info></div><categorical-filter field="field" filter="filter" ng-if="filterType(field) === \'categorical\'"></categorical-filter><quantitative-filter field="field" filter="filter" ng-if="filterType(field) === \'quantitative\'"></quantitative-filter></div></div><div class="filter-drop" ng-model="droppedFieldDef" data-drop="true" jqyoui-droppable="{onDrop:\'fieldDropped\'}" data-jqyoui-options="{activeClass: \'drop-active\'}">Drop a field here.</div></div>'),e.put("components/filter/quantitativefilter.html",'<div><div><span class="right domain-label">{{domainMax}}</span> <span class="domain-label">{{domainMin}}</span></div><div range-slider="" min="domainMin" max="domainMax" model-min="localMin" model-max="localMax" show-values="true" attach-handle-values="true" on-handle-up="updateRange()"></div></div>'),e.put("components/functionselect/functionselect.html",'<div class="function-select mb5" ng-if="func.list.aboveFold.length > 1 || func.list.aboveFold[0] !== undefined" ng-class="{wildcard: func.isAny}"><div class="right" ng-if="supportAny"><label><input type="checkbox" ng-model="func.isAny" ng-change="isAnyChanged()"> Wildcard</label></div><h4>Function</h4><div class="radios" ng-if="!func.isAny || !supportAny"><div><label class="func-label field-func" ng-repeat="f in func.list.aboveFold"><input type="radio" ng-value="f" ng-model="func.selected" ng-change="selectChanged()"> {{f || \'NONE\'}}</label></div><div ng-show="showAllFunctions"><label class="func-label field-func" ng-class="{\'single-column\': func.isTemporal}" ng-repeat="f in func.list.belowFold"><input type="radio" ng-value="f" ng-model="func.selected" ng-change="selectChanged()"> {{f}}</label></div></div><div class="checkboxes" ng-if="func.isAny && supportAny"><div><label class="func-label field-func" ng-repeat="f in func.list.aboveFold"><input type="checkbox" ng-model="func.checked[f]" ng-change="checkChanged()"> {{f || \'NONE\'}}</label></div><div ng-show="showAllFunctions"><label class="func-label field-func" ng-class="{\'single-column\': func.isTemporal}" ng-repeat="f in func.list.belowFold"><input type="checkbox" ng-model="func.checked[f]" ng-change="checkChanged()"> {{f}}</label></div></div><div ng-hide="hideMoreFn || func.isCount || func.list.belowFold.length == 0" class="expand-collapse"><a ng-click="showAllFunctions=!showAllFunctions"><span ng-show="!showAllFunctions">more <i class="fa fa-angle-down" aria-hidden="true"></i></span> <span ng-show="showAllFunctions">less <i class="fa fa-angle-up" aria-hidden="true"></i></span></a></div></div>'),e.put("components/modal/modal.html",'<div class="modal" ng-if="isOpen"><div class="modal-wrapper" style="{{wrapperStyle}}" ng-transclude=""></div></div>'),e.put("components/modal/modalclosebutton.html",'<div class="right"><a ng-click="closeModal()" class="right">Close</a></div>'),e.put("components/propertyeditor/propertyeditor.html",'<div><label class="prop-label" for="{{ id }}"><span class="name" title="{{ propName }}">{{ propName }}</span> <span ng-if="description" class="fa fa-info-circle" tooltips="" tooltip-size="small" tooltip-html="<strong>{{ propName }}</strong><div class=\'tooltip-content\'>{{ description }}</div>" tooltip-side="right"></span></label><form class="inline-block" ng-switch="type + (enum !== undefined ? \'list\' : \'\')"><input id="{{ id }}" ng-switch-when="boolean" type="checkbox" ng-model="group[propName]" ng-hide="automodel.value"><select id="{{ id }}" ng-switch-when="stringlist" ng-model="group[propName]" ng-options="choice for choice in enum track by choice" ng-hide="automodel.value"></select><input id="{{ id }}" ng-switch-when="integer" ng-attr-type="{{ isRange ? \'range\' : \'number\'}}" ng-model="group[propName]" ng-model-options="{debounce: 200}" ng-attr-min="{{min}}" ng-attr-max="{{max}}" ng-hide="automodel.value" ng-attr-title="{{ isRange ? group[propName] : undefined }}"> <input id="{{ id }}" ng-attr-type="{{ role === \'color\' ? \'color\' : \'string\' }}" ng-switch-when="string" ng-model="group[propName]" ng-model-options="{debounce: 500}" ng-hide="automodel.value"> <small ng-if="hasAuto"><label>Auto <input ng-model="automodel.value" type="checkbox"></label></small></form></div>'),e.put("components/schemalist/schemalist.html",'<div class="schema no-top-margin full-width"><schema-list-item ng-repeat="fieldDef in fieldDefs | orderBy : orderBy" field-def="fieldDef" filter-manager="filterManager" id="{{ fieldDef.field }}" show-add="showAdd"></schema-list-item><schema-list-item ng-if="showCount" field-def="countFieldDef" show-add="true"></schema-list-item><div class="schema-list-drop" ng-show="showDrop" ng-model="droppedFieldDef" data-drop="true" jqyoui-droppable="{onDrop:\'fieldDropped\'}" data-jqyoui-options="{activeClass: \'drop-active\'}">Create a new wildcard.</div></div>'),e.put("components/schemalist/schemalistitem.html",'<div class="schema-list-item" ng-model="droppedFieldDef" data-drop="isAnyField && fieldDef.field !== \'?\'" jqyoui-droppable="{onDrop:\'fieldDropped\'}" data-jqyoui-options="{activeClass: \'drop-active\'}"><field-info ng-show="!isAnyField || fieldDef.field === \'?\' || fieldDef.field.enum.length > 0" class="pill draggable full-width no-right-margin" ng-class="{any: isEnumSpec(fieldDef.field)}" ng-dblclick="fieldAdd(fieldDef)" field-def="fieldDef" ng-model="pill" data-drag="true" jqyoui-draggable="{placeholder: \'keep\', deepCopy: true, onStart: \'fieldDragStart\', onStop:\'fieldDragStop\'}" data-jqyoui-options="{revert: \'invalid\', helper: \'clone\'}" show-add="showAdd" show-caret="true" disable-caret="fieldDef.immutable || fieldDef.aggregate === \'count\' || allowedTypes.length<=1" show-type="true" add-action="fieldAdd(fieldDef)" show-filter="!!filterManager" filter-action="toggleFilter()" use-title="true" popup-content="fieldInfoPopupContent"></field-info></div><div class="drop-container"><div class="popup-menu schema-menu" ng-hide="!allowedTypes || allowedTypes.length<=1"><div class="mb5 field-type" ng-if="allowedTypes.length>1 && !isAnyField"><h4>Type</h4><label class="type-label" ng-repeat="type in allowedTypes" ng-if="type !== \'ordinal\' || !consts.hideOrdinalTypeSelect"><input type="radio" ng-value="type" ng-model="fieldDef.type"> {{type}}</label></div><div class="wildcard-menu" ng-show="isAnyField && fieldDef.field.enum"><div><label class="wildcard-title-label"><h4>Name</h4><input type="text" ng-model="fieldDef.title" placeholder="{{fieldTitle(fieldDef.field)}}"></label></div><h4>Wildcard Fields</h4><div class="wildcard-fields"><field-info ng-repeat="field in fieldDef.field.enum" class="pill list-item full-width no-right-margin" field-def="field === \'*\' ? countFieldDef : Dataset.schema.fieldSchema(field)" show-type="true" show-remove="true" remove-action="removeWildcardField($index)"></field-info></div><a class="remove-action" ng-click="removeWildcard()"><i class="fa fa-times"></i> Delete Wildcard</a></div></div></div>'),e.put("components/shelves/shelves.html",'<div class="card vflex shelves no-top-margin no-right-margin abs-100"><div class="shelf-pane shelf-encoding-pane full-width"><a class="right" ng-click="clear()"><i class="fa fa-eraser"></i> Clear</a><h2>Encoding</h2><div class="shelf-pane shelf-positional-pane full-width"><channel-shelf channel-id="\'x\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark"></channel-shelf><channel-shelf channel-id="\'y\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark"></channel-shelf><channel-shelf channel-id="\'column\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark" disabled="!spec.encoding.x.field">></channel-shelf><channel-shelf channel-id="\'row\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark" disabled="!spec.encoding.y.field"></channel-shelf></div><div class="shelf-pane shelf-marks-pane full-width"><div class="right"><select class="markselect" ng-model="spec.mark" ng-class="{auto: spec.mark === ANY}" ng-options="(type === ANY ? \'auto\' : type) for type in (supportAny || supportAutoMark ? marksWithAny : marks)" ng-change="markChange()"></select></div><h3>Marks</h3><channel-shelf channel-id="\'size\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark"></channel-shelf><channel-shelf channel-id="\'color\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark"></channel-shelf><channel-shelf channel-id="\'shape\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark"></channel-shelf><channel-shelf channel-id="\'detail\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark"></channel-shelf><channel-shelf channel-id="\'text\'" preview="preview" encoding="spec.encoding" support-any="supportAny" mark="spec.mark"></channel-shelf></div><div class="shelf-pane shelf-any-pane full-width" ng-if="supportAny && !preview"><br><channel-shelf ng-repeat="channelId in anyChannelIds" preview="preview" channel-id="channelId" encoding="spec.encoding" support-any="supportAny" mark="spec.mark"></channel-shelf></div></div><div class="shelf-pane shelf-filter-pane full-width" ng-if="!preview"><filter-shelves spec="spec"></filter-shelves></div></div>'),e.put("components/tabs/tab.html",'<div ng-if="active" ng-transclude=""></div>'),e.put("components/tabs/tabset.html",'<div class="tab-container"><div><a class="tab" ng-repeat="tab in tabset.tabs" ng-class="{\'active\': tab.active}" ng-click="tabset.showTab(tab)">{{tab.heading}}</a></div><div class="tab-contents" ng-transclude=""></div></div>'),e.put("components/vlplot/vlplot.html",'<div class="vl-plot" id="vis-{{visId}}" ng-class="{ fit: !alwaysScrollable && !overflow && height > vlPlotHeight() && width > vlPlotWidth(), \'overflow-y\': (alwaysScrollable || overflow) && height > vlPlotHeight(), \'overflow-x\': (alwaysScrollable || overflow) && width > vlPlotWidth(), scroll: alwaysScrollable || unlocked || hoverFocus }" ng-mousedown="unlocked=!thumbnail" ng-mouseup="unlocked=false" ng-mouseenter="mouseenter()" ng-mouseleave="mouseleave()"></div>'),e.put("components/vlplotgroup/vlplotgroup.html",'<div class="vl-plot-group vflex"><div ng-show="showExpand || fieldSet || showTranspose || showBookmark && Bookmarks.isSupported || showToggle" class="vl-plot-group-header no-shrink"><div class="field-set-info" ng-mouseenter="enablePreview()" ng-mouseleave="disablePreview()"><field-info ng-repeat="fieldDef in fieldSet" ng-if="fieldSet && (fieldDef.field || fieldDef.autoCount)" field-def="fieldDef" enum-spec-index="chart.enumSpecIndex" show-type="true" ng-class="{ selected: alwaysSelected || (isSelected && isSelected(fieldDef.field)), unselected: isSelected && !isSelected(fieldDef.field), highlighted: (highlighted||{})[fieldDef.field], \'enumerated-field\': isEnumeratedField(chart, $index), \'enumerated-channel\': isEnumeratedChannel(chart, $index) }" ng-mouseenter="fieldInfoMouseover(fieldDef, $index)" ng-mouseleave="fieldInfoMouseout(fieldDef, $index)"></field-info></div><i ng-if="showFilterInfo && hasFilter" title="{{filterInfo}}" class="fa fa-filter filter-info"></i><div style="flex-grow:1"></div><div class="toolbox"><a ng-if="consts.debug && showDebug" class="command debug"><i class="fa fa-wrench" ng-click="shCopied=\'\'; vlCopied=\'\'; vgCopied=\'\';" ng-mouseover="initializePopup();"></i></a><vl-plot-group-popup ng-if="consts.debug && showDebug && renderPopup"></vl-plot-group-popup><a ng-if="showLog && chart.vlSpec && log.support(chart.vlSpec, \'x\')" class="command" title="Toggle X-Scale" ng-click="log.toggle(chart.vlSpec, \'x\')" ng-class="{active: log.active(chart.vlSpec, \'x\')}"><i class="fa fa-long-arrow-right"></i> <small>Log X</small></a> <a ng-if="showLog && chart.vlSpec && log.support(chart.vlSpec, \'y\')" class="command" title="Toggle Y-Scale" ng-click="log.toggle(chart.vlSpec, \'y\')" ng-class="{active: log.active(chart.vlSpec, \'y\')}"><i class="fa fa-long-arrow-up"></i> <small>Log Y</small></a> <a ng-show="showAxisProp && ((chart.vlSpec || {}).encoding||{}).x" class="command x-prop-toggle" title="X-Axis Properties" ng-click=""><i class="fa fa-long-arrow-right"></i> <small>X</small> <i class="fa fa-caret-down"></i></a> <a ng-show="showAxisProp && ((chart.vlSpec || {}).encoding||{}).y" class="command y-prop-toggle" title="Y-Axis Properties" ng-click=""><i class="fa fa-long-arrow-up"></i> <small>Y</small> <i class="fa fa-caret-down"></i></a><div class="drop-container"><div class="popup-menu x-prop-popup axis-prop-popup" ng-show="((chart.vlSpec || {}).encoding||{}).x"><channel-property ng-if="((chart.vlSpec || {}).encoding||{}).x" channel-id="\'x\'" field-def="chart.vlSpec.encoding.x" toggle-shelf="toggleShelf"></channel-property></div></div><div class="drop-container"><div class="popup-menu y-prop-popup axis-prop-popup" ng-show="((chart.vlSpec || {}).encoding||{}).y"><channel-property ng-if="((chart.vlSpec || {}).encoding||{}).y" channel-id="\'y\'" field-def="chart.vlSpec.encoding.y" toggle-shelf="toggleShelf"></channel-property></div></div><a ng-if="showSort && chart.vlSpec && toggleSort.support(chart.vlSpec)" class="command" ng-click="toggleSort.toggle(chart.vlSpec)" title="Sort"><i class="fa sort" ng-class="toggleSortClass(chart.vlSpec)"></i> <small ng-if="showLabel">Sort</small></a> <a ng-if="showFilterNull && chart.vlSpec && toggleFilterNull.support(chart.vlSpec)" class="command" ng-click="toggleFilterNull(chart.vlSpec)" title="Filter Invalid Values" ng-class="{active: chart.vlSpec && (chart.vlSpec.transform||{}).filterInvalid}"><i class="fa fa-filter"></i> <small ng-if="showLabel">Filter</small> <small>Invalids</small></a> <a ng-if="showTranspose" title="Swap X/Y" class="command" ng-click="transpose()"><i class="fa fa-refresh transpose"></i> <small ng-if="showLabel">Swap X/Y</small></a> <a ng-if="showBookmark && Bookmarks.isSupported" class="command" title="Bookmark" ng-click="toggleBookmark(chart)" ng-class="{disabled: !chart.vlSpec.encoding, active: Bookmarks.isBookmarked(chart.shorthand)}"><i class="fa fa-bookmark"></i> <small ng-if="showLabel">Bookmark</small></a> <a ng-if="showExpand" ng-click="expandAction()" class="command"><i class="fa fa-expand"></i></a> <a ng-if="showSelect" title="Specify this chart" ng-click="select(chart)" ng-mouseenter="enablePreview()" ng-mouseleave="disablePreview()" class="command select"><i class="fa fa-server"></i></a><div ng-if="showBookmarkAlert" class="bookmark-alert"><div>Remove bookmark?</div><small>Your notes will be lost.</small><div><a ng-click="removeBookmark(chart)"><i class="fa fa-trash-o"></i> remove it</a> <a ng-click="keepBookmark()"><i class="fa fa-bookmark"></i> keep it</a></div></div></div></div><vl-plot class="flex-grow-1" chart="chart" mouse-enter-action="disablePreview" disabled="disabled" is-in-list="isInList" list-title="listTitle" always-scrollable="alwaysScrollable" config-set="{{configSet||\'small\'}}" overflow="overflow" priority="priority" rescale="rescale" thumbnail="thumbnail" tooltip="tooltip"></vl-plot><textarea class="annotation" ng-if="Bookmarks.isBookmarked(chart.shorthand)" ng-model="Bookmarks.dict[chart.shorthand].annotation" ng-blur="Bookmarks.saveAnnotations(chart.shorthand)" placeholder="notes"></textarea></div>'),e.put("components/vlplotgroup/vlplotgrouppopup.html",'<div class="drop-container"><div class="popup-menu popup-command no-shrink dev-tool"><div class="command debug"><span class="debug">Vl</span> <a class="debug" ui-zeroclip="" zeroclip-copied="vlCopied=\'(Copied)\'" zeroclip-model="chart.cleanSpec | compactJSON">Copy</a> / <a class="debug" ng-click="logCode(\'Vega-Lite\', chart.cleanSpec); vlCopied=\'(Logged)\';">Log</a> <span>{{vlCopied}}</span></div><div class="command debug"><span class="debug">Vg</span> <a class="debug" ui-zeroclip="" zeroclip-copied="vgCopied=\'(Copied)\'" zeroclip-model="chart.vgSpec | compactJSON">Copy</a> / <a class="debug" ng-click="logCode(\'Vega\', chart.vgSpec); vgCopied=\'(Logged)\';">Log</a> <span>{{vgCopied}}</span></div><a class="command debug" ng-href="{{ {type:\'vl\', spec: chart.cleanSpec} | reportUrl }}" target="_blank">Report Bad Render</a> <a ng-click="showFeature=!showFeature" class="command debug">{{chart.score}}</a><div ng-repeat="f in chart.scoreFeatures track by f.reason">[{{f.score}}] {{f.reason}}</div></div></div>'),e.put("components/vlplotgrouplist/vlplotgrouplist.html",'<div class="vl-plot-group-list-container"><div class="vis-list-header" ng-show="listTitle && !hideListTitle"><h3>{{listTitle}}</h3><span class="description"></span></div><div class="vis-list hflex flex-wrap"><vl-plot-group ng-repeat="chart in charts | limitTo: limit" class="wrapped-vl-plot-group card" chart="chart" is-in-list="isInList" list-title="listTitle" enable-pills-preview="enablePillsPreview" field-set="chart.fieldSet" show-filter-info="true" show-bookmark="true" show-debug="consts.debug && consts.debugInList" show-filter-null="true" show-select="true" show-axis-prop="true" show-sort="true" overflow="true" tooltip="true" highlighted="Pills.highlighted" priority="priority + $index"></vl-plot-group></div><a ng-click="increaseLimit()"><div class="vis-list-more" ng-show="limit < charts.length">Load more...</div></a></div>')}])}(),function(){"use strict";angular.module("vlui").directive("addMyriaDataset",["$http","Dataset","consts",function(e,t,n){return{templateUrl:"dataset/addmyriadataset.html",restrict:"E",require:"?^^modal",replace:!0,scope:!0,link:function(r,i,a,o){function s(){o&&o.close()}r.myriaRestUrl=n.myriaRest,r.myriaDatasets=[],r.myriaDataset=null,r.loadDatasets=function(t){return e.get(r.myriaRestUrl+"/dataset/search/?q="+t).then(function(e){r.myriaDatasets=e.data})},r.loadDatasets(""),r.optionName=function(e){return e.userName+":"+e.programName+":"+e.relationName},r.addDataset=function(e){var n={group:"myria",name:e.relationName,url:r.myriaRestUrl+"/dataset/user-"+e.userName+"/program-"+e.programName+"/relation-"+e.relationName+"/data?format=json"};t.type="json",t.dataset=t.add(n),t.update(t.dataset),s()}}}}])}(),function(){"use strict";angular.module("vlui").directive("addUrlDataset",["Dataset","Logger",function(e,t){return{templateUrl:"dataset/addurldataset.html",restrict:"E",require:"?^^modal",replace:!0,scope:!0,link:function(n,r,i,a){function o(){a&&a.close()}n.addedDataset={group:"user"},n.addFromUrl=function(n){t.logInteraction(t.actions.DATASET_NEW_URL,n.url),e.dataset=e.add(n),e.update(e.dataset),o()}}}}])}(),function(){"use strict";angular.module("vlui").filter("inGroup",["_",function(e){return function(t,n){return e.filter(t,{group:n})}}]),angular.module("vlui").directive("changeLoadedDataset",["Dataset","_",function(e,t){return{templateUrl:"dataset/changeloadeddataset.html",restrict:"E",require:"?^^modal",replace:!0,scope:!0,link:function(n,r,i,a){function o(){a&&a.close()}n.Dataset=e,n.userData=t.filter(e.datasets,function(e){return"sample"!==e.group}),n.sampleData=t.filter(e.datasets,{group:"sample"});var s=n.$watch(function(){return e.datasets.length},function(){n.userData=t.filter(e.datasets,function(e){return"sample"!==e.group})});n.selectDataset=function(t){e.update(t),o()},n.$on("$destroy",function(){s()})}}}])}(),function(){"use strict";angular.module("vlui").factory("Dataset",["$http","$q","Alerts","_","util","vl","cql","SampleData","Config","Logger",function(e,t,n,r,i,a,o,s,l,u){function c(e,t){f.data=t,f.currentDataset=e,f.schema=o.schema.Schema.build(t)}var f={},d=s;f.datasets=d,f.dataset=d[11],f.currentDataset=void 0,f.stats={},f.type=void 0;var h={nominal:0,ordinal:0,geographic:2,temporal:3,quantitative:4};return f.fieldOrderBy={},f.fieldOrderBy.type=function(e){return"count"===e.aggregate?4:h[e.type]},f.fieldOrderBy.typeThenName=function(e){return f.fieldOrderBy.type(e)+"_"+("count"===e.aggregate?"~":e.field.toLowerCase())},f.fieldOrderBy.original=function(){return 0},f.fieldOrderBy.field=function(e){return e.field},f.fieldOrder=f.fieldOrderBy.typeThenName,f.onUpdate=[],f.update=function(n){var a;return u.logInteraction(u.actions.DATASET_CHANGE,n.name),a=n.values?t(function(e,t){f.type=void 0,c(n,n.values),e()}):e.get(n.url,{cache:!0}).then(function(e){var t;r.isObject(e.data)?(t=e.data,f.type="json"):(t=i.read(e.data,{type:"csv"}),f.type="csv"),c(n,t)}),f.onUpdate.forEach(function(e){a=a.then(e)}),a.then(function(){l.updateDataset(n,f.type)}),a},f.add=function(e){return e.id||(e.id=e.url),d.push(e),e},f}])}(),function(){"use strict";angular.module("vlui").directive("datasetModal",function(){return{templateUrl:"dataset/datasetmodal.html",restrict:"E",scope:!1}})}(),function(){"use strict";angular.module("vlui").directive("datasetSelector",["Modals","Logger",function(e,t){return{templateUrl:"dataset/datasetselector.html",restrict:"E",replace:!0,scope:{},link:function(n){n.loadDataset=function(){t.logInteraction(t.actions.DATASET_OPEN),e.open("dataset-modal")}}}}])}(),function(){"use strict";angular.module("vlui").constant("FileReader",window.FileReader).directive("fileDropzone",["Modals","Alerts","FileReader",function(e,t,n){function r(e,t){return!t||e/1024/1024<+t}function i(e,t){return!t||t.indexOf(e)>-1}return{templateUrl:"dataset/filedropzone.html",replace:!0,restrict:"E",transclude:!0,scope:{maxFileSize:"@",validMimeTypes:"@",dataset:"="},link:function(e,a){function o(a){if(!i(a.type,e.validMimeTypes))return void e.$apply(function(){t.add("Invalid file type. File must be one of following types: "+e.validMimeTypes)});if(!r(a.size,e.maxFileSize))return void e.$apply(function(){t.add("File must be smaller than "+e.maxFileSize+" MB")});if("application/json"===a.type){var o=new n;o.onload=function(t){return e.$apply(function(e){e.dataset.data=t.target.result,e.dataset.name=a.name.replace(/\.\w+$/,""),e.dataset.type="json"})},o.readAsText(a)}else{var o=new n;o.onload=function(t){return e.$apply(function(e){e.dataset.data=t.target.result,e.dataset.name=a.name.replace(/\.\w+$/,"")})},o.onerror=function(){t.add("Error reading file")},o.readAsText(a)}}e.dataset=e.dataset||{},a.on("dragover dragenter",function(e){e&&e.preventDefault(),e.originalEvent.dataTransfer.effectAllowed="copy"}),a.on("drop",function(e){e&&e.preventDefault(),o(e.originalEvent.dataTransfer.files[0])}),a.find('input[type="file"]').on("change",function(){o(this.files[0])})}}}])}(),function(){"use strict";angular.module("vlui").directive("pasteDataset",["Dataset","Logger","Config","_","vg",function(e,t,n,r,i){
return{templateUrl:"dataset/pastedataset.html",restrict:"E",require:"?^^modal",replace:!0,scope:!0,link:function(n,r,a,o){function s(){o&&o.close()}n.dataset={name:"",data:""},n.addDataset=function(){if("json"==n.dataset.type)var r=i.util.read(n.dataset.data);else var r=i.util.read(n.dataset.data,{type:"csv"});var a={id:Date.now(),name:n.dataset.name,values:r,group:"pasted"};t.logInteraction(t.actions.DATASET_NEW_PASTE,a.name),e.dataset=e.add(a),e.update(e.dataset),s()}}}}])}(),function(){"use strict";angular.module("vlui").constant("SampleData",[{name:"Barley",description:"Barley yield by variety across the upper midwest in 1931 and 1932",url:"data/barley.json",id:"barley",group:"sample"},{name:"Cars",description:"Automotive statistics for a variety of car models between 1970 & 1982",url:"data/cars.json",id:"cars",group:"sample"},{name:"Crimea",url:"data/crimea.json",id:"crimea",group:"sample"},{name:"Driving",url:"data/driving.json",id:"driving",group:"sample"},{name:"Iris",url:"data/iris.json",id:"iris",group:"sample"},{name:"Jobs",url:"data/jobs.json",id:"jobs",group:"sample"},{name:"Population",url:"data/population.json",id:"population",group:"sample"},{name:"Movies",url:"data/movies.json",id:"movies",group:"sample"},{name:"Birdstrikes",url:"data/birdstrikes.json",id:"birdstrikes",group:"sample"},{name:"Baseball",url:"data/baseball.json",id:"baseball",group:"sample"},{name:"Campaigns",url:"data/weball26.json",id:"weball26",group:"sample"},{name:"Soil",description:"Soil example",url:"data/soil.json",id:"soil",group:"sample"}])}(),function(){"use strict";angular.module("vlui").directive("alertMessages",["Alerts",function(e){return{templateUrl:"components/alertmessages/alertmessages.html",restrict:"E",scope:{},link:function(t){t.Alerts=e}}}])}(),function(){"use strict";angular.module("vlui").directive("bookmarkList",["Bookmarks","consts",function(e,t){return{templateUrl:"components/bookmarklist/bookmarklist.html",restrict:"E",replace:!0,scope:{highlighted:"=",postSelectAction:"="},link:function(n){n.Bookmarks=e,n.consts=t}}}])}(),function(){"use strict";angular.module("vlui").directive("channelProperty",["consts","Pills",function(e,t){return{templateUrl:"components/channelproperty/channelproperty.html",restrict:"E",scope:{channelId:"<",fieldDef:"=",toggleShelf:"<"},link:function(n){n.consts=e,n.useRawDomain=!1,n.typeChanged=function(){n.toggleShelf&&t.set(n.channelId,n.fieldDef,!0)},n.useRawDomainChange=function(e){var r=n.fieldDef.scale||{};r.useRawDomain=e,n.fieldDef.scale=r,n.toggleShelf&&t.set(n.channelId,n.fieldDef,!0)};var r=n.$watch("fieldDef",function(e){n.useRawDomain=(e.scale||{}).useRawDomain!==!1});n.$on("$destroy",function(){r()})}}}])}(),function(){"use strict";angular.module("vlui").directive("channelShelf",["ANY","Dataset","Pills","_","Drop","Logger","vl","cql","Schema","consts",function(e,t,n,r,i,a,o,s,l,u){return{templateUrl:"components/channelshelf/channelshelf.html",restrict:"E",replace:!0,scope:{channelId:"<",encoding:"=",mark:"<",preview:"<",disabled:"<",supportAny:"<"},link:function(c,f){c.Dataset=t,c.schema=l.getChannelSchema(c.channelId),c.pills=n.pills,c.consts=u,c.isHighlighted=function(e){var t=n.highlighted||{};return t[c.encoding[e].field]||t["f"+e]},c.labelEncode=function(e){switch(e){case"x":return"dim 1";case"y":return"dim 2";case"column":return"dim 3";case"row":return"dim 4";default:return e}},c.isAnyChannel=!1,c.isAnyField=!1,c.isAnyFunction=!1,c.supportMark=function(t,r){return!!n.isAnyChannel(t)||(r===e||o.channel.supportMark(t,r))};var d=new i({content:f.find(".shelf-properties")[0],target:f.find(".shelf-label")[0],position:"bottom left",openOn:"click"});c.fieldInfoPopupContent=f.find(".shelf-functions")[0],c.removeField=function(){n.remove(c.channelId),a.logInteraction(a.actions.FIELD_REMOVED,c.channelId,{fieldDef:c.encoding[c.channelId]})},c.fieldDragStart=function(){n.dragStart(n.get(c.channelId),c.channelId)},c.fieldDragStop=function(){n.dragStop()},c.fieldDropped=function(){var e=n.get(c.channelId),t=l.schema.definitions.Type["enum"];r.includes(t,e.type)||s.enumSpec.isEnumSpec(e.type)||(e.type=t[0]),n.dragDrop(c.channelId),a.logInteraction(a.actions.FIELD_DROP,e)};var h=c.$watch("channelId",function(e){c.isAnyChannel=n.isAnyChannel(e)},!0),p=c.$watch("encoding[channelId]",function(e){c.hasFunctions="count"!==e.aggregate&&(o.util.contains(["quantitative","temporal"],e.type)||e.type&&e.type["enum"]&&(o.util.contains(e.type["enum"],"quantitative")||o.util.contains(e.type["enum"],"temporal"))),c.preview?(c.isEnumeratedField=n.isEnumeratedField(c.channelId),c.isEnumeratedChannel=n.isEnumeratedChannel(c.channelId)):(n.set(c.channelId,e?r.cloneDeep(e):{}),c.isAnyField=s.enumSpec.isEnumSpec(e.field),c.isAnyFunction=s.enumSpec.isEnumSpec(e.aggregate)||s.enumSpec.isEnumSpec(e.bin)||s.enumSpec.isEnumSpec(e.timeUnit))},!0);c.$on("$destroy",function(){d&&d.destroy&&d.destroy(),h(),p()})}}}])}(),function(){"use strict";angular.module("vlui").directive("fieldInfo",["ANY","Drop","vl","cql","Dataset",function(e,t,n,r,i){return{templateUrl:"components/fieldinfo/fieldinfo.html",restrict:"E",replace:!0,scope:{fieldDef:"<",filterAction:"&",showAdd:"<",showCaret:"<",showFilter:"=",showRemove:"<",showType:"<",showEnumSpecFn:"<",popupContent:"<",action:"&",addAction:"&",removeAction:"&",disableCaret:"<"},link:function(a,o){function s(t,n){if(r.enumSpec.isEnumSpec(t)){if(!t["enum"])return e;for(var i=null,a=0;a<t["enum"].length;a++){var o=t["enum"][a],s=n?n[o]:o;if(null===i)i=s;else if(i!==s)return e}return i}return n?n[t]:t}var l;a.vlType=n.type,a.typeName=null,a.icon=null,a["null"]=null,a.fieldTitle=function(e){return r.enumSpec.isEnumSpec(e)?(e["enum"]||["Wildcard"]).map(function(e){return"*"===e?"COUNT":e}).join(","):e},a.fieldCount=function(e){return r.enumSpec.isEnumSpec(e)&&e["enum"]?" ("+e["enum"].length+")":""},a.clicked=function(e){a.action&&e.target!==o.find(".fa-caret-down")[0]&&e.target!==o.find("span.type")[0]&&a.action(e)};var u=r.enumSpec.isEnumSpec;a.func=function(e){if(e.aggregate){if(!u(e.aggregate))return e.aggregate;if(a.showEnumSpecFn)return"?"}if(e.timeUnit){if(!u(e.timeUnit))return e.timeUnit;if(a.showEnumSpecFn)return"?"}if(e.bin){if(!u(e.bin))return"bin";if(a.showEnumSpecFn)return"?"}return e._aggregate||e._timeUnit||e._bin&&"bin"||e._any&&"auto"||""};var c=a.$watch("popupContent",function(e){e&&(l&&l.destroy(),l=new t({content:e,target:o.find(".type-caret")[0],position:"bottom left",openOn:"click"}))}),f={nominal:"fa-font",ordinal:"fa-font",quantitative:"icon-hash",temporal:"fa-calendar"};f[e]="fa-asterisk";var d=a.$watch("fieldDef.type",function(e){a.icon=s(e,f);var t=e;"ordinal"===t||"nominal"===t?t+=" ("+i.schema.primitiveType(a.fieldDef.field)+")":e&&e["enum"]&&(t=e["enum"][0]),a.typeName=t});a.$on("$destroy",function(){l&&l.destroy&&l.destroy(),c(),d()})}}}])}(),function(){"use strict";angular.module("vlui").directive("categoricalFilter",["Dataset","vg","util","Logger",function(e,t,n,r){return{templateUrl:"components/filter/categoricalfilter.html",restrict:"E",replace:!0,scope:{field:"=",filter:"="},link:function(i){function a(){l(i.values),i.filterChange()}function o(){l([]),i.filterChange()}function s(e){l([e]),i.filterChange()}function l(e){i.include=e.reduce(function(e,t){return e[JSON.stringify(t)]=!0,e},{})}i.values=[],i.include={},i.selectAll=a,i.selectNone=o,i.keepOnly=s,i.stringify=JSON.stringify,i.filterChange=function(){r.logInteraction(r.actions.FILTER_CHANGE,i.field,i.filter)},i.$watch("field",function(t){i.values=e.schema.domain({field:t})}),i.$watch("filter",function(e){l(e["in"])}),i.$watch("include",function(e){i.filter["in"]=n.keys(e).filter(function(t){return e[t]}).map(function(e){return JSON.parse(e)}).sort(t.util.cmp)},!0)}}}])}(),function(){"use strict";angular.module("vlui").directive("filterShelves",["FilterManager","Dataset","Logger","vl","Alerts",function(e,t,n,r,i){return{templateUrl:"components/filter/filtershelves.html",restrict:"E",replace:!1,scope:{spec:"="},link:function(a){function o(e){switch(t.schema.type(e)){case"nominal":case"ordinal":return"categorical";case"quantitative":return"quantitative";case"temporal":return"ordinal"===r.timeUnit.defaultScaleType(e)?"categorical":"quantitative"}}function s(){e.reset(),n.logInteraction(n.actions.FILTER_CLEAR)}function l(t){e.toggle(t)}a.Dataset=t,a.filterManager=e,a.clearFilter=s,a.removeFilter=l,a.filterType=o,a.fieldDropped=function(){var t=e.add(a.droppedFieldDef.field);t||i.add("Already have filter for "+a.droppedFieldDef.field+"."),a.droppedFieldDef={}}}}}])}(),function(){"use strict";angular.module("vlui").directive("quantitativeFilter",["Dataset","Logger",function(e,t){return{templateUrl:"components/filter/quantitativefilter.html",restrict:"E",replace:!1,scope:{field:"=",filter:"="},link:function(n){var r=e.schema.domain({field:n.field});n.domainMin=r[0],n.domainMax=r[1],n.localMin=n.filter.range[0],n.localMax=n.filter.range[1],n.updateRange=function(){n.filter.range[0]=n.localMin,n.filter.range[1]=n.localMax,n.$apply(),t.logInteraction(t.actions.FILTER_CHANGE,n.field,n.filter)},"temporal"===e.schema.type(n.field)&&(n.domainMin=new Date(n.domainMin).getTime(),n.domainMax=new Date(n.domainMax).getTime())}}}])}(),function(){"use strict";angular.module("vlui").directive("functionSelect",["_","consts","vl","cql","Pills","Logger","Dataset",function(e,t,n,r,i,a,o){return{templateUrl:"components/functionselect/functionselect.html",restrict:"E",scope:{channelId:"<",fieldDef:"=",supportAny:"<"},link:function(s){function l(e){return e&&e.type&&(e.type===n.type.QUANTITATIVE||e.type["enum"]&&n.util.contains(e.type["enum"],n.type.QUANTITATIVE))}function u(e){return e&&e.type&&(e.type===n.type.TEMPORAL||e.type["enum"]&&n.util.contains(e.type["enum"],n.type.TEMPORAL))}var c,f="bin",d="count";s.hideMoreFn=t.hideMoreFn,s.func={selected:void 0,checked:{undefined:!0},list:{aboveFold:[],belowFold:[]},isAny:!1,isTemporal:!1,isCount:!1};var h={aboveFold:[void 0,"yearmonthdate","year","month","date","day","hours","minutes","seconds","milliseconds"],belowFold:["yearquarter","yearmonth","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","hoursminutes","hoursminutesseconds","minutesseconds","secondsmilliseconds"]},p=function(e){var t=i.get(s.channelId);if(!t)return!0;var n=t.field,a=i.isAnyChannel(s.channelId)?"?":s.channelId;return!!r.enumSpec.isEnumSpec(n)||(!e||o.schema.timeUnitHasVariation({field:n,channel:a,timeUnit:e}))},g=e.pull(e.concat(h.aboveFold,"quarter",h.belowFold),void 0),m={aboveFold:[void 0,"bin","min","max","mean","median","sum"],belowFold:["valid","missing","distinct","modeskew","q1","q3","stdev","stdevp","variance","variancep"]},v=e.pull(e.concat(m.aboveFold,m.belowFold,[d]),f,void 0);s.selectChanged=function(){a.logInteraction(a.actions.FUNC_CHANGE,s.func.selected,{channel:s.channelId});var t=s.func.selected,n=i.get(s.channelId),r=e.clone(n),o=l(r),c=u(r);r&&(r.bin=t===f?{}:void 0,r.aggregate=o&&v.indexOf(t)!==-1?t:void 0,r.timeUnit=c&&g.indexOf(t)!==-1?t:void 0,e.isEqual(n,r)||i.set(s.channelId,r,!0))},s.isAnyChanged=function(){if(s.func.isAny){var e={};e[s.func.selected]=!0,s.func.checked=e,s.checkChanged()}else s.selectChanged()},s.checkChanged=function(){var t=i.get(s.channelId),n=e.clone(t),r=l(n),o=u(n);if(n){a.logInteraction(a.actions.FUNC_CHANGE,s.func.checked,{channel:s.channelId});var c=Object.keys(s.func.checked).filter(function(e){return"bin"!==e&&s.func.checked[e]}).map(function(e){return"undefined"===e?void 0:e});r?(n.bin=s.func.checked.bin?!(c.length>0)||{"enum":[!1,!0]}:void 0,n.aggregate={"enum":s.func.checked.bin?c.concat([void 0]):c},n.hasFn=!s.func.checked.undefined||void 0,n.timeUnit=void 0):o&&(n.aggregate=void 0,n.bin=void 0,n.timeUnit={"enum":c},n.hasFn=void 0),e.isEqual(t,n)||i.set(s.channelId,n,!0)}};var y=s.$watch("fieldDef",function(e){if(e){e.bin&&(c=e.bin.maxbins);var n=["row","column","shape"].indexOf(s.channelId)!==-1,i=l(e),a=u(e);if(s.func.isTemporal=a,s.func.isCount="*"===e.field,"*"===e.field&&e.aggregate===d)s.func.list.aboveFold=[d],s.func.list.belowFold=[],s.func.selected=d;else{a?(s.func.list.aboveFold=h.aboveFold.filter(p),s.func.list.belowFold=h.belowFold.filter(p)):i&&(s.func.list.aboveFold=m.aboveFold,s.func.list.belowFold=m.belowFold);var o=n&&i&&f||a&&t.defaultTimeFn||void 0;if(s.func.isAny=r.enumSpec.isEnumSpec(e.aggregate)||r.enumSpec.isEnumSpec(e.bin)||r.enumSpec.isEnumSpec(e.timeUnit),s.func.isAny){var g={};if(i){var v=!1;if(e.bin&&(g.bin=!0,r.enumSpec.isEnumSpec(e.bin)?e.bin["enum"]&&e.bin["enum"].forEach(function(e){e||(v=!0)}):v=!0),e.aggregate)if(r.enumSpec.isEnumSpec(e.aggregate)){var y=e.aggregate["enum"]||r.config.DEFAULT_QUERY_CONFIG.aggregates;y.forEach(function(e){g[e]=!0}),g.undefined||(v=!0)}else g[e.aggregate]=!0;v?delete g.undefined:g.undefined=!0}else if(a)if(e.timeUnit)if(r.enumSpec.isEnumSpec(e.timeUnit)){var b=e.timeUnit["enum"]||r.config.DEFAULT_QUERY_CONFIG.aggregates;b.forEach(function(e){g[e]=!0})}else g[e.timeUnit]=!0;else g.undefined=!0;s.func.checked=g}else{var _=e.bin?"bin":e.aggregate||e.timeUnit;s.func.list.aboveFold.indexOf(_)>=0||s.func.list.belowFold.indexOf(_)>=0?s.func.selected=_:s.func.selected=o}}}},!0);s.$on("$destroy",function(){y()})}}}])}(),function(){"use strict";angular.module("vlui").directive("modal",["$document","Modals",function(e,t){return{templateUrl:"components/modal/modal.html",restrict:"E",transclude:!0,scope:{autoOpen:"<",maxWidth:"@"},controller:["$scope",function(e){this.close=function(){e.isOpen=!1}}],link:function(n,r,i){function a(e){27===e.keyCode&&n.isOpen&&(n.isOpen=!1,n.$digest())}var o=i.id;n.maxWidth&&(n.wrapperStyle="max-width:"+n.maxWidth),n.isOpen=n.autoOpen,angular.element(e).on("keydown",a),t.register(o,n),n.$on("$destroy",function(){t.deregister(o)})}}}])}(),function(){"use strict";angular.module("vlui").directive("modalCloseButton",function(){return{templateUrl:"components/modal/modalclosebutton.html",restrict:"E",require:"^^modal",scope:{closeAction:"&"},link:function(e,t,n,r){e.closeModal=function(){r.close(),e.closeAction&&e.closeAction()}}}})}(),function(){"use strict";angular.module("vlui").factory("Modals",["$cacheFactory",function(e){var t=e("modals");return{register:function(e,n){return t.get(e)?void console.error("Cannot register two modals with id "+e):void t.put(e,n)},deregister:function(e){t.remove(e)},open:function(e){var n=t.get(e);return n?void(n.isOpen=!0):void console.error("Unregistered modal id "+e)},close:function(e){var n=t.get(e);return n?void(n.isOpen=!1):void console.error("Unregistered modal id "+e)},empty:function(){t.removeAll()},count:function(){return t.info().size}}}])}(),function(){"use strict";angular.module("vlui").directive("propertyEditor",function(){return{templateUrl:"components/propertyeditor/propertyeditor.html",restrict:"E",scope:{id:"=",type:"=","enum":"=",propName:"=",group:"=",description:"=","default":"=",min:"=",max:"=",role:"="},link:function(e){if(e.hasAuto=void 0===e["default"],e.automodel={value:!1},e.hasAuto){e.automodel.value=void 0===e.group[e.propName];var t=e.$watch("automodel.value",function(){e.automodel.value===!0&&(e.group[e.propName]=void 0)});e.$on("$destroy",function(){t()})}e.isRange=void 0!==e.max&&void 0!==e.min}}})}(),function(){"use strict";angular.module("vlui").directive("schemaList",["vl","cql","Logger","Pills",function(e,t,n,r){return{templateUrl:"components/schemalist/schemalist.html",restrict:"E",scope:{orderBy:"<",fieldDefs:"<",filterManager:"=",showAdd:"<",showCount:"<",showDrop:"<"},replace:!0,link:function(e){e.Pills=r,e.isEnumSpec=t.enumSpec.isEnumSpec,e.droppedFieldDef={},e.countFieldDef=r.countFieldDef,e.fieldDropped=function(){n.logInteraction(n.actions.ADD_WILDCARD,e.droppedFieldDef),r.addWildcard(e.droppedFieldDef),e.droppedFieldDef={}}}}}])}(),function(){"use strict";angular.module("vlui").directive("schemaListItem",["Dataset","Drop","Logger","Pills","cql","vl","consts",function(e,t,n,r,i,a,o){return{templateUrl:"components/schemalist/schemalistitem.html",restrict:"E",replace:!1,scope:{fieldDef:"=",showAdd:"<",filterManager:"="},link:function(t,s){t.Dataset=e,t.consts=o,t.countFieldDef=r.countFieldDef,t.isAnyField=!1,t.droppedFieldDef=null,t.fieldInfoPopupContent=s.find(".schema-menu")[0],t.isEnumSpec=i.enumSpec.isEnumSpec,t.fieldAdd=function(e){r.add(e)},t.toggleFilter=function(){t.filterManager&&t.filterManager.toggle(t.fieldDef.field)},t.fieldDragStart=function(){var e=t.fieldDef;t.pill={field:e.field,title:e.title,type:e.type,aggregate:e.aggregate},r.dragStart(t.pill,null)},t.fieldDragStop=r.dragStop,t.fieldDropped=function(){r.addWildcardField(t.fieldDef,t.droppedFieldDef),n.logInteraction(n.actions.ADD_WILDCARD_FIELD,t.fieldDef,{addedField:t.droppedFieldDef}),t.droppedFieldDef=null},t.removeWildcardField=function(e){var i=t.fieldDef.field;n.logInteraction(n.actions.REMOVE_WILDCARD_FIELD,t.fieldDef,{removedField:"*"===i["enum"][e]?"COUNT":i["enum"][e]}),r.removeWildcardField(t.fieldDef,e)},t.removeWildcard=function(){n.logInteraction(n.actions.REMOVE_WILDCARD,t.fieldDef),r.removeWildcard(t.fieldDef)};var l={integer:[a.type.QUANTITATIVE,a.type.ORDINAL,a.type.NOMINAL],number:[a.type.QUANTITATIVE,a.type.ORDINAL,a.type.NOMINAL],date:[a.TEMPORAL],string:[a.type.NOMINAL],"boolean":[a.type.NOMINAL],all:[a.type.QUANTITATIVE,a.type.TEMPORAL,a.type.ORDINAL,a.type.NOMINAL]},u=t.$watch("fieldDef",function(e){i.enumSpec.isEnumSpec(e.field)?t.allowedTypes=l.all:t.allowedTypes=l[e.primitiveType],t.isAnyField=i.enumSpec.isEnumSpec(e.field)});t.fieldTitle=function(e){return i.enumSpec.isEnumSpec(e)?(e["enum"]||["Wildcard"]).map(function(e){return"*"===e?"COUNT":e}).join(","):e},t.$on("$destroy",function(){t.fieldAdd=null,t.fieldDragStop=null,t.isEnumSpec=null,u()})}}}])}(),function(){"use strict";angular.module("vlui").directive("shelves",function(){return{templateUrl:"components/shelves/shelves.html",restrict:"E",scope:{spec:"=",preview:"<",supportAny:"<",supportAutoMark:"<",filterManager:"="},replace:!0,controller:["$scope","ANY","util","vl","Config","Dataset","Logger","Pills",function(e,t,n,r,i,a,o,s){e.ANY=t,e.anyChannelIds=[],e.Dataset=a,e.marks=["point","tick","bar","line","area","text","boxplot"],e.marksWithAny=[t].concat(e.marks),e.markChange=function(){o.logInteraction(o.actions.MARK_CHANGE,e.spec.mark)},e.transpose=function(){r.spec.transpose(e.spec)},e.clear=function(){o.logInteraction(o.actions.SPEC_CLEAN,e.spec),s.reset()};var l=e.$watch("spec",function(t){if(e.supportAny&&(e.anyChannelIds=n.keys(t.encoding).reduce(function(e,t){return s.isAnyChannel(t)&&e.push(t),e},[])),!e.preview){var r=s.update(t),i=null;r&&(i=r.charts?{specific:!1,numCharts:r.charts.length}:r.chart?{specific:!0}:{specific:!1,numCharts:0}),o.logInteraction(o.actions.SPEC_CHANGE,t,i)}},!0);e.$on("$destroy",function(){l()})}]}})}(),function(){"use strict";angular.module("vlui").directive("tab",function(){return{templateUrl:"components/tabs/tab.html",restrict:"E",require:"^^tabset",replace:!0,transclude:!0,scope:{heading:"@"},link:function(e,t,n,r){r.addTab(e)}}})}(),function(){"use strict";angular.module("vlui").directive("tabset",function(){return{templateUrl:"components/tabs/tabset.html",restrict:"E",transclude:!0,controller:function(){var e=this;this.tabs=[],this.addTab=function(t){t.active=0===e.tabs.length,e.tabs.push(t)},this.showTab=function(t){e.tabs.forEach(function(e){e.active=e===t})}},controllerAs:"tabset"}})}(),function(){"use strict";angular.module("vlui").directive("vlPlot",["vl","vg","cql","$timeout","$q","Dataset","Config","consts","_","$document","Logger","Heap","$window",function(e,t,n,r,i,a,o,s,l,u,c,f,d){function h(e,t){return e>g||t>g||e*t>m?"svg":"canvas"}var p=0,g=16383.5,m=67108864,v=new f(function(e,t){return e.priority-t.priority}),y=!1;return{templateUrl:"components/vlplot/vlplot.html",restrict:"E",scope:{chart:"=",disabled:"<",isInList:"<",listTitle:"<",alwaysScrollable:"<",configSet:"@",overflow:"<",priority:"<",rescale:"<",thumbnail:"<",tooltip:"<",mouseEnterAction:"="},replace:!0,link:function(i,u){function f(){if(A){i.tip.destroy(),k.destroy(),A.off("mouseover"),A.off("mouseout"),A.destroy(),A=null;var e=x();s.debug&&d.views&&delete d.views[e]}}function g(e,t){c.logInteraction(c.actions.CHART_TOOLTIP,t.datum,{shorthand:i.chart.shorthand,list:i.listTitle})}function m(e,t){c.logInteraction(c.actions.CHART_TOOLTIP_END,t.datum,{shorthand:i.chart.shorthand,list:i.listTitle})}function b(){var n=i.configSet||s.defaultConfigSet||{};if(i.chart.vlSpec){var r=l.cloneDeep(i.chart.vlSpec);t.util.extend(r.config,o[n]());var u=i.chart.schema||a.schema,c=r.encoding;return c&&(c.y&&c.y.field&&[e.type.NOMINAL,e.type.ORDINAL].indexOf(c.y.type)>-1&&c.x&&!c.column&&u.cardinality(c.y)>25&&((c.x.axis=c.x.axis||{}).orient="top"),(c.row&&c.y||c.y&&u.cardinality(c.y)>10)&&((c.y.scale=c.y.scale||{}).bandSize=12),(c.column&&c.x||c.x&&u.cardinality(c.x)>10)&&((c.x.scale=c.x.scale||{}).bandSize=12),c.color&&c.color.type===e.type.NOMINAL&&(u.cardinality(c.color)>10&&((c.color.scale=c.color.scale||{}).range="category20"),(c.color.scale=c.color.scale||{}).domain=a.schema.domain(c.color)),c.x&&c.x.scale&&"log"===c.x.scale.type&&c.y&&c.y.scale&&"log"===c.y.scale.type&&[c.x,c.y].forEach(function(e){e.axis=e.axis||{},e.axis.properties=e.axis.properties||{},e.axis.properties.grid=e.axis.properties.grid||{},e.axis.properties.grid.opacity={value:.5}})),e.compile(r).spec}}function _(){return u.find(".vega > :first-child")}function E(){var e=_();if(i.rescale){i.$digest();var t=Math.max(.2,u.width()/i.width);t<1&&e.width(i.width*t).height(i.height*t)}else e.css("transform",null).css("transform-origin",null)}function x(){return i.chart.shorthand||(i.chart.vlSpec?n.query.shorthand.vlSpec(i.chart.vlSpec):"")}function S(){if(v.size()>0){var e=v.pop();e.parse()}else y=!1}function T(n){function o(e,t){var n=e.select(function(){return this.parentNode});if(t){var r=d3.format(".2f");n.select(".typerDiv").remove();var i=n.append("div").attr("class","typerDiv"),a=d3.entries(t.val);i.selectAll(".typerDetail").data(a).enter().append("p").attr("class","typerDetail").text(function(e){return e.key+": "+r(e.value)})}}function l(){if(i.destroyed||i.disabled||i.isInList&&i.chart.fieldSetKey&&!i.isInList(i.chart))return console.log("cancel rendering",p),void S();(new Date).getTime();switch(i.chart.vlSpec.mark){case"boxplot":var l=d3.selectAll("#vis-"+i.visId),v=l.select(".vega");null==v[0][0]&&(v=l.append("div").attr("class","vega").style("position","relative")),v.selectAll("*").remove();var y={top:10,right:20,bottom:40,left:20},b=n.marks[0].axes[0].titleOffset||30;y.bottom+=30===b?30:0;var x=$(v[0]).width()-y.left-y.right,O=(parseInt($(v[0]).parent().parent().css("max-height"),10)||parseInt($(v[0]).parent().parent().parent()[0].offsetHeight,10))-y.top-y.bottom-$(v[0]).parent().parent().find(".vl-plot-group-header").outerHeight(!0);O=Math.min(O,100),x=Math.min(x,400);var M=1/0,D=-(1/0),L=v.append("svg").attr("width",x+y.left+y.right).attr("height",O+y.top+y.bottom).attr("class","boxplot").append("g").attr("transform","translate("+y.left+","+y.top+")");C=v.selectAll("svg");var R=i.chart.fieldSet.map(function(e){return e.field}),P=[];R.forEach(function(e){var t=a.schema.fieldSchema(e);void 0!=t&&P.push(t)});var F=R.map(function(e){return a.schema.fieldSchema(e)}),U=[];a.data.forEach(function(e){return U.push(d3.entries(e)),F.map(function(t){return{value:t.stats.max-t.stats.min?(e[t.field]-t.stats.min)/(t.stats.max-t.stats.min):0,or:e[t.field]}})}),L.call(i.tip);P.forEach(function(e){M=e.stats.min<M?e.stats.min:M,D=e.stats.max>D?e.stats.max:D});var j=d3.scale.ordinal().domain(P.map(function(e){return e.field})).rangePoints([O,0]),H=d3.scale.linear().domain([M,D]).range([0,x]),z=d3.svg.axis().scale(H).orient("bottom").tickFormat(d3.format("s"));n.marks[0].axes[0].ticks||z.ticks(0);var B=d3.svg.axis().scale(j).orient("left"),q=L.selectAll(".boxplot").data(P).enter().append("g").attr("transform",function(e){return"translate(0,"+Math.min(Math.max(j(e.field),10),30)+")"});return q.append("line").attr("class","center").attr("y1",function(e){return Math.min(Math.max(j(e.field),10),30)/2}).attr("x1",function(e){return H(e.stats.q1iqr)}).attr("y2",function(e){return Math.min(Math.max(j(e.field),10),30)/2}).attr("x2",function(e){return H(e.stats.q3iqr)}).style("opacity",1),q.append("rect").attr("class","box_quan").attr("y",function(e){return 0}).attr("x",function(e){return H(e.stats.q1)}).attr("height",function(e){return Math.min(Math.max(j(e.field),10),30)}).attr("width",function(e){return Math.abs(H(e.stats.q1)-H(e.stats.q3))}),q.append("line").attr("class","median").attr("y1",function(e){return 0}).attr("x1",function(e){return H(e.stats.median)}).attr("y2",function(e){return Math.min(Math.max(j(e.field),10),30)}).attr("x2",function(e){return H(e.stats.median)}).style("opacity",1),q.append("line").attr("class","whisker").attr("y1",function(e){return Math.min(Math.max(j(e.field),10),30)/4}).attr("x1",function(e){return H(e.stats.q1iqr)}).attr("y2",function(e){return 3*Math.min(Math.max(j(e.field),10),30)/4}).attr("x2",function(e){return H(e.stats.q1iqr)}).style("opacity",1),q.append("line").attr("class","whisker").attr("y1",function(e){return Math.min(Math.max(j(e.field),10),30)/4}).attr("x1",function(e){return H(e.stats.q3iqr)}).attr("y2",function(e){return 3*Math.min(Math.max(j(e.field),10),30)/4}).attr("x2",function(e){return H(e.stats.q3iqr)}).style("opacity",1),q.append("g").attr("class","outliers").attr("transform",function(e){return"translate(0,"+Math.min(Math.max(j(e.field),10),30)/2+")"}).selectAll(".circleo").data(function(e){return Object.keys(e.stats.unique).filter(function(t){return t<e.stats.q1iqr||t>e.stats.q3iqr})}).enter().append("circle").attr("class","circleo").attr("cx",function(e){return H(e)}).attr("cy",0).attr("r",2).on("mouseover",function(e,t){var n=d3.select(this).datum().index;d3.selectAll(".circleo")[0].forEach(function(e){e.__data__.index===n?d3.select(e).transition().duration(200).style("opacity",1):d3.select(e).transition().duration(200).style("opacity",.1)}),i.tip.show(U.find(function(t){var n=t.find(function(t){return t.key==R[0]&&t.value==e});return void 0!=n}),"")}).on("mouseout",function(e,t){d3.selectAll(".circleo").transition().duration(200).style("opacity",1),i.tip.hide()}),q.append("g").attr("class","outliersfar").attr("transform",function(e){return"translate(0,"+Math.min(Math.max(j(e.field),10),30)/2+")"}).selectAll(".circleo").data(function(e){return Object.keys(e.stats.unique).filter(function(t){return t<e.stats.q1iqr-e.stats.iqr||t>e.stats.q3iqr+e.stats.iqr})}).enter().append("circle").attr("class",".circleo").attr("cx",function(e){return H(e)}).attr("cy",0).attr("r",3).on("mouseover",function(e,t){var n=d3.select(this).datum().index;d3.selectAll(".circleo")[0].forEach(function(e){e.__data__.index===n?d3.select(e).transition().duration(200).style("opacity",1):d3.select(e).transition().duration(200).style("opacity",.1)}),i.tip.show(U.find(function(t){var n=t.find(function(t){return t.key==R[0]&&t.value==e});return void 0!=n}),"")}).on("mouseout",function(e,t){d3.selectAll(".circleo").transition().duration(200).style("opacity",1),i.tip.hide()}),L.append("g").attr("class","x axis").attr("transform","translate(0,"+(O+y.top+10)+")").call(z).append("text").attr("text-anchor","middle").text(n.marks[0].axes[0].title).style("font-weight","bold").attr("transform","translate("+x/2+","+b+")"),o(v,i.chart.vlSpec.config.typer),c.logInteraction(c.actions.CHART_RENDER,i.chart.shorthand,{list:i.listTitle}),E(),void(N=r(S,1));case"point":var l=d3.selectAll("#vis-"+i.visId),v=l.select(".vega");null==v[0][0]&&(v=l.append("div").attr("class","vega").style("position","relative")),v.selectAll("*").remove();var y={top:3,right:5,bottom:20,left:20};y.bottom+=+$(v[0]).parent().parent().find(".vl-plot-group-header").outerHeight(!0);var x=$(v[0]).width()-y.left-y.right,O=(parseInt($(v[0]).parent().parent().css("max-height"),10)||parseInt($(v[0]).parent().parent().parent()[0].offsetHeight,10))-y.top-y.bottom,Y=Math.min(x,O);x=Y,O=Y;var X=v.append("svg").attr("width",x+y.left+y.right).attr("height",O+y.top+y.bottom).attr("class","point-graph").append("g").attr("transform","translate("+y.left+","+y.top+")");C=v.selectAll("svg");var R=i.chart.fieldSet.map(function(e){return e.field}),W=a.data.map(function(e,t){return{index:t,val:[e[R[0]],e[R[1]]]}}),F=R.map(function(e){return a.schema.fieldSchema(e)}),U=[];a.data.forEach(function(e){return U.push(d3.entries(e)),F.map(function(t){return{value:t.stats.max-t.stats.min?(e[t.field]-t.stats.min)/(t.stats.max-t.stats.min):0,or:e[t.field]}})});var G=(d3.scale.linear().domain([0,1]).range([F[0].stats.min,F[0].stats.max]),d3.scale.linear().domain([0,1]).range([F[1].stats.min,F[1].stats.max]),d3.scale.linear().domain(d3.extent(W,function(e){return e.val[1]})).range([O,0])),V=d3.scale.linear().domain(d3.extent(W,function(e){return e.val[0]})).range([0,x]);X.selectAll(".ppoint").data(W).enter().append("circle").attr("class","ppoint").attr("cx",function(e){return V(e.val[0])}).attr("cy",function(e){return G(e.val[1])}).attr("r",2).attr("fill","#4682b4").on("mouseover",function(e,t){var n=d3.select(this).datum().index;d3.selectAll(".ppoint")[0].forEach(function(e){e.__data__.index===n?d3.select(e).transition().duration(200).style("opacity",1):d3.select(e).transition().duration(200).style("opacity",.1)}),i.tip.show(U[t],"")}).on("mouseout",function(e,t){d3.selectAll(".ppoint").transition().duration(200).style("opacity",1),i.tip.hide()});X.call(i.tip);var z=d3.svg.axis().scale(V).orient("bottom");z.ticks(0);var B=d3.svg.axis().scale(G).orient("left");return B.ticks(0),X.append("g").attr("class","y axis").call(B).append("text").text(n.marks[0].axes[1].title).attr("text-anchor","middle").attr("transform","translate(-10,"+O/2+") rotate(-90)").style("font-weight","bold"),X.append("g").attr("class","x axis").attr("transform","translate(0,"+O+")").call(z).append("text").attr("text-anchor","middle").text(n.marks[0].axes[0].title).attr("transform","translate("+x/2+",18)").style("font-weight","bold"),o(v,i.chart.vlSpec.config.typer),c.logInteraction(c.actions.CHART_RENDER,i.chart.shorthand,{list:i.listTitle}),E(),void(N=r(S,1));case"hexagon":var l=d3.selectAll("#vis-"+i.visId),v=l.select(".vega");null==v[0][0]&&(v=l.append("div").attr("class","vega").style("position","relative")),v.selectAll("*").remove();var y={top:3,right:5,bottom:20,left:20};y.bottom+=+$(v[0]).parent().parent().find(".vl-plot-group-header").outerHeight(!0);var x=$(v[0]).width()-y.left-y.right,O=(parseInt($(v[0]).parent().parent().css("max-height"),10)||parseInt($(v[0]).parent().parent().parent()[0].offsetHeight,10))-y.top-y.bottom,Y=Math.min(x,O);x=Y,O=Y,console.log("REDERLOG"),console.log(i.width+"x"+i.height),console.log(x+"x"+O);var X=v.append("svg").style("max-height",O+"px").attr("viewBox","0 0 "+(x+y.left+y.right)+" "+(O+y.top+y.bottom)).attr("preserveAspectRatio","xMidYMax meet").attr("class","hexagon-graph").append("g").attr("transform","translate("+y.left+","+y.top+")");C=v.selectAll("svg");var R=i.chart.fieldSet.map(function(e){return e.field}),W=a.data.map(function(e,t){var n=[e[R[0]],e[R[1]]];return n.data={key:t,value:e},n});try{var F=R.map(function(e){return a.schema.fieldSchema(e)}),K=(d3.scale.linear().domain([0,1]).range([F[0].stats.min,F[0].stats.max]),d3.scale.linear().domain([0,1]).range([F[1].stats.min,F[1].stats.max]),scagnostics(W,"hexagon",40,!1,!1,void 0,1,1/0)),G=d3.scale.linear().domain([0,1]).range([O,0]),V=d3.scale.linear().domain([0,1]).range([0,x]),Z=d3.scale.linear().domain(d3.extent(K.bins.map(function(e){return e.length}))).range([_(.1),_(.7)]);X.append("g").attr("class","hexagon").selectAll(".bin-point").data(K.bins).enter().append("path").attr("class","bin-point mainstroke").attr("d",K.binner.hexagon(V(K.binRadius))).attr("transform",function(e){return"translate("+V(e.x)+","+G(e.y)+")"}).attr("fill",function(e){return Z(e.length)}).on("mouseover",function(e,t){
var n=d3.select(this).datum();d3.selectAll(".bin-point")[0].forEach(function(e){var t;e.__data__.forEach(function(e){t=n.find(function(t){return t.data.key===e.data.key})}),void 0!==t?d3.select(e).transition().duration(200).style("opacity",1):d3.select(e).transition().duration(200).style("opacity",.1)}),i.tip.show([{key:R[0],value:d3.format(".3n")(d3.mean(e,function(e){return e.data.value[R[0]]}))},{key:R[1],value:d3.format(".3n")(d3.mean(e,function(e){return e.data.value[R[1]]}))}],"")}).on("mouseout",function(e,t){d3.selectAll(".bin-point").transition().duration(200).style("opacity",1),i.tip.hide()});X.call(i.tip);var Q=V(K.binRadius);V.domain([-K.binRadius,1+K.binRadius]).range([V.range()[0]-Q,V.range()[1]+Q]),G.domain([-K.binRadius,1+K.binRadius]).range([G.range()[0]+Q,G.range()[1]-Q]);var z=d3.svg.axis().scale(V).orient("bottom");z.ticks(0);var B=d3.svg.axis().scale(G).orient("left");B.ticks(0),X.append("g").attr("class","y axis").attr("transform","translate("+-Q+",0)").call(B).append("text").text(n.marks[0].axes[1].title).attr("text-anchor","middle").attr("transform","translate(-10,"+O/2+") rotate(-90)").style("font-weight","bold"),X.append("g").attr("class","x axis").attr("transform","translate(0,"+G.range()[0]+")").call(z).append("text").attr("text-anchor","middle").text(n.marks[0].axes[0].title).attr("transform","translate("+x/2+",21)").style("font-weight","bold"),o(v,i.chart.vlSpec.config.typer),X.attr("transform","translate("+(y.left-Q)+","+(y.top+Q)+")"),c.logInteraction(c.actions.CHART_RENDER,i.chart.shorthand,{list:i.listTitle}),E()}catch(J){console.log("fail")}return void(N=r(S,1));case"leader":var l=d3.selectAll("#vis-"+i.visId),v=l.select(".vega");null==v[0][0]&&(v=l.append("div").attr("class","vega").style("position","relative")),v.selectAll("*").remove();var y={top:3,right:5,bottom:20,left:20};y.bottom+=+$(v[0]).parent().parent().find(".vl-plot-group-header").outerHeight(!0);var x=$(v[0]).width()-y.left-y.right,O=(parseInt($(v[0]).parent().parent().css("max-height"),10)||parseInt($(v[0]).parent().parent().parent()[0].offsetHeight,10))-y.top-y.bottom,Y=Math.min(x,O);x=Y,O=Y;var X=v.append("svg").style("max-height",O+"px").attr("viewBox","0 0 "+(x+y.left+y.right)+" "+(O+y.top+y.bottom)).attr("preserveAspectRatio","xMidYMax meet").attr("class","leader-graph").append("g").attr("transform","translate("+y.left+","+y.top+")");C=v.selectAll("svg");var R=i.chart.fieldSet.map(function(e){return e.field}),W=a.data.map(function(e,t){var n=[e[R[0]],e[R[1]]];return n.data={key:t,value:e},n});try{var ee=2,K=scagnostics(W,"leader",20,!1,!1,void 0,1,1/0),G=d3.scale.linear().domain([0,1]).range([O,0]),V=d3.scale.linear().domain([0,1]).range([0,x]),Z=d3.scale.linear().domain(d3.extent(K.bins.map(function(e){return e.length}))).range([_(.1),_(.7)]),te=function(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.round(Math.sqrt(n*n+r*r)*Math.pow(10,10))/Math.pow(10,10)};X.append("g").attr("class","leader").selectAll(".bin-point").data(K.bins).enter().append("circle").attr("class","bin-point mainstroke").attr("r",function(e){var t=e.map(function(t){return te([e.x,e.y],t)}),n=d3.max(t);return 0===n?ee:V(n)}).attr("cx",function(e){return V(e.x)}).attr("cy",function(e){return G(e.y)}).attr("fill",function(e){return Z(e.length)}).attr("stroke-width",1).on("mouseover",function(e,t){var n=d3.select(this).datum();d3.selectAll(".bin-point")[0].forEach(function(e){var t;e.__data__.forEach(function(e){t=n.find(function(t){return t.data.key===e.data.key})}),void 0!==t?d3.select(e).transition().duration(200).style("opacity",1):d3.select(e).transition().duration(200).style("opacity",.1)}),i.tip.show([{key:R[0],value:d3.mean(e,function(e){return e.data.value[R[0]]})},{key:R[1],value:d3.mean(e,function(e){return e.data.value[R[1]]})}],"")}).on("mouseout",function(e,t){d3.selectAll(".bin-point").transition().duration(200).style("opacity",1),i.tip.hide()});X.call(i.tip);var Q=V(K.binRadius);V.domain([-K.binRadius,1+K.binRadius]).range([V.range()[0]-Q,V.range()[1]+Q]),G.domain([-K.binRadius,1+K.binRadius]).range([G.range()[0]+Q,G.range()[1]-Q]);var z=d3.svg.axis().scale(V).orient("bottom");z.ticks(0);var B=d3.svg.axis().scale(G).orient("left");B.ticks(0),X.append("g").attr("class","y axis").attr("transform","translate("+-Q+",0)").call(B).append("text").text(n.marks[0].axes[1].title).attr("text-anchor","middle").attr("transform","translate(-10,"+O/2+") rotate(-90)").style("font-weight","bold"),X.append("g").attr("class","x axis").attr("transform","translate(0,"+G.range()[0]+")").call(z).append("text").attr("text-anchor","middle").text(n.marks[0].axes[0].title).attr("transform","translate("+x/2+",21)").style("font-weight","bold"),o(v,i.chart.vlSpec.config.typer),X.attr("transform","translate("+(y.left-Q)+","+(y.top+Q)+")"),c.logInteraction(c.actions.CHART_RENDER,i.chart.shorthand,{list:i.listTitle}),E()}catch(J){}return void(N=r(S,1));case"contour":var l=d3.selectAll("#vis-"+i.visId),y={top:3,right:5,bottom:20,left:20},v=l.select(".vega");null==v[0][0]&&(v=l.append("div").attr("class","vega").style("position","relative")),v.selectAll("*").remove();var x=$(v[0]).width(),O=(parseInt($(v[0]).parent().parent().css("max-height"),10)||parseInt($(v[0]).parent().parent().parent()[0].offsetHeight,10))-y.top-y.bottom-$(v[0]).parent().parent().find(".vl-plot-group-header").outerHeight(!0);O=O>2*x?x:O;var Y=x>O?"y":"x",ne=i.chart.vlSpec.config,re=void 0==ne.colorbar||ne.colorbar;re?(x=O,y.right+=30):x=O,v.append("div").attr("class","contour-graph").attr("id","contour"+i.visId).style("height",O+y.top+y.bottom+"px").style("width",x+y.left+y.right+"px");var R=i.chart.fieldSet.map(function(e){return e.field}),W=a.data.map(function(e){return[e[R[0]],e[R[1]]]}),K=scagnostics(W,"hexagon",40,!1,!1,void 0,1,1/0),ie=7,ae=_.ticks(ie).slice(-ie-2);console.log(ae);for(var oe=[],se=[[0,T],[.5/ie,T]],le=1;le<ie;le++)se.push([(le-.5)/ie,_(ae[le])]),se.push([(le+1-.5)/ie,_(ae[le])]),oe.push(""+le);oe[ie-2]="≥"+(ie-1),se.push([(ie-.5)/ie,_(ae[ie])]),se.push([1,_(ae[ie])]),console.log(oe);try{var ue={l:y.left,r:y.right,t:y.top,b:y.bottom,pad:0,autoexpand:!1},ce="histogram2dcontour",F=R.map(function(e){return a.schema.fieldSchema(e)}),V=d3.scale.linear().domain([0,1]).range([F[0].stats.min,F[0].stats.max]),G=d3.scale.linear().domain([0,1]).range([F[1].stats.min,F[1].stats.max]),fe=[{type:ce,colorscale:se,zmin:0,zmax:7,line:{smoothing:.85,color:"rgba(1, 1, 1,1)",width:.2},connectgaps:!0,showscale:re,colorbar:{x:.98,thickness:10,thicknessmode:"pixels",len:.9,lenmode:"fraction",outlinewidth:0,tickvals:d3.range(1,ie,1),ticktext:oe},xaxis:"x",yaxis:"y",contour:{start:1,size:1,end:6},nbinsx:K.binSize,nbinsy:K.binSize}],de=(V.range()[1]-V.range()[0])/(G.range()[1]-G.range()[0]);fe[0].x=a.data.map(function(e){return e[R[0]]}),fe[0].y=a.data.map(function(e){return e[R[1]]});var he={paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",margin:ue,autosize:!0,font:{size:11},yaxis:{title:"<b>"+R[1]+"<b>",gridcolor:"#bdbdbd",showticklabels:!1,titlefont:{size:11},ticks:"",autorange:!0,showgrid:!1,zeroline:!1,linecolor:"#000000",linewidth:1},xaxis:{title:"<b>"+R[0]+"<b>",showticklabels:!1,titlefont:{size:11},ticks:"",autorange:!0,showgrid:!1,zeroline:!1,linecolor:"#000000",linewidth:1}};"y"===Y?(he.xaxis.scaleanchor="y",he.xaxis.scaleratio=1/de):(he.yaxis.scaleanchor="x",he.yaxis.scaleratio=de);var pe={staticPlot:void 0!==ne.staticPlot,responsive:!0,displaylogo:!1};ne.displayModeBar===!1&&(pe.displayModeBar=!1),Plotly.newPlot("contour"+i.visId,fe,he,pe),o(v,i.chart.vlSpec.config.typer),c.logInteraction(c.actions.CHART_RENDER,i.chart.shorthand,{list:i.listTitle}),E()}catch(J){}return void(N=r(S,1));case"scatter3D":var l=d3.selectAll("#vis-"+i.visId),v=l.select(".vega");null==v[0][0]&&(v=l.append("div").attr("class","vega").style("position","relative")),v.selectAll("*").remove();var x=$(v[0]).width(),O=(parseInt($(v[0]).parent().parent().css("max-height"),10)||parseInt($(v[0]).parent().parent().parent()[0].offsetHeight,10)-parseInt($(v[0]).parent().parent().parent().parent().css("margin-top"),10)-parseInt($(v[0]).parent().parent().parent().parent().css("margin-bottom"),10))-$(v[0]).parent().parent().find(".vl-plot-group-header").outerHeight(!0)||0,Y=Math.min(x,O);v.append("div").attr("class","3Dscatter-graph").attr("id","3Dscatter"+i.visId);var R=i.chart.fieldSet.map(function(e){return e.field}),F=R.map(function(e){return a.schema.fieldSchema(e)}),V=d3.scale.linear().domain([0,1]).range([F[0].stats.min,F[0].stats.max]),G=d3.scale.linear().domain([0,1]).range([F[1].stats.min,F[1].stats.max]),W=a.data.map(function(e){var t=[e[R[0]],e[R[1]]];return t.data={x:e[R[0]],y:e[R[1]],z:e[R[2]]},t}),ne=i.chart.vlSpec.config,re=void 0==ne.colorbar||ne.colorbar;if("point"!==ne.extraconfig)var K=scagnostics(W,"leader",15),Z=d3.scale.linear().domain(d3.extent(K.bins.map(function(e){return e.length}))).range([_(.1),_(.7)]);try{var ce="scatter3d",ue={l:0,r:0,b:0,t:0,autoexpand:!0},ee=6,ge=[{x:[],y:[],z:[],hoverinfo:"text",text:[],type:ce,mode:"markers",marker:{size:[],line:{color:"rgba(0, 0, 0, 0.3)",width:.5},color:[]},showscale:re,showlegend:!1}],me=d3.scale.linear().domain([0,1]).range([ee,2*x/3]);if(void 0===ne.extraconfig){var te=function(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.round(Math.sqrt(n*n+r*r)*Math.pow(10,10))/Math.pow(10,10)},ve=1/0,ye=-(1/0);K.bins.forEach(function(e){var t=0;e.forEach(function(e){t+=e.data.z}),t/=e.length,e.z=t,ve=Math.min(ve,t),ye=Math.max(ye,t)});d3.scale.linear().domain([ve,ye]).range([0,1]);K.bins.forEach(function(e){var t=e.map(function(t){return te([e.x,e.y],t)}),n=d3.max(t);ge[0].x.push(V(e.x)),ge[0].y.push(G(e.y)),ge[0].z.push(e.z),ge[0].marker.size.push(me(n)),ge[0].marker.color.push(Z(e.length));var r=R[0]+": "+V(e.x)+"<br>";r+=R[1]+": "+G(e.y)+"<br>",r+=R[2]+": "+e.z,ge[0].text.push(r)})}else if("evenbin"===ne.extraconfig){var H=[0,0,1,1,0,0,1,1],j=[0,1,1,0,0,1,1,0],be=[0,0,0,0,1,1,1,1],le=[7,0,0,0,4,4,2,6,4,0,3,7],_e=[3,4,1,2,5,6,5,5,0,1,2,2],Ee=[0,7,2,3,6,7,1,2,5,5,7,6],xe=function(e,t,n,r,i){var a=[r[0]-i,r[0]+i],o=[r[1]-i,r[1]+i],s=[r[2]-i,r[2]+i];return e=e.map(function(e,t){return a[e]}),t=t.map(function(e,t){return o[e]}),n=n.map(function(e,t){return s[e]}),{x:e,y:t,z:n}},Se=a.data.map(function(e){var t=F.map(function(t){return e[t.field]});return t.data=t,t}),Te=binnerN().startBinGridSize(10).isNormalized(!1).minNumOfBins(1).maxNumOfBins(Se.length).data([]).updateRadius(!0).binType("evenbin");Te.data(Se).calculate(),Z.domain(d3.extent(Te.bins.map(function(e){return e.length})));var we=d3.scale.linear().domain(Z.domain()).range([.1,1]);ge[0].marker.opacity=[],Te.bins.forEach(function(e,t){var n=e.val,r=Te.binRadius/2;n[0]=n[0]-(0===n[0]?r:0),n[1]=n[1]-(0===n[1]?r:0),n[2]=n[2]-(0===n[2]?r:0);var i=xe(H,j,be,n,r);ge[t]={},ge[t].x=i.x,ge[t].y=i.y,ge[t].z=i.z,ge[t].i=le,ge[t].j=_e,ge[t].k=Ee,ge[t].type="mesh3d",ge[t].color=Z(e.length),ge[t].opacity=we(e.length);var a=R[0]+": "+n[0]+"<br>";a+=R[1]+": "+n[1]+"<br>",a+=R[2]+": "+n[2],ge[t].text=a})}else if("contour"===ne.extraconfig){var Se=a.data.map(function(e){var t=F.map(function(t){return e[t.field]});return t.data=t,t}),Te=binnerN().startBinGridSize(40).isNormalized(!1).minNumOfBins(1).maxNumOfBins(Se.length).data([]).updateRadius(!0).binType("evenbin");Te.data(Se).calculate(),Z.domain(d3.extent(Te.bins.map(function(e){return e.length})));var we=d3.scale.linear().domain(Z.domain()).range([.3,1]);ge[0].marker.opacity=[],Te.bins.forEach(function(e){var t=Te.normalizedFun.scaleBackPoint(e.val);ge[0].marker.size.push(me(Te.binRadius/2)),ge[0].marker.color.push(Z(e.length)),ge[0].marker.opacity.push(we(e.length));var n=R[0]+": "+t[0]+"<br>";n+=R[1]+": "+t[1]+"<br>",n+=R[2]+": "+t[2],ge[0].text.push(n)}),ge.push({alphahull:2,color:_(.3),opacity:.05,type:"mesh3d",x:[],y:[],z:[]}),Se.forEach(function(e){ge[1].x.push(e[0]),ge[1].y.push(e[1]),ge[1].z.push(e[2])}),ge.push({alphahull:3,color:_(.4),opacity:.1,type:"mesh3d",x:ge[1].x,y:ge[1].y,z:ge[1].z}),ge.push({alphahull:4,color:_(.2),opacity:.15,type:"mesh3d",x:ge[1].x,y:ge[1].y,z:ge[1].z}),ge.push({alphahull:5,color:_(.5),opacity:.2,type:"mesh3d",x:ge[1].x,y:ge[1].y,z:ge[1].z}),ge.push({alphahull:6,color:_(.6),opacity:.25,type:"mesh3d",x:ge[1].x,y:ge[1].y,z:ge[1].z}),ge.push({alphahull:7,color:_(.7),opacity:.3,type:"mesh3d",x:ge[1].x,y:ge[1].y,z:ge[1].z})}else W.forEach(function(e){ge[0].x.push(e.data.x),ge[0].y.push(e.data.y),ge[0].z.push(e.data.z),ge[0].marker.size.push(ee),ge[0].marker.color.push("#2f5597");var t=R[0]+": "+e.data.x+"<br>";t+=R[1]+": "+e.data.y+"<br>",t+=R[2]+": "+e.data.z,ge[0].text.push(t)});var Ae={paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!0,margin:ue,scene:{autosize:!0,margin:ue,aspectratio:{x:1,y:1,z:1},yaxis:{title:R[1],automargin:!0,titlefont:{size:11}},xaxis:{title:R[0],automargin:!0,titlefont:{size:11}},zaxis:{title:R[2],automargin:!0,titlefont:{size:11}}}},pe={displayModeBar:void 0===ne.displayModeBar,staticPlot:void 0!==ne.staticPlot,responsive:!0,displaylogo:!1,"max-width":"500px"};Plotly.newPlot("3Dscatter"+i.visId,ge,Ae,pe),o(v,i.chart.vlSpec.config.typer),c.logInteraction(c.actions.CHART_RENDER,i.chart.shorthand,{list:i.listTitle}),E()}catch(J){}return void(N=r(S,1));case"radar":var l=d3.selectAll("#vis-"+i.visId),v=l.select(".vega");null==v[0][0]&&(v=l.append("div").attr("class","vega").style("position","relative")),v.selectAll("*").remove();var y={top:35,right:5,bottom:35,left:20},x=$(v[0]).width()-y.left-y.right,O=(parseInt($(v[0]).parent().parent().css("max-height"),10)||parseInt($(v[0]).parent().parent().parent()[0].offsetHeight,10))-y.top-y.bottom-$(v[0]).parent().parent().find(".vl-plot-group-header").outerHeight(!0),Y=Math.min(x,O);y.top=y.top+(O-Y)/2,y.bottom=y.bottom+(O-Y)/2,y.left=y.left+(x-Y)/2,y.right=y.right+(x-Y)/2,x=Y,O=Y;var P,X=v.append("svg").attr("width",x+y.left+y.right).attr("height",O+y.top+y.bottom).attr("class","radar-Chart"),R=i.chart.fieldSet.map(function(e){return e.field});try{var F=R.map(function(e){return a.schema.fieldSchema(e)}),U=[];console.log("RADAR BUG");var Ce=i.chart.vlSpec.config.extraconfig;if(Ce){var Se=a.data.map(function(e){var t=F.map(function(t){return e[t.field]});return t.data=t,t}),Te=binnerN().startBinGridSize("leader"===Ce?2.5:10).isNormalized(!1).minNumOfBins(1).maxNumOfBins(Se.length).data([]).updateRadius(!0).binType(Ce);Te.data(Se).calculate(),console.log(Te.bins.length),console.log(Te.binRadius);var te=function(e,t){var n=0;return e.forEach(function(e,r){n+=(e-t[r])*(e-t[r])}),Math.round(Math.sqrt(n)*Math.pow(10,10))/Math.pow(10,10)};P=Te.bins.map(function(e){U.push(F.map(function(t,n){return{key:t.field,value:e.val[n]}}));var t=e.val.map(function(e){return{value:e}});return t.radius="leader"===Ce?2*d3.max(e.map(function(t){return te(e.val,t)})):Te.binRadius,t.density=e.length/Se.length,t})}else P=a.data.map(function(e){return U.push(d3.entries(e)),F.map(function(t){return{value:t.stats.max-t.stats.min?(e[t.field]-t.stats.min)/(t.stats.max-t.stats.min):0,or:e[t.field]}})});var ke={w:x,h:O,margin:y,maxValue:1,levels:5,roundStrokes:!0,color:Z,labelFactor:1.1,wrapWidth:60,opacityArea:.35,dotRadius:2,opacityCircles:.1,strokeWidth:1};w(X,P,F,ke,U,i.tip),o(v,i.chart.vlSpec.config.typer),c.logInteraction(c.actions.CHART_RENDER,i.chart.shorthand,{list:i.listTitle}),E()}catch(J){}return void(N=r(S,1));default:t.parse.spec(n,function(t,l){if(t)return console.error("error",t),void(N=r(S,1));try{(new Date).getTime();f(),A=l({el:u[0]}),s.useUrl||A.data({raw:a.data}),A.update();var v=A.data("layout").values()[0],y=h(v.width,v.height);"svg"===y&&A.renderer(y);var b=u.find(".vega > :first-child");i.width=b.width(),i.height=b.height(),s.debug&&(d.views=d.views||{},d.views[p]=A),o(d3.selectAll("#vis-"+i.visId).select(".vega"),i.chart.vlSpec.config.typer),c.logInteraction(c.actions.CHART_RENDER,i.chart.shorthand,{list:i.listTitle}),E();(new Date).getTime();i.tooltip&&(k=e.tooltip(A,i.chart.vlSpec,{onAppear:g,onDisappear:m,delay:I}))}catch(_){console.error(_,JSON.stringify(n))}finally{N=r(S,1)}})}}if(!n)return void(A&&f());i.height=n.height,u||console.error("can not find vis element");var p=x(),b=7,_=d3v4.scaleSequential(d3v4.interpolateViridis),T="#ffffff";_.domain([0,.1*(b+1)]),_.interpolator(d3v4.interpolateBlues);d3.scale.category20();y?v.push({priority:i.priority||0,parse:l}):(y=!0,l())}function w(e,t,n,r,i,a){function o(e,t){e.each(function(){for(var e,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],a=0,o=1.4,s=n.attr("y"),l=n.attr("x"),u=parseFloat(n.attr("dy")),c=n.text(null).append("tspan").attr("x",l).attr("y",s).attr("dy",u+"em");e=r.pop();)i.push(e),c.text(i.join(" ")),c.node().getComputedTextLength()>t&&(i.pop(),c.text(i.join(" ")),i=[e],c=n.append("tspan").attr("x",l).attr("y",s).attr("dy",++a*o+u+"em").text(e))})}var s={w:600,h:600,margin:{top:20,right:20,bottom:20,left:20},levels:5,maxValue:0,labelFactor:1.25,wrapWidth:60,opacityArea:.35,dotRadius:4,opacityCircles:.1,strokeWidth:3,roundStrokes:!1,color:d3.scale.category10()};if("undefined"!=typeof r)for(var l in r)"undefined"!=typeof r[l]&&(s[l]=r[l]);var u=s.maxValue,c=n,f=c.length,d=Math.min(s.w/2,s.h/2),h=d3.format("%"),p=2*Math.PI/f,g=d/(s.levels+1),m=d3.scale.linear().range([g,d]).domain([0,u]),v=function(e){return e>0?m(e)-g:s.strokeWidth},y=e.append("g").attr("transform","translate("+(s.w/2+s.margin.left)+","+(s.h/2+s.margin.top)+")"),b=y.append("defs").append("filter").attr("id","glow"),_=(b.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),b.append("feMerge")),E=(_.append("feMergeNode").attr("in","coloredBlur"),_.append("feMergeNode").attr("in","SourceGraphic"),y.append("g").attr("class","axisWrapper"));E.selectAll(".levels").data(d3.range(0,s.levels+1).reverse()).enter().append("circle").attr("class","gridCircle levels").attr("r",function(e,t){return m(e/s.levels)}).style("fill","#CDCDCD").style("stroke","#CDCDCD").style("fill-opacity",s.opacityCircles).style("filter","url(#glow)"),E.selectAll(".axisLabel").data(d3.range(1,s.levels+1).reverse()).enter().append("text").attr("class","axisLabel").attr("x",4).attr("y",function(e){return-e*d/s.levels}).attr("dy","0.4em").style("font-size","10px").attr("fill","#737373");var n=E.selectAll(".axis").data(c).enter().append("g").attr("class","axis");n.append("line").attr("x1",0).attr("y1",0).attr("x2",function(e,t){return m(1.1*u)*Math.cos(p*t-Math.PI/2)}).attr("y2",function(e,t){return m(1.1*u)*Math.sin(p*t-Math.PI/2)}).attr("class","line").style("stroke","white").style("stroke-width","2px"),n.append("text").attr("class","legend").style("font-size","11px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(e,t){return m(u*s.labelFactor)*Math.cos(p*t-Math.PI/2)}).attr("y",function(e,t){return m(u*s.labelFactor)*Math.sin(p*t-Math.PI/2)}).text(function(e){return e.field}).call(o,s.wrapWidth);var x=d3.svg.line.radial().interpolate("linear-closed").radius(function(e){return m(e.value)}).angle(function(e,t){return t*p});s.roundStrokes&&x.interpolate("cardinal-closed");var S=y.selectAll(".radarWrapper").data(t).enter().append("g").attr("class","radarWrapper"),T=d3.scale.linear().domain([0,1]).range([.3,1]);S.append("path").attr("class","radarStroke").attr("d",function(e,t){return x(e)}).style("stroke-width",function(e){return(v(2*e.radius/3)||s.strokeWidth)+"px"}).style("stroke-opacity",function(e){return T(e.density)||.5}).style("stroke","#2f5597").style("fill","none").style("filter","url(#glow)").style("opacity",s.opacityArea).on("mouseover",function(e,t){d3.selectAll(".radarStroke").transition().duration(200).style("opacity",.1),d3.select(this).transition().duration(200).style("opacity",.7),a.show(i[t],"")}).on("mouseout",function(){d3.selectAll(".radarStroke").transition().duration(200).style("opacity",s.opacityArea),a.hide()}),S.selectAll(".radarCircle").data(function(e,t){return e}).enter().append("circle").attr("class","radarCircle").attr("r",s.dotRadius).attr("cx",function(e,t){return m(e.value)*Math.cos(p*t-Math.PI/2)}).attr("cy",function(e,t){return m(e.value)*Math.sin(p*t-Math.PI/2)}).style("fill","#2f5597").style("fill-opacity",.5);var w=y.selectAll(".radarCircleWrapper").data(t).enter().append("g").attr("class","radarCircleWrapper");w.selectAll(".radarInvisibleCircle").data(function(e,t){return e}).enter().append("circle").attr("class","radarInvisibleCircle").attr("r",1.5*s.dotRadius).attr("cx",function(e,t){return m(e.value)*Math.cos(p*t-Math.PI/2)}).attr("cy",function(e,t){return m(e.value)*Math.sin(p*t-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseover",function(e,t){var n=parseFloat(d3.select(this).attr("cx"))-10,r=parseFloat(d3.select(this).attr("cy"))-10;A.attr("x",n).attr("y",r).text(h(e.value)).transition().duration(200).style("opacity",1)}).on("mouseout",function(){A.transition().duration(200).style("opacity",0)});var A=y.append("text").attr("class","tooltip").style("opacity",0);e.call(a)}var A,C,k,O=500,I=200;i.vlPlotHeight=function(){return u.height()},i.vlPlotWidth=function(){return u.width()},i.visId=p++;var M=null,N=null;i.hoverFocus=!1,i.destroyed=!1,i.tip=d3.tip().attr("class","d3-tip tips ").offset([10,20]).direction("e").html(function(e,t){var n="";n+="<table style='text-align: right;'>";for(var r=0;r<e.length;r++)"pc1"!=e[r].key&&"pc2"!=e[r].key&&(n+="<tr >",n+="<td >"+e[r].key+"</td>",n+="<td class=pct>"+e[r].value+"</td>");return n+="</table>"}),i.mouseenter=function(){M=r(function(){c.logInteraction(c.actions.CHART_MOUSEOVER,i.chart.shorthand,{list:i.listTitle}),i.hoverFocus=!i.thumbnail},O),i.mouseEnterAction&&i.mouseEnterAction()},i.mouseleave=function(){i.hoverFocus&&c.logInteraction(c.actions.CHART_MOUSEOUT,i.chart.shorthand,{list:i.listTitle}),r.cancel(M),M=null,i.hoverFocus=i.unlocked=!1};var D=i.$watch(function(){return l.omit(i.chart.vlSpec,"data")},function(){var e=i.chart.vgSpec=b();i.chart.cleanSpec||(i.chart.cleanSpec=i.chart.vlSpec),T(e)},!0);i.$on("$destroy",function(){console.log("vlplot destroyed"),i.tip.destroy(),A&&f(),C&&C.remove,M&&(r.cancel(M),M=null),i.destroyed=!0,D()})}}}])}(),function(){"use strict";angular.module("vlui").directive("vlPlotGroup",["Bookmarks","consts","vg","vl","Dataset","Logger","_","Pills","Chart","$timeout","Modals","Drop",function(e,t,n,r,i,a,o,s,l,u,c,f){return{templateUrl:"components/vlplotgroup/vlplotgroup.html",restrict:"E",replace:!0,controller:["$scope","$element",function(e,t){this.getDropTarget=function(){return t.find(".fa-wrench")[0]}}],scope:{chart:"=",disabled:"<",isInList:"<",listTitle:"<",alwaysScrollable:"<",configSet:"@",enablePillsPreview:"<",overflow:"<",priority:"<",rescale:"<",thumbnail:"<",tooltip:"<",fieldSet:"<",showFilterInfo:"<",showAxisProp:"<",showBookmark:"<",showDebug:"<",showExpand:"<",showFilterNull:"<",showLabel:"<",showLog:"<",showSelect:"<",showSort:"<",showTranspose:"<",toggleShelf:"<",alwaysSelected:"<",isSelected:"<",highlighted:"<",expandAction:"&",selectAction:"&"},link:function(d,h){d.Bookmarks=e,d.consts=t;var p=new f({content:h.find(".x-prop-popup")[0],target:h.find(".x-prop-toggle")[0],position:"bottom right",openOn:"click"}),g=new f({content:h.find(".y-prop-popup")[0],target:h.find(".y-prop-toggle")[0],position:"bottom right",openOn:"click"});d.showBookmarkAlert=!1,d.toggleBookmark=function(t){e.isBookmarked(t.shorthand)?d.showBookmarkAlert=!d.showBookmarkAlert:e.add(t,d.listTitle)};var m=d.$watch("chart.vlSpec.transform.filter",function(e){if(!e)return void(d.hasFilter=!1);d.hasFilter=!0;var t="Filter";e.forEach(function(e){t=t+"\n"+e.field+" ∈ ",e.range?t=t+"["+e.range.join(", ")+"]":e["in"]&&(t=e["in"].length<5?t+"{"+e["in"].join(", ")+"}":t+"{"+e["in"][0]+", ..., "+e["in"][e["in"].length-1]+"}")}),d.filterInfo=t}),v=null,y=null;d.enablePreview=function(){y=u(function(){d.enablePillsPreview&&s.preview(!0,d.chart,d.listTitle)},500)},d.disablePreview=function(){y&&u.cancel(y),y=null,d.enablePillsPreview&&s.preview(!1,d.chart,d.listTitle)},d.fieldInfoMouseover=function(e,t){v=u(function(){if((d.highlighted||{})[e.field]=!0,d.chart&&d.chart.enumSpecIndex){var n=d.chart.enumSpecIndex;if(n.encodings&&n.encodings[t]&&n.encodings[t].field){var r=n.encodings[t].field.name;(d.highlighted||{})[r]=!0}}a.logInteraction(a.actions.FIELDDEF_HIGHLIGHTED,d.chart.shorthand,{highlightedField:e.field,list:d.listTitle})},500)},d.fieldInfoMouseout=function(e,t){if(v&&u.cancel(v),v=null,(d.highlighted||{})[e.field]&&(a.logInteraction(a.actions.FIELDDEF_UNHIGHLIGHTED,d.chart.shorthand,{highlightedField:e.field,list:d.listTitle}),(d.highlighted||{})[e.field]=!1,d.chart.enumSpecIndex)){var n=d.chart.enumSpecIndex;if(n.encodings&&n.encodings[t]&&n.encodings[t].field){var r=n.encodings[t].field.name;delete(d.highlighted||{})[r]}}},d.isEnumeratedField=function(e,t){return!!(e.enumSpecIndex&&e.enumSpecIndex.encodings&&e.enumSpecIndex.encodings[t])&&e.enumSpecIndex.encodings[t].field},d.isEnumeratedChannel=function(e,t){return!!(e.enumSpecIndex&&e.enumSpecIndex.encodings&&e.enumSpecIndex.encodings[t])&&e.enumSpecIndex.encodings[t].channel},d.select=function(e){a.logInteraction(a.actions.SPEC_SELECT,e.shorthand,{list:d.listTitle}),s.select(e.vlSpec),d.$parent.postSelectAction&&d.$parent.postSelectAction(),c.close("bookmark-list")},d.removeBookmark=function(t){e.remove(t),d.showBookmarkAlert=!1},d.keepBookmark=function(){d.showBookmarkAlert=!1},d.renderPopup=!1,d.initializePopup=o.once(function(){d.renderPopup=!0}),d.logCode=function(e,t){console.log(e+":\n\n",JSON.stringify(t))},d.log={},d.log.support=function(e,t){if(!e)return!1;var n=e.encoding,i=n[t];return i&&i.type===r.type.QUANTITATIVE&&!i.bin},d.log.toggle=function(e,t){if(d.log.support(e,t)){var n=s.get(t),r=n.scale=n.scale||{};d.toggleShelf?s.rescale(t,"log"===r.type?void 0:"log"):r.type="log"===r.type?void 0:"log",a.logInteraction(a.actions.LOG_TOGGLE,d.chart.shorthand,{list:d.listTitle})}},d.log.active=function(e,t){if(d.log.support(e,t)){var n=e.encoding[t],r=n.scale;return r&&"log"===r.type}},d.toggleFilterNull=function(e){a.logInteraction(a.actions.NULL_FILTER_TOGGLE,d.chart.shorthand,{list:d.listTitle}),d.toggleShelf?s.toggleFilterInvalid():(e.transform=e.transform||{},e.transform.filterInvalid=e.transform.filterInvalid!==!0||void 0)},d.toggleFilterNull.support=function(e){var t=r.spec.fieldDefs(e);for(var n in t){var a=t[n];if(o.includes([r.type.ORDINAL,r.type.NOMINAL],a.type)&&i.schema.stats(a).missing>0)return!0}return!1};var b=d.toggleSort={};b.modes=["ordinal-ascending","ordinal-descending","quantitative-ascending","quantitative-descending","custom"],b.toggle=function(e){var t=b.mode(e),n=b.modes.indexOf(t),r=(n+3)%(b.modes.length-1),i=b.modes[r];a.logInteraction(a.actions.SORT_TOGGLE,d.chart.shorthand,{currentMode:t,newMode:i,list:d.listTitle});var o=b.channels(e);d.toggleShelf?s.sort(o.ordinal,b.getSort(i,e)):e.encoding[o.ordinal].sort=b.getSort(i,e)},b.getSort=function(e,t){if("ordinal-ascending"===e)return"ascending";if("ordinal-descending"===e)return"descending";var n=b.channels(t),r=t.encoding[n.quantitative];return"quantitative-ascending"===e?{op:r.aggregate,field:r.field,order:"ascending"}:"quantitative-descending"===e?{op:r.aggregate,field:r.field,order:"descending"}:null},b.mode=function(e){var t=b.channels(e),r=e.encoding[t.ordinal].sort;if(void 0===r)return"ordinal-ascending";for(var i=0;i<b.modes.length-1;i++){var a=b.modes[i],s=b.getSort(a,e);if(o.isEqual(r,s))return a}return n.util.isObject(r)&&r.op&&r.field?"custom":(console.error("invalid mode"),null)},b.channels=function(e){return e.encoding.x.type===r.type.NOMINAL||e.encoding.x.type===r.type.ORDINAL?{ordinal:"x",quantitative:"y"}:{ordinal:"y",quantitative:"x"}},b.support=function(e){var t=e.encoding;return!(r.encoding.has(t,"row")||r.encoding.has(t,"column")||!r.encoding.has(t,"x")||!r.encoding.has(t,"y")||!r.encoding.isAggregate(e.encoding))&&(t.x.type!==r.type.NOMINAL&&t.x.type!==r.type.ORDINAL||!r.fieldDef.isMeasure(t.y)?!(t.y.type!==r.type.NOMINAL&&t.y.type!==r.type.ORDINAL||!r.fieldDef.isMeasure(t.x))&&"y":"x")},d.toggleSortClass=function(e){if(!e||!b.support(e))return"invisible";var t=e&&b.channels(e).ordinal,n=e&&b.mode(e),r="x"===t?"sort-x ":"";switch(n){case"ordinal-ascending":return r+"fa-sort-alpha-asc";case"ordinal-descending":return r+"fa-sort-alpha-desc";case"quantitative-ascending":return r+"fa-sort-amount-asc";case"quantitative-descending":return r+"fa-sort-amount-desc";default:return r+"fa-sort"}},d.transpose=function(){a.logInteraction(a.actions.TRANSPOSE_TOGGLE,d.chart.shorthand,{list:d.listTitle}),d.toggleShelf?s.transpose():l.transpose(d.chart.vlSpec)},d.$on("$destroy",function(){m(),d.chart=null,p&&p.destroy&&p.destroy(),g&&g.destroy&&g.destroy()})}}}])}(),function(){"use strict";angular.module("vlui").directive("vlPlotGroupPopup",["Drop",function(e){return{templateUrl:"components/vlplotgroup/vlplotgrouppopup.html",restrict:"E",require:"^^vlPlotGroup",scope:!1,link:function(t,n,r,i){var a=new e({content:n.find(".dev-tool")[0],target:i.getDropTarget(),position:"bottom right",openOn:"click",constrainToWindow:!0});t.$on("$destroy",function(){a.destroy()})}}}])}(),function(){"use strict";angular.module("vlui").directive("vlPlotGroupList",["vl","cql","jQuery","consts","_","Logger","Pills","Chart",function(e,t,n,r,i,a,o,s){return{templateUrl:"components/vlplotgrouplist/vlplotgrouplist.html",restrict:"E",replace:!0,scope:{enablePillsPreview:"<",initialLimit:"<",listTitle:"<",hideListTitle:"<",charts:"<",priority:"<",showMore:"<",postSelectAction:"&"},link:function(e){function t(){e.limit+=4,a.logInteraction(a.actions.LOAD_MORE,e.limit,{list:e.listTitle})}function n(t){for(var n=0;n<e.charts.length;n++)if(t.shorthand===e.charts[n].shorthand)return!0;return!1}e.consts=r,e.limit=e.initialLimit||4,e.getChart=s.getChart,e.increaseLimit=t,e.isInlist=n,e.Pills=o}}}])}(),function(){"use strict";angular.module("vlui").filter("compactJSON",["JSON3",function(e){return function(t){return e.stringify(t,null,"  ",80)}}])}(),function(){"use strict";angular.module("vlui").filter("encodeURI",function(){return function(e){return window.encodeURI(e)}})}(),function(){"use strict";angular.module("vlui").filter("reportUrl",["compactJSONFilter","_","consts",function(e,t,n){function r(n){var r="https://docs.google.com/forms/d/1T9ZA14F3mmzrHR7JJVUKyPXzrMqF54CjLIOjv2E7ZEM/viewform?";if(n.fields){var i=encodeURI(e(t.values(n.fields)));r+="entry.1245199477="+i+"&"}if(n.spec){var a=t.omit(n.spec,"config");a=encodeURI(e(a)),r+="entry.1323680136="+a+"&"}if(n.spec2){var o=t.omit(n.spec2,"config");o=encodeURI(e(o)),r+="entry.853137786="+o+"&"}var s="entry.1940292677=";switch(n.type){case"vl":r+=s+"Visualization+Rendering+(Vegalite)&";break;case"vr":r+=s+"Recommender+Algorithm+(Visrec)&";break;case"fv":r+=s+"Recommender+UI+(FacetedViz)&"}return r}function i(n){var r="https://docs.google.com/forms/d/1xKs-qGaLZEUfbTmhdmSoS13OKOEpuu_NNWE5TAAml_Y/viewform?";if(n.spec){var i=t.omit(n.spec,"config");i=encodeURI(e(i)),r+="entry.1245199477="+i+"&"}return r}return"psviz"===n.appId?r:i}])}(),function(){"use strict";angular.module("vlui").filter("underscore2space",function(){return function(e){return e?e.replace(/_+/g," "):""}})}(),function(){"use strict";angular.module("vlui").service("Alerts",["$timeout","_",function(e,t){var n={};return n.alerts=[],n.add=function(r,i){var a={msg:r};n.alerts.push(a),i&&e(function(){var e=t.findIndex(n.alerts,a);n.closeAlert(e)},i)},n.closeAlert=function(e){n.alerts.splice(e,1)},n}])}(),function(){"use strict";angular.module("vlui").service("Bookmarks",["_","vl","localStorageService","Logger","Dataset",function(e,t,n,r,i){var a=function(){this.list=[],this.dict={},this.isSupported=n.isSupported},o=a.prototype;return o.save=function(){n.set("bookmarkList",this.list)},o.saveAnnotations=function(t){var n=this.dict[t].annotation;e.find(this.list,function(e){return e.shorthand===t}).chart.annotation=n,this.save(),r.logInteraction(r.actions.BOOKMARK_ANNOTATE,t,n)},o["export"]=function(){var t=this.dict,n=[];e.forEach(this.list,function(e){
var r=e.chart.vlSpec;r.description=t[e.shorthand].annotation,n.push(r)});var r=window.open();r.document.open(),r.document.write("<html><body><pre>"+JSON.stringify(n,null,2)+"</pre></body></html>"),r.document.close()},o.load=function(){this.list=n.get("bookmarkList")||[];var t=this.dict;e.forEach(this.list,function(n){t[n.shorthand]=e.cloneDeep(n.chart)})},o.clear=function(){this.list.splice(0,this.list.length),this.dict={},this.save(),r.logInteraction(r.actions.BOOKMARK_CLEAR)},o.add=function(t,n){var a=t.shorthand;t.timeAdded=(new Date).getTime(),t.schema=i.schema,this.dict[t.shorthand]=e.cloneDeep(t),this.list.push({shorthand:a,list:n,chart:e.cloneDeep(t)}),this.save(),r.logInteraction(r.actions.BOOKMARK_ADD,a,{list:n})},o.remove=function(e){var t,n=e.shorthand,i=this.list.findIndex(function(e){return e.shorthand===n});i>=0&&(t=this.list.splice(i,1)[0]),delete this.dict[e.shorthand],this.save(),r.logInteraction(r.actions.BOOKMARK_REMOVE,n,{list:(t||{}).list})},o.reorder=function(){this.save()},o.isBookmarked=function(e){return this.dict.hasOwnProperty(e)},o.logBookmarksClosed=function(){r.logInteraction(r.actions.BOOKMARK_CLOSE)},new a}])}(),function(){"use strict";angular.module("vlui").service("Chart",["cql","_",function(e,t){function n(t){if(!t)return{vlSpec:null,fieldSet:null,shorthand:null,enumSpecIndex:null};var n=t instanceof e.model.SpecQueryModelGroup?t.getTopSpecQueryModel():t;return{enumSpecIndex:n.enumSpecIndex,fieldSet:n.specQuery.encodings,vlSpec:n.toSpec(),shorthand:n.toShorthand()}}function r(e){var n=t.clone(e.encoding),r=n.x,i=n.y;n.y=r,n.x=i;var a=n.row,o=n.column;n.row=o,n.column=a,e.encoding=n}var i={getChart:n,transpose:r};return i}])}(),function(){"use strict";angular.module("vlui").factory("Config",function(){var e={};return e.data={},e.config={},e.getConfig=function(){return{}},e.getData=function(){return e.data},e.large=function(){return{cell:{width:300,height:300},facet:{cell:{width:150,height:150}},overlay:{line:!0},scale:{useRawDomain:!0}}},e.small=function(){return{facet:{cell:{width:150,height:150}},overlay:{line:!0},scale:{useRawDomain:!0}}},e.updateDataset=function(t,n){t.values?(e.data.values=t.values,delete e.data.url,e.data.formatType=void 0):(e.data.url=t.url,delete e.data.values,e.data.formatType=n)},e})}(),function(){"use strict";angular.module("vlui").service("FilterManager",["_","vl","Dataset","Logger",function(e,t,n,r){function i(e){var r=n.schema.type(e);switch(r){case t.type.NOMINAL:case t.type.ORDINAL:return{enabled:!0,field:e,"in":n.schema.domain({field:e})};case t.type.QUANTITATIVE:return{enabled:!0,field:e,range:[n.schema.stats({field:e}).min,n.schema.stats({field:e}).max]};case t.type.TEMPORAL:return{enabled:!0,field:e,range:[n.schema.stats({field:e}).min,n.schema.stats({field:e}).max]}}}var a=this;a.filterIndex={},this.toggle=function(e){a.filterIndex[e]?a.filterIndex[e].enabled=!a.filterIndex[e].enabled:a.filterIndex[e]=i(e),r.logInteraction(a.filterIndex[e].enabled?r.actions.FILTER_ENABLED:r.actions.FILTER_DISABLED,e,a.filterIndex[e])},this.add=function(e){return!a.filterIndex[e]&&(a.filterIndex[e]=i(e),r.logInteraction(r.actions.FILTER_ENABLED,e,a.filterIndex[e]),!0)},this.reset=function(n,r){return r?a.filterIndex={}:e.forEach(a.filterIndex,function(e,t){a.filterIndex[t].enabled&&(a.filterIndex[t]=i(t))}),n&&n.forEach(function(e){a.filterIndex[e.field]=t.util.extend({enabled:!0},e)}),a.filterIndex},this.getVlFilter=function(){var t=e.reduce(a.filterIndex,function(t,r){var i=r.field,a=r.timeUnit;if(r["in"]){if(0===r["in"].length||r["in"].length===n.schema.cardinality({field:i}))return t}else if(r.range){var o=n.schema.domain({field:i,timeUnit:a});if(r.range[0]===o[0]&&r.range[1]===o[1])return t}return r.enabled&&t.push(e.omit(r,"enabled")),t},[]);return t.length?t:void 0}}])}(),function(){"use strict";angular.module("vlui").service("Logger",["$location","$window","$webSql","_","consts","Analytics","Papa","Blob","URL",function(e,t,n,r,i,a,o,s,l){var u={};if(u.levels={OFF:{id:"OFF",rank:0},TRACE:{id:"TRACE",rank:1},DEBUG:{id:"DEBUG",rank:2},INFO:{id:"INFO",rank:3},WARN:{id:"WARN",rank:4},ERROR:{id:"ERROR",rank:5},FATAL:{id:"FATAL",rank:6}},u.actions={INITIALIZE:{category:"DATA",id:"INITIALIZE",level:u.levels.DEBUG},UNDO:{category:"DATA",id:"UNDO",level:u.levels.INFO},REDO:{category:"DATA",id:"REDO",level:u.levels.INFO},DATASET_CHANGE:{category:"DATA",id:"DATASET_CHANGE",level:u.levels.INFO},DATASET_OPEN:{category:"DATA",id:"DATASET_OPEN",level:u.levels.INFO},DATASET_NEW_PASTE:{category:"DATA",id:"DATASET_NEW_PASTE",level:u.levels.INFO},DATASET_NEW_URL:{category:"DATA",id:"DATASET_NEW_URL",level:u.levels.INFO},BOOKMARK_ADD:{category:"BOOKMARK",id:"BOOKMARK_ADD",level:u.levels.INFO},BOOKMARK_REMOVE:{category:"BOOKMARK",id:"BOOKMARK_REMOVE",level:u.levels.INFO},BOOKMARK_OPEN:{category:"BOOKMARK",id:"BOOKMARK_OPEN",level:u.levels.INFO},BOOKMARK_CLOSE:{category:"BOOKMARK",id:"BOOKMARK_CLOSE",level:u.levels.INFO},BOOKMARK_CLEAR:{category:"BOOKMARK",id:"BOOKMARK_CLEAR",level:u.levels.INFO},BOOKMARK_ANNOTATE:{category:"BOOKMARK",id:"BOOKMARK_ANNOTATE",level:u.levels.INFO},CHART_MOUSEOVER:{category:"CHART",id:"CHART_MOUSEOVER",level:u.levels.DEBUG},CHART_MOUSEOUT:{category:"CHART",id:"CHART_MOUSEOUT",level:u.levels.DEBUG},CHART_RENDER:{category:"CHART",id:"CHART_RENDER",level:u.levels.DEBUG},CHART_EXPOSE:{category:"CHART",id:"CHART_EXPOSE",level:u.levels.DEBUG},CHART_TOOLTIP:{category:"CHART",id:"CHART_TOOLTIP",level:u.levels.DEBUG},CHART_TOOLTIP_END:{category:"CHART",id:"CHART_TOOLTIP_END",level:u.levels.DEBUG},SORT_TOGGLE:{category:"CHART",id:"SORT_TOGGLE",level:u.levels.INFO},MARK_TOGGLE:{category:"CHART",id:"MARK_TOGGLE",level:u.levels.INFO},DRILL_DOWN_OPEN:{category:"CHART",id:"DRILL_DOWN_OPEN",level:u.levels.INFO},DRILL_DOWN_CLOSE:{category:"CHART",id:"DRILL_DOWN_CLOSE",level:u.levels.INFO},LOG_TOGGLE:{category:"CHART",id:"LOG_TOGGLE",level:u.levels.INFO},TRANSPOSE_TOGGLE:{category:"CHART",id:"TRANSPOSE_TOGGLE",level:u.levels.INFO},NULL_FILTER_TOGGLE:{category:"CHART",id:"NULL_FILTER_TOGGLE",level:u.levels.INFO},CLUSTER_SELECT:{category:"CHART",id:"CLUSTER_SELECT",level:u.levels.INFO},LOAD_MORE:{category:"CHART",id:"LOAD_MORE",level:u.levels.INFO},FIELDS_CHANGE:{category:"FIELDS",id:"FIELDS_CHANGE",level:u.levels.INFO},FIELDS_RESET:{category:"FIELDS",id:"FIELDS_RESET",level:u.levels.INFO},FUNC_CHANGE:{category:"FIELDS",id:"FUNC_CHANGE",level:u.levels.INFO},ADD_FIELD:{category:"FIELDS",id:"ADD_FIELD",level:u.levels.INFO},FIELDDEF_HIGHLIGHTED:{category:"FIELDINFO",id:"FIELDDEF_HIGHLIGHTED",level:u.levels.INFO},FIELDDEF_UNHIGHLIGHTED:{category:"FIELDINFO",id:"FIELDDEF_UNHIGHLIGHTED",level:u.levels.INFO},ADD_WILDCARD:{category:"WILDCARD",id:"ADD_WILDCARD",level:u.levels.INFO},ADD_WILDCARD_FIELD:{category:"WILDCARD",id:"ADD_WILDCARD_FIELD",level:u.levels.INFO},REMOVE_WILDCARD_FIELD:{category:"WILDCARD",id:"REMOVE_WILDCARD_FIELD",level:u.levels.INFO},REMOVE_WILDCARD:{category:"WILDCARD",id:"REMOVE_WILDCARD",level:u.levels.INFO},SPEC_CLEAN:{category:"POLESTAR",id:"SPEC_CLEAN",level:u.levels.INFO},SPEC_CHANGE:{category:"POLESTAR",id:"SPEC_CHANGE",level:u.levels.INFO},FIELD_DROP:{category:"POLESTAR",id:"FIELD_DROP",level:u.levels.INFO},FIELD_REMOVED:{category:"POLESTAR",id:"FIELD_REMOVED",level:u.levels.INFO},MARK_CHANGE:{category:"POLESTAR",id:"MARK_CHANGE",level:u.levels.INFO},FILTER_ENABLED:{category:"FILTER",id:"FILTER_ENABLED",level:u.levels.INFO},FILTER_DISABLED:{category:"FILTER",id:"FILTER_DISABLED",level:u.levels.INFO},FILTER_CHANGE:{category:"FILTER",id:"FILTER_CHANGE",level:u.levels.INFO},FILTER_CLEAR:{category:"FILTER",id:"FILTER_CLEAR",level:u.levels.INFO},SPEC_SELECT:{category:"pcagnosticsviz",id:"SPEC_SELECT",level:u.levels.INFO},GUIDEPLOT_SELECT:{category:"GUIDEPLOT",id:"GUIDEPLOT_SELECT",level:u.levels.INFO},EXPANDED_SELECT:{category:"EXPANDED",id:"EXPANDED_SELECT",level:u.levels.INFO},FEATURE_QUICKNAVIGATION:{category:"NAVIGATION",id:"FEATURE_QUICKNAVIGATION",level:u.levels.INFO},MAINVIEW_NAVIGATION:{category:"NAVIGATION",id:"MAINVIEW_NAVIGATION",level:u.levels.INFO},FEATURE_SELECT:{category:"FEATURE",id:"FEATURE_SELECT",level:u.levels.INFO},ABSTRACT_SELECT:{category:"ABTRACT",id:"ABSTRACT_SELECT",level:u.levels.INFO},DIMENTION_SELECT:{category:"DIMENSION",id:"DIMENTION_SELECT",level:u.levels.INFO},TYPEPLOT_SELECT:{category:"TYPEPLOT",id:"TYPEPLOT_SELECT",level:u.levels.INFO},MOUSE_OVER:{category:"MOUSE",id:"MOUSE_OVER",level:u.levels.INFO},SET_ALTERNATIVES_TYPE:{category:"ALTERNATIVES",id:"SET_ALTERNATIVES_TYPE",level:u.levels.INFO},TOGGLE_SHOW_ALTERNATIVES:{category:"ALTERNATIVES",id:"TOGGLE_SHOW_ALTERNATIVES",level:u.levels.INFO},TOGGLE_HIDE_ALTERNATIVES:{category:"ALTERNATIVES",id:"TOGGLE_HIDE_ALTERNATIVES",level:u.levels.INFO},SPEC_PREVIEW_ENABLED:{category:"PREVIEW",id:"SPEC_PREVIEW_ENABLED",level:u.levels.INFO},SPEC_PREVIEW_DISABLED:{category:"PREVIEW",id:"SPEC_PREVIEW_DISABLED",level:u.levels.INFO}},void 0===t.openDatabase)return console.warn("No websql support and thus no logging."),u.logInteraction=function(){},u;var c=u.userid=e.search().userid;return u.db=n.openDatabase("logs","1.0","Logs",2097152),u.tableName="Logs_"+i.appId,u.createTableIfNotExists=function(){u.db.createTable(u.tableName,{userid:{type:"INTEGER","null":"NOT NULL"},time:{type:"TIMESTAMP","null":"NOT NULL"},actionCategory:{type:"TEXT","null":"NOT NULL"},actionId:{type:"TEXT","null":"NOT NULL"},label:{type:"TEXT","null":"NOT NULL"},data:{type:"TEXT"}})},u.clear=function(){var e=t.confirm("Really clear the logs?");e===!0&&(u.db.dropTable(u.tableName),u.createTableIfNotExists())},u["export"]=function(){u.db.selectAll(u.tableName).then(function(e){if(0===e.rows.length)return void console.warn("No logs");for(var t=[],n=0;n<e.rows.length;n++)t.push(e.rows.item(n));var r=o.unparse(t),i=new s([r],{type:"text/csv"}),a=l.createObjectURL(i),f=angular.element("<a/>");f.attr({href:a,target:"_blank",download:u.tableName+"_"+c+"_"+(new Date).toISOString()+".csv"})[0].click()})},u.logInteraction=function(e,t,n){if(i.logging){n?n.value:void 0;if(e.level.rank>=u.levels[i.logLevel||"INFO"].rank){if(i.logToWebSql){var a={userid:c,time:(new Date).toISOString(),actionCategory:e.category,actionId:e.id,label:r.isObject(t)?JSON.stringify(t):t,data:n?JSON.stringify(n):void 0};u.db.insert(u.tableName,a)}e.level.rank>=u.levels[i.logPrintLevel||"INFO"].rank&&console.log("[Logging] ",e.id,t,n)}}},u.createTableIfNotExists(),console.log("app:",i.appId,"started"),u.logInteraction(u.actions.INITIALIZE,i.appId),u}])}(),function(){"use strict";angular.module("vlui").service("Pills",["ANY","consts","util","vl","cql",function(e,t,n,r,i){function a(t){return t&&0===t.indexOf(e)}function o(){for(var t=n.keys(m.pills).filter(function(t){return 0===t.indexOf(e)}),r=0;r<t.length;r++){var i=t[r];if(!m.pills[i].field)return i}throw new Error("No empty any channel available!")}function s(){for(var n=0;m.pills[e+n];)n++;return!t.maxAnyShelf||n>=t.maxAnyShelf?null:e+n}function l(e,t,n){m.pills[e]=t,n&&m.listener&&m.listener.set(e,t)}function u(e){return m.pills[e]}function c(e){return!(!m.listener||!m.listener.isEnumeratedChannel)&&m.listener.isEnumeratedChannel(e,m.pills[e])}function f(e){return!(!m.listener||!m.listener.isEnumeratedField)&&m.listener.isEnumeratedField(e,m.pills[e])}function d(e){delete m.pills[e],m.listener&&m.listener.remove(e)}function h(e,t){m.dragging=e,m.isDraggingWildcard=i.enumSpec.isEnumSpec(e.field),m.cidDragFrom=t}function p(){m.dragging=null}function g(e){m.listener&&m.listener.dragDrop(e,m.cidDragFrom)}var m={isAnyChannel:a,getNextAnyChannelId:s,getEmptyAnyChannelId:o,isEnumeratedChannel:c,isEnumeratedField:f,get:u,dragDrop:g,dragStart:h,dragStop:p,set:l,remove:d,countFieldDef:{field:"*",aggregate:r.aggregate.AggregateOp.COUNT,type:r.type.QUANTITATIVE},pills:{},highlighted:{},dragging:null,isDraggingWildcard:null,cidDragFrom:null,listener:null};return["add","parse","select","preview","update","reset","rescale","sort","toggleFilterInvalid","transpose","addWildcardField","addWildcard","removeWildcardField","removeWildcard"].forEach(function(e){m[e]=function(){if(m.listener&&m.listener[e])return m.listener[e].apply(null,arguments)}}),m}])}(),function(){"use strict";angular.module("vlui").factory("Schema",["vg","vl","vlSchema",function(e,t,n){var r={};return r.schema=n,r.getChannelSchema=function(e){var t=null,n=r.schema.definitions.Encoding.properties[e],i=n?n.$ref||n.oneOf[0].$ref:"FieldDef";return t=i.slice(i.lastIndexOf("/")+1),r.schema.definitions[t]},r}])}(),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.ZSchema=e()}}(function(){var e;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){function r(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var i=document.createElement("div"),a=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return a.observe(i,{attributes:!0}),function(e){r.length||i.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],2:[function(e,t,n){function r(e,t,n){var r=null==e?void 0:i(e,a(t),t+"");return void 0===r?n:r}var i=e("lodash._baseget"),a=e("lodash._topath");t.exports=r},{"lodash._baseget":3,"lodash._topath":4}],3:[function(e,t,n){function r(e,t,n){if(null!=e){void 0!==n&&n in i(e)&&(t=[n]);for(var r=0,a=t.length;null!=e&&a>r;)e=e[t[r++]];return r&&r==a?e:void 0}}function i(e){return a(e)?e:Object(e)}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],4:[function(e,t,n){function r(e){return null==e?"":e+""}function i(e){if(a(e))return e;var t=[];return r(e).replace(o,function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)}),t}var a=e("lodash.isarray"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=i},{"lodash.isarray":5}],5:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e,t){var n=null==e?void 0:e[t];return l(n)?n:void 0}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&y>=e}function o(e){return s(e)&&g.call(e)==c}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return null!=e&&(o(e)?m.test(h.call(e)):r(e)&&f.test(e))}var u="[object Array]",c="[object Function]",f=/^\[object .+?Constructor\]$/,d=Object.prototype,h=Function.prototype.toString,p=d.hasOwnProperty,g=d.toString,m=RegExp("^"+h.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=i(Array,"isArray"),y=9007199254740991,b=v||function(e){return r(e)&&a(e.length)&&g.call(e)==u};t.exports=b},{}],6:[function(t,n,r){!function(t,i){"undefined"!=typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&"object"==typeof e.amd?e(i):this[t]=i()}("validator",function(e){"use strict";function t(e,t){e=e||{};for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function n(e){var t="(\\"+e.symbol.replace(/\./g,"\\.")+")"+(e.require_symbol?"":"?"),n="-?",r="[1-9]\\d*",i="[1-9]\\d{0,2}(\\"+e.thousands_separator+"\\d{3})*",a=["0",r,i],o="("+a.join("|")+")?",s="(\\"+e.decimal_separator+"\\d{2})?",l=o+s;return e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?l+=n:e.negative_sign_before_digits&&(l=n+l)),e.allow_negative_sign_placeholder?l="( (?!\\-))?"+l:e.allow_space_after_symbol?l=" ?"+l:e.allow_space_after_digits&&(l+="( (?!$))?"),e.symbol_after_digits?l+=t:l=t+l,e.allow_negatives&&(e.parens_for_negatives?l="(\\("+l+"\\)|"+l+")":e.negative_sign_before_digits||e.negative_sign_after_digits||(l=n+l)),new RegExp("^(?!-? )(?=.*\\d)"+l+"$")}e={version:"4.0.5"};var r=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,i=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,a=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,o=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,s=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,l=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,u=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/,c=/^(?:[0-9]{9}X|[0-9]{10})$/,f=/^(?:[0-9]{13})$/,d=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/,h=/^[0-9A-F]{1,4}$/i,p={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},g=/^[A-Z]+$/i,m=/^[0-9A-Z]+$/i,v=/^[-+]?[0-9]+$/,y=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,b=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,_=/^[0-9A-F]+$/i,E=/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,x=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,S=/^[\x00-\x7F]+$/,T=/[^\x00-\x7F]/,w=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,A=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,C=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,k=/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i,O={"zh-CN":/^(\+?0?86\-?)?1[345789]\d{9}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"pt-PT":/^(\+351)?9[1236]\d{7}$/,"el-GR":/^(\+30)?((2\d{9})|(69\d{8}))$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-US":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"en-ZM":/^(\+26)?09[567]\d{7}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/},I=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;e.extend=function(t,n){e[t]=function(){var t=Array.prototype.slice.call(arguments);return t[0]=e.toString(t[0]),n.apply(e,t)}},e.init=function(){for(var t in e)"function"==typeof e[t]&&"toString"!==t&&"toDate"!==t&&"extend"!==t&&"init"!==t&&e.extend(t,e[t])},e.toString=function(e){return"object"==typeof e&&null!==e&&e.toString?e=e.toString():null===e||"undefined"==typeof e||isNaN(e)&&!e.length?e="":"string"!=typeof e&&(e+=""),e},e.toDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)?e:(e=Date.parse(e),isNaN(e)?null:new Date(e))},e.toFloat=function(e){return parseFloat(e)},e.toInt=function(e,t){return parseInt(e,t||10)},e.toBoolean=function(e,t){return t?"1"===e||"true"===e:"0"!==e&&"false"!==e&&""!==e},e.equals=function(t,n){return t===e.toString(n)},e.contains=function(t,n){return t.indexOf(e.toString(n))>=0},e.matches=function(e,t,n){return"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,n)),t.test(e)};var M={allow_display_name:!1,allow_utf8_local_part:!0,require_tld:!0};e.isEmail=function(n,l){if(l=t(l,M),l.allow_display_name){var u=n.match(s);u&&(n=u[1])}var c=n.split("@"),f=c.pop(),d=c.join("@"),h=f.toLowerCase();if(("gmail.com"===h||"googlemail.com"===h)&&(d=d.replace(/\./g,"").toLowerCase()),!e.isByteLength(d,0,64)||!e.isByteLength(f,0,256))return!1;if(!e.isFQDN(f,{require_tld:l.require_tld}))return!1;if('"'===d[0])return d=d.slice(1,d.length-1),l.allow_utf8_local_part?o.test(d):i.test(d);for(var p=l.allow_utf8_local_part?a:r,g=d.split("."),m=0;m<g.length;m++)if(!p.test(g[m]))return!1;return!0};var N={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};e.isURL=function(n,r){if(!n||n.length>=2083||/\s/.test(n))return!1;if(0===n.indexOf("mailto:"))return!1;r=t(r,N);var i,a,o,s,l,u,c;if(c=n.split("://"),c.length>1){if(i=c.shift(),r.require_valid_protocol&&-1===r.protocols.indexOf(i))return!1}else{if(r.require_protocol)return!1;r.allow_protocol_relative_urls&&"//"===n.substr(0,2)&&(c[0]=n.substr(2))}return n=c.join("://"),c=n.split("#"),n=c.shift(),c=n.split("?"),n=c.shift(),c=n.split("/"),n=c.shift(),c=n.split("@"),!(c.length>1&&(a=c.shift(),a.indexOf(":")>=0&&a.split(":").length>2))&&(s=c.join("@"),c=s.split(":"),o=c.shift(),!(c.length&&(u=c.join(":"),l=parseInt(u,10),!/^[0-9]+$/.test(u)||0>=l||l>65535))&&(!(!e.isIP(o)&&!e.isFQDN(o,r)&&"localhost"!==o)&&((!r.host_whitelist||-1!==r.host_whitelist.indexOf(o))&&(!r.host_blacklist||-1===r.host_blacklist.indexOf(o)))))},e.isIP=function(t,n){if(n=e.toString(n),!n)return e.isIP(t,4)||e.isIP(t,6);if("4"===n){if(!d.test(t))return!1;var r=t.split(".").sort(function(e,t){return e-t});return r[3]<=255}if("6"===n){var i=t.split(":"),a=!1,o=e.isIP(i[i.length-1],4),s=o?7:8;if(i.length>s)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(i.shift(),i.shift(),a=!0):"::"===t.substr(t.length-2)&&(i.pop(),i.pop(),a=!0);for(var l=0;l<i.length;++l)if(""===i[l]&&l>0&&l<i.length-1){if(a)return!1;a=!0}else if(o&&l==i.length-1);else if(!h.test(i[l]))return!1;return a?i.length>=1:i.length===s}return!1};var D={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.isFQDN=function(e,n){n=t(n,D),n.allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var r=e.split(".");if(n.require_tld){var i=r.pop();if(!r.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(i))return!1}for(var a,o=0;o<r.length;o++){if(a=r[o],n.allow_underscores){if(a.indexOf("__")>=0)return!1;a=a.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(a))return!1;if(/[\uff01-\uff5e]/.test(a))return!1;if("-"===a[0]||"-"===a[a.length-1]||a.indexOf("---")>=0)return!1}return!0},e.isBoolean=function(e){return["true","false","1","0"].indexOf(e)>=0},e.isAlpha=function(e){return g.test(e)},e.isAlphanumeric=function(e){return m.test(e)},e.isNumeric=function(e){return v.test(e)},e.isDecimal=function(e){return""!==e&&E.test(e)},e.isHexadecimal=function(e){return _.test(e)},e.isHexColor=function(e){return x.test(e)},e.isLowercase=function(e){return e===e.toLowerCase()},e.isUppercase=function(e){return e===e.toUpperCase()},e.isInt=function(e,t){return t=t||{},y.test(e)&&(!t.hasOwnProperty("min")||e>=t.min)&&(!t.hasOwnProperty("max")||e<=t.max)},e.isFloat=function(e,t){return t=t||{},""!==e&&b.test(e)&&(!t.hasOwnProperty("min")||e>=t.min)&&(!t.hasOwnProperty("max")||e<=t.max)},e.isDivisibleBy=function(t,n){return e.toFloat(t)%e.toInt(n)===0},e.isNull=function(e){return 0===e.length},e.isLength=function(e,t,n){var r=e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],i=e.length-r.length;return i>=t&&("undefined"==typeof n||n>=i)},e.isByteLength=function(e,t,n){var r=encodeURI(e).split(/%..|./).length-1;return r>=t&&("undefined"==typeof n||n>=r)},e.isUUID=function(e,t){var n=p[t?t:"all"];return n&&n.test(e)},e.isDate=function(e){return!isNaN(Date.parse(e))},e.isAfter=function(t,n){var r=e.toDate(n||new Date),i=e.toDate(t);return!!(i&&r&&i>r)},e.isBefore=function(t,n){var r=e.toDate(n||new Date),i=e.toDate(t);return i&&r&&r>i},e.isIn=function(t,n){var r;if("[object Array]"===Object.prototype.toString.call(n)){var i=[];for(r in n)i[r]=e.toString(n[r]);return i.indexOf(t)>=0}return"object"==typeof n?n.hasOwnProperty(t):!(!n||"function"!=typeof n.indexOf)&&n.indexOf(t)>=0},e.isCreditCard=function(e){var t=e.replace(/[^0-9]+/g,"");if(!l.test(t))return!1;for(var n,r,i,a=0,o=t.length-1;o>=0;o--)n=t.substring(o,o+1),r=parseInt(n,10),i?(r*=2,a+=r>=10?r%10+1:r):a+=r,i=!i;return!(a%10!==0||!t)},e.isISIN=function(e){if(!u.test(e))return!1;for(var t,n,r=e.replace(/[A-Z]/g,function(e){return parseInt(e,36)}),i=0,a=!0,o=r.length-2;o>=0;o--)t=r.substring(o,o+1),n=parseInt(t,10),a?(n*=2,i+=n>=10?n+1:n):i+=n,a=!a;return parseInt(e.substr(e.length-1),10)===(1e4-i)%10},e.isISBN=function(t,n){if(n=e.toString(n),!n)return e.isISBN(t,10)||e.isISBN(t,13);var r,i=t.replace(/[\s-]+/g,""),a=0;if("10"===n){if(!c.test(i))return!1;for(r=0;9>r;r++)a+=(r+1)*i.charAt(r);if(a+="X"===i.charAt(9)?100:10*i.charAt(9),a%11===0)return!!i}else if("13"===n){if(!f.test(i))return!1;var o=[1,3];for(r=0;12>r;r++)a+=o[r%2]*i.charAt(r);if(i.charAt(12)-(10-a%10)%10===0)return!!i}return!1},e.isMobilePhone=function(e,t){return t in O&&O[t].test(e)};var L={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};e.isCurrency=function(e,r){return r=t(r,L),n(r).test(e)},e.isJSON=function(e){try{var t=JSON.parse(e);return!!t&&"object"==typeof t}catch(n){}return!1},e.isMultibyte=function(e){return T.test(e)},e.isAscii=function(e){return S.test(e)},e.isFullWidth=function(e){return w.test(e)},e.isHalfWidth=function(e){return A.test(e)},e.isVariableWidth=function(e){return w.test(e)&&A.test(e)},e.isSurrogatePair=function(e){return C.test(e)},e.isBase64=function(e){return k.test(e)},e.isMongoId=function(t){return e.isHexadecimal(t)&&24===t.length},e.isISO8601=function(e){return I.test(e)},e.ltrim=function(e,t){var n=t?new RegExp("^["+t+"]+","g"):/^\s+/g;return e.replace(n,"")},e.rtrim=function(e,t){var n=t?new RegExp("["+t+"]+$","g"):/\s+$/g;return e.replace(n,"")},e.trim=function(e,t){var n=t?new RegExp("^["+t+"]+|["+t+"]+$","g"):/^\s+|\s+$/g;return e.replace(n,"")},e.escape=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")},e.stripLow=function(t,n){var r=n?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return e.blacklist(t,r)},e.whitelist=function(e,t){return e.replace(new RegExp("[^"+t+"]+","g"),"")},e.blacklist=function(e,t){return e.replace(new RegExp("["+t+"]+","g"),"")};var $={lowercase:!0};return e.normalizeEmail=function(n,r){if(r=t(r,$),!e.isEmail(n))return!1;var i=n.split("@",2);if(i[1]=i[1].toLowerCase(),"gmail.com"===i[1]||"googlemail.com"===i[1]){if(i[0]=i[0].toLowerCase().replace(/\./g,""),"+"===i[0][0])return!1;i[0]=i[0].split("+")[0],i[1]="gmail.com"}else r.lowercase&&(i[0]=i[0].toLowerCase());return i.join("@")},e.init(),e})},{}],7:[function(e,t,n){"use strict";t.exports={INVALID_TYPE:"Expected type {0} but found type {1}",INVALID_FORMAT:"Object didn't pass validation for format {0}: {1}",ENUM_MISMATCH:"No enum match for: {0}",ANY_OF_MISSING:"Data does not match any schemas from 'anyOf'",ONE_OF_MISSING:"Data does not match any schemas from 'oneOf'",ONE_OF_MULTIPLE:"Data is valid against more than one schema from 'oneOf'",NOT_PASSED:"Data matches schema from 'not'",ARRAY_LENGTH_SHORT:"Array is too short ({0}), minimum {1}",ARRAY_LENGTH_LONG:"Array is too long ({0}), maximum {1}",ARRAY_UNIQUE:"Array items are not unique (indexes {0} and {1})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",MULTIPLE_OF:"Value {0} is not a multiple of {1}",MINIMUM:"Value {0} is less than minimum {1}",MINIMUM_EXCLUSIVE:"Value {0} is equal or less than exclusive minimum {1}",MAXIMUM:"Value {0} is greater than maximum {1}",MAXIMUM_EXCLUSIVE:"Value {0} is equal or greater than exclusive maximum {1}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({0}), minimum {1}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({0}), maximum {1}",OBJECT_MISSING_REQUIRED_PROPERTY:"Missing required property: {0}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed: {0}",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {0} (due to key: {1})",MIN_LENGTH:"String is too short ({0} chars), minimum {1}",MAX_LENGTH:"String is too long ({0} chars), maximum {1}",PATTERN:"String does not match pattern {0}: {1}",KEYWORD_TYPE_EXPECTED:"Keyword '{0}' is expected to be of type '{1}'",KEYWORD_UNDEFINED_STRICT:"Keyword '{0}' must be defined in strict mode",KEYWORD_UNEXPECTED:"Keyword '{0}' is not expected to appear in the schema",KEYWORD_MUST_BE:"Keyword '{0}' must be {1}",KEYWORD_DEPENDENCY:"Keyword '{0}' requires keyword '{1}'",KEYWORD_PATTERN:"Keyword '{0}' is not a valid RegExp pattern: {1}",KEYWORD_VALUE_TYPE:"Each element of keyword '{0}' array must be a '{1}'",UNKNOWN_FORMAT:"There is no validation function for format '{0}'",CUSTOM_MODE_FORCE_PROPERTIES:"{0} must define at least one property if present",REF_UNRESOLVED:"Reference has not been resolved during compilation: {0}",UNRESOLVABLE_REFERENCE:"Reference could not be resolved: {0}",SCHEMA_NOT_REACHABLE:"Validator was not able to read schema with uri: {0}",SCHEMA_TYPE_EXPECTED:"Schema is expected to be of type 'object'",SCHEMA_NOT_AN_OBJECT:"Schema is not an object: {0}",ASYNC_TIMEOUT:"{0} asynchronous task(s) have timed out after {1} ms",PARENT_SCHEMA_VALIDATION_FAILED:"Schema failed to validate against its parent schema, see inner errors for details.",REMOTE_NOT_VALID:"Remote reference didn't compile successfully: {0}"}},{}],8:[function(e,t,n){var r=e("validator"),i={date:function(e){if("string"!=typeof e)return!0;var t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(e);return null!==t&&!(t[2]<"01"||t[2]>"12"||t[3]<"01"||t[3]>"31")},"date-time":function(e){if("string"!=typeof e)return!0;var t=e.toLowerCase().split("t");if(!i.date(t[0]))return!1;var n=/^([0-9]{2}):([0-9]{2}):([0-9]{2})(.[0-9]+)?(z|([+-][0-9]{2}:[0-9]{2}))$/.exec(t[1]);return null!==n&&!(n[1]>"23"||n[2]>"59"||n[3]>"59")},email:function(e){return"string"!=typeof e||r.isEmail(e,{require_tld:!0})},hostname:function(e){if("string"!=typeof e)return!0;var t=/^[a-zA-Z](([-0-9a-zA-Z]+)?[0-9a-zA-Z])?(\.[a-zA-Z](([-0-9a-zA-Z]+)?[0-9a-zA-Z])?)*$/.test(e);if(t){if(e.length>255)return!1;for(var n=e.split("."),r=0;r<n.length;r++)if(n[r].length>63)return!1}return t},"host-name":function(e){return i.hostname.call(this,e)},ipv4:function(e){return"string"!=typeof e||r.isIP(e,4)},ipv6:function(e){return"string"!=typeof e||r.isIP(e,6)},regex:function(e){try{return RegExp(e),!0}catch(t){return!1}},uri:function(e){return this.options.strictUris?i["strict-uri"].apply(this,arguments):"string"!=typeof e||RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?").test(e)},"strict-uri":function(e){return"string"!=typeof e||r.isURL(e)}};t.exports=i},{validator:6}],9:[function(e,t,n){"use strict";var r=e("./FormatValidators"),i=e("./Report"),a=e("./Utils"),o={multipleOf:function(e,t,n){"number"==typeof n&&"integer"!==a.whatIs(n/t.multipleOf)&&e.addError("MULTIPLE_OF",[n,t.multipleOf],null,t.description)},maximum:function(e,t,n){"number"==typeof n&&(t.exclusiveMaximum!==!0?n>t.maximum&&e.addError("MAXIMUM",[n,t.maximum],null,t.description):n>=t.maximum&&e.addError("MAXIMUM_EXCLUSIVE",[n,t.maximum],null,t.description));
},exclusiveMaximum:function(){},minimum:function(e,t,n){"number"==typeof n&&(t.exclusiveMinimum!==!0?n<t.minimum&&e.addError("MINIMUM",[n,t.minimum],null,t.description):n<=t.minimum&&e.addError("MINIMUM_EXCLUSIVE",[n,t.minimum],null,t.description))},exclusiveMinimum:function(){},maxLength:function(e,t,n){"string"==typeof n&&a.ucs2decode(n).length>t.maxLength&&e.addError("MAX_LENGTH",[n.length,t.maxLength],null,t.description)},minLength:function(e,t,n){"string"==typeof n&&a.ucs2decode(n).length<t.minLength&&e.addError("MIN_LENGTH",[n.length,t.minLength],null,t.description)},pattern:function(e,t,n){"string"==typeof n&&RegExp(t.pattern).test(n)===!1&&e.addError("PATTERN",[t.pattern,n],null,t.description)},additionalItems:function(e,t,n){Array.isArray(n)&&t.additionalItems===!1&&Array.isArray(t.items)&&n.length>t.items.length&&e.addError("ARRAY_ADDITIONAL_ITEMS",null,null,t.description)},items:function(){},maxItems:function(e,t,n){Array.isArray(n)&&n.length>t.maxItems&&e.addError("ARRAY_LENGTH_LONG",[n.length,t.maxItems],null,t.description)},minItems:function(e,t,n){Array.isArray(n)&&n.length<t.minItems&&e.addError("ARRAY_LENGTH_SHORT",[n.length,t.minItems],null,t.description)},uniqueItems:function(e,t,n){if(Array.isArray(n)&&t.uniqueItems===!0){var r=[];a.isUniqueArray(n,r)===!1&&e.addError("ARRAY_UNIQUE",r,null,t.description)}},maxProperties:function(e,t,n){if("object"===a.whatIs(n)){var r=Object.keys(n).length;r>t.maxProperties&&e.addError("OBJECT_PROPERTIES_MAXIMUM",[r,t.maxProperties],null,t.description)}},minProperties:function(e,t,n){if("object"===a.whatIs(n)){var r=Object.keys(n).length;r<t.minProperties&&e.addError("OBJECT_PROPERTIES_MINIMUM",[r,t.minProperties],null,t.description)}},required:function(e,t,n){if("object"===a.whatIs(n))for(var r=t.required.length;r--;){var i=t.required[r];void 0===n[i]&&e.addError("OBJECT_MISSING_REQUIRED_PROPERTY",[i],null,t.description)}},additionalProperties:function(e,t,n){return void 0===t.properties&&void 0===t.patternProperties?o.properties.call(this,e,t,n):void 0},patternProperties:function(e,t,n){return void 0===t.properties?o.properties.call(this,e,t,n):void 0},properties:function(e,t,n){if("object"===a.whatIs(n)){var r=void 0!==t.properties?t.properties:{},i=void 0!==t.patternProperties?t.patternProperties:{};if(t.additionalProperties===!1){var o=Object.keys(n),s=Object.keys(r),l=Object.keys(i);o=a.difference(o,s);for(var u=l.length;u--;)for(var c=RegExp(l[u]),f=o.length;f--;)c.test(o[f])===!0&&o.splice(f,1);if(o.length>0){var d=this.options.assumeAdditional.length;if(d)for(;d--;){var h=o.indexOf(this.options.assumeAdditional[d]);-1!==h&&o.splice(h,1)}o.length>0&&e.addError("OBJECT_ADDITIONAL_PROPERTIES",[o],null,t.description)}}}},dependencies:function(e,t,r){if("object"===a.whatIs(r))for(var i=Object.keys(t.dependencies),o=i.length;o--;){var s=i[o];if(r[s]){var l=t.dependencies[s];if("object"===a.whatIs(l))n.validate.call(this,e,l,r);else for(var u=l.length;u--;){var c=l[u];void 0===r[c]&&e.addError("OBJECT_DEPENDENCY_KEY",[c,s],null,t.description)}}}},"enum":function(e,t,n){for(var r=!1,i=t["enum"].length;i--;)if(a.areEqual(n,t["enum"][i])){r=!0;break}r===!1&&e.addError("ENUM_MISMATCH",[n],null,t.description)},allOf:function(e,t,r){for(var i=t.allOf.length;i--;){var a=n.validate.call(this,e,t.allOf[i],r);if(this.options.breakOnFirstError&&a===!1)break}},anyOf:function(e,t,r){for(var a=[],o=!1,s=t.anyOf.length;s--&&o===!1;){var l=new i(e);a.push(l),o=n.validate.call(this,l,t.anyOf[s],r)}o===!1&&e.addError("ANY_OF_MISSING",void 0,a,t.description)},oneOf:function(e,t,r){for(var a=0,o=[],s=t.oneOf.length;s--;){var l=new i(e,{maxErrors:1});o.push(l),n.validate.call(this,l,t.oneOf[s],r)===!0&&a++}0===a?e.addError("ONE_OF_MISSING",void 0,o,t.description):a>1&&e.addError("ONE_OF_MULTIPLE",null,null,t.description)},not:function(e,t,r){var a=new i(e);n.validate.call(this,a,t.not,r)===!0&&e.addError("NOT_PASSED",null,null,t.description)},definitions:function(){},format:function(e,t,n){var i=r[t.format];"function"==typeof i?2===i.length?e.addAsyncTask(i,[n],function(r){r!==!0&&e.addError("INVALID_FORMAT",[t.format,n],null,t.description)}):i.call(this,n)!==!0&&e.addError("INVALID_FORMAT",[t.format,n],null,t.description):this.options.ignoreUnknownFormats!==!0&&e.addError("UNKNOWN_FORMAT",[t.format],null,t.description)}},s=function(e,t,r){var i=r.length;if(Array.isArray(t.items))for(;i--;)i<t.items.length?(e.path.push(i.toString()),n.validate.call(this,e,t.items[i],r[i]),e.path.pop()):"object"==typeof t.additionalItems&&(e.path.push(i.toString()),n.validate.call(this,e,t.additionalItems,r[i]),e.path.pop());else if("object"==typeof t.items)for(;i--;)e.path.push(i.toString()),n.validate.call(this,e,t.items,r[i]),e.path.pop()},l=function(e,t,r){var i=t.additionalProperties;(i===!0||void 0===i)&&(i={});for(var a=t.properties?Object.keys(t.properties):[],o=t.patternProperties?Object.keys(t.patternProperties):[],s=Object.keys(r),l=s.length;l--;){var u=s[l],c=r[u],f=[];-1!==a.indexOf(u)&&f.push(t.properties[u]);for(var d=o.length;d--;){var h=o[d];RegExp(h).test(u)===!0&&f.push(t.patternProperties[h])}for(0===f.length&&i!==!1&&f.push(i),d=f.length;d--;)e.path.push(u),n.validate.call(this,e,f[d],c),e.path.pop()}};n.validate=function(e,t,n){e.commonErrorMessage="JSON_OBJECT_VALIDATION_FAILED";var r=a.whatIs(t);if("object"!==r)return e.addError("SCHEMA_NOT_AN_OBJECT",[r],null,t.description),!1;var i=Object.keys(t);if(0===i.length)return!0;var u=!1;if(e.rootSchema||(e.rootSchema=t,u=!0),void 0!==t.$ref){for(var c=99;t.$ref&&c>0;){if(!t.__$refResolved){e.addError("REF_UNRESOLVED",[t.$ref],null,t.description);break}if(t.__$refResolved===t)break;t=t.__$refResolved,i=Object.keys(t),c--}if(0===c)throw new Error("Circular dependency by $ref references!")}var f=a.whatIs(n);if(t.type)if("string"==typeof t.type){if(f!==t.type&&("integer"!==f||"number"!==t.type)&&(e.addError("INVALID_TYPE",[t.type,f],null,t.description),this.options.breakOnFirstError))return!1}else if(-1===t.type.indexOf(f)&&("integer"!==f||-1===t.type.indexOf("number"))&&(e.addError("INVALID_TYPE",[t.type,f],null,t.description),this.options.breakOnFirstError))return!1;for(var d=i.length;d--&&!(o[i[d]]&&(o[i[d]].call(this,e,t,n),e.errors.length&&this.options.breakOnFirstError)););return(0===e.errors.length||this.options.breakOnFirstError===!1)&&("array"===f?s.call(this,e,t,n):"object"===f&&l.call(this,e,t,n)),u&&(e.rootSchema=void 0),0===e.errors.length}},{"./FormatValidators":8,"./Report":11,"./Utils":15}],10:[function(e,t,n){"function"!=typeof Number.isFinite&&(Number.isFinite=function(e){return"number"==typeof e&&(e===e&&e!==1/0&&e!==-(1/0))})},{}],11:[function(e,t,n){(function(n){"use strict";function r(e,t){this.parentReport=e instanceof r?e:void 0,this.options=e instanceof r?e.options:e||{},this.reportOptions=t||{},this.errors=[],this.path=[],this.asyncTasks=[]}var i=e("lodash.get"),a=e("./Errors"),o=e("./Utils");r.prototype.isValid=function(){if(this.asyncTasks.length>0)throw new Error("Async tasks pending, can't answer isValid");return 0===this.errors.length},r.prototype.addAsyncTask=function(e,t,n){this.asyncTasks.push([e,t,n])},r.prototype.processAsyncTasks=function(e,t){function r(){n.nextTick(function(){var e=0===u.errors.length,n=e?void 0:u.errors;t(n,e)})}function i(e){return function(t){l||(e(t),0===--o&&r())}}var a=e||2e3,o=this.asyncTasks.length,s=o,l=!1,u=this;if(0===o||this.errors.length>0)return void r();for(;s--;){var c=this.asyncTasks[s];c[0].apply(null,c[1].concat(i(c[2])))}setTimeout(function(){o>0&&(l=!0,u.addError("ASYNC_TIMEOUT",[o,a]),t(u.errors,!1))},a)},r.prototype.getPath=function(){var e=[];return this.parentReport&&(e=e.concat(this.parentReport.path)),e=e.concat(this.path),this.options.reportPathAsArray!==!0&&(e="#/"+e.map(function(e){return o.isAbsoluteUri(e)?"uri("+e+")":e.replace(/\~/g,"~0").replace(/\//g,"~1")}).join("/")),e},r.prototype.getSchemaId=function(){if(!this.rootSchema)return null;var e=[];for(this.parentReport&&(e=e.concat(this.parentReport.path)),e=e.concat(this.path);e.length>0;){var t=i(this.rootSchema,e);if(t&&t.id)return t.id;e.pop()}return this.rootSchema.id},r.prototype.hasError=function(e,t){for(var n=this.errors.length;n--;)if(this.errors[n].code===e){for(var r=!0,i=this.errors[n].params.length;i--;)this.errors[n].params[i]!==t[i]&&(r=!1);if(r)return r}return!1},r.prototype.addError=function(e,t,n,r){if(!(this.errors.length>=this.reportOptions.maxErrors)){if(!e)throw new Error("No errorCode passed into addError()");if(!a[e])throw new Error("No errorMessage known for code "+e);t=t||[];for(var i=t.length,s=a[e];i--;){var l=o.whatIs(t[i]),u="object"===l||"null"===l?JSON.stringify(t[i]):t[i];s=s.replace("{"+i+"}",u)}var c={code:e,params:t,message:s,path:this.getPath(),schemaId:this.getSchemaId()};if(r&&(c.description=r),null!=n){for(Array.isArray(n)||(n=[n]),c.inner=[],i=n.length;i--;)for(var f=n[i],d=f.errors.length;d--;)c.inner.push(f.errors[d]);0===c.inner.length&&(c.inner=void 0)}this.errors.push(c)}},t.exports=r}).call(this,e("_process"))},{"./Errors":7,"./Utils":15,_process:1,"lodash.get":2}],12:[function(e,t,n){"use strict";function r(e){return decodeURIComponent(e).replace(/~[0-1]/g,function(e){return"~1"===e?"/":"~"})}function i(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function a(e){var t=e.indexOf("#"),n=-1===t?void 0:e.slice(t+1);return n}function o(e,t){if("object"==typeof e&&null!==e){if(!t)return e;if(e.id&&(e.id===t||"#"===e.id[0]&&e.id.substring(1)===t))return e;var n,r;if(Array.isArray(e)){for(n=e.length;n--;)if(r=o(e[n],t))return r}else{var i=Object.keys(e);for(n=i.length;n--;){var a=i[n];if(0!==a.indexOf("__$")&&(r=o(e[a],t)))return r}}}}var s=e("./Report"),l=e("./SchemaCompilation"),u=e("./SchemaValidation"),c=e("./Utils");n.cacheSchemaByUri=function(e,t){var n=i(e);n&&(this.cache[n]=t)},n.removeFromCacheByUri=function(e){var t=i(e);t&&delete this.cache[t]},n.checkCacheForUri=function(e){var t=i(e);return!!t&&null!=this.cache[t]},n.getSchema=function(e,t){return"object"==typeof t&&(t=n.getSchemaByReference.call(this,e,t)),"string"==typeof t&&(t=n.getSchemaByUri.call(this,e,t)),t},n.getSchemaByReference=function(e,t){for(var n=this.referenceCache.length;n--;)if(this.referenceCache[n][0]===t)return this.referenceCache[n][1];var r=c.cloneDeep(t);return this.referenceCache.push([t,r]),r},n.getSchemaByUri=function(e,t,n){var c=i(t),f=a(t),d=c?this.cache[c]:n;if(d&&c){var h=d!==n;if(h){e.path.push(c);var p=new s(e);l.compileSchema.call(this,p,d)&&u.validateSchema.call(this,p,d);var g=p.isValid();if(g||e.addError("REMOTE_NOT_VALID",[t],p),e.path.pop(),!g)return}}if(d&&f)for(var m=f.split("/"),v=0,y=m.length;d&&y>v;v++){var b=r(m[v]);d=0===v?o(d,b):d[b]}return d},n.getRemotePath=i},{"./Report":11,"./SchemaCompilation":13,"./SchemaValidation":14,"./Utils":15}],13:[function(e,t,n){"use strict";function r(e,t){if(l.isAbsoluteUri(t))return t;var n,r=e.join(""),i=l.isAbsoluteUri(r),a=l.isRelativeUri(r),o=l.isRelativeUri(t);i&&o?(n=r.match(/\/[^\/]*$/),n&&(r=r.slice(0,n.index+1))):a&&o?r="":(n=r.match(/[^#\/]+$/),n&&(r=r.slice(0,n.index)));var s=r+t;return s=s.replace(/##/,"#")}function i(e,t,n,a){if(t=t||[],n=n||[],a=a||[],"object"!=typeof e||null===e)return t;"string"==typeof e.id&&n.push(e.id),"string"==typeof e.$ref&&"undefined"==typeof e.__$refResolved&&t.push({ref:r(n,e.$ref),key:"$ref",obj:e,path:a.slice(0)}),"string"==typeof e.$schema&&"undefined"==typeof e.__$schemaResolved&&t.push({ref:r(n,e.$schema),key:"$schema",obj:e,path:a.slice(0)});var o;if(Array.isArray(e))for(o=e.length;o--;)a.push(o.toString()),i(e[o],t,n,a),a.pop();else{var s=Object.keys(e);for(o=s.length;o--;)0!==s[o].indexOf("__$")&&(a.push(s[o]),i(e[s[o]],t,n,a),a.pop())}return"string"==typeof e.id&&n.pop(),t}function a(e,t){for(var n=e.length;n--;)if(e[n].id===t)return e[n];return null}var o=e("./Report"),s=e("./SchemaCache"),l=e("./Utils"),u=function(e,t){for(var r=t.length,i=0;r--;){var a=new o(e),s=n.compileSchema.call(this,a,t[r]);s&&i++,e.errors=e.errors.concat(a.errors)}return i},c=function(e,t){var n,r=0;do{for(var i=e.errors.length;i--;)"UNRESOLVABLE_REFERENCE"===e.errors[i].code&&e.errors.splice(i,1);for(n=r,r=u.call(this,e,t),i=t.length;i--;){var o=t[i];if(o.__$missingReferences){for(var s=o.__$missingReferences.length;s--;){var l=o.__$missingReferences[s],c=a(t,l.ref);c&&(l.obj["__"+l.key+"Resolved"]=c,o.__$missingReferences.splice(s,1))}0===o.__$missingReferences.length&&delete o.__$missingReferences}}}while(r!==t.length&&r!==n);return e.isValid()};n.compileSchema=function(e,t){if(e.commonErrorMessage="SCHEMA_COMPILATION_FAILED","string"==typeof t){var r=s.getSchemaByUri.call(this,e,t);if(!r)return e.addError("SCHEMA_NOT_REACHABLE",[t]),!1;t=r}if(Array.isArray(t))return c.call(this,e,t);if(t.__$compiled&&t.id&&s.checkCacheForUri.call(this,t.id)===!1&&(t.__$compiled=void 0),t.__$compiled)return!0;t.id&&"string"==typeof t.id&&s.cacheSchemaByUri.call(this,t.id,t);var a=!1;e.rootSchema||(e.rootSchema=t,a=!0);var u=e.isValid();delete t.__$missingReferences;for(var f=i.call(this,t),d=f.length;d--;){var h=f[d],p=s.getSchemaByUri.call(this,e,h.ref,t);if(!p){var g=this.getSchemaReader();if(g){var m=g(h.ref);if(m){m.id=h.ref;var v=new o(e);n.compileSchema.call(this,v,m)?p=s.getSchemaByUri.call(this,e,h.ref,t):e.errors=e.errors.concat(v.errors)}}}if(!p){var y=e.hasError("REMOTE_NOT_VALID",[h.ref]),b=l.isAbsoluteUri(h.ref),_=!1,E=this.options.ignoreUnresolvableReferences===!0;b&&(_=s.checkCacheForUri.call(this,h.ref)),y||E&&b||_||(Array.prototype.push.apply(e.path,h.path),e.addError("UNRESOLVABLE_REFERENCE",[h.ref]),e.path=e.path.slice(0,-h.path.length),u&&(t.__$missingReferences=t.__$missingReferences||[],t.__$missingReferences.push(h)))}h.obj["__"+h.key+"Resolved"]=p}var x=e.isValid();return x?t.__$compiled=!0:t.id&&"string"==typeof t.id&&s.removeFromCacheByUri.call(this,t.id),a&&(e.rootSchema=void 0),x}},{"./Report":11,"./SchemaCache":12,"./Utils":15}],14:[function(e,t,n){"use strict";var r=e("./FormatValidators"),i=e("./JsonValidation"),a=e("./Report"),o=e("./Utils"),s={$ref:function(e,t){"string"!=typeof t.$ref&&e.addError("KEYWORD_TYPE_EXPECTED",["$ref","string"])},$schema:function(e,t){"string"!=typeof t.$schema&&e.addError("KEYWORD_TYPE_EXPECTED",["$schema","string"])},multipleOf:function(e,t){"number"!=typeof t.multipleOf?e.addError("KEYWORD_TYPE_EXPECTED",["multipleOf","number"]):t.multipleOf<=0&&e.addError("KEYWORD_MUST_BE",["multipleOf","strictly greater than 0"])},maximum:function(e,t){"number"!=typeof t.maximum&&e.addError("KEYWORD_TYPE_EXPECTED",["maximum","number"])},exclusiveMaximum:function(e,t){"boolean"!=typeof t.exclusiveMaximum?e.addError("KEYWORD_TYPE_EXPECTED",["exclusiveMaximum","boolean"]):void 0===t.maximum&&e.addError("KEYWORD_DEPENDENCY",["exclusiveMaximum","maximum"])},minimum:function(e,t){"number"!=typeof t.minimum&&e.addError("KEYWORD_TYPE_EXPECTED",["minimum","number"])},exclusiveMinimum:function(e,t){"boolean"!=typeof t.exclusiveMinimum?e.addError("KEYWORD_TYPE_EXPECTED",["exclusiveMinimum","boolean"]):void 0===t.minimum&&e.addError("KEYWORD_DEPENDENCY",["exclusiveMinimum","minimum"])},maxLength:function(e,t){"integer"!==o.whatIs(t.maxLength)?e.addError("KEYWORD_TYPE_EXPECTED",["maxLength","integer"]):t.maxLength<0&&e.addError("KEYWORD_MUST_BE",["maxLength","greater than, or equal to 0"])},minLength:function(e,t){"integer"!==o.whatIs(t.minLength)?e.addError("KEYWORD_TYPE_EXPECTED",["minLength","integer"]):t.minLength<0&&e.addError("KEYWORD_MUST_BE",["minLength","greater than, or equal to 0"])},pattern:function(e,t){if("string"!=typeof t.pattern)e.addError("KEYWORD_TYPE_EXPECTED",["pattern","string"]);else try{RegExp(t.pattern)}catch(n){e.addError("KEYWORD_PATTERN",["pattern",t.pattern])}},additionalItems:function(e,t){var r=o.whatIs(t.additionalItems);"boolean"!==r&&"object"!==r?e.addError("KEYWORD_TYPE_EXPECTED",["additionalItems",["boolean","object"]]):"object"===r&&(e.path.push("additionalItems"),n.validateSchema.call(this,e,t.additionalItems),e.path.pop())},items:function(e,t){var r=o.whatIs(t.items);if("object"===r)e.path.push("items"),n.validateSchema.call(this,e,t.items),e.path.pop();else if("array"===r)for(var i=t.items.length;i--;)e.path.push("items"),e.path.push(i.toString()),n.validateSchema.call(this,e,t.items[i]),e.path.pop(),e.path.pop();else e.addError("KEYWORD_TYPE_EXPECTED",["items",["array","object"]]);this.options.forceAdditional===!0&&void 0===t.additionalItems&&Array.isArray(t.items)&&e.addError("KEYWORD_UNDEFINED_STRICT",["additionalItems"]),this.options.assumeAdditional&&void 0===t.additionalItems&&Array.isArray(t.items)&&(t.additionalItems=!1)},maxItems:function(e,t){"number"!=typeof t.maxItems?e.addError("KEYWORD_TYPE_EXPECTED",["maxItems","integer"]):t.maxItems<0&&e.addError("KEYWORD_MUST_BE",["maxItems","greater than, or equal to 0"])},minItems:function(e,t){"integer"!==o.whatIs(t.minItems)?e.addError("KEYWORD_TYPE_EXPECTED",["minItems","integer"]):t.minItems<0&&e.addError("KEYWORD_MUST_BE",["minItems","greater than, or equal to 0"])},uniqueItems:function(e,t){"boolean"!=typeof t.uniqueItems&&e.addError("KEYWORD_TYPE_EXPECTED",["uniqueItems","boolean"])},maxProperties:function(e,t){"integer"!==o.whatIs(t.maxProperties)?e.addError("KEYWORD_TYPE_EXPECTED",["maxProperties","integer"]):t.maxProperties<0&&e.addError("KEYWORD_MUST_BE",["maxProperties","greater than, or equal to 0"])},minProperties:function(e,t){"integer"!==o.whatIs(t.minProperties)?e.addError("KEYWORD_TYPE_EXPECTED",["minProperties","integer"]):t.minProperties<0&&e.addError("KEYWORD_MUST_BE",["minProperties","greater than, or equal to 0"])},required:function(e,t){if("array"!==o.whatIs(t.required))e.addError("KEYWORD_TYPE_EXPECTED",["required","array"]);else if(0===t.required.length)e.addError("KEYWORD_MUST_BE",["required","an array with at least one element"]);else{for(var n=t.required.length;n--;)"string"!=typeof t.required[n]&&e.addError("KEYWORD_VALUE_TYPE",["required","string"]);o.isUniqueArray(t.required)===!1&&e.addError("KEYWORD_MUST_BE",["required","an array with unique items"])}},additionalProperties:function(e,t){var r=o.whatIs(t.additionalProperties);"boolean"!==r&&"object"!==r?e.addError("KEYWORD_TYPE_EXPECTED",["additionalProperties",["boolean","object"]]):"object"===r&&(e.path.push("additionalProperties"),n.validateSchema.call(this,e,t.additionalProperties),e.path.pop())},properties:function(e,t){if("object"!==o.whatIs(t.properties))return void e.addError("KEYWORD_TYPE_EXPECTED",["properties","object"]);for(var r=Object.keys(t.properties),i=r.length;i--;){var a=r[i],s=t.properties[a];e.path.push("properties"),e.path.push(a),n.validateSchema.call(this,e,s),e.path.pop(),e.path.pop()}this.options.forceAdditional===!0&&void 0===t.additionalProperties&&e.addError("KEYWORD_UNDEFINED_STRICT",["additionalProperties"]),this.options.assumeAdditional&&void 0===t.additionalProperties&&(t.additionalProperties=!1),this.options.forceProperties===!0&&0===r.length&&e.addError("CUSTOM_MODE_FORCE_PROPERTIES",["properties"])},patternProperties:function(e,t){if("object"!==o.whatIs(t.patternProperties))return void e.addError("KEYWORD_TYPE_EXPECTED",["patternProperties","object"]);for(var r=Object.keys(t.patternProperties),i=r.length;i--;){var a=r[i],s=t.patternProperties[a];try{RegExp(a)}catch(l){e.addError("KEYWORD_PATTERN",["patternProperties",a])}e.path.push("patternProperties"),e.path.push(a.toString()),n.validateSchema.call(this,e,s),e.path.pop(),e.path.pop()}this.options.forceProperties===!0&&0===r.length&&e.addError("CUSTOM_MODE_FORCE_PROPERTIES",["patternProperties"])},dependencies:function(e,t){if("object"!==o.whatIs(t.dependencies))e.addError("KEYWORD_TYPE_EXPECTED",["dependencies","object"]);else for(var r=Object.keys(t.dependencies),i=r.length;i--;){var a=r[i],s=t.dependencies[a],l=o.whatIs(s);if("object"===l)e.path.push("dependencies"),e.path.push(a),n.validateSchema.call(this,e,s),e.path.pop(),e.path.pop();else if("array"===l){var u=s.length;for(0===u&&e.addError("KEYWORD_MUST_BE",["dependencies","not empty array"]);u--;)"string"!=typeof s[u]&&e.addError("KEYWORD_VALUE_TYPE",["dependensices","string"]);o.isUniqueArray(s)===!1&&e.addError("KEYWORD_MUST_BE",["dependencies","an array with unique items"])}else e.addError("KEYWORD_VALUE_TYPE",["dependencies","object or array"])}},"enum":function(e,t){Array.isArray(t["enum"])===!1?e.addError("KEYWORD_TYPE_EXPECTED",["enum","array"]):0===t["enum"].length?e.addError("KEYWORD_MUST_BE",["enum","an array with at least one element"]):o.isUniqueArray(t["enum"])===!1&&e.addError("KEYWORD_MUST_BE",["enum","an array with unique elements"])},type:function(e,t){var n=["array","boolean","integer","number","null","object","string"],r=n.join(","),i=Array.isArray(t.type);if(i){for(var a=t.type.length;a--;)-1===n.indexOf(t.type[a])&&e.addError("KEYWORD_TYPE_EXPECTED",["type",r]);o.isUniqueArray(t.type)===!1&&e.addError("KEYWORD_MUST_BE",["type","an object with unique properties"])}else"string"==typeof t.type?-1===n.indexOf(t.type)&&e.addError("KEYWORD_TYPE_EXPECTED",["type",r]):e.addError("KEYWORD_TYPE_EXPECTED",["type",["string","array"]]);this.options.noEmptyStrings===!0&&("string"===t.type||i&&-1!==t.type.indexOf("string"))&&void 0===t.minLength&&void 0===t["enum"]&&void 0===t.format&&(t.minLength=1),this.options.noEmptyArrays===!0&&("array"===t.type||i&&-1!==t.type.indexOf("array"))&&void 0===t.minItems&&(t.minItems=1),this.options.forceProperties===!0&&("object"===t.type||i&&-1!==t.type.indexOf("object"))&&void 0===t.properties&&void 0===t.patternProperties&&e.addError("KEYWORD_UNDEFINED_STRICT",["properties"]),this.options.forceItems===!0&&("array"===t.type||i&&-1!==t.type.indexOf("array"))&&void 0===t.items&&e.addError("KEYWORD_UNDEFINED_STRICT",["items"]),this.options.forceMinItems===!0&&("array"===t.type||i&&-1!==t.type.indexOf("array"))&&void 0===t.minItems&&e.addError("KEYWORD_UNDEFINED_STRICT",["minItems"]),this.options.forceMaxItems===!0&&("array"===t.type||i&&-1!==t.type.indexOf("array"))&&void 0===t.maxItems&&e.addError("KEYWORD_UNDEFINED_STRICT",["maxItems"]),this.options.forceMinLength===!0&&("string"===t.type||i&&-1!==t.type.indexOf("string"))&&void 0===t.minLength&&void 0===t.format&&void 0===t["enum"]&&void 0===t.pattern&&e.addError("KEYWORD_UNDEFINED_STRICT",["minLength"]),this.options.forceMaxLength===!0&&("string"===t.type||i&&-1!==t.type.indexOf("string"))&&void 0===t.maxLength&&void 0===t.format&&void 0===t["enum"]&&void 0===t.pattern&&e.addError("KEYWORD_UNDEFINED_STRICT",["maxLength"])},allOf:function(e,t){if(Array.isArray(t.allOf)===!1)e.addError("KEYWORD_TYPE_EXPECTED",["allOf","array"]);else if(0===t.allOf.length)e.addError("KEYWORD_MUST_BE",["allOf","an array with at least one element"]);else for(var r=t.allOf.length;r--;)e.path.push("allOf"),e.path.push(r.toString()),n.validateSchema.call(this,e,t.allOf[r]),e.path.pop(),e.path.pop()},anyOf:function(e,t){if(Array.isArray(t.anyOf)===!1)e.addError("KEYWORD_TYPE_EXPECTED",["anyOf","array"]);else if(0===t.anyOf.length)e.addError("KEYWORD_MUST_BE",["anyOf","an array with at least one element"]);else for(var r=t.anyOf.length;r--;)e.path.push("anyOf"),e.path.push(r.toString()),n.validateSchema.call(this,e,t.anyOf[r]),e.path.pop(),e.path.pop()},oneOf:function(e,t){if(Array.isArray(t.oneOf)===!1)e.addError("KEYWORD_TYPE_EXPECTED",["oneOf","array"]);else if(0===t.oneOf.length)e.addError("KEYWORD_MUST_BE",["oneOf","an array with at least one element"]);else for(var r=t.oneOf.length;r--;)e.path.push("oneOf"),e.path.push(r.toString()),n.validateSchema.call(this,e,t.oneOf[r]),e.path.pop(),e.path.pop()},not:function(e,t){"object"!==o.whatIs(t.not)?e.addError("KEYWORD_TYPE_EXPECTED",["not","object"]):(e.path.push("not"),n.validateSchema.call(this,e,t.not),e.path.pop())},definitions:function(e,t){if("object"!==o.whatIs(t.definitions))e.addError("KEYWORD_TYPE_EXPECTED",["definitions","object"]);else for(var r=Object.keys(t.definitions),i=r.length;i--;){var a=r[i],s=t.definitions[a];e.path.push("definitions"),e.path.push(a),n.validateSchema.call(this,e,s),e.path.pop(),e.path.pop()}},format:function(e,t){"string"!=typeof t.format?e.addError("KEYWORD_TYPE_EXPECTED",["format","string"]):void 0===r[t.format]&&this.options.ignoreUnknownFormats!==!0&&e.addError("UNKNOWN_FORMAT",[t.format])},id:function(e,t){"string"!=typeof t.id&&e.addError("KEYWORD_TYPE_EXPECTED",["id","string"])},title:function(e,t){"string"!=typeof t.title&&e.addError("KEYWORD_TYPE_EXPECTED",["title","string"])},description:function(e,t){"string"!=typeof t.description&&e.addError("KEYWORD_TYPE_EXPECTED",["description","string"])},"default":function(){}},l=function(e,t){for(var r=t.length;r--;)n.validateSchema.call(this,e,t[r]);return e.isValid()};n.validateSchema=function(e,t){if(e.commonErrorMessage="SCHEMA_VALIDATION_FAILED",Array.isArray(t))return l.call(this,e,t);if(t.__$validated)return!0;var n=t.$schema&&t.id!==t.$schema;if(n)if(t.__$schemaResolved&&t.__$schemaResolved!==t){var r=new a(e),u=i.validate.call(this,r,t.__$schemaResolved,t);u===!1&&e.addError("PARENT_SCHEMA_VALIDATION_FAILED",null,r)}else this.options.ignoreUnresolvableReferences!==!0&&e.addError("REF_UNRESOLVED",[t.$schema]);if(this.options.noTypeless===!0){if(void 0!==t.type){var c=[];Array.isArray(t.anyOf)&&(c=c.concat(t.anyOf)),Array.isArray(t.oneOf)&&(c=c.concat(t.oneOf)),Array.isArray(t.allOf)&&(c=c.concat(t.allOf)),c.forEach(function(e){e.type||(e.type=t.type)})}void 0===t["enum"]&&void 0===t.type&&void 0===t.anyOf&&void 0===t.oneOf&&void 0===t.not&&void 0===t.$ref&&e.addError("KEYWORD_UNDEFINED_STRICT",["type"])}for(var f=Object.keys(t),d=f.length;d--;){var h=f[d];0!==h.indexOf("__")&&(void 0!==s[h]?s[h].call(this,e,t):n||this.options.noExtraKeywords===!0&&e.addError("KEYWORD_UNEXPECTED",[h]))}if(this.options.pedanticCheck===!0){if(t["enum"]){var p=o.clone(t);for(delete p["enum"],delete p["default"],e.path.push("enum"),d=t["enum"].length;d--;)e.path.push(d.toString()),i.validate.call(this,e,p,t["enum"][d]),e.path.pop();e.path.pop()}t["default"]&&(e.path.push("default"),i.validate.call(this,e,t,t["default"]),e.path.pop())}var g=e.isValid();return g&&(t.__$validated=!0),g}},{"./FormatValidators":8,"./JsonValidation":9,"./Report":11,"./Utils":15}],15:[function(e,t,n){"use strict";n.isAbsoluteUri=function(e){return/^https?:\/\//.test(e)},n.isRelativeUri=function(e){return/.+#/.test(e)},n.whatIs=function(e){var t=typeof e;return"object"===t?null===e?"null":Array.isArray(e)?"array":"object":"number"===t?Number.isFinite(e)?e%1===0?"integer":"number":Number.isNaN(e)?"not-a-number":"unknown-number":t},n.areEqual=function r(e,t){if(e===t)return!0;var i,a;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(a=e.length,i=0;a>i;i++)if(!r(e[i],t[i]))return!1;return!0}if("object"===n.whatIs(e)&&"object"===n.whatIs(t)){var o=Object.keys(e),s=Object.keys(t);if(!r(o,s))return!1;for(a=o.length,i=0;a>i;i++)if(!r(e[o[i]],t[o[i]]))return!1;return!0}return!1},n.isUniqueArray=function(e,t){var r,i,a=e.length;for(r=0;a>r;r++)for(i=r+1;a>i;i++)if(n.areEqual(e[r],e[i]))return t&&t.push(r,i),!1;return!0},n.difference=function(e,t){for(var n=[],r=e.length;r--;)-1===t.indexOf(e[r])&&n.push(e[r]);return n},n.clone=function(e){if("undefined"!=typeof e){if("object"!=typeof e||null===e)return e;var t,n;if(Array.isArray(e))for(t=[],n=e.length;n--;)t[n]=e[n];else{t={};var r=Object.keys(e);for(n=r.length;n--;){var i=r[n];t[i]=e[i]}}return t}},n.cloneDeep=function(e){function t(e){if("object"!=typeof e||null===e)return e;var i,a,o;if(o=n.indexOf(e),-1!==o)return r[o];if(n.push(e),Array.isArray(e))for(i=[],r.push(i),a=e.length;a--;)i[a]=t(e[a]);else{i={},r.push(i);var s=Object.keys(e);for(a=s.length;a--;){var l=s[a];i[l]=t(e[l])}}return i}var n=[],r=[];return t(e)},n.ucs2decode=function(e){for(var t,n,r=[],i=0,a=e.length;a>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&a>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}},{}],16:[function(e,t,n){(function(n){"use strict";function r(e){if(this.cache={},this.referenceCache=[],this.setRemoteReference("http://json-schema.org/draft-04/schema",d),this.setRemoteReference("http://json-schema.org/draft-04/hyper-schema",h),"object"==typeof e){for(var t,n=Object.keys(e),r=n.length;r--;)if(t=n[r],void 0===p[t])throw new Error("Unexpected option passed to constructor: "+t);for(n=Object.keys(p),r=n.length;r--;)t=n[r],void 0===e[t]&&(e[t]=f.clone(p[t]));this.options=e}else this.options=f.clone(p);this.options.strictMode===!0&&(this.options.forceAdditional=!0,this.options.forceItems=!0,this.options.forceMaxLength=!0,this.options.forceProperties=!0,this.options.noExtraKeywords=!0,this.options.noTypeless=!0,this.options.noEmptyStrings=!0,this.options.noEmptyArrays=!0)}e("./Polyfills");var i=e("lodash.get"),a=e("./Report"),o=e("./FormatValidators"),s=e("./JsonValidation"),l=e("./SchemaCache"),u=e("./SchemaCompilation"),c=e("./SchemaValidation"),f=e("./Utils"),d=e("./schemas/schema.json"),h=e("./schemas/hyper-schema.json"),p={asyncTimeout:2e3,forceAdditional:!1,assumeAdditional:!1,forceItems:!1,forceMinItems:!1,forceMaxItems:!1,forceMinLength:!1,forceMaxLength:!1,forceProperties:!1,ignoreUnresolvableReferences:!1,noExtraKeywords:!1,noTypeless:!1,noEmptyStrings:!1,noEmptyArrays:!1,strictUris:!1,strictMode:!1,reportPathAsArray:!1,breakOnFirstError:!0,pedanticCheck:!1,ignoreUnknownFormats:!1};r.prototype.compileSchema=function(e){var t=new a(this.options);return e=l.getSchema.call(this,t,e),u.compileSchema.call(this,t,e),this.lastReport=t,t.isValid()},r.prototype.validateSchema=function(e){if(Array.isArray(e)&&0===e.length)throw new Error(".validateSchema was called with an empty array");var t=new a(this.options);e=l.getSchema.call(this,t,e);var n=u.compileSchema.call(this,t,e);return n&&c.validateSchema.call(this,t,e),this.lastReport=t,t.isValid()},r.prototype.validate=function(e,t,r,o){"function"===f.whatIs(r)&&(o=r,r={}),r||(r={});var d=f.whatIs(t);if("string"!==d&&"object"!==d){var h=new Error("Invalid .validate call - schema must be an string or object but "+d+" was passed!");if(o)return void n.nextTick(function(){o(h,!1)});throw h}var p=!1,g=new a(this.options);if("string"==typeof t){var m=t;if(t=l.getSchema.call(this,g,m),!t)throw new Error("Schema with id '"+m+"' wasn't found in the validator cache!")}else t=l.getSchema.call(this,g,t);var v=!1;p||(v=u.compileSchema.call(this,g,t)),v||(this.lastReport=g,p=!0);var y=!1;if(p||(y=c.validateSchema.call(this,g,t)),y||(this.lastReport=g,p=!0),r.schemaPath&&(g.rootSchema=t,t=i(t,r.schemaPath),!t))throw new Error("Schema path '"+r.schemaPath+"' wasn't found in the schema!");if(p||s.validate.call(this,g,t,e),o)return void g.processAsyncTasks(this.options.asyncTimeout,o);if(g.asyncTasks.length>0)throw new Error("This validation has async tasks and cannot be done in sync mode, please provide callback argument.");return this.lastReport=g,g.isValid()},r.prototype.getLastError=function(){if(0===this.lastReport.errors.length)return null;var e=new Error;return e.name="z-schema validation error",e.message=this.lastReport.commonErrorMessage,e.details=this.lastReport.errors,e},r.prototype.getLastErrors=function(){return this.lastReport&&this.lastReport.errors.length>0?this.lastReport.errors:void 0},r.prototype.getMissingReferences=function(e){e=e||this.lastReport.errors;for(var t=[],n=e.length;n--;){var r=e[n];if("UNRESOLVABLE_REFERENCE"===r.code){var i=r.params[0];-1===t.indexOf(i)&&t.push(i)}r.inner&&(t=t.concat(this.getMissingReferences(r.inner)))}return t},r.prototype.getMissingRemoteReferences=function(){for(var e=this.getMissingReferences(),t=[],n=e.length;n--;){var r=l.getRemotePath(e[n]);r&&-1===t.indexOf(r)&&t.push(r)}return t},r.prototype.setRemoteReference=function(e,t){t="string"==typeof t?JSON.parse(t):f.cloneDeep(t),l.cacheSchemaByUri.call(this,e,t)},r.prototype.getResolvedSchema=function(e){var t=new a(this.options);e=l.getSchema.call(this,t,e),e=f.cloneDeep(e);var n=[],r=function(e){
var t,i=f.whatIs(e);if(("object"===i||"array"===i)&&!e.___$visited){if(e.___$visited=!0,n.push(e),e.$ref&&e.__$refResolved){var a=e.__$refResolved,o=e;delete e.$ref,delete e.__$refResolved;for(t in a)a.hasOwnProperty(t)&&(o[t]=a[t])}for(t in e)e.hasOwnProperty(t)&&(0===t.indexOf("__$")?delete e[t]:r(e[t]))}};if(r(e),n.forEach(function(e){delete e.___$visited}),this.lastReport=t,t.isValid())return e;throw this.getLastError()},r.prototype.setSchemaReader=function(e){return r.setSchemaReader(e)},r.prototype.getSchemaReader=function(){return r.schemaReader},r.setSchemaReader=function(e){r.schemaReader=e},r.registerFormat=function(e,t){o[e]=t},r.unregisterFormat=function(e){delete o[e]},r.getRegisteredFormats=function(){return Object.keys(o)},r.getDefaultOptions=function(){return f.cloneDeep(p)},t.exports=r}).call(this,e("_process"))},{"./FormatValidators":8,"./JsonValidation":9,"./Polyfills":10,"./Report":11,"./SchemaCache":12,"./SchemaCompilation":13,"./SchemaValidation":14,"./Utils":15,"./schemas/hyper-schema.json":17,"./schemas/schema.json":18,_process:1,"lodash.get":2}],17:[function(e,t,n){t.exports={$schema:"http://json-schema.org/draft-04/hyper-schema#",id:"http://json-schema.org/draft-04/hyper-schema#",title:"JSON Hyper-Schema",allOf:[{$ref:"http://json-schema.org/draft-04/schema#"}],properties:{additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}]},dependencies:{additionalProperties:{anyOf:[{$ref:"#"},{type:"array"}]}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}]},definitions:{additionalProperties:{$ref:"#"}},patternProperties:{additionalProperties:{$ref:"#"}},properties:{additionalProperties:{$ref:"#"}},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},links:{type:"array",items:{$ref:"#/definitions/linkDescription"}},fragmentResolution:{type:"string"},media:{type:"object",properties:{type:{description:"A media type, as described in RFC 2046",type:"string"},binaryEncoding:{description:"A content encoding scheme, as described in RFC 2045",type:"string"}}},pathStart:{description:"Instances' URIs must start with this value for this schema to apply to them",type:"string",format:"uri"}},definitions:{schemaArray:{type:"array",items:{$ref:"#"}},linkDescription:{title:"Link Description Object",type:"object",required:["href","rel"],properties:{href:{description:"a URI template, as defined by RFC 6570, with the addition of the $, ( and ) characters for pre-processing",type:"string"},rel:{description:"relation to the target resource of the link",type:"string"},title:{description:"a title for the link",type:"string"},targetSchema:{description:"JSON Schema describing the link target",$ref:"#"},mediaType:{description:"media type (as defined by RFC 2046) describing the link target",type:"string"},method:{description:'method for requesting the target of the link (e.g. for HTTP this might be "GET" or "DELETE")',type:"string"},encType:{description:"The media type in which to submit data along with the request",type:"string","default":"application/json"},schema:{description:"Schema describing the data to submit along with the request",$ref:"#"}}}}}},{}],18:[function(e,t,n){t.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean","default":!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean","default":!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}}},{}]},{},[7,8,9,10,11,12,13,14,15,16])(16)});